var pj=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var oV=pj((Ma,Ra)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();var mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Km={exports:{}},xc={};var Lx;function gj(){if(Lx)return xc;Lx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,i,l){var c=null;if(l!==void 0&&(c=""+l),i.key!==void 0&&(c=""+i.key),"key"in i){l={};for(var d in i)d!=="key"&&(l[d]=i[d])}else l=i;return i=l.ref,{$$typeof:t,type:s,key:c,ref:i!==void 0?i:null,props:l}}return xc.Fragment=e,xc.jsx=n,xc.jsxs=n,xc}var Px;function yj(){return Px||(Px=1,Km.exports=gj()),Km.exports}var f=yj(),Wm={exports:{}},Ge={};var zx;function bj(){if(zx)return Ge;zx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,j={};function D(M,K,Z){this.props=M,this.context=K,this.refs=j,this.updater=Z||N}D.prototype.isReactComponent={},D.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},D.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function O(){}O.prototype=D.prototype;function R(M,K,Z){this.props=M,this.context=K,this.refs=j,this.updater=Z||N}var U=R.prototype=new O;U.constructor=R,E(U,D.prototype),U.isPureReactComponent=!0;var L=Array.isArray;function H(){}var z={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function Y(M,K,Z){var le=Z.ref;return{$$typeof:t,type:M,key:K,ref:le!==void 0?le:null,props:Z}}function Q(M,K){return Y(M.type,K,M.props)}function A(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function F(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Z){return K[Z]})}var B=/\/+/g;function te(M,K){return typeof M=="object"&&M!==null&&M.key!=null?F(""+M.key):K.toString(36)}function se(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(H,H):(M.status="pending",M.then(function(K){M.status==="pending"&&(M.status="fulfilled",M.value=K)},function(K){M.status==="pending"&&(M.status="rejected",M.reason=K)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function C(M,K,Z,le,me){var be=typeof M;(be==="undefined"||be==="boolean")&&(M=null);var we=!1;if(M===null)we=!0;else switch(be){case"bigint":case"string":case"number":we=!0;break;case"object":switch(M.$$typeof){case t:case e:we=!0;break;case y:return we=M._init,C(we(M._payload),K,Z,le,me)}}if(we)return me=me(M),we=le===""?"."+te(M,0):le,L(me)?(Z="",we!=null&&(Z=we.replace(B,"$&/")+"/"),C(me,K,Z,"",function(ae){return ae})):me!=null&&(A(me)&&(me=Q(me,Z+(me.key==null||M&&M.key===me.key?"":(""+me.key).replace(B,"$&/")+"/")+we)),K.push(me)),1;we=0;var je=le===""?".":le+":";if(L(M))for(var X=0;X<M.length;X++)le=M[X],be=je+te(le,X),we+=C(le,K,Z,be,me);else if(X=S(M),typeof X=="function")for(M=X.call(M),X=0;!(le=M.next()).done;)le=le.value,be=je+te(le,X++),we+=C(le,K,Z,be,me);else if(be==="object"){if(typeof M.then=="function")return C(se(M),K,Z,le,me);throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return we}function I(M,K,Z){if(M==null)return M;var le=[],me=0;return C(M,le,"","",function(be){return K.call(Z,be,me++)}),le}function q(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(Z){(M._status===0||M._status===-1)&&(M._status=1,M._result=Z)},function(Z){(M._status===0||M._status===-1)&&(M._status=2,M._result=Z)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var oe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},ce={map:I,forEach:function(M,K,Z){I(M,function(){K.apply(this,arguments)},Z)},count:function(M){var K=0;return I(M,function(){K++}),K},toArray:function(M){return I(M,function(K){return K})||[]},only:function(M){if(!A(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ge.Activity=b,Ge.Children=ce,Ge.Component=D,Ge.Fragment=n,Ge.Profiler=i,Ge.PureComponent=R,Ge.StrictMode=s,Ge.Suspense=h,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(M){return z.H.useMemoCache(M)}},Ge.cache=function(M){return function(){return M.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(M,K,Z){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var le=E({},M.props),me=M.key;if(K!=null)for(be in K.key!==void 0&&(me=""+K.key),K)!P.call(K,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&K.ref===void 0||(le[be]=K[be]);var be=arguments.length-2;if(be===1)le.children=Z;else if(1<be){for(var we=Array(be),je=0;je<be;je++)we[je]=arguments[je+2];le.children=we}return Y(M.type,me,le)},Ge.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ge.createElement=function(M,K,Z){var le,me={},be=null;if(K!=null)for(le in K.key!==void 0&&(be=""+K.key),K)P.call(K,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(me[le]=K[le]);var we=arguments.length-2;if(we===1)me.children=Z;else if(1<we){for(var je=Array(we),X=0;X<we;X++)je[X]=arguments[X+2];me.children=je}if(M&&M.defaultProps)for(le in we=M.defaultProps,we)me[le]===void 0&&(me[le]=we[le]);return Y(M,be,me)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(M){return{$$typeof:d,render:M}},Ge.isValidElement=A,Ge.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:q}},Ge.memo=function(M,K){return{$$typeof:m,type:M,compare:K===void 0?null:K}},Ge.startTransition=function(M){var K=z.T,Z={};z.T=Z;try{var le=M(),me=z.S;me!==null&&me(Z,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(H,oe)}catch(be){oe(be)}finally{K!==null&&Z.types!==null&&(K.types=Z.types),z.T=K}},Ge.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Ge.use=function(M){return z.H.use(M)},Ge.useActionState=function(M,K,Z){return z.H.useActionState(M,K,Z)},Ge.useCallback=function(M,K){return z.H.useCallback(M,K)},Ge.useContext=function(M){return z.H.useContext(M)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(M,K){return z.H.useDeferredValue(M,K)},Ge.useEffect=function(M,K){return z.H.useEffect(M,K)},Ge.useEffectEvent=function(M){return z.H.useEffectEvent(M)},Ge.useId=function(){return z.H.useId()},Ge.useImperativeHandle=function(M,K,Z){return z.H.useImperativeHandle(M,K,Z)},Ge.useInsertionEffect=function(M,K){return z.H.useInsertionEffect(M,K)},Ge.useLayoutEffect=function(M,K){return z.H.useLayoutEffect(M,K)},Ge.useMemo=function(M,K){return z.H.useMemo(M,K)},Ge.useOptimistic=function(M,K){return z.H.useOptimistic(M,K)},Ge.useReducer=function(M,K,Z){return z.H.useReducer(M,K,Z)},Ge.useRef=function(M){return z.H.useRef(M)},Ge.useState=function(M){return z.H.useState(M)},Ge.useSyncExternalStore=function(M,K,Z){return z.H.useSyncExternalStore(M,K,Z)},Ge.useTransition=function(){return z.H.useTransition()},Ge.version="19.2.3",Ge}var Ix;function _f(){return Ix||(Ix=1,Wm.exports=bj()),Wm.exports}var T=_f();const pa=jf(T);var Xm={exports:{}},vc={},Zm={exports:{}},Qm={};var Bx;function xj(){return Bx||(Bx=1,(function(t){function e(C,I){var q=C.length;C.push(I);e:for(;0<q;){var oe=q-1>>>1,ce=C[oe];if(0<i(ce,I))C[oe]=I,C[q]=ce,q=oe;else break e}}function n(C){return C.length===0?null:C[0]}function s(C){if(C.length===0)return null;var I=C[0],q=C.pop();if(q!==I){C[0]=q;e:for(var oe=0,ce=C.length,M=ce>>>1;oe<M;){var K=2*(oe+1)-1,Z=C[K],le=K+1,me=C[le];if(0>i(Z,q))le<ce&&0>i(me,Z)?(C[oe]=me,C[le]=q,oe=le):(C[oe]=Z,C[K]=q,oe=K);else if(le<ce&&0>i(me,q))C[oe]=me,C[le]=q,oe=le;else break e}}return I}function i(C,I){var q=C.sortIndex-I.sortIndex;return q!==0?q:C.id-I.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],m=[],y=1,b=null,x=3,S=!1,N=!1,E=!1,j=!1,D=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function U(C){for(var I=n(m);I!==null;){if(I.callback===null)s(m);else if(I.startTime<=C)s(m),I.sortIndex=I.expirationTime,e(h,I);else break;I=n(m)}}function L(C){if(E=!1,U(C),!N)if(n(h)!==null)N=!0,H||(H=!0,F());else{var I=n(m);I!==null&&se(L,I.startTime-C)}}var H=!1,z=-1,P=5,Y=-1;function Q(){return j?!0:!(t.unstable_now()-Y<P)}function A(){if(j=!1,H){var C=t.unstable_now();Y=C;var I=!0;try{e:{N=!1,E&&(E=!1,O(z),z=-1),S=!0;var q=x;try{t:{for(U(C),b=n(h);b!==null&&!(b.expirationTime>C&&Q());){var oe=b.callback;if(typeof oe=="function"){b.callback=null,x=b.priorityLevel;var ce=oe(b.expirationTime<=C);if(C=t.unstable_now(),typeof ce=="function"){b.callback=ce,U(C),I=!0;break t}b===n(h)&&s(h),U(C)}else s(h);b=n(h)}if(b!==null)I=!0;else{var M=n(m);M!==null&&se(L,M.startTime-C),I=!1}}break e}finally{b=null,x=q,S=!1}I=void 0}}finally{I?F():H=!1}}}var F;if(typeof R=="function")F=function(){R(A)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,te=B.port2;B.port1.onmessage=A,F=function(){te.postMessage(null)}}else F=function(){D(A,0)};function se(C,I){z=D(function(){C(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(C){switch(x){case 1:case 2:case 3:var I=3;break;default:I=x}var q=x;x=I;try{return C()}finally{x=q}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(C,I){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var q=x;x=C;try{return I()}finally{x=q}},t.unstable_scheduleCallback=function(C,I,q){var oe=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?oe+q:oe):q=oe,C){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=q+ce,C={id:y++,callback:I,priorityLevel:C,startTime:q,expirationTime:ce,sortIndex:-1},q>oe?(C.sortIndex=q,e(m,C),n(h)===null&&C===n(m)&&(E?(O(z),z=-1):E=!0,se(L,q-oe))):(C.sortIndex=ce,e(h,C),N||S||(N=!0,H||(H=!0,F()))),C},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(C){var I=x;return function(){var q=x;x=I;try{return C.apply(this,arguments)}finally{x=q}}}})(Qm)),Qm}var Ux;function vj(){return Ux||(Ux=1,Zm.exports=xj()),Zm.exports}var Jm={exports:{}},Bn={};var qx;function wj(){if(qx)return Bn;qx=1;var t=_f();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(h,m,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:b==null?null:""+b,children:h,containerInfo:m,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Bn.createPortal=function(h,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(h,m,null,y)},Bn.flushSync=function(h){var m=c.T,y=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=m,s.p=y,s.d.f()}},Bn.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(h,m))},Bn.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},Bn.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var y=m.as,b=d(y,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?s.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:S}):y==="script"&&s.d.X(h,{crossOrigin:b,integrity:x,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Bn.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);s.d.M(h,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(h)},Bn.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,b=d(y,m.crossOrigin);s.d.L(h,y,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Bn.preloadModule=function(h,m){if(typeof h=="string")if(m){var y=d(m.as,m.crossOrigin);s.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(h)},Bn.requestFormReset=function(h){s.d.r(h)},Bn.unstable_batchedUpdates=function(h,m){return h(m)},Bn.useFormState=function(h,m,y){return c.H.useFormState(h,m,y)},Bn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Bn.version="19.2.3",Bn}var $x;function pS(){if($x)return Jm.exports;$x=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jm.exports=wj(),Jm.exports}var Vx;function Sj(){if(Vx)return vc;Vx=1;var t=vj(),e=_f(),n=pS();function s(a){var r="https://react.dev/errors/"+a;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+a+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var r=a,o=a;if(a.alternate)for(;r.return;)r=r.return;else{a=r;do r=a,(r.flags&4098)!==0&&(o=r.return),a=r.return;while(a)}return r.tag===3?o:null}function c(a){if(a.tag===13){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function d(a){if(a.tag===31){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function h(a){if(l(a)!==a)throw Error(s(188))}function m(a){var r=a.alternate;if(!r){if(r=l(a),r===null)throw Error(s(188));return r!==a?null:a}for(var o=a,u=r;;){var p=o.return;if(p===null)break;var g=p.alternate;if(g===null){if(u=p.return,u!==null){o=u;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===o)return h(p),a;if(g===u)return h(p),r;g=g.sibling}throw Error(s(188))}if(o.return!==u.return)o=p,u=g;else{for(var w=!1,_=p.child;_;){if(_===o){w=!0,o=p,u=g;break}if(_===u){w=!0,u=p,o=g;break}_=_.sibling}if(!w){for(_=g.child;_;){if(_===o){w=!0,o=g,u=p;break}if(_===u){w=!0,u=g,o=p;break}_=_.sibling}if(!w)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?a:r}function y(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a;for(a=a.child;a!==null;){if(r=y(a),r!==null)return r;a=a.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),R=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function F(a){return a===null||typeof a!="object"?null:(a=A&&a[A]||a["@@iterator"],typeof a=="function"?a:null)}var B=Symbol.for("react.client.reference");function te(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===B?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case E:return"Fragment";case D:return"Profiler";case j:return"StrictMode";case L:return"Suspense";case H:return"SuspenseList";case Y:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case N:return"Portal";case R:return a.displayName||"Context";case O:return(a._context.displayName||"Context")+".Consumer";case U:var r=a.render;return a=a.displayName,a||(a=r.displayName||r.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case z:return r=a.displayName||null,r!==null?r:te(a.type)||"Memo";case P:r=a._payload,a=a._init;try{return te(a(r))}catch{}}return null}var se=Array.isArray,C=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},oe=[],ce=-1;function M(a){return{current:a}}function K(a){0>ce||(a.current=oe[ce],oe[ce]=null,ce--)}function Z(a,r){ce++,oe[ce]=a.current,a.current=r}var le=M(null),me=M(null),be=M(null),we=M(null);function je(a,r){switch(Z(be,r),Z(me,a),Z(le,null),r.nodeType){case 9:case 11:a=(a=r.documentElement)&&(a=a.namespaceURI)?sx(a):0;break;default:if(a=r.tagName,r=r.namespaceURI)r=sx(r),a=rx(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}K(le),Z(le,a)}function X(){K(le),K(me),K(be)}function ae(a){a.memoizedState!==null&&Z(we,a);var r=le.current,o=rx(r,a.type);r!==o&&(Z(me,a),Z(le,o))}function pe(a){me.current===a&&(K(le),K(me)),we.current===a&&(K(we),pc._currentValue=q)}var ve,ge;function Se(a){if(ve===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);ve=r&&r[1]||"",ge=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+a+ge}var Ae=!1;function ye(a,r){if(!a||Ae)return"";Ae=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var ne=ie}Reflect.construct(a,[],he)}else{try{he.call()}catch(ie){ne=ie}a.call(he.prototype)}}else{try{throw Error()}catch(ie){ne=ie}(he=a())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&ne&&typeof ie.stack=="string")return[ie.stack,ne.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),w=g[0],_=g[1];if(w&&_){var $=w.split(`
`),ee=_.split(`
`);for(p=u=0;u<$.length&&!$[u].includes("DetermineComponentFrameRoot");)u++;for(;p<ee.length&&!ee[p].includes("DetermineComponentFrameRoot");)p++;if(u===$.length||p===ee.length)for(u=$.length-1,p=ee.length-1;1<=u&&0<=p&&$[u]!==ee[p];)p--;for(;1<=u&&0<=p;u--,p--)if($[u]!==ee[p]){if(u!==1||p!==1)do if(u--,p--,0>p||$[u]!==ee[p]){var ue=`
`+$[u].replace(" at new "," at ");return a.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",a.displayName)),ue}while(1<=u&&0<=p);break}}}finally{Ae=!1,Error.prepareStackTrace=o}return(o=a?a.displayName||a.name:"")?Se(o):""}function Xe(a,r){switch(a.tag){case 26:case 27:case 5:return Se(a.type);case 16:return Se("Lazy");case 13:return a.child!==r&&r!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return ye(a.type,!1);case 11:return ye(a.type.render,!1);case 1:return ye(a.type,!0);case 31:return Se("Activity");default:return""}}function Ye(a){try{var r="",o=null;do r+=Xe(a,o),o=a,a=a.return;while(a);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Me=Object.prototype.hasOwnProperty,He=t.unstable_scheduleCallback,ot=t.unstable_cancelCallback,gt=t.unstable_shouldYield,Zt=t.unstable_requestPaint,Je=t.unstable_now,Ue=t.unstable_getCurrentPriorityLevel,Pt=t.unstable_ImmediatePriority,Te=t.unstable_UserBlockingPriority,lt=t.unstable_NormalPriority,Qt=t.unstable_LowPriority,mt=t.unstable_IdlePriority,za=t.log,kn=t.unstable_setDisableYieldValue,wn=null,Gt=null;function Sn(a){if(typeof za=="function"&&kn(a),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(wn,a)}catch{}}var Bt=Math.clz32?Math.clz32:Dn,As=Math.log,ss=Math.LN2;function Dn(a){return a>>>=0,a===0?32:31-(As(a)/ss|0)|0}var ba=256,ea=262144,On=4194304;function Nn(a){var r=a&42;if(r!==0)return r;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Mn(a,r,o){var u=a.pendingLanes;if(u===0)return 0;var p=0,g=a.suspendedLanes,w=a.pingedLanes;a=a.warmLanes;var _=u&134217727;return _!==0?(u=_&~g,u!==0?p=Nn(u):(w&=_,w!==0?p=Nn(w):o||(o=_&~a,o!==0&&(p=Nn(o))))):(_=u&~g,_!==0?p=Nn(_):w!==0?p=Nn(w):o||(o=u&~a,o!==0&&(p=Nn(o)))),p===0?0:r!==0&&r!==p&&(r&g)===0&&(g=p&-p,o=r&-r,g>=o||g===32&&(o&4194048)!==0)?r:p}function xa(a,r){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&r)===0}function Ws(a,r){switch(a){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rs(){var a=On;return On<<=1,(On&62914560)===0&&(On=4194304),a}function $n(a){for(var r=[],o=0;31>o;o++)r.push(a);return r}function ta(a,r){a.pendingLanes|=r,r!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function na(a,r,o,u,p,g){var w=a.pendingLanes;a.pendingLanes=o,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=o,a.entangledLanes&=o,a.errorRecoveryDisabledLanes&=o,a.shellSuspendCounter=0;var _=a.entanglements,$=a.expirationTimes,ee=a.hiddenUpdates;for(o=w&~o;0<o;){var ue=31-Bt(o),he=1<<ue;_[ue]=0,$[ue]=-1;var ne=ee[ue];if(ne!==null)for(ee[ue]=null,ue=0;ue<ne.length;ue++){var ie=ne[ue];ie!==null&&(ie.lane&=-536870913)}o&=~he}u!==0&&Cs(a,u,0),g!==0&&p===0&&a.tag!==0&&(a.suspendedLanes|=g&~(w&~r))}function Cs(a,r,o){a.pendingLanes|=r,a.suspendedLanes&=~r;var u=31-Bt(r);a.entangledLanes|=r,a.entanglements[u]=a.entanglements[u]|1073741824|o&261930}function Mr(a,r){var o=a.entangledLanes|=r;for(a=a.entanglements;o;){var u=31-Bt(o),p=1<<u;p&r|a[u]&r&&(a[u]|=r),o&=~p}}function Rr(a,r){var o=r&-r;return o=(o&42)!==0?1:is(o),(o&(a.suspendedLanes|r))!==0?0:o}function is(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function aa(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Ut(){var a=I.p;return a!==0?a:(a=window.event,a===void 0?32:jx(a.type))}function Xs(a,r){var o=I.p;try{return I.p=a,r()}finally{I.p=o}}var bn=Math.random().toString(36).slice(2),At="__reactFiber$"+bn,Jt="__reactProps$"+bn,sa="__reactContainer$"+bn,Ct="__reactEvents$"+bn,os="__reactListeners$"+bn,Ai="__reactHandles$"+bn,Zs="__reactResources$"+bn,ls="__reactMarker$"+bn;function js(a){delete a[At],delete a[Jt],delete a[Ct],delete a[os],delete a[Ai]}function zt(a){var r=a[At];if(r)return r;for(var o=a.parentNode;o;){if(r=o[sa]||o[At]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(a=fx(a);a!==null;){if(o=a[At])return o;a=fx(a)}return r}a=o,o=a.parentNode}return null}function va(a){if(a=a[At]||a[sa]){var r=a.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return a}return null}function ra(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a.stateNode;throw Error(s(33))}function Rn(a){var r=a[Zs];return r||(r=a[Zs]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function jt(a){a[ls]=!0}var Vn=new Set,ia={};function oa(a,r){Hn(a,r),Hn(a+"Capture",r)}function Hn(a,r){for(ia[a]=r,a=0;a<r.length;a++)Vn.add(r[a])}var Fn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_s={},Qs={};function Ci(a){return Me.call(Qs,a)?!0:Me.call(_s,a)?!1:Fn.test(a)?Qs[a]=!0:(_s[a]=!0,!1)}function ks(a,r,o){if(Ci(r))if(o===null)a.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":a.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){a.removeAttribute(r);return}}a.setAttribute(r,""+o)}}function Js(a,r,o){if(o===null)a.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(r);return}a.setAttribute(r,""+o)}}function xe(a,r,o,u){if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttributeNS(r,o,""+u)}}function Be(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Re(a){var r=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Yt(a,r,o){var u=Object.getOwnPropertyDescriptor(a.constructor.prototype,r);if(!a.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,g=u.set;return Object.defineProperty(a,r,{configurable:!0,get:function(){return p.call(this)},set:function(w){o=""+w,g.call(this,w)}}),Object.defineProperty(a,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){a._valueTracker=null,delete a[r]}}}}function wa(a){if(!a._valueTracker){var r=Re(a)?"checked":"value";a._valueTracker=Yt(a,r,""+a[r])}}function Ds(a){if(!a)return!1;var r=a._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return a&&(u=Re(a)?a.checked?"true":"false":a.value),a=u,a!==o?(r.setValue(a),!0):!1}function Ln(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Ml=/[\n"\\]/g;function Pn(a){return a.replace(Ml,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ji(a,r,o,u,p,g,w,_){a.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?a.type=w:a.removeAttribute("type"),r!=null?w==="number"?(r===0&&a.value===""||a.value!=r)&&(a.value=""+Be(r)):a.value!==""+Be(r)&&(a.value=""+Be(r)):w!=="submit"&&w!=="reset"||a.removeAttribute("value"),r!=null?_i(a,w,Be(r)):o!=null?_i(a,w,Be(o)):u!=null&&a.removeAttribute("value"),p==null&&g!=null&&(a.defaultChecked=!!g),p!=null&&(a.checked=p&&typeof p!="function"&&typeof p!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.name=""+Be(_):a.removeAttribute("name")}function Lr(a,r,o,u,p,g,w,_){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(a.type=g),r!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||r!=null)){wa(a);return}o=o!=null?""+Be(o):"",r=r!=null?""+Be(r):o,_||r===a.value||(a.value=r),a.defaultValue=r}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,a.checked=_?a.checked:!!u,a.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.name=w),wa(a)}function _i(a,r,o){r==="number"&&Ln(a.ownerDocument)===a||a.defaultValue===""+o||(a.defaultValue=""+o)}function Os(a,r,o,u){if(a=a.options,r){r={};for(var p=0;p<o.length;p++)r["$"+o[p]]=!0;for(o=0;o<a.length;o++)p=r.hasOwnProperty("$"+a[o].value),a[o].selected!==p&&(a[o].selected=p),p&&u&&(a[o].defaultSelected=!0)}else{for(o=""+Be(o),r=null,p=0;p<a.length;p++){if(a[p].value===o){a[p].selected=!0,u&&(a[p].defaultSelected=!0);return}r!==null||a[p].disabled||(r=a[p])}r!==null&&(r.selected=!0)}}function Ms(a,r,o){if(r!=null&&(r=""+Be(r),r!==a.value&&(a.value=r),o==null)){a.defaultValue!==r&&(a.defaultValue=r);return}a.defaultValue=o!=null?""+Be(o):""}function la(a,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(s(92));if(se(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=Be(r),a.defaultValue=o,u=a.textContent,u===o&&u!==""&&u!==null&&(a.value=u),wa(a)}function zn(a,r){if(r){var o=a.firstChild;if(o&&o===a.lastChild&&o.nodeType===3){o.nodeValue=r;return}}a.textContent=r}var cs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xo(a,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?a.setProperty(r,""):r==="float"?a.cssFloat="":a[r]="":u?a.setProperty(r,o):typeof o!="number"||o===0||cs.has(r)?r==="float"?a.cssFloat=o:a[r]=(""+o).trim():a[r]=o+"px"}function Sa(a,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(a=a.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="");for(var p in r)u=r[p],r.hasOwnProperty(p)&&o[p]!==u&&xo(a,p,u)}else for(var g in r)r.hasOwnProperty(g)&&xo(a,g,r[g])}function ki(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ll=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pr(a){return Ll.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function ca(){}var ln=null;function zr(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var us=null,Na=null;function Ir(a){var r=va(a);if(r&&(a=r.stateNode)){var o=a[Jt]||null;e:switch(a=r.stateNode,r.type){case"input":if(ji(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=a;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==a&&u.form===a.form){var p=u[Jt]||null;if(!p)throw Error(s(90));ji(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===a.form&&Ds(u)}break e;case"textarea":Ms(a,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Os(a,!!o.multiple,r,!1)}}}var Rs=!1;function vo(a,r,o){if(Rs)return a(r,o);Rs=!0;try{var u=a(r);return u}finally{if(Rs=!1,(us!==null||Na!==null)&&(ed(),us&&(r=us,a=Na,Na=us=null,Ir(r),a)))for(r=0;r<a.length;r++)Ir(a[r])}}function Ls(a,r){var o=a.stateNode;if(o===null)return null;var u=o[Jt]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(a=a.type,u=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!u;break e;default:a=!1}if(a)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(Gn)try{var In={};Object.defineProperty(In,"passive",{get:function(){Br=!0}}),window.addEventListener("test",In,In),window.removeEventListener("test",In,In)}catch{Br=!1}var Ta=null,er=null,Ur=null;function wo(){if(Ur)return Ur;var a,r=er,o=r.length,u,p="value"in Ta?Ta.value:Ta.textContent,g=p.length;for(a=0;a<o&&r[a]===p[a];a++);var w=o-a;for(u=1;u<=w&&r[o-u]===p[g-u];u++);return Ur=p.slice(a,1<u?1-u:void 0)}function v(a){var r=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&r===13&&(a=13)):a=r,a===10&&(a=13),32<=a||a===13?a:0}function k(){return!0}function V(){return!1}function re(a){function r(o,u,p,g,w){this._reactName=o,this._targetInst=p,this.type=u,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var _ in a)a.hasOwnProperty(_)&&(o=a[_],this[_]=o?o(g):g[_]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?k:V,this.isPropagationStopped=V,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=k)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=k)},persist:function(){},isPersistent:k}),r}var $e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Le=re($e),Qe=b({},$e,{view:0,detail:0}),st=re(Qe),Mt,ct,qt,cn=b({},Qe,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==qt&&(qt&&a.type==="mousemove"?(Mt=a.screenX-qt.screenX,ct=a.screenY-qt.screenY):ct=Mt=0,qt=a),Mt)},movementY:function(a){return"movementY"in a?a.movementY:ct}}),$t=re(cn),xn=b({},cn,{dataTransfer:0}),un=re(xn),Ps=b({},Qe,{relatedTarget:0}),Ea=re(Ps),tr=b({},$e,{animationName:0,elapsedTime:0,pseudoElement:0}),bu=re(tr),So=b({},$e,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),No=re(So),wA=b({},$e,{data:0}),ly=re(wA),SA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EA(a){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(a):(a=TA[a])?!!r[a]:!1}function Jf(){return EA}var AA=b({},Qe,{key:function(a){if(a.key){var r=SA[a.key]||a.key;if(r!=="Unidentified")return r}return a.type==="keypress"?(a=v(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?NA[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jf,charCode:function(a){return a.type==="keypress"?v(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?v(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),CA=re(AA),jA=b({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cy=re(jA),_A=b({},Qe,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jf}),kA=re(_A),DA=b({},$e,{propertyName:0,elapsedTime:0,pseudoElement:0}),OA=re(DA),MA=b({},cn,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),RA=re(MA),LA=b({},$e,{newState:0,oldState:0}),PA=re(LA),zA=[9,13,27,32],eh=Gn&&"CompositionEvent"in window,Pl=null;Gn&&"documentMode"in document&&(Pl=document.documentMode);var IA=Gn&&"TextEvent"in window&&!Pl,uy=Gn&&(!eh||Pl&&8<Pl&&11>=Pl),dy=" ",fy=!1;function hy(a,r){switch(a){case"keyup":return zA.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function my(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var To=!1;function BA(a,r){switch(a){case"compositionend":return my(r);case"keypress":return r.which!==32?null:(fy=!0,dy);case"textInput":return a=r.data,a===dy&&fy?null:a;default:return null}}function UA(a,r){if(To)return a==="compositionend"||!eh&&hy(a,r)?(a=wo(),Ur=er=Ta=null,To=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return uy&&r.locale!=="ko"?null:r.data;default:return null}}var qA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function py(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r==="input"?!!qA[a.type]:r==="textarea"}function gy(a,r,o,u){us?Na?Na.push(u):Na=[u]:us=u,r=od(r,"onChange"),0<r.length&&(o=new Le("onChange","change",null,o,u),a.push({event:o,listeners:r}))}var zl=null,Il=null;function $A(a){Qb(a,0)}function xu(a){var r=ra(a);if(Ds(r))return a}function yy(a,r){if(a==="change")return r}var by=!1;if(Gn){var th;if(Gn){var nh="oninput"in document;if(!nh){var xy=document.createElement("div");xy.setAttribute("oninput","return;"),nh=typeof xy.oninput=="function"}th=nh}else th=!1;by=th&&(!document.documentMode||9<document.documentMode)}function vy(){zl&&(zl.detachEvent("onpropertychange",wy),Il=zl=null)}function wy(a){if(a.propertyName==="value"&&xu(Il)){var r=[];gy(r,Il,a,zr(a)),vo($A,r)}}function VA(a,r,o){a==="focusin"?(vy(),zl=r,Il=o,zl.attachEvent("onpropertychange",wy)):a==="focusout"&&vy()}function HA(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return xu(Il)}function FA(a,r){if(a==="click")return xu(r)}function GA(a,r){if(a==="input"||a==="change")return xu(r)}function YA(a,r){return a===r&&(a!==0||1/a===1/r)||a!==a&&r!==r}var Aa=typeof Object.is=="function"?Object.is:YA;function Bl(a,r){if(Aa(a,r))return!0;if(typeof a!="object"||a===null||typeof r!="object"||r===null)return!1;var o=Object.keys(a),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var p=o[u];if(!Me.call(r,p)||!Aa(a[p],r[p]))return!1}return!0}function Sy(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ny(a,r){var o=Sy(a);a=0;for(var u;o;){if(o.nodeType===3){if(u=a+o.textContent.length,a<=r&&u>=r)return{node:o,offset:r-a};a=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Sy(o)}}function Ty(a,r){return a&&r?a===r?!0:a&&a.nodeType===3?!1:r&&r.nodeType===3?Ty(a,r.parentNode):"contains"in a?a.contains(r):a.compareDocumentPosition?!!(a.compareDocumentPosition(r)&16):!1:!1}function Ey(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var r=Ln(a.document);r instanceof a.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)a=r.contentWindow;else break;r=Ln(a.document)}return r}function ah(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r&&(r==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||r==="textarea"||a.contentEditable==="true")}var KA=Gn&&"documentMode"in document&&11>=document.documentMode,Eo=null,sh=null,Ul=null,rh=!1;function Ay(a,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;rh||Eo==null||Eo!==Ln(u)||(u=Eo,"selectionStart"in u&&ah(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ul&&Bl(Ul,u)||(Ul=u,u=od(sh,"onSelect"),0<u.length&&(r=new Le("onSelect","select",null,r,o),a.push({event:r,listeners:u}),r.target=Eo)))}function Di(a,r){var o={};return o[a.toLowerCase()]=r.toLowerCase(),o["Webkit"+a]="webkit"+r,o["Moz"+a]="moz"+r,o}var Ao={animationend:Di("Animation","AnimationEnd"),animationiteration:Di("Animation","AnimationIteration"),animationstart:Di("Animation","AnimationStart"),transitionrun:Di("Transition","TransitionRun"),transitionstart:Di("Transition","TransitionStart"),transitioncancel:Di("Transition","TransitionCancel"),transitionend:Di("Transition","TransitionEnd")},ih={},Cy={};Gn&&(Cy=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Oi(a){if(ih[a])return ih[a];if(!Ao[a])return a;var r=Ao[a],o;for(o in r)if(r.hasOwnProperty(o)&&o in Cy)return ih[a]=r[o];return a}var jy=Oi("animationend"),_y=Oi("animationiteration"),ky=Oi("animationstart"),WA=Oi("transitionrun"),XA=Oi("transitionstart"),ZA=Oi("transitioncancel"),Dy=Oi("transitionend"),Oy=new Map,oh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oh.push("scrollEnd");function ds(a,r){Oy.set(a,r),oa(r,[a])}var vu=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Ia=[],Co=0,lh=0;function wu(){for(var a=Co,r=lh=Co=0;r<a;){var o=Ia[r];Ia[r++]=null;var u=Ia[r];Ia[r++]=null;var p=Ia[r];Ia[r++]=null;var g=Ia[r];if(Ia[r++]=null,u!==null&&p!==null){var w=u.pending;w===null?p.next=p:(p.next=w.next,w.next=p),u.pending=p}g!==0&&My(o,p,g)}}function Su(a,r,o,u){Ia[Co++]=a,Ia[Co++]=r,Ia[Co++]=o,Ia[Co++]=u,lh|=u,a.lanes|=u,a=a.alternate,a!==null&&(a.lanes|=u)}function ch(a,r,o,u){return Su(a,r,o,u),Nu(a)}function Mi(a,r){return Su(a,null,null,r),Nu(a)}function My(a,r,o){a.lanes|=o;var u=a.alternate;u!==null&&(u.lanes|=o);for(var p=!1,g=a.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(a=g.stateNode,a===null||a._visibility&1||(p=!0)),a=g,g=g.return;return a.tag===3?(g=a.stateNode,p&&r!==null&&(p=31-Bt(o),a=g.hiddenUpdates,u=a[p],u===null?a[p]=[r]:u.push(r),r.lane=o|536870912),g):null}function Nu(a){if(50<lc)throw lc=0,bm=null,Error(s(185));for(var r=a.return;r!==null;)a=r,r=a.return;return a.tag===3?a.stateNode:null}var jo={};function QA(a,r,o,u){this.tag=a,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ca(a,r,o,u){return new QA(a,r,o,u)}function uh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function nr(a,r){var o=a.alternate;return o===null?(o=Ca(a.tag,r,a.key,a.mode),o.elementType=a.elementType,o.type=a.type,o.stateNode=a.stateNode,o.alternate=a,a.alternate=o):(o.pendingProps=r,o.type=a.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=a.flags&65011712,o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,r=a.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=a.sibling,o.index=a.index,o.ref=a.ref,o.refCleanup=a.refCleanup,o}function Ry(a,r){a.flags&=65011714;var o=a.alternate;return o===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,r=o.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a}function Tu(a,r,o,u,p,g){var w=0;if(u=a,typeof a=="function")uh(a)&&(w=1);else if(typeof a=="string")w=aj(a,o,le.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case Y:return a=Ca(31,o,r,p),a.elementType=Y,a.lanes=g,a;case E:return Ri(o.children,p,g,r);case j:w=8,p|=24;break;case D:return a=Ca(12,o,r,p|2),a.elementType=D,a.lanes=g,a;case L:return a=Ca(13,o,r,p),a.elementType=L,a.lanes=g,a;case H:return a=Ca(19,o,r,p),a.elementType=H,a.lanes=g,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case R:w=10;break e;case O:w=9;break e;case U:w=11;break e;case z:w=14;break e;case P:w=16,u=null;break e}w=29,o=Error(s(130,a===null?"null":typeof a,"")),u=null}return r=Ca(w,o,r,p),r.elementType=a,r.type=u,r.lanes=g,r}function Ri(a,r,o,u){return a=Ca(7,a,u,r),a.lanes=o,a}function dh(a,r,o){return a=Ca(6,a,null,r),a.lanes=o,a}function Ly(a){var r=Ca(18,null,null,0);return r.stateNode=a,r}function fh(a,r,o){return r=Ca(4,a.children!==null?a.children:[],a.key,r),r.lanes=o,r.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},r}var Py=new WeakMap;function Ba(a,r){if(typeof a=="object"&&a!==null){var o=Py.get(a);return o!==void 0?o:(r={value:a,source:r,stack:Ye(r)},Py.set(a,r),r)}return{value:a,source:r,stack:Ye(r)}}var _o=[],ko=0,Eu=null,ql=0,Ua=[],qa=0,qr=null,zs=1,Is="";function ar(a,r){_o[ko++]=ql,_o[ko++]=Eu,Eu=a,ql=r}function zy(a,r,o){Ua[qa++]=zs,Ua[qa++]=Is,Ua[qa++]=qr,qr=a;var u=zs;a=Is;var p=32-Bt(u)-1;u&=~(1<<p),o+=1;var g=32-Bt(r)+p;if(30<g){var w=p-p%5;g=(u&(1<<w)-1).toString(32),u>>=w,p-=w,zs=1<<32-Bt(r)+p|o<<p|u,Is=g+a}else zs=1<<g|o<<p|u,Is=a}function hh(a){a.return!==null&&(ar(a,1),zy(a,1,0))}function mh(a){for(;a===Eu;)Eu=_o[--ko],_o[ko]=null,ql=_o[--ko],_o[ko]=null;for(;a===qr;)qr=Ua[--qa],Ua[qa]=null,Is=Ua[--qa],Ua[qa]=null,zs=Ua[--qa],Ua[qa]=null}function Iy(a,r){Ua[qa++]=zs,Ua[qa++]=Is,Ua[qa++]=qr,zs=r.id,Is=r.overflow,qr=a}var Tn=null,_t=null,rt=!1,$r=null,$a=!1,ph=Error(s(519));function Vr(a){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $l(Ba(r,a)),ph}function By(a){var r=a.stateNode,o=a.type,u=a.memoizedProps;switch(r[At]=a,r[Jt]=u,o){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(o=0;o<uc.length;o++)tt(uc[o],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":tt("invalid",r),Lr(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":tt("invalid",r);break;case"textarea":tt("invalid",r),la(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||nx(r.textContent,o)?(u.popover!=null&&(tt("beforetoggle",r),tt("toggle",r)),u.onScroll!=null&&tt("scroll",r),u.onScrollEnd!=null&&tt("scrollend",r),u.onClick!=null&&(r.onclick=ca),r=!0):r=!1,r||Vr(a,!0)}function Uy(a){for(Tn=a.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:$a=!1;return;case 27:case 3:$a=!0;return;default:Tn=Tn.return}}function Do(a){if(a!==Tn)return!1;if(!rt)return Uy(a),rt=!0,!1;var r=a.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=a.type,o=!(o!=="form"&&o!=="button")||Mm(a.type,a.memoizedProps)),o=!o),o&&_t&&Vr(a),Uy(a),r===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));_t=dx(a)}else if(r===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));_t=dx(a)}else r===27?(r=_t,ai(a.type)?(a=Im,Im=null,_t=a):_t=r):_t=Tn?Ha(a.stateNode.nextSibling):null;return!0}function Li(){_t=Tn=null,rt=!1}function gh(){var a=$r;return a!==null&&(ha===null?ha=a:ha.push.apply(ha,a),$r=null),a}function $l(a){$r===null?$r=[a]:$r.push(a)}var yh=M(null),Pi=null,sr=null;function Hr(a,r,o){Z(yh,r._currentValue),r._currentValue=o}function rr(a){a._currentValue=yh.current,K(yh)}function bh(a,r,o){for(;a!==null;){var u=a.alternate;if((a.childLanes&r)!==r?(a.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),a===o)break;a=a.return}}function xh(a,r,o,u){var p=a.child;for(p!==null&&(p.return=a);p!==null;){var g=p.dependencies;if(g!==null){var w=p.child;g=g.firstContext;e:for(;g!==null;){var _=g;g=p;for(var $=0;$<r.length;$++)if(_.context===r[$]){g.lanes|=o,_=g.alternate,_!==null&&(_.lanes|=o),bh(g.return,o,a),u||(w=null);break e}g=_.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(s(341));w.lanes|=o,g=w.alternate,g!==null&&(g.lanes|=o),bh(w,o,a),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===a){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function Oo(a,r,o,u){a=null;for(var p=r,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var _=p.type;Aa(p.pendingProps.value,w.value)||(a!==null?a.push(_):a=[_])}}else if(p===we.current){if(w=p.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(a!==null?a.push(pc):a=[pc])}p=p.return}a!==null&&xh(r,a,o,u),r.flags|=262144}function Au(a){for(a=a.firstContext;a!==null;){if(!Aa(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function zi(a){Pi=a,sr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function En(a){return qy(Pi,a)}function Cu(a,r){return Pi===null&&zi(a),qy(a,r)}function qy(a,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},sr===null){if(a===null)throw Error(s(308));sr=r,a.dependencies={lanes:0,firstContext:r},a.flags|=524288}else sr=sr.next=r;return o}var JA=typeof AbortController<"u"?AbortController:function(){var a=[],r=this.signal={aborted:!1,addEventListener:function(o,u){a.push(u)}};this.abort=function(){r.aborted=!0,a.forEach(function(o){return o()})}},eC=t.unstable_scheduleCallback,tC=t.unstable_NormalPriority,en={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vh(){return{controller:new JA,data:new Map,refCount:0}}function Vl(a){a.refCount--,a.refCount===0&&eC(tC,function(){a.controller.abort()})}var Hl=null,wh=0,Mo=0,Ro=null;function nC(a,r){if(Hl===null){var o=Hl=[];wh=0,Mo=Tm(),Ro={status:"pending",value:void 0,then:function(u){o.push(u)}}}return wh++,r.then($y,$y),r}function $y(){if(--wh===0&&Hl!==null){Ro!==null&&(Ro.status="fulfilled");var a=Hl;Hl=null,Mo=0,Ro=null;for(var r=0;r<a.length;r++)(0,a[r])()}}function aC(a,r){var o=[],u={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return a.then(function(){u.status="fulfilled",u.value=r;for(var p=0;p<o.length;p++)(0,o[p])(r)},function(p){for(u.status="rejected",u.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),u}var Vy=C.S;C.S=function(a,r){Ab=Je(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&nC(a,r),Vy!==null&&Vy(a,r)};var Ii=M(null);function Sh(){var a=Ii.current;return a!==null?a:Nt.pooledCache}function ju(a,r){r===null?Z(Ii,Ii.current):Z(Ii,r.pool)}function Hy(){var a=Sh();return a===null?null:{parent:en._currentValue,pool:a}}var Lo=Error(s(460)),Nh=Error(s(474)),_u=Error(s(542)),ku={then:function(){}};function Fy(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Gy(a,r,o){switch(o=a[o],o===void 0?a.push(r):o!==r&&(r.then(ca,ca),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,Ky(a),a;default:if(typeof r.status=="string")r.then(ca,ca);else{if(a=Nt,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=r,a.status="pending",a.then(function(u){if(r.status==="pending"){var p=r;p.status="fulfilled",p.value=u}},function(u){if(r.status==="pending"){var p=r;p.status="rejected",p.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,Ky(a),a}throw Ui=r,Lo}}function Bi(a){try{var r=a._init;return r(a._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ui=o,Lo):o}}var Ui=null;function Yy(){if(Ui===null)throw Error(s(459));var a=Ui;return Ui=null,a}function Ky(a){if(a===Lo||a===_u)throw Error(s(483))}var Po=null,Fl=0;function Du(a){var r=Fl;return Fl+=1,Po===null&&(Po=[]),Gy(Po,a,r)}function Gl(a,r){r=r.props.ref,a.ref=r!==void 0?r:null}function Ou(a,r){throw r.$$typeof===x?Error(s(525)):(a=Object.prototype.toString.call(r),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a)))}function Wy(a){function r(W,G){if(a){var J=W.deletions;J===null?(W.deletions=[G],W.flags|=16):J.push(G)}}function o(W,G){if(!a)return null;for(;G!==null;)r(W,G),G=G.sibling;return null}function u(W){for(var G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function p(W,G){return W=nr(W,G),W.index=0,W.sibling=null,W}function g(W,G,J){return W.index=J,a?(J=W.alternate,J!==null?(J=J.index,J<G?(W.flags|=67108866,G):J):(W.flags|=67108866,G)):(W.flags|=1048576,G)}function w(W){return a&&W.alternate===null&&(W.flags|=67108866),W}function _(W,G,J,de){return G===null||G.tag!==6?(G=dh(J,W.mode,de),G.return=W,G):(G=p(G,J),G.return=W,G)}function $(W,G,J,de){var qe=J.type;return qe===E?ue(W,G,J.props.children,de,J.key):G!==null&&(G.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===P&&Bi(qe)===G.type)?(G=p(G,J.props),Gl(G,J),G.return=W,G):(G=Tu(J.type,J.key,J.props,null,W.mode,de),Gl(G,J),G.return=W,G)}function ee(W,G,J,de){return G===null||G.tag!==4||G.stateNode.containerInfo!==J.containerInfo||G.stateNode.implementation!==J.implementation?(G=fh(J,W.mode,de),G.return=W,G):(G=p(G,J.children||[]),G.return=W,G)}function ue(W,G,J,de,qe){return G===null||G.tag!==7?(G=Ri(J,W.mode,de,qe),G.return=W,G):(G=p(G,J),G.return=W,G)}function he(W,G,J){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=dh(""+G,W.mode,J),G.return=W,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case S:return J=Tu(G.type,G.key,G.props,null,W.mode,J),Gl(J,G),J.return=W,J;case N:return G=fh(G,W.mode,J),G.return=W,G;case P:return G=Bi(G),he(W,G,J)}if(se(G)||F(G))return G=Ri(G,W.mode,J,null),G.return=W,G;if(typeof G.then=="function")return he(W,Du(G),J);if(G.$$typeof===R)return he(W,Cu(W,G),J);Ou(W,G)}return null}function ne(W,G,J,de){var qe=G!==null?G.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return qe!==null?null:_(W,G,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return J.key===qe?$(W,G,J,de):null;case N:return J.key===qe?ee(W,G,J,de):null;case P:return J=Bi(J),ne(W,G,J,de)}if(se(J)||F(J))return qe!==null?null:ue(W,G,J,de,null);if(typeof J.then=="function")return ne(W,G,Du(J),de);if(J.$$typeof===R)return ne(W,G,Cu(W,J),de);Ou(W,J)}return null}function ie(W,G,J,de,qe){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return W=W.get(J)||null,_(G,W,""+de,qe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case S:return W=W.get(de.key===null?J:de.key)||null,$(G,W,de,qe);case N:return W=W.get(de.key===null?J:de.key)||null,ee(G,W,de,qe);case P:return de=Bi(de),ie(W,G,J,de,qe)}if(se(de)||F(de))return W=W.get(J)||null,ue(G,W,de,qe,null);if(typeof de.then=="function")return ie(W,G,J,Du(de),qe);if(de.$$typeof===R)return ie(W,G,J,Cu(G,de),qe);Ou(G,de)}return null}function _e(W,G,J,de){for(var qe=null,ut=null,Pe=G,We=G=0,at=null;Pe!==null&&We<J.length;We++){Pe.index>We?(at=Pe,Pe=null):at=Pe.sibling;var dt=ne(W,Pe,J[We],de);if(dt===null){Pe===null&&(Pe=at);break}a&&Pe&&dt.alternate===null&&r(W,Pe),G=g(dt,G,We),ut===null?qe=dt:ut.sibling=dt,ut=dt,Pe=at}if(We===J.length)return o(W,Pe),rt&&ar(W,We),qe;if(Pe===null){for(;We<J.length;We++)Pe=he(W,J[We],de),Pe!==null&&(G=g(Pe,G,We),ut===null?qe=Pe:ut.sibling=Pe,ut=Pe);return rt&&ar(W,We),qe}for(Pe=u(Pe);We<J.length;We++)at=ie(Pe,W,We,J[We],de),at!==null&&(a&&at.alternate!==null&&Pe.delete(at.key===null?We:at.key),G=g(at,G,We),ut===null?qe=at:ut.sibling=at,ut=at);return a&&Pe.forEach(function(li){return r(W,li)}),rt&&ar(W,We),qe}function Ve(W,G,J,de){if(J==null)throw Error(s(151));for(var qe=null,ut=null,Pe=G,We=G=0,at=null,dt=J.next();Pe!==null&&!dt.done;We++,dt=J.next()){Pe.index>We?(at=Pe,Pe=null):at=Pe.sibling;var li=ne(W,Pe,dt.value,de);if(li===null){Pe===null&&(Pe=at);break}a&&Pe&&li.alternate===null&&r(W,Pe),G=g(li,G,We),ut===null?qe=li:ut.sibling=li,ut=li,Pe=at}if(dt.done)return o(W,Pe),rt&&ar(W,We),qe;if(Pe===null){for(;!dt.done;We++,dt=J.next())dt=he(W,dt.value,de),dt!==null&&(G=g(dt,G,We),ut===null?qe=dt:ut.sibling=dt,ut=dt);return rt&&ar(W,We),qe}for(Pe=u(Pe);!dt.done;We++,dt=J.next())dt=ie(Pe,W,We,dt.value,de),dt!==null&&(a&&dt.alternate!==null&&Pe.delete(dt.key===null?We:dt.key),G=g(dt,G,We),ut===null?qe=dt:ut.sibling=dt,ut=dt);return a&&Pe.forEach(function(mj){return r(W,mj)}),rt&&ar(W,We),qe}function St(W,G,J,de){if(typeof J=="object"&&J!==null&&J.type===E&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case S:e:{for(var qe=J.key;G!==null;){if(G.key===qe){if(qe=J.type,qe===E){if(G.tag===7){o(W,G.sibling),de=p(G,J.props.children),de.return=W,W=de;break e}}else if(G.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===P&&Bi(qe)===G.type){o(W,G.sibling),de=p(G,J.props),Gl(de,J),de.return=W,W=de;break e}o(W,G);break}else r(W,G);G=G.sibling}J.type===E?(de=Ri(J.props.children,W.mode,de,J.key),de.return=W,W=de):(de=Tu(J.type,J.key,J.props,null,W.mode,de),Gl(de,J),de.return=W,W=de)}return w(W);case N:e:{for(qe=J.key;G!==null;){if(G.key===qe)if(G.tag===4&&G.stateNode.containerInfo===J.containerInfo&&G.stateNode.implementation===J.implementation){o(W,G.sibling),de=p(G,J.children||[]),de.return=W,W=de;break e}else{o(W,G);break}else r(W,G);G=G.sibling}de=fh(J,W.mode,de),de.return=W,W=de}return w(W);case P:return J=Bi(J),St(W,G,J,de)}if(se(J))return _e(W,G,J,de);if(F(J)){if(qe=F(J),typeof qe!="function")throw Error(s(150));return J=qe.call(J),Ve(W,G,J,de)}if(typeof J.then=="function")return St(W,G,Du(J),de);if(J.$$typeof===R)return St(W,G,Cu(W,J),de);Ou(W,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,G!==null&&G.tag===6?(o(W,G.sibling),de=p(G,J),de.return=W,W=de):(o(W,G),de=dh(J,W.mode,de),de.return=W,W=de),w(W)):o(W,G)}return function(W,G,J,de){try{Fl=0;var qe=St(W,G,J,de);return Po=null,qe}catch(Pe){if(Pe===Lo||Pe===_u)throw Pe;var ut=Ca(29,Pe,null,W.mode);return ut.lanes=de,ut.return=W,ut}}}var qi=Wy(!0),Xy=Wy(!1),Fr=!1;function Th(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eh(a,r){a=a.updateQueue,r.updateQueue===a&&(r.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Gr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Yr(a,r,o){var u=a.updateQueue;if(u===null)return null;if(u=u.shared,(ht&2)!==0){var p=u.pending;return p===null?r.next=r:(r.next=p.next,p.next=r),u.pending=r,r=Nu(a),My(a,null,o),r}return Su(a,u,r,o),Nu(a)}function Yl(a,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=a.pendingLanes,o|=u,r.lanes=o,Mr(a,o)}}function Ah(a,r){var o=a.updateQueue,u=a.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var p=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?p=g=w:g=g.next=w,o=o.next}while(o!==null);g===null?p=g=r:g=g.next=r}else p=g=r;o={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},a.updateQueue=o;return}a=o.lastBaseUpdate,a===null?o.firstBaseUpdate=r:a.next=r,o.lastBaseUpdate=r}var Ch=!1;function Kl(){if(Ch){var a=Ro;if(a!==null)throw a}}function Wl(a,r,o,u){Ch=!1;var p=a.updateQueue;Fr=!1;var g=p.firstBaseUpdate,w=p.lastBaseUpdate,_=p.shared.pending;if(_!==null){p.shared.pending=null;var $=_,ee=$.next;$.next=null,w===null?g=ee:w.next=ee,w=$;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,_=ue.lastBaseUpdate,_!==w&&(_===null?ue.firstBaseUpdate=ee:_.next=ee,ue.lastBaseUpdate=$))}if(g!==null){var he=p.baseState;w=0,ue=ee=$=null,_=g;do{var ne=_.lane&-536870913,ie=ne!==_.lane;if(ie?(nt&ne)===ne:(u&ne)===ne){ne!==0&&ne===Mo&&(Ch=!0),ue!==null&&(ue=ue.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var _e=a,Ve=_;ne=r;var St=o;switch(Ve.tag){case 1:if(_e=Ve.payload,typeof _e=="function"){he=_e.call(St,he,ne);break e}he=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ve.payload,ne=typeof _e=="function"?_e.call(St,he,ne):_e,ne==null)break e;he=b({},he,ne);break e;case 2:Fr=!0}}ne=_.callback,ne!==null&&(a.flags|=64,ie&&(a.flags|=8192),ie=p.callbacks,ie===null?p.callbacks=[ne]:ie.push(ne))}else ie={lane:ne,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ue===null?(ee=ue=ie,$=he):ue=ue.next=ie,w|=ne;if(_=_.next,_===null){if(_=p.shared.pending,_===null)break;ie=_,_=ie.next,ie.next=null,p.lastBaseUpdate=ie,p.shared.pending=null}}while(!0);ue===null&&($=he),p.baseState=$,p.firstBaseUpdate=ee,p.lastBaseUpdate=ue,g===null&&(p.shared.lanes=0),Qr|=w,a.lanes=w,a.memoizedState=he}}function Zy(a,r){if(typeof a!="function")throw Error(s(191,a));a.call(r)}function Qy(a,r){var o=a.callbacks;if(o!==null)for(a.callbacks=null,a=0;a<o.length;a++)Zy(o[a],r)}var zo=M(null),Mu=M(0);function Jy(a,r){a=mr,Z(Mu,a),Z(zo,r),mr=a|r.baseLanes}function jh(){Z(Mu,mr),Z(zo,zo.current)}function _h(){mr=Mu.current,K(zo),K(Mu)}var ja=M(null),Va=null;function Kr(a){var r=a.alternate;Z(Kt,Kt.current&1),Z(ja,a),Va===null&&(r===null||zo.current!==null||r.memoizedState!==null)&&(Va=a)}function kh(a){Z(Kt,Kt.current),Z(ja,a),Va===null&&(Va=a)}function e1(a){a.tag===22?(Z(Kt,Kt.current),Z(ja,a),Va===null&&(Va=a)):Wr()}function Wr(){Z(Kt,Kt.current),Z(ja,ja.current)}function _a(a){K(ja),Va===a&&(Va=null),K(Kt)}var Kt=M(0);function Ru(a){for(var r=a;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Pm(o)||zm(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ir=0,Ke=null,vt=null,tn=null,Lu=!1,Io=!1,$i=!1,Pu=0,Xl=0,Bo=null,sC=0;function Vt(){throw Error(s(321))}function Dh(a,r){if(r===null)return!1;for(var o=0;o<r.length&&o<a.length;o++)if(!Aa(a[o],r[o]))return!1;return!0}function Oh(a,r,o,u,p,g){return ir=g,Ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,C.H=a===null||a.memoizedState===null?z1:Yh,$i=!1,g=o(u,p),$i=!1,Io&&(g=n1(r,o,u,p)),t1(a),g}function t1(a){C.H=Jl;var r=vt!==null&&vt.next!==null;if(ir=0,tn=vt=Ke=null,Lu=!1,Xl=0,Bo=null,r)throw Error(s(300));a===null||nn||(a=a.dependencies,a!==null&&Au(a)&&(nn=!0))}function n1(a,r,o,u){Ke=a;var p=0;do{if(Io&&(Bo=null),Xl=0,Io=!1,25<=p)throw Error(s(301));if(p+=1,tn=vt=null,a.updateQueue!=null){var g=a.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}C.H=I1,g=r(o,u)}while(Io);return g}function rC(){var a=C.H,r=a.useState()[0];return r=typeof r.then=="function"?Zl(r):r,a=a.useState()[0],(vt!==null?vt.memoizedState:null)!==a&&(Ke.flags|=1024),r}function Mh(){var a=Pu!==0;return Pu=0,a}function Rh(a,r,o){r.updateQueue=a.updateQueue,r.flags&=-2053,a.lanes&=~o}function Lh(a){if(Lu){for(a=a.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}Lu=!1}ir=0,tn=vt=Ke=null,Io=!1,Xl=Pu=0,Bo=null}function Yn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Ke.memoizedState=tn=a:tn=tn.next=a,tn}function Wt(){if(vt===null){var a=Ke.alternate;a=a!==null?a.memoizedState:null}else a=vt.next;var r=tn===null?Ke.memoizedState:tn.next;if(r!==null)tn=r,vt=a;else{if(a===null)throw Ke.alternate===null?Error(s(467)):Error(s(310));vt=a,a={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},tn===null?Ke.memoizedState=tn=a:tn=tn.next=a}return tn}function zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(a){var r=Xl;return Xl+=1,Bo===null&&(Bo=[]),a=Gy(Bo,a,r),r=Ke,(tn===null?r.memoizedState:tn.next)===null&&(r=r.alternate,C.H=r===null||r.memoizedState===null?z1:Yh),a}function Iu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Zl(a);if(a.$$typeof===R)return En(a)}throw Error(s(438,String(a)))}function Ph(a){var r=null,o=Ke.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Ke.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(p){return p.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=zu(),Ke.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(a),u=0;u<a;u++)o[u]=Q;return r.index++,o}function or(a,r){return typeof r=="function"?r(a):r}function Bu(a){var r=Wt();return zh(r,vt,a)}function zh(a,r,o){var u=a.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var p=a.baseQueue,g=u.pending;if(g!==null){if(p!==null){var w=p.next;p.next=g.next,g.next=w}r.baseQueue=p=g,u.pending=null}if(g=a.baseState,p===null)a.memoizedState=g;else{r=p.next;var _=w=null,$=null,ee=r,ue=!1;do{var he=ee.lane&-536870913;if(he!==ee.lane?(nt&he)===he:(ir&he)===he){var ne=ee.revertLane;if(ne===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),he===Mo&&(ue=!0);else if((ir&ne)===ne){ee=ee.next,ne===Mo&&(ue=!0);continue}else he={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},$===null?(_=$=he,w=g):$=$.next=he,Ke.lanes|=ne,Qr|=ne;he=ee.action,$i&&o(g,he),g=ee.hasEagerState?ee.eagerState:o(g,he)}else ne={lane:he,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},$===null?(_=$=ne,w=g):$=$.next=ne,Ke.lanes|=he,Qr|=he;ee=ee.next}while(ee!==null&&ee!==r);if($===null?w=g:$.next=_,!Aa(g,a.memoizedState)&&(nn=!0,ue&&(o=Ro,o!==null)))throw o;a.memoizedState=g,a.baseState=w,a.baseQueue=$,u.lastRenderedState=g}return p===null&&(u.lanes=0),[a.memoizedState,u.dispatch]}function Ih(a){var r=Wt(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var u=o.dispatch,p=o.pending,g=r.memoizedState;if(p!==null){o.pending=null;var w=p=p.next;do g=a(g,w.action),w=w.next;while(w!==p);Aa(g,r.memoizedState)||(nn=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),o.lastRenderedState=g}return[g,u]}function a1(a,r,o){var u=Ke,p=Wt(),g=rt;if(g){if(o===void 0)throw Error(s(407));o=o()}else o=r();var w=!Aa((vt||p).memoizedState,o);if(w&&(p.memoizedState=o,nn=!0),p=p.queue,qh(i1.bind(null,u,p,a),[a]),p.getSnapshot!==r||w||tn!==null&&tn.memoizedState.tag&1){if(u.flags|=2048,Uo(9,{destroy:void 0},r1.bind(null,u,p,o,r),null),Nt===null)throw Error(s(349));g||(ir&127)!==0||s1(u,r,o)}return o}function s1(a,r,o){a.flags|=16384,a={getSnapshot:r,value:o},r=Ke.updateQueue,r===null?(r=zu(),Ke.updateQueue=r,r.stores=[a]):(o=r.stores,o===null?r.stores=[a]:o.push(a))}function r1(a,r,o,u){r.value=o,r.getSnapshot=u,o1(r)&&l1(a)}function i1(a,r,o){return o(function(){o1(r)&&l1(a)})}function o1(a){var r=a.getSnapshot;a=a.value;try{var o=r();return!Aa(a,o)}catch{return!0}}function l1(a){var r=Mi(a,2);r!==null&&ma(r,a,2)}function Bh(a){var r=Yn();if(typeof a=="function"){var o=a;if(a=o(),$i){Sn(!0);try{o()}finally{Sn(!1)}}}return r.memoizedState=r.baseState=a,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:a},r}function c1(a,r,o,u){return a.baseState=o,zh(a,vt,typeof u=="function"?u:or)}function iC(a,r,o,u,p){if($u(a))throw Error(s(485));if(a=r.action,a!==null){var g={payload:p,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};C.T!==null?o(!0):g.isTransition=!1,u(g),o=r.pending,o===null?(g.next=r.pending=g,u1(r,g)):(g.next=o.next,r.pending=o.next=g)}}function u1(a,r){var o=r.action,u=r.payload,p=a.state;if(r.isTransition){var g=C.T,w={};C.T=w;try{var _=o(p,u),$=C.S;$!==null&&$(w,_),d1(a,r,_)}catch(ee){Uh(a,r,ee)}finally{g!==null&&w.types!==null&&(g.types=w.types),C.T=g}}else try{g=o(p,u),d1(a,r,g)}catch(ee){Uh(a,r,ee)}}function d1(a,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){f1(a,r,u)},function(u){return Uh(a,r,u)}):f1(a,r,o)}function f1(a,r,o){r.status="fulfilled",r.value=o,h1(r),a.state=o,r=a.pending,r!==null&&(o=r.next,o===r?a.pending=null:(o=o.next,r.next=o,u1(a,o)))}function Uh(a,r,o){var u=a.pending;if(a.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,h1(r),r=r.next;while(r!==u)}a.action=null}function h1(a){a=a.listeners;for(var r=0;r<a.length;r++)(0,a[r])()}function m1(a,r){return r}function p1(a,r){if(rt){var o=Nt.formState;if(o!==null){e:{var u=Ke;if(rt){if(_t){t:{for(var p=_t,g=$a;p.nodeType!==8;){if(!g){p=null;break t}if(p=Ha(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){_t=Ha(p.nextSibling),u=p.data==="F!";break e}}Vr(u)}u=!1}u&&(r=o[0])}}return o=Yn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m1,lastRenderedState:r},o.queue=u,o=R1.bind(null,Ke,u),u.dispatch=o,u=Bh(!1),g=Gh.bind(null,Ke,!1,u.queue),u=Yn(),p={state:r,dispatch:null,action:a,pending:null},u.queue=p,o=iC.bind(null,Ke,p,g,o),p.dispatch=o,u.memoizedState=a,[r,o,!1]}function g1(a){var r=Wt();return y1(r,vt,a)}function y1(a,r,o){if(r=zh(a,r,m1)[0],a=Bu(or)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Zl(r)}catch(w){throw w===Lo?_u:w}else u=r;r=Wt();var p=r.queue,g=p.dispatch;return o!==r.memoizedState&&(Ke.flags|=2048,Uo(9,{destroy:void 0},oC.bind(null,p,o),null)),[u,g,a]}function oC(a,r){a.action=r}function b1(a){var r=Wt(),o=vt;if(o!==null)return y1(r,o,a);Wt(),r=r.memoizedState,o=Wt();var u=o.queue.dispatch;return o.memoizedState=a,[r,u,!1]}function Uo(a,r,o,u){return a={tag:a,create:o,deps:u,inst:r,next:null},r=Ke.updateQueue,r===null&&(r=zu(),Ke.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=a.next=a:(u=o.next,o.next=a,a.next=u,r.lastEffect=a),a}function x1(){return Wt().memoizedState}function Uu(a,r,o,u){var p=Yn();Ke.flags|=a,p.memoizedState=Uo(1|r,{destroy:void 0},o,u===void 0?null:u)}function qu(a,r,o,u){var p=Wt();u=u===void 0?null:u;var g=p.memoizedState.inst;vt!==null&&u!==null&&Dh(u,vt.memoizedState.deps)?p.memoizedState=Uo(r,g,o,u):(Ke.flags|=a,p.memoizedState=Uo(1|r,g,o,u))}function v1(a,r){Uu(8390656,8,a,r)}function qh(a,r){qu(2048,8,a,r)}function lC(a){Ke.flags|=4;var r=Ke.updateQueue;if(r===null)r=zu(),Ke.updateQueue=r,r.events=[a];else{var o=r.events;o===null?r.events=[a]:o.push(a)}}function w1(a){var r=Wt().memoizedState;return lC({ref:r,nextImpl:a}),function(){if((ht&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function S1(a,r){return qu(4,2,a,r)}function N1(a,r){return qu(4,4,a,r)}function T1(a,r){if(typeof r=="function"){a=a();var o=r(a);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return a=a(),r.current=a,function(){r.current=null}}function E1(a,r,o){o=o!=null?o.concat([a]):null,qu(4,4,T1.bind(null,r,a),o)}function $h(){}function A1(a,r){var o=Wt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Dh(r,u[1])?u[0]:(o.memoizedState=[a,r],a)}function C1(a,r){var o=Wt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Dh(r,u[1]))return u[0];if(u=a(),$i){Sn(!0);try{a()}finally{Sn(!1)}}return o.memoizedState=[u,r],u}function Vh(a,r,o){return o===void 0||(ir&1073741824)!==0&&(nt&261930)===0?a.memoizedState=r:(a.memoizedState=o,a=jb(),Ke.lanes|=a,Qr|=a,o)}function j1(a,r,o,u){return Aa(o,r)?o:zo.current!==null?(a=Vh(a,o,u),Aa(a,r)||(nn=!0),a):(ir&42)===0||(ir&1073741824)!==0&&(nt&261930)===0?(nn=!0,a.memoizedState=o):(a=jb(),Ke.lanes|=a,Qr|=a,r)}function _1(a,r,o,u,p){var g=I.p;I.p=g!==0&&8>g?g:8;var w=C.T,_={};C.T=_,Gh(a,!1,r,o);try{var $=p(),ee=C.S;if(ee!==null&&ee(_,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ue=aC($,u);Ql(a,r,ue,Oa(a))}else Ql(a,r,u,Oa(a))}catch(he){Ql(a,r,{then:function(){},status:"rejected",reason:he},Oa())}finally{I.p=g,w!==null&&_.types!==null&&(w.types=_.types),C.T=w}}function cC(){}function Hh(a,r,o,u){if(a.tag!==5)throw Error(s(476));var p=k1(a).queue;_1(a,p,r,q,o===null?cC:function(){return D1(a),o(u)})}function k1(a){var r=a.memoizedState;if(r!==null)return r;r={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:q},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:o},next:null},a.memoizedState=r,a=a.alternate,a!==null&&(a.memoizedState=r),r}function D1(a){var r=k1(a);r.next===null&&(r=a.alternate.memoizedState),Ql(a,r.next.queue,{},Oa())}function Fh(){return En(pc)}function O1(){return Wt().memoizedState}function M1(){return Wt().memoizedState}function uC(a){for(var r=a.return;r!==null;){switch(r.tag){case 24:case 3:var o=Oa();a=Gr(o);var u=Yr(r,a,o);u!==null&&(ma(u,r,o),Yl(u,r,o)),r={cache:vh()},a.payload=r;return}r=r.return}}function dC(a,r,o){var u=Oa();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},$u(a)?L1(r,o):(o=ch(a,r,o,u),o!==null&&(ma(o,a,u),P1(o,r,u)))}function R1(a,r,o){var u=Oa();Ql(a,r,o,u)}function Ql(a,r,o,u){var p={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if($u(a))L1(r,p);else{var g=a.alternate;if(a.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var w=r.lastRenderedState,_=g(w,o);if(p.hasEagerState=!0,p.eagerState=_,Aa(_,w))return Su(a,r,p,0),Nt===null&&wu(),!1}catch{}if(o=ch(a,r,p,u),o!==null)return ma(o,a,u),P1(o,r,u),!0}return!1}function Gh(a,r,o,u){if(u={lane:2,revertLane:Tm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},$u(a)){if(r)throw Error(s(479))}else r=ch(a,o,u,2),r!==null&&ma(r,a,2)}function $u(a){var r=a.alternate;return a===Ke||r!==null&&r===Ke}function L1(a,r){Io=Lu=!0;var o=a.pending;o===null?r.next=r:(r.next=o.next,o.next=r),a.pending=r}function P1(a,r,o){if((o&4194048)!==0){var u=r.lanes;u&=a.pendingLanes,o|=u,r.lanes=o,Mr(a,o)}}var Jl={readContext:En,use:Iu,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};Jl.useEffectEvent=Vt;var z1={readContext:En,use:Iu,useCallback:function(a,r){return Yn().memoizedState=[a,r===void 0?null:r],a},useContext:En,useEffect:v1,useImperativeHandle:function(a,r,o){o=o!=null?o.concat([a]):null,Uu(4194308,4,T1.bind(null,r,a),o)},useLayoutEffect:function(a,r){return Uu(4194308,4,a,r)},useInsertionEffect:function(a,r){Uu(4,2,a,r)},useMemo:function(a,r){var o=Yn();r=r===void 0?null:r;var u=a();if($i){Sn(!0);try{a()}finally{Sn(!1)}}return o.memoizedState=[u,r],u},useReducer:function(a,r,o){var u=Yn();if(o!==void 0){var p=o(r);if($i){Sn(!0);try{o(r)}finally{Sn(!1)}}}else p=r;return u.memoizedState=u.baseState=p,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:p},u.queue=a,a=a.dispatch=dC.bind(null,Ke,a),[u.memoizedState,a]},useRef:function(a){var r=Yn();return a={current:a},r.memoizedState=a},useState:function(a){a=Bh(a);var r=a.queue,o=R1.bind(null,Ke,r);return r.dispatch=o,[a.memoizedState,o]},useDebugValue:$h,useDeferredValue:function(a,r){var o=Yn();return Vh(o,a,r)},useTransition:function(){var a=Bh(!1);return a=_1.bind(null,Ke,a.queue,!0,!1),Yn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,r,o){var u=Ke,p=Yn();if(rt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),Nt===null)throw Error(s(349));(nt&127)!==0||s1(u,r,o)}p.memoizedState=o;var g={value:o,getSnapshot:r};return p.queue=g,v1(i1.bind(null,u,g,a),[a]),u.flags|=2048,Uo(9,{destroy:void 0},r1.bind(null,u,g,o,r),null),o},useId:function(){var a=Yn(),r=Nt.identifierPrefix;if(rt){var o=Is,u=zs;o=(u&~(1<<32-Bt(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=Pu++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=sC++,r="_"+r+"r_"+o.toString(32)+"_";return a.memoizedState=r},useHostTransitionStatus:Fh,useFormState:p1,useActionState:p1,useOptimistic:function(a){var r=Yn();r.memoizedState=r.baseState=a;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Gh.bind(null,Ke,!0,o),o.dispatch=r,[a,r]},useMemoCache:Ph,useCacheRefresh:function(){return Yn().memoizedState=uC.bind(null,Ke)},useEffectEvent:function(a){var r=Yn(),o={impl:a};return r.memoizedState=o,function(){if((ht&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Yh={readContext:En,use:Iu,useCallback:A1,useContext:En,useEffect:qh,useImperativeHandle:E1,useInsertionEffect:S1,useLayoutEffect:N1,useMemo:C1,useReducer:Bu,useRef:x1,useState:function(){return Bu(or)},useDebugValue:$h,useDeferredValue:function(a,r){var o=Wt();return j1(o,vt.memoizedState,a,r)},useTransition:function(){var a=Bu(or)[0],r=Wt().memoizedState;return[typeof a=="boolean"?a:Zl(a),r]},useSyncExternalStore:a1,useId:O1,useHostTransitionStatus:Fh,useFormState:g1,useActionState:g1,useOptimistic:function(a,r){var o=Wt();return c1(o,vt,a,r)},useMemoCache:Ph,useCacheRefresh:M1};Yh.useEffectEvent=w1;var I1={readContext:En,use:Iu,useCallback:A1,useContext:En,useEffect:qh,useImperativeHandle:E1,useInsertionEffect:S1,useLayoutEffect:N1,useMemo:C1,useReducer:Ih,useRef:x1,useState:function(){return Ih(or)},useDebugValue:$h,useDeferredValue:function(a,r){var o=Wt();return vt===null?Vh(o,a,r):j1(o,vt.memoizedState,a,r)},useTransition:function(){var a=Ih(or)[0],r=Wt().memoizedState;return[typeof a=="boolean"?a:Zl(a),r]},useSyncExternalStore:a1,useId:O1,useHostTransitionStatus:Fh,useFormState:b1,useActionState:b1,useOptimistic:function(a,r){var o=Wt();return vt!==null?c1(o,vt,a,r):(o.baseState=a,[a,o.queue.dispatch])},useMemoCache:Ph,useCacheRefresh:M1};I1.useEffectEvent=w1;function Kh(a,r,o,u){r=a.memoizedState,o=o(u,r),o=o==null?r:b({},r,o),a.memoizedState=o,a.lanes===0&&(a.updateQueue.baseState=o)}var Wh={enqueueSetState:function(a,r,o){a=a._reactInternals;var u=Oa(),p=Gr(u);p.payload=r,o!=null&&(p.callback=o),r=Yr(a,p,u),r!==null&&(ma(r,a,u),Yl(r,a,u))},enqueueReplaceState:function(a,r,o){a=a._reactInternals;var u=Oa(),p=Gr(u);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Yr(a,p,u),r!==null&&(ma(r,a,u),Yl(r,a,u))},enqueueForceUpdate:function(a,r){a=a._reactInternals;var o=Oa(),u=Gr(o);u.tag=2,r!=null&&(u.callback=r),r=Yr(a,u,o),r!==null&&(ma(r,a,o),Yl(r,a,o))}};function B1(a,r,o,u,p,g,w){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(u,g,w):r.prototype&&r.prototype.isPureReactComponent?!Bl(o,u)||!Bl(p,g):!0}function U1(a,r,o,u){a=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==a&&Wh.enqueueReplaceState(r,r.state,null)}function Vi(a,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(a=a.defaultProps){o===r&&(o=b({},o));for(var p in a)o[p]===void 0&&(o[p]=a[p])}return o}function q1(a){vu(a)}function $1(a){console.error(a)}function V1(a){vu(a)}function Vu(a,r){try{var o=a.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function H1(a,r,o){try{var u=a.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Xh(a,r,o){return o=Gr(o),o.tag=3,o.payload={element:null},o.callback=function(){Vu(a,r)},o}function F1(a){return a=Gr(a),a.tag=3,a}function G1(a,r,o,u){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var g=u.value;a.payload=function(){return p(g)},a.callback=function(){H1(r,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){H1(r,o,u),typeof p!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var _=u.stack;this.componentDidCatch(u.value,{componentStack:_!==null?_:""})})}function fC(a,r,o,u,p){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&Oo(r,o,p,!0),o=ja.current,o!==null){switch(o.tag){case 31:case 13:return Va===null?td():o.alternate===null&&Ht===0&&(Ht=3),o.flags&=-257,o.flags|=65536,o.lanes=p,u===ku?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),wm(a,u,p)),!1;case 22:return o.flags|=65536,u===ku?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),wm(a,u,p)),!1}throw Error(s(435,o.tag))}return wm(a,u,p),td(),!1}if(rt)return r=ja.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=p,u!==ph&&(a=Error(s(422),{cause:u}),$l(Ba(a,o)))):(u!==ph&&(r=Error(s(423),{cause:u}),$l(Ba(r,o))),a=a.current.alternate,a.flags|=65536,p&=-p,a.lanes|=p,u=Ba(u,o),p=Xh(a.stateNode,u,p),Ah(a,p),Ht!==4&&(Ht=2)),!1;var g=Error(s(520),{cause:u});if(g=Ba(g,o),oc===null?oc=[g]:oc.push(g),Ht!==4&&(Ht=2),r===null)return!0;u=Ba(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,a=p&-p,o.lanes|=a,a=Xh(o.stateNode,u,a),Ah(o,a),!1;case 1:if(r=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Jr===null||!Jr.has(g))))return o.flags|=65536,p&=-p,o.lanes|=p,p=F1(p),G1(p,a,o,u),Ah(o,p),!1}o=o.return}while(o!==null);return!1}var Zh=Error(s(461)),nn=!1;function An(a,r,o,u){r.child=a===null?Xy(r,null,o,u):qi(r,a.child,o,u)}function Y1(a,r,o,u,p){o=o.render;var g=r.ref;if("ref"in u){var w={};for(var _ in u)_!=="ref"&&(w[_]=u[_])}else w=u;return zi(r),u=Oh(a,r,o,w,g,p),_=Mh(),a!==null&&!nn?(Rh(a,r,p),lr(a,r,p)):(rt&&_&&hh(r),r.flags|=1,An(a,r,u,p),r.child)}function K1(a,r,o,u,p){if(a===null){var g=o.type;return typeof g=="function"&&!uh(g)&&g.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=g,W1(a,r,g,u,p)):(a=Tu(o.type,null,u,r,r.mode,p),a.ref=r.ref,a.return=r,r.child=a)}if(g=a.child,!rm(a,p)){var w=g.memoizedProps;if(o=o.compare,o=o!==null?o:Bl,o(w,u)&&a.ref===r.ref)return lr(a,r,p)}return r.flags|=1,a=nr(g,u),a.ref=r.ref,a.return=r,r.child=a}function W1(a,r,o,u,p){if(a!==null){var g=a.memoizedProps;if(Bl(g,u)&&a.ref===r.ref)if(nn=!1,r.pendingProps=u=g,rm(a,p))(a.flags&131072)!==0&&(nn=!0);else return r.lanes=a.lanes,lr(a,r,p)}return Qh(a,r,o,u,p)}function X1(a,r,o,u){var p=u.children,g=a!==null?a.memoizedState:null;if(a===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,a!==null){for(u=r.child=a.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~g}else u=0,r.child=null;return Z1(a,r,g,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},a!==null&&ju(r,g!==null?g.cachePool:null),g!==null?Jy(r,g):jh(),e1(r);else return u=r.lanes=536870912,Z1(a,r,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(ju(r,g.cachePool),Jy(r,g),Wr(),r.memoizedState=null):(a!==null&&ju(r,null),jh(),Wr());return An(a,r,p,o),r.child}function ec(a,r){return a!==null&&a.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Z1(a,r,o,u,p){var g=Sh();return g=g===null?null:{parent:en._currentValue,pool:g},r.memoizedState={baseLanes:o,cachePool:g},a!==null&&ju(r,null),jh(),e1(r),a!==null&&Oo(a,r,u,!0),r.childLanes=p,null}function Hu(a,r){return r=Gu({mode:r.mode,children:r.children},a.mode),r.ref=a.ref,a.child=r,r.return=a,r}function Q1(a,r,o){return qi(r,a.child,null,o),a=Hu(r,r.pendingProps),a.flags|=2,_a(r),r.memoizedState=null,a}function hC(a,r,o){var u=r.pendingProps,p=(r.flags&128)!==0;if(r.flags&=-129,a===null){if(rt){if(u.mode==="hidden")return a=Hu(r,u),r.lanes=536870912,ec(null,a);if(kh(r),(a=_t)?(a=ux(a,$a),a=a!==null&&a.data==="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:qr!==null?{id:zs,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},o=Ly(a),o.return=r,r.child=o,Tn=r,_t=null)):a=null,a===null)throw Vr(r);return r.lanes=536870912,null}return Hu(r,u)}var g=a.memoizedState;if(g!==null){var w=g.dehydrated;if(kh(r),p)if(r.flags&256)r.flags&=-257,r=Q1(a,r,o);else if(r.memoizedState!==null)r.child=a.child,r.flags|=128,r=null;else throw Error(s(558));else if(nn||Oo(a,r,o,!1),p=(o&a.childLanes)!==0,nn||p){if(u=Nt,u!==null&&(w=Rr(u,o),w!==0&&w!==g.retryLane))throw g.retryLane=w,Mi(a,w),ma(u,a,w),Zh;td(),r=Q1(a,r,o)}else a=g.treeContext,_t=Ha(w.nextSibling),Tn=r,rt=!0,$r=null,$a=!1,a!==null&&Iy(r,a),r=Hu(r,u),r.flags|=4096;return r}return a=nr(a.child,{mode:u.mode,children:u.children}),a.ref=r.ref,r.child=a,a.return=r,a}function Fu(a,r){var o=r.ref;if(o===null)a!==null&&a.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(a===null||a.ref!==o)&&(r.flags|=4194816)}}function Qh(a,r,o,u,p){return zi(r),o=Oh(a,r,o,u,void 0,p),u=Mh(),a!==null&&!nn?(Rh(a,r,p),lr(a,r,p)):(rt&&u&&hh(r),r.flags|=1,An(a,r,o,p),r.child)}function J1(a,r,o,u,p,g){return zi(r),r.updateQueue=null,o=n1(r,u,o,p),t1(a),u=Mh(),a!==null&&!nn?(Rh(a,r,g),lr(a,r,g)):(rt&&u&&hh(r),r.flags|=1,An(a,r,o,g),r.child)}function eb(a,r,o,u,p){if(zi(r),r.stateNode===null){var g=jo,w=o.contextType;typeof w=="object"&&w!==null&&(g=En(w)),g=new o(u,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Wh,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=u,g.state=r.memoizedState,g.refs={},Th(r),w=o.contextType,g.context=typeof w=="object"&&w!==null?En(w):jo,g.state=r.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Kh(r,o,w,u),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&Wh.enqueueReplaceState(g,g.state,null),Wl(r,u,g,p),Kl(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(a===null){g=r.stateNode;var _=r.memoizedProps,$=Vi(o,_);g.props=$;var ee=g.context,ue=o.contextType;w=jo,typeof ue=="object"&&ue!==null&&(w=En(ue));var he=o.getDerivedStateFromProps;ue=typeof he=="function"||typeof g.getSnapshotBeforeUpdate=="function",_=r.pendingProps!==_,ue||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_||ee!==w)&&U1(r,g,u,w),Fr=!1;var ne=r.memoizedState;g.state=ne,Wl(r,u,g,p),Kl(),ee=r.memoizedState,_||ne!==ee||Fr?(typeof he=="function"&&(Kh(r,o,he,u),ee=r.memoizedState),($=Fr||B1(r,o,$,u,ne,ee,w))?(ue||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=ee),g.props=u,g.state=ee,g.context=w,u=$):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{g=r.stateNode,Eh(a,r),w=r.memoizedProps,ue=Vi(o,w),g.props=ue,he=r.pendingProps,ne=g.context,ee=o.contextType,$=jo,typeof ee=="object"&&ee!==null&&($=En(ee)),_=o.getDerivedStateFromProps,(ee=typeof _=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==he||ne!==$)&&U1(r,g,u,$),Fr=!1,ne=r.memoizedState,g.state=ne,Wl(r,u,g,p),Kl();var ie=r.memoizedState;w!==he||ne!==ie||Fr||a!==null&&a.dependencies!==null&&Au(a.dependencies)?(typeof _=="function"&&(Kh(r,o,_,u),ie=r.memoizedState),(ue=Fr||B1(r,o,ue,u,ne,ie,$)||a!==null&&a.dependencies!==null&&Au(a.dependencies))?(ee||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,ie,$),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,ie,$)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===a.memoizedProps&&ne===a.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&ne===a.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ie),g.props=u,g.state=ie,g.context=$,u=ue):(typeof g.componentDidUpdate!="function"||w===a.memoizedProps&&ne===a.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&ne===a.memoizedState||(r.flags|=1024),u=!1)}return g=u,Fu(a,r),u=(r.flags&128)!==0,g||u?(g=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,a!==null&&u?(r.child=qi(r,a.child,null,p),r.child=qi(r,null,o,p)):An(a,r,o,p),r.memoizedState=g.state,a=r.child):a=lr(a,r,p),a}function tb(a,r,o,u){return Li(),r.flags|=256,An(a,r,o,u),r.child}var Jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function em(a){return{baseLanes:a,cachePool:Hy()}}function tm(a,r,o){return a=a!==null?a.childLanes&~o:0,r&&(a|=Da),a}function nb(a,r,o){var u=r.pendingProps,p=!1,g=(r.flags&128)!==0,w;if((w=g)||(w=a!==null&&a.memoizedState===null?!1:(Kt.current&2)!==0),w&&(p=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,a===null){if(rt){if(p?Kr(r):Wr(),(a=_t)?(a=ux(a,$a),a=a!==null&&a.data!=="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:qr!==null?{id:zs,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},o=Ly(a),o.return=r,r.child=o,Tn=r,_t=null)):a=null,a===null)throw Vr(r);return zm(a)?r.lanes=32:r.lanes=536870912,null}var _=u.children;return u=u.fallback,p?(Wr(),p=r.mode,_=Gu({mode:"hidden",children:_},p),u=Ri(u,p,o,null),_.return=r,u.return=r,_.sibling=u,r.child=_,u=r.child,u.memoizedState=em(o),u.childLanes=tm(a,w,o),r.memoizedState=Jh,ec(null,u)):(Kr(r),nm(r,_))}var $=a.memoizedState;if($!==null&&(_=$.dehydrated,_!==null)){if(g)r.flags&256?(Kr(r),r.flags&=-257,r=am(a,r,o)):r.memoizedState!==null?(Wr(),r.child=a.child,r.flags|=128,r=null):(Wr(),_=u.fallback,p=r.mode,u=Gu({mode:"visible",children:u.children},p),_=Ri(_,p,o,null),_.flags|=2,u.return=r,_.return=r,u.sibling=_,r.child=u,qi(r,a.child,null,o),u=r.child,u.memoizedState=em(o),u.childLanes=tm(a,w,o),r.memoizedState=Jh,r=ec(null,u));else if(Kr(r),zm(_)){if(w=_.nextSibling&&_.nextSibling.dataset,w)var ee=w.dgst;w=ee,u=Error(s(419)),u.stack="",u.digest=w,$l({value:u,source:null,stack:null}),r=am(a,r,o)}else if(nn||Oo(a,r,o,!1),w=(o&a.childLanes)!==0,nn||w){if(w=Nt,w!==null&&(u=Rr(w,o),u!==0&&u!==$.retryLane))throw $.retryLane=u,Mi(a,u),ma(w,a,u),Zh;Pm(_)||td(),r=am(a,r,o)}else Pm(_)?(r.flags|=192,r.child=a.child,r=null):(a=$.treeContext,_t=Ha(_.nextSibling),Tn=r,rt=!0,$r=null,$a=!1,a!==null&&Iy(r,a),r=nm(r,u.children),r.flags|=4096);return r}return p?(Wr(),_=u.fallback,p=r.mode,$=a.child,ee=$.sibling,u=nr($,{mode:"hidden",children:u.children}),u.subtreeFlags=$.subtreeFlags&65011712,ee!==null?_=nr(ee,_):(_=Ri(_,p,o,null),_.flags|=2),_.return=r,u.return=r,u.sibling=_,r.child=u,ec(null,u),u=r.child,_=a.child.memoizedState,_===null?_=em(o):(p=_.cachePool,p!==null?($=en._currentValue,p=p.parent!==$?{parent:$,pool:$}:p):p=Hy(),_={baseLanes:_.baseLanes|o,cachePool:p}),u.memoizedState=_,u.childLanes=tm(a,w,o),r.memoizedState=Jh,ec(a.child,u)):(Kr(r),o=a.child,a=o.sibling,o=nr(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,a!==null&&(w=r.deletions,w===null?(r.deletions=[a],r.flags|=16):w.push(a)),r.child=o,r.memoizedState=null,o)}function nm(a,r){return r=Gu({mode:"visible",children:r},a.mode),r.return=a,a.child=r}function Gu(a,r){return a=Ca(22,a,null,r),a.lanes=0,a}function am(a,r,o){return qi(r,a.child,null,o),a=nm(r,r.pendingProps.children),a.flags|=2,r.memoizedState=null,a}function ab(a,r,o){a.lanes|=r;var u=a.alternate;u!==null&&(u.lanes|=r),bh(a.return,r,o)}function sm(a,r,o,u,p,g){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:p,treeForkCount:g}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=o,w.tailMode=p,w.treeForkCount=g)}function sb(a,r,o){var u=r.pendingProps,p=u.revealOrder,g=u.tail;u=u.children;var w=Kt.current,_=(w&2)!==0;if(_?(w=w&1|2,r.flags|=128):w&=1,Z(Kt,w),An(a,r,u,o),u=rt?ql:0,!_&&a!==null&&(a.flags&128)!==0)e:for(a=r.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&ab(a,o,r);else if(a.tag===19)ab(a,o,r);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(p){case"forwards":for(o=r.child,p=null;o!==null;)a=o.alternate,a!==null&&Ru(a)===null&&(p=o),o=o.sibling;o=p,o===null?(p=r.child,r.child=null):(p=o.sibling,o.sibling=null),sm(r,!1,p,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=r.child,r.child=null;p!==null;){if(a=p.alternate,a!==null&&Ru(a)===null){r.child=p;break}a=p.sibling,p.sibling=o,o=p,p=a}sm(r,!0,o,null,g,u);break;case"together":sm(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function lr(a,r,o){if(a!==null&&(r.dependencies=a.dependencies),Qr|=r.lanes,(o&r.childLanes)===0)if(a!==null){if(Oo(a,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(a!==null&&r.child!==a.child)throw Error(s(153));if(r.child!==null){for(a=r.child,o=nr(a,a.pendingProps),r.child=o,o.return=r;a.sibling!==null;)a=a.sibling,o=o.sibling=nr(a,a.pendingProps),o.return=r;o.sibling=null}return r.child}function rm(a,r){return(a.lanes&r)!==0?!0:(a=a.dependencies,!!(a!==null&&Au(a)))}function mC(a,r,o){switch(r.tag){case 3:je(r,r.stateNode.containerInfo),Hr(r,en,a.memoizedState.cache),Li();break;case 27:case 5:ae(r);break;case 4:je(r,r.stateNode.containerInfo);break;case 10:Hr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,kh(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Kr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?nb(a,r,o):(Kr(r),a=lr(a,r,o),a!==null?a.sibling:null);Kr(r);break;case 19:var p=(a.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(Oo(a,r,o,!1),u=(o&r.childLanes)!==0),p){if(u)return sb(a,r,o);r.flags|=128}if(p=r.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Z(Kt,Kt.current),u)break;return null;case 22:return r.lanes=0,X1(a,r,o,r.pendingProps);case 24:Hr(r,en,a.memoizedState.cache)}return lr(a,r,o)}function rb(a,r,o){if(a!==null)if(a.memoizedProps!==r.pendingProps)nn=!0;else{if(!rm(a,o)&&(r.flags&128)===0)return nn=!1,mC(a,r,o);nn=(a.flags&131072)!==0}else nn=!1,rt&&(r.flags&1048576)!==0&&zy(r,ql,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(a=Bi(r.elementType),r.type=a,typeof a=="function")uh(a)?(u=Vi(a,u),r.tag=1,r=eb(null,r,a,u,o)):(r.tag=0,r=Qh(null,r,a,u,o));else{if(a!=null){var p=a.$$typeof;if(p===U){r.tag=11,r=Y1(null,r,a,u,o);break e}else if(p===z){r.tag=14,r=K1(null,r,a,u,o);break e}}throw r=te(a)||a,Error(s(306,r,""))}}return r;case 0:return Qh(a,r,r.type,r.pendingProps,o);case 1:return u=r.type,p=Vi(u,r.pendingProps),eb(a,r,u,p,o);case 3:e:{if(je(r,r.stateNode.containerInfo),a===null)throw Error(s(387));u=r.pendingProps;var g=r.memoizedState;p=g.element,Eh(a,r),Wl(r,u,null,o);var w=r.memoizedState;if(u=w.cache,Hr(r,en,u),u!==g.cache&&xh(r,[en],o,!0),Kl(),u=w.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=tb(a,r,u,o);break e}else if(u!==p){p=Ba(Error(s(424)),r),$l(p),r=tb(a,r,u,o);break e}else for(a=r.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,_t=Ha(a.firstChild),Tn=r,rt=!0,$r=null,$a=!0,o=Xy(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Li(),u===p){r=lr(a,r,o);break e}An(a,r,u,o)}r=r.child}return r;case 26:return Fu(a,r),a===null?(o=gx(r.type,null,r.pendingProps,null))?r.memoizedState=o:rt||(o=r.type,a=r.pendingProps,u=ld(be.current).createElement(o),u[At]=r,u[Jt]=a,Cn(u,o,a),jt(u),r.stateNode=u):r.memoizedState=gx(r.type,a.memoizedProps,r.pendingProps,a.memoizedState),null;case 27:return ae(r),a===null&&rt&&(u=r.stateNode=hx(r.type,r.pendingProps,be.current),Tn=r,$a=!0,p=_t,ai(r.type)?(Im=p,_t=Ha(u.firstChild)):_t=p),An(a,r,r.pendingProps.children,o),Fu(a,r),a===null&&(r.flags|=4194304),r.child;case 5:return a===null&&rt&&((p=u=_t)&&(u=HC(u,r.type,r.pendingProps,$a),u!==null?(r.stateNode=u,Tn=r,_t=Ha(u.firstChild),$a=!1,p=!0):p=!1),p||Vr(r)),ae(r),p=r.type,g=r.pendingProps,w=a!==null?a.memoizedProps:null,u=g.children,Mm(p,g)?u=null:w!==null&&Mm(p,w)&&(r.flags|=32),r.memoizedState!==null&&(p=Oh(a,r,rC,null,null,o),pc._currentValue=p),Fu(a,r),An(a,r,u,o),r.child;case 6:return a===null&&rt&&((a=o=_t)&&(o=FC(o,r.pendingProps,$a),o!==null?(r.stateNode=o,Tn=r,_t=null,a=!0):a=!1),a||Vr(r)),null;case 13:return nb(a,r,o);case 4:return je(r,r.stateNode.containerInfo),u=r.pendingProps,a===null?r.child=qi(r,null,u,o):An(a,r,u,o),r.child;case 11:return Y1(a,r,r.type,r.pendingProps,o);case 7:return An(a,r,r.pendingProps,o),r.child;case 8:return An(a,r,r.pendingProps.children,o),r.child;case 12:return An(a,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,Hr(r,r.type,u.value),An(a,r,u.children,o),r.child;case 9:return p=r.type._context,u=r.pendingProps.children,zi(r),p=En(p),u=u(p),r.flags|=1,An(a,r,u,o),r.child;case 14:return K1(a,r,r.type,r.pendingProps,o);case 15:return W1(a,r,r.type,r.pendingProps,o);case 19:return sb(a,r,o);case 31:return hC(a,r,o);case 22:return X1(a,r,o,r.pendingProps);case 24:return zi(r),u=En(en),a===null?(p=Sh(),p===null&&(p=Nt,g=vh(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=o),p=g),r.memoizedState={parent:u,cache:p},Th(r),Hr(r,en,p)):((a.lanes&o)!==0&&(Eh(a,r),Wl(r,null,null,o),Kl()),p=a.memoizedState,g=r.memoizedState,p.parent!==u?(p={parent:u,cache:u},r.memoizedState=p,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=p),Hr(r,en,u)):(u=g.cache,Hr(r,en,u),u!==p.cache&&xh(r,[en],o,!0))),An(a,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function cr(a){a.flags|=4}function im(a,r,o,u,p){if((r=(a.mode&32)!==0)&&(r=!1),r){if(a.flags|=16777216,(p&335544128)===p)if(a.stateNode.complete)a.flags|=8192;else if(Ob())a.flags|=8192;else throw Ui=ku,Nh}else a.flags&=-16777217}function ib(a,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!wx(r))if(Ob())a.flags|=8192;else throw Ui=ku,Nh}function Yu(a,r){r!==null&&(a.flags|=4),a.flags&16384&&(r=a.tag!==22?rs():536870912,a.lanes|=r,Ho|=r)}function tc(a,r){if(!rt)switch(a.tailMode){case"hidden":r=a.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?a.tail=null:o.sibling=null;break;case"collapsed":o=a.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||a.tail===null?a.tail=null:a.tail.sibling=null:u.sibling=null}}function kt(a){var r=a.alternate!==null&&a.alternate.child===a.child,o=0,u=0;if(r)for(var p=a.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=a,p=p.sibling;else for(p=a.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=a,p=p.sibling;return a.subtreeFlags|=u,a.childLanes=o,r}function pC(a,r,o){var u=r.pendingProps;switch(mh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(r),null;case 1:return kt(r),null;case 3:return o=r.stateNode,u=null,a!==null&&(u=a.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),rr(en),X(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(a===null||a.child===null)&&(Do(r)?cr(r):a===null||a.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,gh())),kt(r),null;case 26:var p=r.type,g=r.memoizedState;return a===null?(cr(r),g!==null?(kt(r),ib(r,g)):(kt(r),im(r,p,null,u,o))):g?g!==a.memoizedState?(cr(r),kt(r),ib(r,g)):(kt(r),r.flags&=-16777217):(a=a.memoizedProps,a!==u&&cr(r),kt(r),im(r,p,a,u,o)),null;case 27:if(pe(r),o=be.current,p=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==u&&cr(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return kt(r),null}a=le.current,Do(r)?By(r):(a=hx(p,u,o),r.stateNode=a,cr(r))}return kt(r),null;case 5:if(pe(r),p=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==u&&cr(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return kt(r),null}if(g=le.current,Do(r))By(r);else{var w=ld(be.current);switch(g){case 1:g=w.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=w.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=w.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?w.createElement(p,{is:u.is}):w.createElement(p)}}g[At]=r,g[Jt]=u;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)g.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=g;e:switch(Cn(g,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&cr(r)}}return kt(r),im(r,r.type,a===null?null:a.memoizedProps,r.pendingProps,o),null;case 6:if(a&&r.stateNode!=null)a.memoizedProps!==u&&cr(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(a=be.current,Do(r)){if(a=r.stateNode,o=r.memoizedProps,u=null,p=Tn,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}a[At]=r,a=!!(a.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||nx(a.nodeValue,o)),a||Vr(r,!0)}else a=ld(a).createTextNode(u),a[At]=r,r.stateNode=a}return kt(r),null;case 31:if(o=r.memoizedState,a===null||a.memoizedState!==null){if(u=Do(r),o!==null){if(a===null){if(!u)throw Error(s(318));if(a=r.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(557));a[At]=r}else Li(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;kt(r),a=!1}else o=gh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=o),a=!0;if(!a)return r.flags&256?(_a(r),r):(_a(r),null);if((r.flags&128)!==0)throw Error(s(558))}return kt(r),null;case 13:if(u=r.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(p=Do(r),u!==null&&u.dehydrated!==null){if(a===null){if(!p)throw Error(s(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[At]=r}else Li(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;kt(r),p=!1}else p=gh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),p=!0;if(!p)return r.flags&256?(_a(r),r):(_a(r),null)}return _a(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,a=a!==null&&a.memoizedState!==null,o&&(u=r.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048)),o!==a&&o&&(r.child.flags|=8192),Yu(r,r.updateQueue),kt(r),null);case 4:return X(),a===null&&jm(r.stateNode.containerInfo),kt(r),null;case 10:return rr(r.type),kt(r),null;case 19:if(K(Kt),u=r.memoizedState,u===null)return kt(r),null;if(p=(r.flags&128)!==0,g=u.rendering,g===null)if(p)tc(u,!1);else{if(Ht!==0||a!==null&&(a.flags&128)!==0)for(a=r.child;a!==null;){if(g=Ru(a),g!==null){for(r.flags|=128,tc(u,!1),a=g.updateQueue,r.updateQueue=a,Yu(r,a),r.subtreeFlags=0,a=o,o=r.child;o!==null;)Ry(o,a),o=o.sibling;return Z(Kt,Kt.current&1|2),rt&&ar(r,u.treeForkCount),r.child}a=a.sibling}u.tail!==null&&Je()>Qu&&(r.flags|=128,p=!0,tc(u,!1),r.lanes=4194304)}else{if(!p)if(a=Ru(g),a!==null){if(r.flags|=128,p=!0,a=a.updateQueue,r.updateQueue=a,Yu(r,a),tc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!rt)return kt(r),null}else 2*Je()-u.renderingStartTime>Qu&&o!==536870912&&(r.flags|=128,p=!0,tc(u,!1),r.lanes=4194304);u.isBackwards?(g.sibling=r.child,r.child=g):(a=u.last,a!==null?a.sibling=g:r.child=g,u.last=g)}return u.tail!==null?(a=u.tail,u.rendering=a,u.tail=a.sibling,u.renderingStartTime=Je(),a.sibling=null,o=Kt.current,Z(Kt,p?o&1|2:o&1),rt&&ar(r,u.treeForkCount),a):(kt(r),null);case 22:case 23:return _a(r),_h(),u=r.memoizedState!==null,a!==null?a.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(kt(r),r.subtreeFlags&6&&(r.flags|=8192)):kt(r),o=r.updateQueue,o!==null&&Yu(r,o.retryQueue),o=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),a!==null&&K(Ii),null;case 24:return o=null,a!==null&&(o=a.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),rr(en),kt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function gC(a,r){switch(mh(r),r.tag){case 1:return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 3:return rr(en),X(),a=r.flags,(a&65536)!==0&&(a&128)===0?(r.flags=a&-65537|128,r):null;case 26:case 27:case 5:return pe(r),null;case 31:if(r.memoizedState!==null){if(_a(r),r.alternate===null)throw Error(s(340));Li()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 13:if(_a(r),a=r.memoizedState,a!==null&&a.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Li()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 19:return K(Kt),null;case 4:return X(),null;case 10:return rr(r.type),null;case 22:case 23:return _a(r),_h(),a!==null&&K(Ii),a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 24:return rr(en),null;case 25:return null;default:return null}}function ob(a,r){switch(mh(r),r.tag){case 3:rr(en),X();break;case 26:case 27:case 5:pe(r);break;case 4:X();break;case 31:r.memoizedState!==null&&_a(r);break;case 13:_a(r);break;case 19:K(Kt);break;case 10:rr(r.type);break;case 22:case 23:_a(r),_h(),a!==null&&K(Ii);break;case 24:rr(en)}}function nc(a,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&a)===a){u=void 0;var g=o.create,w=o.inst;u=g(),w.destroy=u}o=o.next}while(o!==p)}}catch(_){bt(r,r.return,_)}}function Xr(a,r,o){try{var u=r.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var g=p.next;u=g;do{if((u.tag&a)===a){var w=u.inst,_=w.destroy;if(_!==void 0){w.destroy=void 0,p=r;var $=o,ee=_;try{ee()}catch(ue){bt(p,$,ue)}}}u=u.next}while(u!==g)}}catch(ue){bt(r,r.return,ue)}}function lb(a){var r=a.updateQueue;if(r!==null){var o=a.stateNode;try{Qy(r,o)}catch(u){bt(a,a.return,u)}}}function cb(a,r,o){o.props=Vi(a.type,a.memoizedProps),o.state=a.memoizedState;try{o.componentWillUnmount()}catch(u){bt(a,r,u)}}function ac(a,r){try{var o=a.ref;if(o!==null){switch(a.tag){case 26:case 27:case 5:var u=a.stateNode;break;case 30:u=a.stateNode;break;default:u=a.stateNode}typeof o=="function"?a.refCleanup=o(u):o.current=u}}catch(p){bt(a,r,p)}}function Bs(a,r){var o=a.ref,u=a.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(p){bt(a,r,p)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){bt(a,r,p)}else o.current=null}function ub(a){var r=a.type,o=a.memoizedProps,u=a.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(p){bt(a,a.return,p)}}function om(a,r,o){try{var u=a.stateNode;IC(u,a.type,o,r),u[Jt]=r}catch(p){bt(a,a.return,p)}}function db(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&ai(a.type)||a.tag===4}function lm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||db(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&ai(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function cm(a,r,o){var u=a.tag;if(u===5||u===6)a=a.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(a,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(a),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ca));else if(u!==4&&(u===27&&ai(a.type)&&(o=a.stateNode,r=null),a=a.child,a!==null))for(cm(a,r,o),a=a.sibling;a!==null;)cm(a,r,o),a=a.sibling}function Ku(a,r,o){var u=a.tag;if(u===5||u===6)a=a.stateNode,r?o.insertBefore(a,r):o.appendChild(a);else if(u!==4&&(u===27&&ai(a.type)&&(o=a.stateNode),a=a.child,a!==null))for(Ku(a,r,o),a=a.sibling;a!==null;)Ku(a,r,o),a=a.sibling}function fb(a){var r=a.stateNode,o=a.memoizedProps;try{for(var u=a.type,p=r.attributes;p.length;)r.removeAttributeNode(p[0]);Cn(r,u,o),r[At]=a,r[Jt]=o}catch(g){bt(a,a.return,g)}}var ur=!1,an=!1,um=!1,hb=typeof WeakSet=="function"?WeakSet:Set,vn=null;function yC(a,r){if(a=a.containerInfo,Dm=pd,a=Ey(a),ah(a)){if("selectionStart"in a)var o={start:a.selectionStart,end:a.selectionEnd};else e:{o=(o=a.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var p=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var w=0,_=-1,$=-1,ee=0,ue=0,he=a,ne=null;t:for(;;){for(var ie;he!==o||p!==0&&he.nodeType!==3||(_=w+p),he!==g||u!==0&&he.nodeType!==3||($=w+u),he.nodeType===3&&(w+=he.nodeValue.length),(ie=he.firstChild)!==null;)ne=he,he=ie;for(;;){if(he===a)break t;if(ne===o&&++ee===p&&(_=w),ne===g&&++ue===u&&($=w),(ie=he.nextSibling)!==null)break;he=ne,ne=he.parentNode}he=ie}o=_===-1||$===-1?null:{start:_,end:$}}else o=null}o=o||{start:0,end:0}}else o=null;for(Om={focusedElem:a,selectionRange:o},pd=!1,vn=r;vn!==null;)if(r=vn,a=r.child,(r.subtreeFlags&1028)!==0&&a!==null)a.return=r,vn=a;else for(;vn!==null;){switch(r=vn,g=r.alternate,a=r.flags,r.tag){case 0:if((a&4)!==0&&(a=r.updateQueue,a=a!==null?a.events:null,a!==null))for(o=0;o<a.length;o++)p=a[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&g!==null){a=void 0,o=r,p=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var _e=Vi(o.type,p);a=u.getSnapshotBeforeUpdate(_e,g),u.__reactInternalSnapshotBeforeUpdate=a}catch(Ve){bt(o,o.return,Ve)}}break;case 3:if((a&1024)!==0){if(a=r.stateNode.containerInfo,o=a.nodeType,o===9)Lm(a);else if(o===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Lm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=r.sibling,a!==null){a.return=r.return,vn=a;break}vn=r.return}}function mb(a,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:fr(a,o),u&4&&nc(5,o);break;case 1:if(fr(a,o),u&4)if(a=o.stateNode,r===null)try{a.componentDidMount()}catch(w){bt(o,o.return,w)}else{var p=Vi(o.type,r.memoizedProps);r=r.memoizedState;try{a.componentDidUpdate(p,r,a.__reactInternalSnapshotBeforeUpdate)}catch(w){bt(o,o.return,w)}}u&64&&lb(o),u&512&&ac(o,o.return);break;case 3:if(fr(a,o),u&64&&(a=o.updateQueue,a!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Qy(a,r)}catch(w){bt(o,o.return,w)}}break;case 27:r===null&&u&4&&fb(o);case 26:case 5:fr(a,o),r===null&&u&4&&ub(o),u&512&&ac(o,o.return);break;case 12:fr(a,o);break;case 31:fr(a,o),u&4&&yb(a,o);break;case 13:fr(a,o),u&4&&bb(a,o),u&64&&(a=o.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(o=AC.bind(null,o),GC(a,o))));break;case 22:if(u=o.memoizedState!==null||ur,!u){r=r!==null&&r.memoizedState!==null||an,p=ur;var g=an;ur=u,(an=r)&&!g?hr(a,o,(o.subtreeFlags&8772)!==0):fr(a,o),ur=p,an=g}break;case 30:break;default:fr(a,o)}}function pb(a){var r=a.alternate;r!==null&&(a.alternate=null,pb(r)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(r=a.stateNode,r!==null&&js(r)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Rt=null,ua=!1;function dr(a,r,o){for(o=o.child;o!==null;)gb(a,r,o),o=o.sibling}function gb(a,r,o){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(wn,o)}catch{}switch(o.tag){case 26:an||Bs(o,r),dr(a,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:an||Bs(o,r);var u=Rt,p=ua;ai(o.type)&&(Rt=o.stateNode,ua=!1),dr(a,r,o),fc(o.stateNode),Rt=u,ua=p;break;case 5:an||Bs(o,r);case 6:if(u=Rt,p=ua,Rt=null,dr(a,r,o),Rt=u,ua=p,Rt!==null)if(ua)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(o.stateNode)}catch(g){bt(o,r,g)}else try{Rt.removeChild(o.stateNode)}catch(g){bt(o,r,g)}break;case 18:Rt!==null&&(ua?(a=Rt,lx(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.stateNode),Qo(a)):lx(Rt,o.stateNode));break;case 4:u=Rt,p=ua,Rt=o.stateNode.containerInfo,ua=!0,dr(a,r,o),Rt=u,ua=p;break;case 0:case 11:case 14:case 15:Xr(2,o,r),an||Xr(4,o,r),dr(a,r,o);break;case 1:an||(Bs(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&cb(o,r,u)),dr(a,r,o);break;case 21:dr(a,r,o);break;case 22:an=(u=an)||o.memoizedState!==null,dr(a,r,o),an=u;break;default:dr(a,r,o)}}function yb(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Qo(a)}catch(o){bt(r,r.return,o)}}}function bb(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Qo(a)}catch(o){bt(r,r.return,o)}}function bC(a){switch(a.tag){case 31:case 13:case 19:var r=a.stateNode;return r===null&&(r=a.stateNode=new hb),r;case 22:return a=a.stateNode,r=a._retryCache,r===null&&(r=a._retryCache=new hb),r;default:throw Error(s(435,a.tag))}}function Wu(a,r){var o=bC(a);r.forEach(function(u){if(!o.has(u)){o.add(u);var p=CC.bind(null,a,u);u.then(p,p)}})}function da(a,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var p=o[u],g=a,w=r,_=w;e:for(;_!==null;){switch(_.tag){case 27:if(ai(_.type)){Rt=_.stateNode,ua=!1;break e}break;case 5:Rt=_.stateNode,ua=!1;break e;case 3:case 4:Rt=_.stateNode.containerInfo,ua=!0;break e}_=_.return}if(Rt===null)throw Error(s(160));gb(g,w,p),Rt=null,ua=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)xb(r,a),r=r.sibling}var fs=null;function xb(a,r){var o=a.alternate,u=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:da(r,a),fa(a),u&4&&(Xr(3,a,a.return),nc(3,a),Xr(5,a,a.return));break;case 1:da(r,a),fa(a),u&512&&(an||o===null||Bs(o,o.return)),u&64&&ur&&(a=a.updateQueue,a!==null&&(u=a.callbacks,u!==null&&(o=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var p=fs;if(da(r,a),fa(a),u&512&&(an||o===null||Bs(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=a.memoizedState,o===null)if(u===null)if(a.stateNode===null){e:{u=a.type,o=a.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":g=p.getElementsByTagName("title")[0],(!g||g[ls]||g[At]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(u),p.head.insertBefore(g,p.querySelector("head > title"))),Cn(g,u,o),g[At]=a,jt(g),u=g;break e;case"link":var w=xx("link","href",p).get(u+(o.href||""));if(w){for(var _=0;_<w.length;_++)if(g=w[_],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(_,1);break t}}g=p.createElement(u),Cn(g,u,o),p.head.appendChild(g);break;case"meta":if(w=xx("meta","content",p).get(u+(o.content||""))){for(_=0;_<w.length;_++)if(g=w[_],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(_,1);break t}}g=p.createElement(u),Cn(g,u,o),p.head.appendChild(g);break;default:throw Error(s(468,u))}g[At]=a,jt(g),u=g}a.stateNode=u}else vx(p,a.type,a.stateNode);else a.stateNode=bx(p,u,a.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?vx(p,a.type,a.stateNode):bx(p,u,a.memoizedProps)):u===null&&a.stateNode!==null&&om(a,a.memoizedProps,o.memoizedProps)}break;case 27:da(r,a),fa(a),u&512&&(an||o===null||Bs(o,o.return)),o!==null&&u&4&&om(a,a.memoizedProps,o.memoizedProps);break;case 5:if(da(r,a),fa(a),u&512&&(an||o===null||Bs(o,o.return)),a.flags&32){p=a.stateNode;try{zn(p,"")}catch(_e){bt(a,a.return,_e)}}u&4&&a.stateNode!=null&&(p=a.memoizedProps,om(a,p,o!==null?o.memoizedProps:p)),u&1024&&(um=!0);break;case 6:if(da(r,a),fa(a),u&4){if(a.stateNode===null)throw Error(s(162));u=a.memoizedProps,o=a.stateNode;try{o.nodeValue=u}catch(_e){bt(a,a.return,_e)}}break;case 3:if(dd=null,p=fs,fs=cd(r.containerInfo),da(r,a),fs=p,fa(a),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Qo(r.containerInfo)}catch(_e){bt(a,a.return,_e)}um&&(um=!1,vb(a));break;case 4:u=fs,fs=cd(a.stateNode.containerInfo),da(r,a),fa(a),fs=u;break;case 12:da(r,a),fa(a);break;case 31:da(r,a),fa(a),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Wu(a,u)));break;case 13:da(r,a),fa(a),a.child.flags&8192&&a.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Zu=Je()),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Wu(a,u)));break;case 22:p=a.memoizedState!==null;var $=o!==null&&o.memoizedState!==null,ee=ur,ue=an;if(ur=ee||p,an=ue||$,da(r,a),an=ue,ur=ee,fa(a),u&8192)e:for(r=a.stateNode,r._visibility=p?r._visibility&-2:r._visibility|1,p&&(o===null||$||ur||an||Hi(a)),o=null,r=a;;){if(r.tag===5||r.tag===26){if(o===null){$=o=r;try{if(g=$.stateNode,p)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{_=$.stateNode;var he=$.memoizedProps.style,ne=he!=null&&he.hasOwnProperty("display")?he.display:null;_.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(_e){bt($,$.return,_e)}}}else if(r.tag===6){if(o===null){$=r;try{$.stateNode.nodeValue=p?"":$.memoizedProps}catch(_e){bt($,$.return,_e)}}}else if(r.tag===18){if(o===null){$=r;try{var ie=$.stateNode;p?cx(ie,!0):cx($.stateNode,!1)}catch(_e){bt($,$.return,_e)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===a)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=a.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Wu(a,o))));break;case 19:da(r,a),fa(a),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Wu(a,u)));break;case 30:break;case 21:break;default:da(r,a),fa(a)}}function fa(a){var r=a.flags;if(r&2){try{for(var o,u=a.return;u!==null;){if(db(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var p=o.stateNode,g=lm(a);Ku(a,g,p);break;case 5:var w=o.stateNode;o.flags&32&&(zn(w,""),o.flags&=-33);var _=lm(a);Ku(a,_,w);break;case 3:case 4:var $=o.stateNode.containerInfo,ee=lm(a);cm(a,ee,$);break;default:throw Error(s(161))}}catch(ue){bt(a,a.return,ue)}a.flags&=-3}r&4096&&(a.flags&=-4097)}function vb(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var r=a;vb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),a=a.sibling}}function fr(a,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)mb(a,r.alternate,r),r=r.sibling}function Hi(a){for(a=a.child;a!==null;){var r=a;switch(r.tag){case 0:case 11:case 14:case 15:Xr(4,r,r.return),Hi(r);break;case 1:Bs(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&cb(r,r.return,o),Hi(r);break;case 27:fc(r.stateNode);case 26:case 5:Bs(r,r.return),Hi(r);break;case 22:r.memoizedState===null&&Hi(r);break;case 30:Hi(r);break;default:Hi(r)}a=a.sibling}}function hr(a,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,p=a,g=r,w=g.flags;switch(g.tag){case 0:case 11:case 15:hr(p,g,o),nc(4,g);break;case 1:if(hr(p,g,o),u=g,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ee){bt(u,u.return,ee)}if(u=g,p=u.updateQueue,p!==null){var _=u.stateNode;try{var $=p.shared.hiddenCallbacks;if($!==null)for(p.shared.hiddenCallbacks=null,p=0;p<$.length;p++)Zy($[p],_)}catch(ee){bt(u,u.return,ee)}}o&&w&64&&lb(g),ac(g,g.return);break;case 27:fb(g);case 26:case 5:hr(p,g,o),o&&u===null&&w&4&&ub(g),ac(g,g.return);break;case 12:hr(p,g,o);break;case 31:hr(p,g,o),o&&w&4&&yb(p,g);break;case 13:hr(p,g,o),o&&w&4&&bb(p,g);break;case 22:g.memoizedState===null&&hr(p,g,o),ac(g,g.return);break;case 30:break;default:hr(p,g,o)}r=r.sibling}}function dm(a,r){var o=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==o&&(a!=null&&a.refCount++,o!=null&&Vl(o))}function fm(a,r){a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Vl(a))}function hs(a,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)wb(a,r,o,u),r=r.sibling}function wb(a,r,o,u){var p=r.flags;switch(r.tag){case 0:case 11:case 15:hs(a,r,o,u),p&2048&&nc(9,r);break;case 1:hs(a,r,o,u);break;case 3:hs(a,r,o,u),p&2048&&(a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Vl(a)));break;case 12:if(p&2048){hs(a,r,o,u),a=r.stateNode;try{var g=r.memoizedProps,w=g.id,_=g.onPostCommit;typeof _=="function"&&_(w,r.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch($){bt(r,r.return,$)}}else hs(a,r,o,u);break;case 31:hs(a,r,o,u);break;case 13:hs(a,r,o,u);break;case 23:break;case 22:g=r.stateNode,w=r.alternate,r.memoizedState!==null?g._visibility&2?hs(a,r,o,u):sc(a,r):g._visibility&2?hs(a,r,o,u):(g._visibility|=2,qo(a,r,o,u,(r.subtreeFlags&10256)!==0||!1)),p&2048&&dm(w,r);break;case 24:hs(a,r,o,u),p&2048&&fm(r.alternate,r);break;default:hs(a,r,o,u)}}function qo(a,r,o,u,p){for(p=p&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var g=a,w=r,_=o,$=u,ee=w.flags;switch(w.tag){case 0:case 11:case 15:qo(g,w,_,$,p),nc(8,w);break;case 23:break;case 22:var ue=w.stateNode;w.memoizedState!==null?ue._visibility&2?qo(g,w,_,$,p):sc(g,w):(ue._visibility|=2,qo(g,w,_,$,p)),p&&ee&2048&&dm(w.alternate,w);break;case 24:qo(g,w,_,$,p),p&&ee&2048&&fm(w.alternate,w);break;default:qo(g,w,_,$,p)}r=r.sibling}}function sc(a,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=a,u=r,p=u.flags;switch(u.tag){case 22:sc(o,u),p&2048&&dm(u.alternate,u);break;case 24:sc(o,u),p&2048&&fm(u.alternate,u);break;default:sc(o,u)}r=r.sibling}}var rc=8192;function $o(a,r,o){if(a.subtreeFlags&rc)for(a=a.child;a!==null;)Sb(a,r,o),a=a.sibling}function Sb(a,r,o){switch(a.tag){case 26:$o(a,r,o),a.flags&rc&&a.memoizedState!==null&&sj(o,fs,a.memoizedState,a.memoizedProps);break;case 5:$o(a,r,o);break;case 3:case 4:var u=fs;fs=cd(a.stateNode.containerInfo),$o(a,r,o),fs=u;break;case 22:a.memoizedState===null&&(u=a.alternate,u!==null&&u.memoizedState!==null?(u=rc,rc=16777216,$o(a,r,o),rc=u):$o(a,r,o));break;default:$o(a,r,o)}}function Nb(a){var r=a.alternate;if(r!==null&&(a=r.child,a!==null)){r.child=null;do r=a.sibling,a.sibling=null,a=r;while(a!==null)}}function ic(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];vn=u,Eb(u,a)}Nb(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Tb(a),a=a.sibling}function Tb(a){switch(a.tag){case 0:case 11:case 15:ic(a),a.flags&2048&&Xr(9,a,a.return);break;case 3:ic(a);break;case 12:ic(a);break;case 22:var r=a.stateNode;a.memoizedState!==null&&r._visibility&2&&(a.return===null||a.return.tag!==13)?(r._visibility&=-3,Xu(a)):ic(a);break;default:ic(a)}}function Xu(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];vn=u,Eb(u,a)}Nb(a)}for(a=a.child;a!==null;){switch(r=a,r.tag){case 0:case 11:case 15:Xr(8,r,r.return),Xu(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Xu(r));break;default:Xu(r)}a=a.sibling}}function Eb(a,r){for(;vn!==null;){var o=vn;switch(o.tag){case 0:case 11:case 15:Xr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Vl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,vn=u;else e:for(o=a;vn!==null;){u=vn;var p=u.sibling,g=u.return;if(pb(u),u===o){vn=null;break e}if(p!==null){p.return=g,vn=p;break e}vn=g}}}var xC={getCacheForType:function(a){var r=En(en),o=r.data.get(a);return o===void 0&&(o=a(),r.data.set(a,o)),o},cacheSignal:function(){return En(en).controller.signal}},vC=typeof WeakMap=="function"?WeakMap:Map,ht=0,Nt=null,et=null,nt=0,yt=0,ka=null,Zr=!1,Vo=!1,hm=!1,mr=0,Ht=0,Qr=0,Fi=0,mm=0,Da=0,Ho=0,oc=null,ha=null,pm=!1,Zu=0,Ab=0,Qu=1/0,Ju=null,Jr=null,dn=0,ei=null,Fo=null,pr=0,gm=0,ym=null,Cb=null,lc=0,bm=null;function Oa(){return(ht&2)!==0&&nt!==0?nt&-nt:C.T!==null?Tm():Ut()}function jb(){if(Da===0)if((nt&536870912)===0||rt){var a=ea;ea<<=1,(ea&3932160)===0&&(ea=262144),Da=a}else Da=536870912;return a=ja.current,a!==null&&(a.flags|=32),Da}function ma(a,r,o){(a===Nt&&(yt===2||yt===9)||a.cancelPendingCommit!==null)&&(Go(a,0),ti(a,nt,Da,!1)),ta(a,o),((ht&2)===0||a!==Nt)&&(a===Nt&&((ht&2)===0&&(Fi|=o),Ht===4&&ti(a,nt,Da,!1)),Us(a))}function _b(a,r,o){if((ht&6)!==0)throw Error(s(327));var u=!o&&(r&127)===0&&(r&a.expiredLanes)===0||xa(a,r),p=u?NC(a,r):vm(a,r,!0),g=u;do{if(p===0){Vo&&!u&&ti(a,r,0,!1);break}else{if(o=a.current.alternate,g&&!wC(o)){p=vm(a,r,!1),g=!1;continue}if(p===2){if(g=r,a.errorRecoveryDisabledLanes&g)var w=0;else w=a.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var _=a;p=oc;var $=_.current.memoizedState.isDehydrated;if($&&(Go(_,w).flags|=256),w=vm(_,w,!1),w!==2){if(hm&&!$){_.errorRecoveryDisabledLanes|=g,Fi|=g,p=4;break e}g=ha,ha=p,g!==null&&(ha===null?ha=g:ha.push.apply(ha,g))}p=w}if(g=!1,p!==2)continue}}if(p===1){Go(a,0),ti(a,r,0,!0);break}e:{switch(u=a,g=p,g){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ti(u,r,Da,!Zr);break e;case 2:ha=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(p=Zu+300-Je(),10<p)){if(ti(u,r,Da,!Zr),Mn(u,0,!0)!==0)break e;pr=r,u.timeoutHandle=ix(kb.bind(null,u,o,ha,Ju,pm,r,Da,Fi,Ho,Zr,g,"Throttled",-0,0),p);break e}kb(u,o,ha,Ju,pm,r,Da,Fi,Ho,Zr,g,null,-0,0)}}break}while(!0);Us(a)}function kb(a,r,o,u,p,g,w,_,$,ee,ue,he,ne,ie){if(a.timeoutHandle=-1,he=r.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ca},Sb(r,g,he);var _e=(g&62914560)===g?Zu-Je():(g&4194048)===g?Ab-Je():0;if(_e=rj(he,_e),_e!==null){pr=g,a.cancelPendingCommit=_e(Ib.bind(null,a,r,g,o,u,p,w,_,$,ue,he,null,ne,ie)),ti(a,g,w,!ee);return}}Ib(a,r,g,o,u,p,w,_,$)}function wC(a){for(var r=a;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var p=o[u],g=p.getSnapshot;p=p.value;try{if(!Aa(g(),p))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ti(a,r,o,u){r&=~mm,r&=~Fi,a.suspendedLanes|=r,a.pingedLanes&=~r,u&&(a.warmLanes|=r),u=a.expirationTimes;for(var p=r;0<p;){var g=31-Bt(p),w=1<<g;u[g]=-1,p&=~w}o!==0&&Cs(a,o,r)}function ed(){return(ht&6)===0?(cc(0),!1):!0}function xm(){if(et!==null){if(yt===0)var a=et.return;else a=et,sr=Pi=null,Lh(a),Po=null,Fl=0,a=et;for(;a!==null;)ob(a.alternate,a),a=a.return;et=null}}function Go(a,r){var o=a.timeoutHandle;o!==-1&&(a.timeoutHandle=-1,qC(o)),o=a.cancelPendingCommit,o!==null&&(a.cancelPendingCommit=null,o()),pr=0,xm(),Nt=a,et=o=nr(a.current,null),nt=r,yt=0,ka=null,Zr=!1,Vo=xa(a,r),hm=!1,Ho=Da=mm=Fi=Qr=Ht=0,ha=oc=null,pm=!1,(r&8)!==0&&(r|=r&32);var u=a.entangledLanes;if(u!==0)for(a=a.entanglements,u&=r;0<u;){var p=31-Bt(u),g=1<<p;r|=a[p],u&=~g}return mr=r,wu(),o}function Db(a,r){Ke=null,C.H=Jl,r===Lo||r===_u?(r=Yy(),yt=3):r===Nh?(r=Yy(),yt=4):yt=r===Zh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ka=r,et===null&&(Ht=1,Vu(a,Ba(r,a.current)))}function Ob(){var a=ja.current;return a===null?!0:(nt&4194048)===nt?Va===null:(nt&62914560)===nt||(nt&536870912)!==0?a===Va:!1}function Mb(){var a=C.H;return C.H=Jl,a===null?Jl:a}function Rb(){var a=C.A;return C.A=xC,a}function td(){Ht=4,Zr||(nt&4194048)!==nt&&ja.current!==null||(Vo=!0),(Qr&134217727)===0&&(Fi&134217727)===0||Nt===null||ti(Nt,nt,Da,!1)}function vm(a,r,o){var u=ht;ht|=2;var p=Mb(),g=Rb();(Nt!==a||nt!==r)&&(Ju=null,Go(a,r)),r=!1;var w=Ht;e:do try{if(yt!==0&&et!==null){var _=et,$=ka;switch(yt){case 8:xm(),w=6;break e;case 3:case 2:case 9:case 6:ja.current===null&&(r=!0);var ee=yt;if(yt=0,ka=null,Yo(a,_,$,ee),o&&Vo){w=0;break e}break;default:ee=yt,yt=0,ka=null,Yo(a,_,$,ee)}}SC(),w=Ht;break}catch(ue){Db(a,ue)}while(!0);return r&&a.shellSuspendCounter++,sr=Pi=null,ht=u,C.H=p,C.A=g,et===null&&(Nt=null,nt=0,wu()),w}function SC(){for(;et!==null;)Lb(et)}function NC(a,r){var o=ht;ht|=2;var u=Mb(),p=Rb();Nt!==a||nt!==r?(Ju=null,Qu=Je()+500,Go(a,r)):Vo=xa(a,r);e:do try{if(yt!==0&&et!==null){r=et;var g=ka;t:switch(yt){case 1:yt=0,ka=null,Yo(a,r,g,1);break;case 2:case 9:if(Fy(g)){yt=0,ka=null,Pb(r);break}r=function(){yt!==2&&yt!==9||Nt!==a||(yt=7),Us(a)},g.then(r,r);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:Fy(g)?(yt=0,ka=null,Pb(r)):(yt=0,ka=null,Yo(a,r,g,7));break;case 5:var w=null;switch(et.tag){case 26:w=et.memoizedState;case 5:case 27:var _=et;if(w?wx(w):_.stateNode.complete){yt=0,ka=null;var $=_.sibling;if($!==null)et=$;else{var ee=_.return;ee!==null?(et=ee,nd(ee)):et=null}break t}}yt=0,ka=null,Yo(a,r,g,5);break;case 6:yt=0,ka=null,Yo(a,r,g,6);break;case 8:xm(),Ht=6;break e;default:throw Error(s(462))}}TC();break}catch(ue){Db(a,ue)}while(!0);return sr=Pi=null,C.H=u,C.A=p,ht=o,et!==null?0:(Nt=null,nt=0,wu(),Ht)}function TC(){for(;et!==null&&!gt();)Lb(et)}function Lb(a){var r=rb(a.alternate,a,mr);a.memoizedProps=a.pendingProps,r===null?nd(a):et=r}function Pb(a){var r=a,o=r.alternate;switch(r.tag){case 15:case 0:r=J1(o,r,r.pendingProps,r.type,void 0,nt);break;case 11:r=J1(o,r,r.pendingProps,r.type.render,r.ref,nt);break;case 5:Lh(r);default:ob(o,r),r=et=Ry(r,mr),r=rb(o,r,mr)}a.memoizedProps=a.pendingProps,r===null?nd(a):et=r}function Yo(a,r,o,u){sr=Pi=null,Lh(r),Po=null,Fl=0;var p=r.return;try{if(fC(a,p,r,o,nt)){Ht=1,Vu(a,Ba(o,a.current)),et=null;return}}catch(g){if(p!==null)throw et=p,g;Ht=1,Vu(a,Ba(o,a.current)),et=null;return}r.flags&32768?(rt||u===1?a=!0:Vo||(nt&536870912)!==0?a=!1:(Zr=a=!0,(u===2||u===9||u===3||u===6)&&(u=ja.current,u!==null&&u.tag===13&&(u.flags|=16384))),zb(r,a)):nd(r)}function nd(a){var r=a;do{if((r.flags&32768)!==0){zb(r,Zr);return}a=r.return;var o=pC(r.alternate,r,mr);if(o!==null){et=o;return}if(r=r.sibling,r!==null){et=r;return}et=r=a}while(r!==null);Ht===0&&(Ht=5)}function zb(a,r){do{var o=gC(a.alternate,a);if(o!==null){o.flags&=32767,et=o;return}if(o=a.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(a=a.sibling,a!==null)){et=a;return}et=a=o}while(a!==null);Ht=6,et=null}function Ib(a,r,o,u,p,g,w,_,$){a.cancelPendingCommit=null;do ad();while(dn!==0);if((ht&6)!==0)throw Error(s(327));if(r!==null){if(r===a.current)throw Error(s(177));if(g=r.lanes|r.childLanes,g|=lh,na(a,o,g,w,_,$),a===Nt&&(et=Nt=null,nt=0),Fo=r,ei=a,pr=o,gm=g,ym=p,Cb=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,jC(lt,function(){return Vb(),null})):(a.callbackNode=null,a.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=C.T,C.T=null,p=I.p,I.p=2,w=ht,ht|=4;try{yC(a,r,o)}finally{ht=w,I.p=p,C.T=u}}dn=1,Bb(),Ub(),qb()}}function Bb(){if(dn===1){dn=0;var a=ei,r=Fo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=C.T,C.T=null;var u=I.p;I.p=2;var p=ht;ht|=4;try{xb(r,a);var g=Om,w=Ey(a.containerInfo),_=g.focusedElem,$=g.selectionRange;if(w!==_&&_&&_.ownerDocument&&Ty(_.ownerDocument.documentElement,_)){if($!==null&&ah(_)){var ee=$.start,ue=$.end;if(ue===void 0&&(ue=ee),"selectionStart"in _)_.selectionStart=ee,_.selectionEnd=Math.min(ue,_.value.length);else{var he=_.ownerDocument||document,ne=he&&he.defaultView||window;if(ne.getSelection){var ie=ne.getSelection(),_e=_.textContent.length,Ve=Math.min($.start,_e),St=$.end===void 0?Ve:Math.min($.end,_e);!ie.extend&&Ve>St&&(w=St,St=Ve,Ve=w);var W=Ny(_,Ve),G=Ny(_,St);if(W&&G&&(ie.rangeCount!==1||ie.anchorNode!==W.node||ie.anchorOffset!==W.offset||ie.focusNode!==G.node||ie.focusOffset!==G.offset)){var J=he.createRange();J.setStart(W.node,W.offset),ie.removeAllRanges(),Ve>St?(ie.addRange(J),ie.extend(G.node,G.offset)):(J.setEnd(G.node,G.offset),ie.addRange(J))}}}}for(he=[],ie=_;ie=ie.parentNode;)ie.nodeType===1&&he.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<he.length;_++){var de=he[_];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}pd=!!Dm,Om=Dm=null}finally{ht=p,I.p=u,C.T=o}}a.current=r,dn=2}}function Ub(){if(dn===2){dn=0;var a=ei,r=Fo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=C.T,C.T=null;var u=I.p;I.p=2;var p=ht;ht|=4;try{mb(a,r.alternate,r)}finally{ht=p,I.p=u,C.T=o}}dn=3}}function qb(){if(dn===4||dn===3){dn=0,Zt();var a=ei,r=Fo,o=pr,u=Cb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?dn=5:(dn=0,Fo=ei=null,$b(a,a.pendingLanes));var p=a.pendingLanes;if(p===0&&(Jr=null),aa(o),r=r.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(wn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=C.T,p=I.p,I.p=2,C.T=null;try{for(var g=a.onRecoverableError,w=0;w<u.length;w++){var _=u[w];g(_.value,{componentStack:_.stack})}}finally{C.T=r,I.p=p}}(pr&3)!==0&&ad(),Us(a),p=a.pendingLanes,(o&261930)!==0&&(p&42)!==0?a===bm?lc++:(lc=0,bm=a):lc=0,cc(0)}}function $b(a,r){(a.pooledCacheLanes&=r)===0&&(r=a.pooledCache,r!=null&&(a.pooledCache=null,Vl(r)))}function ad(){return Bb(),Ub(),qb(),Vb()}function Vb(){if(dn!==5)return!1;var a=ei,r=gm;gm=0;var o=aa(pr),u=C.T,p=I.p;try{I.p=32>o?32:o,C.T=null,o=ym,ym=null;var g=ei,w=pr;if(dn=0,Fo=ei=null,pr=0,(ht&6)!==0)throw Error(s(331));var _=ht;if(ht|=4,Tb(g.current),wb(g,g.current,w,o),ht=_,cc(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(wn,g)}catch{}return!0}finally{I.p=p,C.T=u,$b(a,r)}}function Hb(a,r,o){r=Ba(o,r),r=Xh(a.stateNode,r,2),a=Yr(a,r,2),a!==null&&(ta(a,2),Us(a))}function bt(a,r,o){if(a.tag===3)Hb(a,a,o);else for(;r!==null;){if(r.tag===3){Hb(r,a,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Jr===null||!Jr.has(u))){a=Ba(o,a),o=F1(2),u=Yr(r,o,2),u!==null&&(G1(o,u,r,a),ta(u,2),Us(u));break}}r=r.return}}function wm(a,r,o){var u=a.pingCache;if(u===null){u=a.pingCache=new vC;var p=new Set;u.set(r,p)}else p=u.get(r),p===void 0&&(p=new Set,u.set(r,p));p.has(o)||(hm=!0,p.add(o),a=EC.bind(null,a,r,o),r.then(a,a))}function EC(a,r,o){var u=a.pingCache;u!==null&&u.delete(r),a.pingedLanes|=a.suspendedLanes&o,a.warmLanes&=~o,Nt===a&&(nt&o)===o&&(Ht===4||Ht===3&&(nt&62914560)===nt&&300>Je()-Zu?(ht&2)===0&&Go(a,0):mm|=o,Ho===nt&&(Ho=0)),Us(a)}function Fb(a,r){r===0&&(r=rs()),a=Mi(a,r),a!==null&&(ta(a,r),Us(a))}function AC(a){var r=a.memoizedState,o=0;r!==null&&(o=r.retryLane),Fb(a,o)}function CC(a,r){var o=0;switch(a.tag){case 31:case 13:var u=a.stateNode,p=a.memoizedState;p!==null&&(o=p.retryLane);break;case 19:u=a.stateNode;break;case 22:u=a.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),Fb(a,o)}function jC(a,r){return He(a,r)}var sd=null,Ko=null,Sm=!1,rd=!1,Nm=!1,ni=0;function Us(a){a!==Ko&&a.next===null&&(Ko===null?sd=Ko=a:Ko=Ko.next=a),rd=!0,Sm||(Sm=!0,kC())}function cc(a,r){if(!Nm&&rd){Nm=!0;do for(var o=!1,u=sd;u!==null;){if(a!==0){var p=u.pendingLanes;if(p===0)var g=0;else{var w=u.suspendedLanes,_=u.pingedLanes;g=(1<<31-Bt(42|a)+1)-1,g&=p&~(w&~_),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Wb(u,g))}else g=nt,g=Mn(u,u===Nt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||xa(u,g)||(o=!0,Wb(u,g));u=u.next}while(o);Nm=!1}}function _C(){Gb()}function Gb(){rd=Sm=!1;var a=0;ni!==0&&UC()&&(a=ni);for(var r=Je(),o=null,u=sd;u!==null;){var p=u.next,g=Yb(u,r);g===0?(u.next=null,o===null?sd=p:o.next=p,p===null&&(Ko=o)):(o=u,(a!==0||(g&3)!==0)&&(rd=!0)),u=p}dn!==0&&dn!==5||cc(a),ni!==0&&(ni=0)}function Yb(a,r){for(var o=a.suspendedLanes,u=a.pingedLanes,p=a.expirationTimes,g=a.pendingLanes&-62914561;0<g;){var w=31-Bt(g),_=1<<w,$=p[w];$===-1?((_&o)===0||(_&u)!==0)&&(p[w]=Ws(_,r)):$<=r&&(a.expiredLanes|=_),g&=~_}if(r=Nt,o=nt,o=Mn(a,a===r?o:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u=a.callbackNode,o===0||a===r&&(yt===2||yt===9)||a.cancelPendingCommit!==null)return u!==null&&u!==null&&ot(u),a.callbackNode=null,a.callbackPriority=0;if((o&3)===0||xa(a,o)){if(r=o&-o,r===a.callbackPriority)return r;switch(u!==null&&ot(u),aa(o)){case 2:case 8:o=Te;break;case 32:o=lt;break;case 268435456:o=mt;break;default:o=lt}return u=Kb.bind(null,a),o=He(o,u),a.callbackPriority=r,a.callbackNode=o,r}return u!==null&&u!==null&&ot(u),a.callbackPriority=2,a.callbackNode=null,2}function Kb(a,r){if(dn!==0&&dn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var o=a.callbackNode;if(ad()&&a.callbackNode!==o)return null;var u=nt;return u=Mn(a,a===Nt?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u===0?null:(_b(a,u,r),Yb(a,Je()),a.callbackNode!=null&&a.callbackNode===o?Kb.bind(null,a):null)}function Wb(a,r){if(ad())return null;_b(a,r,!0)}function kC(){$C(function(){(ht&6)!==0?He(Pt,_C):Gb()})}function Tm(){if(ni===0){var a=Mo;a===0&&(a=ba,ba<<=1,(ba&261888)===0&&(ba=256)),ni=a}return ni}function Xb(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Pr(""+a)}function Zb(a,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,a.id&&o.setAttribute("form",a.id),r.parentNode.insertBefore(o,r),a=new FormData(a),o.parentNode.removeChild(o),a}function DC(a,r,o,u,p){if(r==="submit"&&o&&o.stateNode===p){var g=Xb((p[Jt]||null).action),w=u.submitter;w&&(r=(r=w[Jt]||null)?Xb(r.formAction):w.getAttribute("formAction"),r!==null&&(g=r,w=null));var _=new Le("action","action",null,u,p);a.push({event:_,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ni!==0){var $=w?Zb(p,w):new FormData(p);Hh(o,{pending:!0,data:$,method:p.method,action:g},null,$)}}else typeof g=="function"&&(_.preventDefault(),$=w?Zb(p,w):new FormData(p),Hh(o,{pending:!0,data:$,method:p.method,action:g},g,$))},currentTarget:p}]})}}for(var Em=0;Em<oh.length;Em++){var Am=oh[Em],OC=Am.toLowerCase(),MC=Am[0].toUpperCase()+Am.slice(1);ds(OC,"on"+MC)}ds(jy,"onAnimationEnd"),ds(_y,"onAnimationIteration"),ds(ky,"onAnimationStart"),ds("dblclick","onDoubleClick"),ds("focusin","onFocus"),ds("focusout","onBlur"),ds(WA,"onTransitionRun"),ds(XA,"onTransitionStart"),ds(ZA,"onTransitionCancel"),ds(Dy,"onTransitionEnd"),Hn("onMouseEnter",["mouseout","mouseover"]),Hn("onMouseLeave",["mouseout","mouseover"]),Hn("onPointerEnter",["pointerout","pointerover"]),Hn("onPointerLeave",["pointerout","pointerover"]),oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oa("onBeforeInput",["compositionend","keypress","textInput","paste"]),oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uc));function Qb(a,r){r=(r&4)!==0;for(var o=0;o<a.length;o++){var u=a[o],p=u.event;u=u.listeners;e:{var g=void 0;if(r)for(var w=u.length-1;0<=w;w--){var _=u[w],$=_.instance,ee=_.currentTarget;if(_=_.listener,$!==g&&p.isPropagationStopped())break e;g=_,p.currentTarget=ee;try{g(p)}catch(ue){vu(ue)}p.currentTarget=null,g=$}else for(w=0;w<u.length;w++){if(_=u[w],$=_.instance,ee=_.currentTarget,_=_.listener,$!==g&&p.isPropagationStopped())break e;g=_,p.currentTarget=ee;try{g(p)}catch(ue){vu(ue)}p.currentTarget=null,g=$}}}}function tt(a,r){var o=r[Ct];o===void 0&&(o=r[Ct]=new Set);var u=a+"__bubble";o.has(u)||(Jb(r,a,2,!1),o.add(u))}function Cm(a,r,o){var u=0;r&&(u|=4),Jb(o,a,u,r)}var id="_reactListening"+Math.random().toString(36).slice(2);function jm(a){if(!a[id]){a[id]=!0,Vn.forEach(function(o){o!=="selectionchange"&&(RC.has(o)||Cm(o,!1,a),Cm(o,!0,a))});var r=a.nodeType===9?a:a.ownerDocument;r===null||r[id]||(r[id]=!0,Cm("selectionchange",!1,r))}}function Jb(a,r,o,u){switch(jx(r)){case 2:var p=lj;break;case 8:p=cj;break;default:p=Vm}o=p.bind(null,r,o,a),p=void 0,!Br||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(p=!0),u?p!==void 0?a.addEventListener(r,o,{capture:!0,passive:p}):a.addEventListener(r,o,!0):p!==void 0?a.addEventListener(r,o,{passive:p}):a.addEventListener(r,o,!1)}function _m(a,r,o,u,p){var g=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var _=u.stateNode.containerInfo;if(_===p)break;if(w===4)for(w=u.return;w!==null;){var $=w.tag;if(($===3||$===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;_!==null;){if(w=zt(_),w===null)return;if($=w.tag,$===5||$===6||$===26||$===27){u=g=w;continue e}_=_.parentNode}}u=u.return}vo(function(){var ee=g,ue=zr(o),he=[];e:{var ne=Oy.get(a);if(ne!==void 0){var ie=Le,_e=a;switch(a){case"keypress":if(v(o)===0)break e;case"keydown":case"keyup":ie=CA;break;case"focusin":_e="focus",ie=Ea;break;case"focusout":_e="blur",ie=Ea;break;case"beforeblur":case"afterblur":ie=Ea;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=$t;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=un;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=kA;break;case jy:case _y:case ky:ie=bu;break;case Dy:ie=OA;break;case"scroll":case"scrollend":ie=st;break;case"wheel":ie=RA;break;case"copy":case"cut":case"paste":ie=No;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=cy;break;case"toggle":case"beforetoggle":ie=PA}var Ve=(r&4)!==0,St=!Ve&&(a==="scroll"||a==="scrollend"),W=Ve?ne!==null?ne+"Capture":null:ne;Ve=[];for(var G=ee,J;G!==null;){var de=G;if(J=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||J===null||W===null||(de=Ls(G,W),de!=null&&Ve.push(dc(G,de,J))),St)break;G=G.return}0<Ve.length&&(ne=new ie(ne,_e,null,o,ue),he.push({event:ne,listeners:Ve}))}}if((r&7)===0){e:{if(ne=a==="mouseover"||a==="pointerover",ie=a==="mouseout"||a==="pointerout",ne&&o!==ln&&(_e=o.relatedTarget||o.fromElement)&&(zt(_e)||_e[sa]))break e;if((ie||ne)&&(ne=ue.window===ue?ue:(ne=ue.ownerDocument)?ne.defaultView||ne.parentWindow:window,ie?(_e=o.relatedTarget||o.toElement,ie=ee,_e=_e?zt(_e):null,_e!==null&&(St=l(_e),Ve=_e.tag,_e!==St||Ve!==5&&Ve!==27&&Ve!==6)&&(_e=null)):(ie=null,_e=ee),ie!==_e)){if(Ve=$t,de="onMouseLeave",W="onMouseEnter",G="mouse",(a==="pointerout"||a==="pointerover")&&(Ve=cy,de="onPointerLeave",W="onPointerEnter",G="pointer"),St=ie==null?ne:ra(ie),J=_e==null?ne:ra(_e),ne=new Ve(de,G+"leave",ie,o,ue),ne.target=St,ne.relatedTarget=J,de=null,zt(ue)===ee&&(Ve=new Ve(W,G+"enter",_e,o,ue),Ve.target=J,Ve.relatedTarget=St,de=Ve),St=de,ie&&_e)t:{for(Ve=LC,W=ie,G=_e,J=0,de=W;de;de=Ve(de))J++;de=0;for(var qe=G;qe;qe=Ve(qe))de++;for(;0<J-de;)W=Ve(W),J--;for(;0<de-J;)G=Ve(G),de--;for(;J--;){if(W===G||G!==null&&W===G.alternate){Ve=W;break t}W=Ve(W),G=Ve(G)}Ve=null}else Ve=null;ie!==null&&ex(he,ne,ie,Ve,!1),_e!==null&&St!==null&&ex(he,St,_e,Ve,!0)}}e:{if(ne=ee?ra(ee):window,ie=ne.nodeName&&ne.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ne.type==="file")var ut=yy;else if(py(ne))if(by)ut=GA;else{ut=HA;var Pe=VA}else ie=ne.nodeName,!ie||ie.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&ki(ee.elementType)&&(ut=yy):ut=FA;if(ut&&(ut=ut(a,ee))){gy(he,ut,o,ue);break e}Pe&&Pe(a,ne,ee),a==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&_i(ne,"number",ne.value)}switch(Pe=ee?ra(ee):window,a){case"focusin":(py(Pe)||Pe.contentEditable==="true")&&(Eo=Pe,sh=ee,Ul=null);break;case"focusout":Ul=sh=Eo=null;break;case"mousedown":rh=!0;break;case"contextmenu":case"mouseup":case"dragend":rh=!1,Ay(he,o,ue);break;case"selectionchange":if(KA)break;case"keydown":case"keyup":Ay(he,o,ue)}var We;if(eh)e:{switch(a){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else To?hy(a,o)&&(at="onCompositionEnd"):a==="keydown"&&o.keyCode===229&&(at="onCompositionStart");at&&(uy&&o.locale!=="ko"&&(To||at!=="onCompositionStart"?at==="onCompositionEnd"&&To&&(We=wo()):(Ta=ue,er="value"in Ta?Ta.value:Ta.textContent,To=!0)),Pe=od(ee,at),0<Pe.length&&(at=new ly(at,a,null,o,ue),he.push({event:at,listeners:Pe}),We?at.data=We:(We=my(o),We!==null&&(at.data=We)))),(We=IA?BA(a,o):UA(a,o))&&(at=od(ee,"onBeforeInput"),0<at.length&&(Pe=new ly("onBeforeInput","beforeinput",null,o,ue),he.push({event:Pe,listeners:at}),Pe.data=We)),DC(he,a,ee,o,ue)}Qb(he,r)})}function dc(a,r,o){return{instance:a,listener:r,currentTarget:o}}function od(a,r){for(var o=r+"Capture",u=[];a!==null;){var p=a,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Ls(a,o),p!=null&&u.unshift(dc(a,p,g)),p=Ls(a,r),p!=null&&u.push(dc(a,p,g))),a.tag===3)return u;a=a.return}return[]}function LC(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function ex(a,r,o,u,p){for(var g=r._reactName,w=[];o!==null&&o!==u;){var _=o,$=_.alternate,ee=_.stateNode;if(_=_.tag,$!==null&&$===u)break;_!==5&&_!==26&&_!==27||ee===null||($=ee,p?(ee=Ls(o,g),ee!=null&&w.unshift(dc(o,ee,$))):p||(ee=Ls(o,g),ee!=null&&w.push(dc(o,ee,$)))),o=o.return}w.length!==0&&a.push({event:r,listeners:w})}var PC=/\r\n?/g,zC=/\u0000|\uFFFD/g;function tx(a){return(typeof a=="string"?a:""+a).replace(PC,`
`).replace(zC,"")}function nx(a,r){return r=tx(r),tx(a)===r}function wt(a,r,o,u,p,g){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||zn(a,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&zn(a,""+u);break;case"className":Js(a,"class",u);break;case"tabIndex":Js(a,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Js(a,o,u);break;case"style":Sa(a,u,g);break;case"data":if(r!=="object"){Js(a,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){a.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(o);break}u=Pr(""+u),a.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){a.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(r!=="input"&&wt(a,r,"name",p.name,p,null),wt(a,r,"formEncType",p.formEncType,p,null),wt(a,r,"formMethod",p.formMethod,p,null),wt(a,r,"formTarget",p.formTarget,p,null)):(wt(a,r,"encType",p.encType,p,null),wt(a,r,"method",p.method,p,null),wt(a,r,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(o);break}u=Pr(""+u),a.setAttribute(o,u);break;case"onClick":u!=null&&(a.onclick=ca);break;case"onScroll":u!=null&&tt("scroll",a);break;case"onScrollEnd":u!=null&&tt("scrollend",a);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(s(60));a.innerHTML=o}}break;case"multiple":a.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":a.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){a.removeAttribute("xlink:href");break}o=Pr(""+u),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(o,""+u):a.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(o,""):a.removeAttribute(o);break;case"capture":case"download":u===!0?a.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(o,u):a.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?a.setAttribute(o,u):a.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?a.removeAttribute(o):a.setAttribute(o,u);break;case"popover":tt("beforetoggle",a),tt("toggle",a),ks(a,"popover",u);break;case"xlinkActuate":xe(a,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xe(a,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xe(a,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xe(a,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xe(a,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xe(a,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xe(a,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xe(a,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xe(a,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ks(a,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Rl.get(o)||o,ks(a,o,u))}}function km(a,r,o,u,p,g){switch(o){case"style":Sa(a,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(s(60));a.innerHTML=o}}break;case"children":typeof u=="string"?zn(a,u):(typeof u=="number"||typeof u=="bigint")&&zn(a,""+u);break;case"onScroll":u!=null&&tt("scroll",a);break;case"onScrollEnd":u!=null&&tt("scrollend",a);break;case"onClick":u!=null&&(a.onclick=ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ia.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),r=o.slice(2,p?o.length-7:void 0),g=a[Jt]||null,g=g!=null?g[o]:null,typeof g=="function"&&a.removeEventListener(r,g,p),typeof u=="function")){typeof g!="function"&&g!==null&&(o in a?a[o]=null:a.hasAttribute(o)&&a.removeAttribute(o)),a.addEventListener(r,u,p);break e}o in a?a[o]=u:u===!0?a.setAttribute(o,""):ks(a,o,u)}}}function Cn(a,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",a),tt("load",a);var u=!1,p=!1,g;for(g in o)if(o.hasOwnProperty(g)){var w=o[g];if(w!=null)switch(g){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:wt(a,r,g,w,o,null)}}p&&wt(a,r,"srcSet",o.srcSet,o,null),u&&wt(a,r,"src",o.src,o,null);return;case"input":tt("invalid",a);var _=g=w=p=null,$=null,ee=null;for(u in o)if(o.hasOwnProperty(u)){var ue=o[u];if(ue!=null)switch(u){case"name":p=ue;break;case"type":w=ue;break;case"checked":$=ue;break;case"defaultChecked":ee=ue;break;case"value":g=ue;break;case"defaultValue":_=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,r));break;default:wt(a,r,u,ue,o,null)}}Lr(a,g,_,$,ee,w,p,!1);return;case"select":tt("invalid",a),u=w=g=null;for(p in o)if(o.hasOwnProperty(p)&&(_=o[p],_!=null))switch(p){case"value":g=_;break;case"defaultValue":w=_;break;case"multiple":u=_;default:wt(a,r,p,_,o,null)}r=g,o=w,a.multiple=!!u,r!=null?Os(a,!!u,r,!1):o!=null&&Os(a,!!u,o,!0);return;case"textarea":tt("invalid",a),g=p=u=null;for(w in o)if(o.hasOwnProperty(w)&&(_=o[w],_!=null))switch(w){case"value":u=_;break;case"defaultValue":p=_;break;case"children":g=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:wt(a,r,w,_,o,null)}la(a,u,p,g);return;case"option":for($ in o)o.hasOwnProperty($)&&(u=o[$],u!=null)&&($==="selected"?a.selected=u&&typeof u!="function"&&typeof u!="symbol":wt(a,r,$,u,o,null));return;case"dialog":tt("beforetoggle",a),tt("toggle",a),tt("cancel",a),tt("close",a);break;case"iframe":case"object":tt("load",a);break;case"video":case"audio":for(u=0;u<uc.length;u++)tt(uc[u],a);break;case"image":tt("error",a),tt("load",a);break;case"details":tt("toggle",a);break;case"embed":case"source":case"link":tt("error",a),tt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in o)if(o.hasOwnProperty(ee)&&(u=o[ee],u!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:wt(a,r,ee,u,o,null)}return;default:if(ki(r)){for(ue in o)o.hasOwnProperty(ue)&&(u=o[ue],u!==void 0&&km(a,r,ue,u,o,void 0));return}}for(_ in o)o.hasOwnProperty(_)&&(u=o[_],u!=null&&wt(a,r,_,u,o,null))}function IC(a,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,w=null,_=null,$=null,ee=null,ue=null;for(ie in o){var he=o[ie];if(o.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":$=he;default:u.hasOwnProperty(ie)||wt(a,r,ie,null,u,he)}}for(var ne in u){var ie=u[ne];if(he=o[ne],u.hasOwnProperty(ne)&&(ie!=null||he!=null))switch(ne){case"type":g=ie;break;case"name":p=ie;break;case"checked":ee=ie;break;case"defaultChecked":ue=ie;break;case"value":w=ie;break;case"defaultValue":_=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,r));break;default:ie!==he&&wt(a,r,ne,ie,u,he)}}ji(a,w,_,$,ee,ue,g,p);return;case"select":ie=w=_=ne=null;for(g in o)if($=o[g],o.hasOwnProperty(g)&&$!=null)switch(g){case"value":break;case"multiple":ie=$;default:u.hasOwnProperty(g)||wt(a,r,g,null,u,$)}for(p in u)if(g=u[p],$=o[p],u.hasOwnProperty(p)&&(g!=null||$!=null))switch(p){case"value":ne=g;break;case"defaultValue":_=g;break;case"multiple":w=g;default:g!==$&&wt(a,r,p,g,u,$)}r=_,o=w,u=ie,ne!=null?Os(a,!!o,ne,!1):!!u!=!!o&&(r!=null?Os(a,!!o,r,!0):Os(a,!!o,o?[]:"",!1));return;case"textarea":ie=ne=null;for(_ in o)if(p=o[_],o.hasOwnProperty(_)&&p!=null&&!u.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:wt(a,r,_,null,u,p)}for(w in u)if(p=u[w],g=o[w],u.hasOwnProperty(w)&&(p!=null||g!=null))switch(w){case"value":ne=p;break;case"defaultValue":ie=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==g&&wt(a,r,w,p,u,g)}Ms(a,ne,ie);return;case"option":for(var _e in o)ne=o[_e],o.hasOwnProperty(_e)&&ne!=null&&!u.hasOwnProperty(_e)&&(_e==="selected"?a.selected=!1:wt(a,r,_e,null,u,ne));for($ in u)ne=u[$],ie=o[$],u.hasOwnProperty($)&&ne!==ie&&(ne!=null||ie!=null)&&($==="selected"?a.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":wt(a,r,$,ne,u,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in o)ne=o[Ve],o.hasOwnProperty(Ve)&&ne!=null&&!u.hasOwnProperty(Ve)&&wt(a,r,Ve,null,u,ne);for(ee in u)if(ne=u[ee],ie=o[ee],u.hasOwnProperty(ee)&&ne!==ie&&(ne!=null||ie!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,r));break;default:wt(a,r,ee,ne,u,ie)}return;default:if(ki(r)){for(var St in o)ne=o[St],o.hasOwnProperty(St)&&ne!==void 0&&!u.hasOwnProperty(St)&&km(a,r,St,void 0,u,ne);for(ue in u)ne=u[ue],ie=o[ue],!u.hasOwnProperty(ue)||ne===ie||ne===void 0&&ie===void 0||km(a,r,ue,ne,u,ie);return}}for(var W in o)ne=o[W],o.hasOwnProperty(W)&&ne!=null&&!u.hasOwnProperty(W)&&wt(a,r,W,null,u,ne);for(he in u)ne=u[he],ie=o[he],!u.hasOwnProperty(he)||ne===ie||ne==null&&ie==null||wt(a,r,he,ne,u,ie)}function ax(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BC(){if(typeof performance.getEntriesByType=="function"){for(var a=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var p=o[u],g=p.transferSize,w=p.initiatorType,_=p.duration;if(g&&_&&ax(w)){for(w=0,_=p.responseEnd,u+=1;u<o.length;u++){var $=o[u],ee=$.startTime;if(ee>_)break;var ue=$.transferSize,he=$.initiatorType;ue&&ax(he)&&($=$.responseEnd,w+=ue*($<_?1:(_-ee)/($-ee)))}if(--u,r+=8*(g+w)/(p.duration/1e3),a++,10<a)break}}if(0<a)return r/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Dm=null,Om=null;function ld(a){return a.nodeType===9?a:a.ownerDocument}function sx(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rx(a,r){if(a===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&r==="foreignObject"?0:a}function Mm(a,r){return a==="textarea"||a==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Rm=null;function UC(){var a=window.event;return a&&a.type==="popstate"?a===Rm?!1:(Rm=a,!0):(Rm=null,!1)}var ix=typeof setTimeout=="function"?setTimeout:void 0,qC=typeof clearTimeout=="function"?clearTimeout:void 0,ox=typeof Promise=="function"?Promise:void 0,$C=typeof queueMicrotask=="function"?queueMicrotask:typeof ox<"u"?function(a){return ox.resolve(null).then(a).catch(VC)}:ix;function VC(a){setTimeout(function(){throw a})}function ai(a){return a==="head"}function lx(a,r){var o=r,u=0;do{var p=o.nextSibling;if(a.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(u===0){a.removeChild(p),Qo(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")fc(a.ownerDocument.documentElement);else if(o==="head"){o=a.ownerDocument.head,fc(o);for(var g=o.firstChild;g;){var w=g.nextSibling,_=g.nodeName;g[ls]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=w}}else o==="body"&&fc(a.ownerDocument.body);o=p}while(o);Qo(r)}function cx(a,r){var o=a;a=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(a===0)break;a--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||a++;o=u}while(o)}function Lm(a){var r=a.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Lm(o),js(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}a.removeChild(o)}}function HC(a,r,o,u){for(;a.nodeType===1;){var p=o;if(a.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(u){if(!a[ls])switch(r){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(g=a.getAttribute("rel"),g==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(g!==p.rel||a.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||a.getAttribute("title")!==(p.title==null?null:p.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(g=a.getAttribute("src"),(g!==(p.src==null?null:p.src)||a.getAttribute("type")!==(p.type==null?null:p.type)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(r==="input"&&a.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&a.getAttribute("name")===g)return a}else return a;if(a=Ha(a.nextSibling),a===null)break}return null}function FC(a,r,o){if(r==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Ha(a.nextSibling),a===null))return null;return a}function ux(a,r){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!r||(a=Ha(a.nextSibling),a===null))return null;return a}function Pm(a){return a.data==="$?"||a.data==="$~"}function zm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function GC(a,r){var o=a.ownerDocument;if(a.data==="$~")a._reactRetry=r;else if(a.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),a._reactRetry=u}}function Ha(a){for(;a!=null;a=a.nextSibling){var r=a.nodeType;if(r===1||r===3)break;if(r===8){if(r=a.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return a}var Im=null;function dx(a){a=a.nextSibling;for(var r=0;a;){if(a.nodeType===8){var o=a.data;if(o==="/$"||o==="/&"){if(r===0)return Ha(a.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}a=a.nextSibling}return null}function fx(a){a=a.previousSibling;for(var r=0;a;){if(a.nodeType===8){var o=a.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return a;r--}else o!=="/$"&&o!=="/&"||r++}a=a.previousSibling}return null}function hx(a,r,o){switch(r=ld(o),a){case"html":if(a=r.documentElement,!a)throw Error(s(452));return a;case"head":if(a=r.head,!a)throw Error(s(453));return a;case"body":if(a=r.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function fc(a){for(var r=a.attributes;r.length;)a.removeAttributeNode(r[0]);js(a)}var Fa=new Map,mx=new Set;function cd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var gr=I.d;I.d={f:YC,r:KC,D:WC,C:XC,L:ZC,m:QC,X:ej,S:JC,M:tj};function YC(){var a=gr.f(),r=ed();return a||r}function KC(a){var r=va(a);r!==null&&r.tag===5&&r.type==="form"?D1(r):gr.r(a)}var Wo=typeof document>"u"?null:document;function px(a,r,o){var u=Wo;if(u&&typeof r=="string"&&r){var p=Pn(r);p='link[rel="'+a+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),mx.has(p)||(mx.add(p),a={rel:a,crossOrigin:o,href:r},u.querySelector(p)===null&&(r=u.createElement("link"),Cn(r,"link",a),jt(r),u.head.appendChild(r)))}}function WC(a){gr.D(a),px("dns-prefetch",a,null)}function XC(a,r){gr.C(a,r),px("preconnect",a,r)}function ZC(a,r,o){gr.L(a,r,o);var u=Wo;if(u&&a&&r){var p='link[rel="preload"][as="'+Pn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+Pn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+Pn(o.imageSizes)+'"]')):p+='[href="'+Pn(a)+'"]';var g=p;switch(r){case"style":g=Xo(a);break;case"script":g=Zo(a)}Fa.has(g)||(a=b({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:a,as:r},o),Fa.set(g,a),u.querySelector(p)!==null||r==="style"&&u.querySelector(hc(g))||r==="script"&&u.querySelector(mc(g))||(r=u.createElement("link"),Cn(r,"link",a),jt(r),u.head.appendChild(r)))}}function QC(a,r){gr.m(a,r);var o=Wo;if(o&&a){var u=r&&typeof r.as=="string"?r.as:"script",p='link[rel="modulepreload"][as="'+Pn(u)+'"][href="'+Pn(a)+'"]',g=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Zo(a)}if(!Fa.has(g)&&(a=b({rel:"modulepreload",href:a},r),Fa.set(g,a),o.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(mc(g)))return}u=o.createElement("link"),Cn(u,"link",a),jt(u),o.head.appendChild(u)}}}function JC(a,r,o){gr.S(a,r,o);var u=Wo;if(u&&a){var p=Rn(u).hoistableStyles,g=Xo(a);r=r||"default";var w=p.get(g);if(!w){var _={loading:0,preload:null};if(w=u.querySelector(hc(g)))_.loading=5;else{a=b({rel:"stylesheet",href:a,"data-precedence":r},o),(o=Fa.get(g))&&Bm(a,o);var $=w=u.createElement("link");jt($),Cn($,"link",a),$._p=new Promise(function(ee,ue){$.onload=ee,$.onerror=ue}),$.addEventListener("load",function(){_.loading|=1}),$.addEventListener("error",function(){_.loading|=2}),_.loading|=4,ud(w,r,u)}w={type:"stylesheet",instance:w,count:1,state:_},p.set(g,w)}}}function ej(a,r){gr.X(a,r);var o=Wo;if(o&&a){var u=Rn(o).hoistableScripts,p=Zo(a),g=u.get(p);g||(g=o.querySelector(mc(p)),g||(a=b({src:a,async:!0},r),(r=Fa.get(p))&&Um(a,r),g=o.createElement("script"),jt(g),Cn(g,"link",a),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function tj(a,r){gr.M(a,r);var o=Wo;if(o&&a){var u=Rn(o).hoistableScripts,p=Zo(a),g=u.get(p);g||(g=o.querySelector(mc(p)),g||(a=b({src:a,async:!0,type:"module"},r),(r=Fa.get(p))&&Um(a,r),g=o.createElement("script"),jt(g),Cn(g,"link",a),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function gx(a,r,o,u){var p=(p=be.current)?cd(p):null;if(!p)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Xo(o.href),o=Rn(p).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){a=Xo(o.href);var g=Rn(p).hoistableStyles,w=g.get(a);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(a,w),(g=p.querySelector(hc(a)))&&!g._p&&(w.instance=g,w.state.loading=5),Fa.has(a)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Fa.set(a,o),g||nj(p,a,o,w.state))),r&&u===null)throw Error(s(528,""));return w}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Zo(o),o=Rn(p).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function Xo(a){return'href="'+Pn(a)+'"'}function hc(a){return'link[rel="stylesheet"]['+a+"]"}function yx(a){return b({},a,{"data-precedence":a.precedence,precedence:null})}function nj(a,r,o,u){a.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=a.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Cn(r,"link",o),jt(r),a.head.appendChild(r))}function Zo(a){return'[src="'+Pn(a)+'"]'}function mc(a){return"script[async]"+a}function bx(a,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=a.querySelector('style[data-href~="'+Pn(o.href)+'"]');if(u)return r.instance=u,jt(u),u;var p=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(a.ownerDocument||a).createElement("style"),jt(u),Cn(u,"style",p),ud(u,o.precedence,a),r.instance=u;case"stylesheet":p=Xo(o.href);var g=a.querySelector(hc(p));if(g)return r.state.loading|=4,r.instance=g,jt(g),g;u=yx(o),(p=Fa.get(p))&&Bm(u,p),g=(a.ownerDocument||a).createElement("link"),jt(g);var w=g;return w._p=new Promise(function(_,$){w.onload=_,w.onerror=$}),Cn(g,"link",u),r.state.loading|=4,ud(g,o.precedence,a),r.instance=g;case"script":return g=Zo(o.src),(p=a.querySelector(mc(g)))?(r.instance=p,jt(p),p):(u=o,(p=Fa.get(g))&&(u=b({},o),Um(u,p)),a=a.ownerDocument||a,p=a.createElement("script"),jt(p),Cn(p,"link",u),a.head.appendChild(p),r.instance=p);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,ud(u,o.precedence,a));return r.instance}function ud(a,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,g=p,w=0;w<u.length;w++){var _=u[w];if(_.dataset.precedence===r)g=_;else if(g!==p)break}g?g.parentNode.insertBefore(a,g.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(a,r.firstChild))}function Bm(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.title==null&&(a.title=r.title)}function Um(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.integrity==null&&(a.integrity=r.integrity)}var dd=null;function xx(a,r,o){if(dd===null){var u=new Map,p=dd=new Map;p.set(o,u)}else p=dd,u=p.get(o),u||(u=new Map,p.set(o,u));if(u.has(a))return u;for(u.set(a,null),o=o.getElementsByTagName(a),p=0;p<o.length;p++){var g=o[p];if(!(g[ls]||g[At]||a==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(r)||"";w=a+w;var _=u.get(w);_?_.push(g):u.set(w,[g])}}return u}function vx(a,r,o){a=a.ownerDocument||a,a.head.insertBefore(o,r==="title"?a.querySelector("head > title"):null)}function aj(a,r,o){if(o===1||r.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(a=r.disabled,typeof r.precedence=="string"&&a==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function wx(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function sj(a,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Xo(u.href),g=r.querySelector(hc(p));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(a.count++,a=fd.bind(a),r.then(a,a)),o.state.loading|=4,o.instance=g,jt(g);return}g=r.ownerDocument||r,u=yx(u),(p=Fa.get(p))&&Bm(u,p),g=g.createElement("link"),jt(g);var w=g;w._p=new Promise(function(_,$){w.onload=_,w.onerror=$}),Cn(g,"link",u),o.instance=g}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(a.count++,o=fd.bind(a),r.addEventListener("load",o),r.addEventListener("error",o))}}var qm=0;function rj(a,r){return a.stylesheets&&a.count===0&&md(a,a.stylesheets),0<a.count||0<a.imgCount?function(o){var u=setTimeout(function(){if(a.stylesheets&&md(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4+r);0<a.imgBytes&&qm===0&&(qm=62500*BC());var p=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&md(a,a.stylesheets),a.unsuspend)){var g=a.unsuspend;a.unsuspend=null,g()}},(a.imgBytes>qm?50:800)+r);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function fd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)md(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var hd=null;function md(a,r){a.stylesheets=null,a.unsuspend!==null&&(a.count++,hd=new Map,r.forEach(ij,a),hd=null,fd.call(a))}function ij(a,r){if(!(r.state.loading&4)){var o=hd.get(a);if(o)var u=o.get(null);else{o=new Map,hd.set(a,o);for(var p=a.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var w=p[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}p=r.instance,w=p.getAttribute("data-precedence"),g=o.get(w)||u,g===u&&o.set(null,p),o.set(w,p),this.count++,u=fd.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),g?g.parentNode.insertBefore(p,g.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(p,a.firstChild)),r.state.loading|=4}}var pc={$$typeof:R,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function oj(a,r,o,u,p,g,w,_,$){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$n(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$n(0),this.hiddenUpdates=$n(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function Sx(a,r,o,u,p,g,w,_,$,ee,ue,he){return a=new oj(a,r,o,w,$,ee,ue,he,_),r=1,g===!0&&(r|=24),g=Ca(3,null,null,r),a.current=g,g.stateNode=a,r=vh(),r.refCount++,a.pooledCache=r,r.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:r},Th(g),a}function Nx(a){return a?(a=jo,a):jo}function Tx(a,r,o,u,p,g){p=Nx(p),u.context===null?u.context=p:u.pendingContext=p,u=Gr(r),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Yr(a,u,r),o!==null&&(ma(o,a,r),Yl(o,a,r))}function Ex(a,r){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var o=a.retryLane;a.retryLane=o!==0&&o<r?o:r}}function $m(a,r){Ex(a,r),(a=a.alternate)&&Ex(a,r)}function Ax(a){if(a.tag===13||a.tag===31){var r=Mi(a,67108864);r!==null&&ma(r,a,67108864),$m(a,67108864)}}function Cx(a){if(a.tag===13||a.tag===31){var r=Oa();r=is(r);var o=Mi(a,r);o!==null&&ma(o,a,r),$m(a,r)}}var pd=!0;function lj(a,r,o,u){var p=C.T;C.T=null;var g=I.p;try{I.p=2,Vm(a,r,o,u)}finally{I.p=g,C.T=p}}function cj(a,r,o,u){var p=C.T;C.T=null;var g=I.p;try{I.p=8,Vm(a,r,o,u)}finally{I.p=g,C.T=p}}function Vm(a,r,o,u){if(pd){var p=Hm(u);if(p===null)_m(a,r,u,gd,o),_x(a,u);else if(dj(p,a,r,o,u))u.stopPropagation();else if(_x(a,u),r&4&&-1<uj.indexOf(a)){for(;p!==null;){var g=va(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=Nn(g.pendingLanes);if(w!==0){var _=g;for(_.pendingLanes|=2,_.entangledLanes|=2;w;){var $=1<<31-Bt(w);_.entanglements[1]|=$,w&=~$}Us(g),(ht&6)===0&&(Qu=Je()+500,cc(0))}}break;case 31:case 13:_=Mi(g,2),_!==null&&ma(_,g,2),ed(),$m(g,2)}if(g=Hm(u),g===null&&_m(a,r,u,gd,o),g===p)break;p=g}p!==null&&u.stopPropagation()}else _m(a,r,u,null,o)}}function Hm(a){return a=zr(a),Fm(a)}var gd=null;function Fm(a){if(gd=null,a=zt(a),a!==null){var r=l(a);if(r===null)a=null;else{var o=r.tag;if(o===13){if(a=c(r),a!==null)return a;a=null}else if(o===31){if(a=d(r),a!==null)return a;a=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;a=null}else r!==a&&(a=null)}}return gd=a,null}function jx(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case Pt:return 2;case Te:return 8;case lt:case Qt:return 32;case mt:return 268435456;default:return 32}default:return 32}}var Gm=!1,si=null,ri=null,ii=null,gc=new Map,yc=new Map,oi=[],uj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _x(a,r){switch(a){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":gc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":yc.delete(r.pointerId)}}function bc(a,r,o,u,p,g){return a===null||a.nativeEvent!==g?(a={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[p]},r!==null&&(r=va(r),r!==null&&Ax(r)),a):(a.eventSystemFlags|=u,r=a.targetContainers,p!==null&&r.indexOf(p)===-1&&r.push(p),a)}function dj(a,r,o,u,p){switch(r){case"focusin":return si=bc(si,a,r,o,u,p),!0;case"dragenter":return ri=bc(ri,a,r,o,u,p),!0;case"mouseover":return ii=bc(ii,a,r,o,u,p),!0;case"pointerover":var g=p.pointerId;return gc.set(g,bc(gc.get(g)||null,a,r,o,u,p)),!0;case"gotpointercapture":return g=p.pointerId,yc.set(g,bc(yc.get(g)||null,a,r,o,u,p)),!0}return!1}function kx(a){var r=zt(a.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){a.blockedOn=r,Xs(a.priority,function(){Cx(o)});return}}else if(r===31){if(r=d(o),r!==null){a.blockedOn=r,Xs(a.priority,function(){Cx(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){a.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}a.blockedOn=null}function yd(a){if(a.blockedOn!==null)return!1;for(var r=a.targetContainers;0<r.length;){var o=Hm(a.nativeEvent);if(o===null){o=a.nativeEvent;var u=new o.constructor(o.type,o);ln=u,o.target.dispatchEvent(u),ln=null}else return r=va(o),r!==null&&Ax(r),a.blockedOn=o,!1;r.shift()}return!0}function Dx(a,r,o){yd(a)&&o.delete(r)}function fj(){Gm=!1,si!==null&&yd(si)&&(si=null),ri!==null&&yd(ri)&&(ri=null),ii!==null&&yd(ii)&&(ii=null),gc.forEach(Dx),yc.forEach(Dx)}function bd(a,r){a.blockedOn===r&&(a.blockedOn=null,Gm||(Gm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fj)))}var xd=null;function Ox(a){xd!==a&&(xd=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){xd===a&&(xd=null);for(var r=0;r<a.length;r+=3){var o=a[r],u=a[r+1],p=a[r+2];if(typeof u!="function"){if(Fm(u||o)===null)continue;break}var g=va(o);g!==null&&(a.splice(r,3),r-=3,Hh(g,{pending:!0,data:p,method:o.method,action:u},u,p))}}))}function Qo(a){function r($){return bd($,a)}si!==null&&bd(si,a),ri!==null&&bd(ri,a),ii!==null&&bd(ii,a),gc.forEach(r),yc.forEach(r);for(var o=0;o<oi.length;o++){var u=oi[o];u.blockedOn===a&&(u.blockedOn=null)}for(;0<oi.length&&(o=oi[0],o.blockedOn===null);)kx(o),o.blockedOn===null&&oi.shift();if(o=(a.ownerDocument||a).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var p=o[u],g=o[u+1],w=p[Jt]||null;if(typeof g=="function")w||Ox(o);else if(w){var _=null;if(g&&g.hasAttribute("formAction")){if(p=g,w=g[Jt]||null)_=w.formAction;else if(Fm(p)!==null)continue}else _=w.action;typeof _=="function"?o[u+1]=_:(o.splice(u,3),u-=3),Ox(o)}}}function Mx(){function a(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(w){return p=w})},focusReset:"manual",scroll:"manual"})}function r(){p!==null&&(p(),p=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),p!==null&&(p(),p=null)}}}function Ym(a){this._internalRoot=a}vd.prototype.render=Ym.prototype.render=function(a){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,u=Oa();Tx(o,u,a,r,null,null)},vd.prototype.unmount=Ym.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var r=a.containerInfo;Tx(a.current,2,null,a,null,null),ed(),r[sa]=null}};function vd(a){this._internalRoot=a}vd.prototype.unstable_scheduleHydration=function(a){if(a){var r=Ut();a={blockedOn:null,target:a,priority:r};for(var o=0;o<oi.length&&r!==0&&r<oi[o].priority;o++);oi.splice(o,0,a),o===0&&kx(a)}};var Rx=e.version;if(Rx!=="19.2.3")throw Error(s(527,Rx,"19.2.3"));I.findDOMNode=function(a){var r=a._reactInternals;if(r===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=m(r),a=a!==null?y(a):null,a=a===null?null:a.stateNode,a};var hj={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{wn=wd.inject(hj),Gt=wd}catch{}}return vc.createRoot=function(a,r){if(!i(a))throw Error(s(299));var o=!1,u="",p=q1,g=$1,w=V1;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=Sx(a,1,!1,null,null,o,u,null,p,g,w,Mx),a[sa]=r.current,jm(a),new Ym(r)},vc.hydrateRoot=function(a,r,o){if(!i(a))throw Error(s(299));var u=!1,p="",g=q1,w=$1,_=V1,$=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError),o.formState!==void 0&&($=o.formState)),r=Sx(a,1,!0,r,o??null,u,p,$,g,w,_,Mx),r.context=Nx(null),o=r.current,u=Oa(),u=is(u),p=Gr(u),p.callback=null,Yr(o,p,u),o=u,r.current.lanes=o,ta(r,o),Us(r),a[sa]=r.current,jm(a),new vd(r)},vc.version="19.2.3",vc}var Hx;function Nj(){if(Hx)return Xm.exports;Hx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xm.exports=Sj(),Xm.exports}var Tj=Nj();const Fe=t=>typeof t=="string",wc=()=>{let t,e;const n=new Promise((s,i)=>{t=s,e=i});return n.resolve=t,n.reject=e,n},Fx=t=>t==null?"":""+t,Ej=(t,e,n)=>{t.forEach(s=>{e[s]&&(n[s]=e[s])})},Aj=/###/g,Gx=t=>t&&t.indexOf("###")>-1?t.replace(Aj,"."):t,Yx=t=>!t||Fe(t),zc=(t,e,n)=>{const s=Fe(e)?e.split("."):e;let i=0;for(;i<s.length-1;){if(Yx(t))return{};const l=Gx(s[i]);!t[l]&&n&&(t[l]=new n),Object.prototype.hasOwnProperty.call(t,l)?t=t[l]:t={},++i}return Yx(t)?{}:{obj:t,k:Gx(s[i])}},Kx=(t,e,n)=>{const{obj:s,k:i}=zc(t,e,Object);if(s!==void 0||e.length===1){s[i]=n;return}let l=e[e.length-1],c=e.slice(0,e.length-1),d=zc(t,c,Object);for(;d.obj===void 0&&c.length;)l=`${c[c.length-1]}.${l}`,c=c.slice(0,c.length-1),d=zc(t,c,Object),d?.obj&&typeof d.obj[`${d.k}.${l}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${l}`]=n},Cj=(t,e,n,s)=>{const{obj:i,k:l}=zc(t,e,Object);i[l]=i[l]||[],i[l].push(n)},nf=(t,e)=>{const{obj:n,k:s}=zc(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,s))return n[s]},jj=(t,e,n)=>{const s=nf(t,n);return s!==void 0?s:nf(e,n)},gS=(t,e,n)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in t?Fe(t[s])||t[s]instanceof String||Fe(e[s])||e[s]instanceof String?n&&(t[s]=e[s]):gS(t[s],e[s],n):t[s]=e[s]);return t},Jo=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const kj=t=>Fe(t)?t.replace(/[&<>"'\/]/g,e=>_j[e]):t;class Dj{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const Oj=[" ",",","?","!",";"],Mj=new Dj(20),Rj=(t,e,n)=>{e=e||"",n=n||"";const s=Oj.filter(c=>e.indexOf(c)<0&&n.indexOf(c)<0);if(s.length===0)return!0;const i=Mj.getRegExp(`(${s.map(c=>c==="?"?"\\?":c).join("|")})`);let l=!i.test(t);if(!l){const c=t.indexOf(n);c>0&&!i.test(t.substring(0,c))&&(l=!0)}return l},Wp=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const s=e.split(n);let i=t;for(let l=0;l<s.length;){if(!i||typeof i!="object")return;let c,d="";for(let h=l;h<s.length;++h)if(h!==l&&(d+=n),d+=s[h],c=i[d],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&h<s.length-1)continue;l+=h-l+1;break}i=c}return i},Gc=t=>t?.replace("_","-"),Lj={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class af{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||Lj,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,s,i){return i&&!this.debug?null:(Fe(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new af(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new af(this.logger,e)}}var $s=new af;let kf=class{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const i=this.observers[s].get(n)||0;this.observers[s].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,l])=>{for(let c=0;c<l;c++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,l])=>{for(let c=0;c<l;c++)i.apply(i,[e,...n])})}};class Wx extends kf{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,s,i={}){const l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,c=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,n],s&&(Array.isArray(s)?d.push(...s):Fe(s)&&l?d.push(...s.split(l)):d.push(s)));const h=nf(this.data,d);return!h&&!n&&!s&&e.indexOf(".")>-1&&(e=d[0],n=d[1],s=d.slice(2).join(".")),h||!c||!Fe(s)?h:Wp(this.data?.[e]?.[n],s,l)}addResource(e,n,s,i,l={silent:!1}){const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let d=[e,n];s&&(d=d.concat(c?s.split(c):s)),e.indexOf(".")>-1&&(d=e.split("."),i=n,n=d[1]),this.addNamespaces(n),Kx(this.data,d,i),l.silent||this.emit("added",e,n,s,i)}addResources(e,n,s,i={silent:!1}){for(const l in s)(Fe(s[l])||Array.isArray(s[l]))&&this.addResource(e,n,l,s[l],{silent:!0});i.silent||this.emit("added",e,n,s)}addResourceBundle(e,n,s,i,l,c={silent:!1,skipCopy:!1}){let d=[e,n];e.indexOf(".")>-1&&(d=e.split("."),i=s,s=n,n=d[1]),this.addNamespaces(n);let h=nf(this.data,d)||{};c.skipCopy||(s=JSON.parse(JSON.stringify(s))),i?gS(h,s,l):h={...h,...s},Kx(this.data,d,h),c.silent||this.emit("added",e,n,s)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var yS={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,s,i){return t.forEach(l=>{e=this.processors[l]?.process(e,n,s,i)??e}),e}};const bS=Symbol("i18next/PATH_KEY");function Pj(){const t=[],e=Object.create(null);let n;return e.get=(s,i)=>(n?.revoke?.(),i===bS?t:(t.push(i),n=Proxy.revocable(s,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}function sf(t,e){const{[bS]:n}=t(Pj());return n.join(e?.keySeparator??".")}const Xx={},ep=t=>!Fe(t)&&typeof t!="boolean"&&typeof t!="number";class rf extends kf{constructor(e,n={}){super(),Ej(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=$s.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const s={...n};if(e==null)return!1;const i=this.resolve(e,s);if(i?.res===void 0)return!1;const l=ep(i.res);return!(s.returnObjects===!1&&l)}extractFromKey(e,n){let s=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let l=n.ns||this.options.defaultNS||[];const c=s&&e.indexOf(s)>-1,d=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Rj(e,s,i);if(c&&!d){const h=e.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:e,namespaces:Fe(l)?[l]:l};const m=e.split(s);(s!==i||s===i&&this.options.ns.indexOf(m[0])>-1)&&(l=m.shift()),e=m.join(i)}return{key:e,namespaces:Fe(l)?[l]:l}}translate(e,n,s){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=sf(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const l=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,c=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:d,namespaces:h}=this.extractFromKey(e[e.length-1],i),m=h[h.length-1];let y=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;y===void 0&&(y=":");const b=i.lng||this.language,x=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(b?.toLowerCase()==="cimode")return x?l?{res:`${m}${y}${d}`,usedKey:d,exactUsedKey:d,usedLng:b,usedNS:m,usedParams:this.getUsedParamsDetails(i)}:`${m}${y}${d}`:l?{res:d,usedKey:d,exactUsedKey:d,usedLng:b,usedNS:m,usedParams:this.getUsedParamsDetails(i)}:d;const S=this.resolve(e,i);let N=S?.res;const E=S?.usedKey||d,j=S?.exactUsedKey||d,D=["[object Number]","[object Function]","[object RegExp]"],O=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,R=!this.i18nFormat||this.i18nFormat.handleAsObject,U=i.count!==void 0&&!Fe(i.count),L=rf.hasDefaultValue(i),H=U?this.pluralResolver.getSuffix(b,i.count,i):"",z=i.ordinal&&U?this.pluralResolver.getSuffix(b,i.count,{ordinal:!1}):"",P=U&&!i.ordinal&&i.count===0,Y=P&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${H}`]||i[`defaultValue${z}`]||i.defaultValue;let Q=N;R&&!N&&L&&(Q=Y);const A=ep(Q),F=Object.prototype.toString.apply(Q);if(R&&Q&&A&&D.indexOf(F)<0&&!(Fe(O)&&Array.isArray(Q))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const B=this.options.returnedObjectHandler?this.options.returnedObjectHandler(E,Q,{...i,ns:h}):`key '${d} (${this.language})' returned an object instead of string.`;return l?(S.res=B,S.usedParams=this.getUsedParamsDetails(i),S):B}if(c){const B=Array.isArray(Q),te=B?[]:{},se=B?j:E;for(const C in Q)if(Object.prototype.hasOwnProperty.call(Q,C)){const I=`${se}${c}${C}`;L&&!N?te[C]=this.translate(I,{...i,defaultValue:ep(Y)?Y[C]:void 0,joinArrays:!1,ns:h}):te[C]=this.translate(I,{...i,joinArrays:!1,ns:h}),te[C]===I&&(te[C]=Q[C])}N=te}}else if(R&&Fe(O)&&Array.isArray(N))N=N.join(O),N&&(N=this.extendTranslation(N,e,i,s));else{let B=!1,te=!1;!this.isValidLookup(N)&&L&&(B=!0,N=Y),this.isValidLookup(N)||(te=!0,N=d);const C=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&te?void 0:N,I=L&&Y!==N&&this.options.updateMissing;if(te||B||I){if(this.logger.log(I?"updateKey":"missingKey",b,m,d,I?Y:N),c){const M=this.resolve(d,{...i,keySeparator:!1});M&&M.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const oe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&oe&&oe[0])for(let M=0;M<oe.length;M++)q.push(oe[M]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(i.lng||this.language):q.push(i.lng||this.language);const ce=(M,K,Z)=>{const le=L&&Z!==N?Z:C;this.options.missingKeyHandler?this.options.missingKeyHandler(M,m,K,le,I,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(M,m,K,le,I,i),this.emit("missingKey",M,m,K,N)};this.options.saveMissing&&(this.options.saveMissingPlurals&&U?q.forEach(M=>{const K=this.pluralResolver.getSuffixes(M,i);P&&i[`defaultValue${this.options.pluralSeparator}zero`]&&K.indexOf(`${this.options.pluralSeparator}zero`)<0&&K.push(`${this.options.pluralSeparator}zero`),K.forEach(Z=>{ce([M],d+Z,i[`defaultValue${Z}`]||Y)})}):ce(q,d,Y))}N=this.extendTranslation(N,e,i,S,s),te&&N===d&&this.options.appendNamespaceToMissingKey&&(N=`${m}${y}${d}`),(te||B)&&this.options.parseMissingKeyHandler&&(N=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${m}${y}${d}`:d,B?N:void 0,i))}return l?(S.res=N,S.usedParams=this.getUsedParamsDetails(i),S):N}extendTranslation(e,n,s,i,l){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const h=Fe(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(h){const b=e.match(this.interpolator.nestingRegexp);m=b&&b.length}let y=s.replace&&!Fe(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),e=this.interpolator.interpolate(e,y,s.lng||this.language||i.usedLng,s),h){const b=e.match(this.interpolator.nestingRegexp),x=b&&b.length;m<x&&(s.nest=!1)}!s.lng&&i&&i.res&&(s.lng=this.language||i.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...b)=>l?.[0]===b[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${n[0]}`),null):this.translate(...b,n),s)),s.interpolation&&this.interpolator.reset()}const c=s.postProcess||this.options.postProcess,d=Fe(c)?[c]:c;return e!=null&&d?.length&&s.applyPostProcessor!==!1&&(e=yS.handle(d,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,n={}){let s,i,l,c,d;return Fe(e)&&(e=[e]),e.forEach(h=>{if(this.isValidLookup(s))return;const m=this.extractFromKey(h,n),y=m.key;i=y;let b=m.namespaces;this.options.fallbackNS&&(b=b.concat(this.options.fallbackNS));const x=n.count!==void 0&&!Fe(n.count),S=x&&!n.ordinal&&n.count===0,N=n.context!==void 0&&(Fe(n.context)||typeof n.context=="number")&&n.context!=="",E=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);b.forEach(j=>{this.isValidLookup(s)||(d=j,!Xx[`${E[0]}-${j}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(d)&&(Xx[`${E[0]}-${j}`]=!0,this.logger.warn(`key "${i}" for languages "${E.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),E.forEach(D=>{if(this.isValidLookup(s))return;c=D;const O=[y];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(O,y,D,j,n);else{let U;x&&(U=this.pluralResolver.getSuffix(D,n.count,n));const L=`${this.options.pluralSeparator}zero`,H=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(n.ordinal&&U.indexOf(H)===0&&O.push(y+U.replace(H,this.options.pluralSeparator)),O.push(y+U),S&&O.push(y+L)),N){const z=`${y}${this.options.contextSeparator||"_"}${n.context}`;O.push(z),x&&(n.ordinal&&U.indexOf(H)===0&&O.push(z+U.replace(H,this.options.pluralSeparator)),O.push(z+U),S&&O.push(z+L))}}let R;for(;R=O.pop();)this.isValidLookup(s)||(l=R,s=this.getResource(D,j,R,n))}))})}),{res:s,usedKey:i,exactUsedKey:l,usedLng:c,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,s,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,s,i):this.resourceStore.getResource(e,n,s,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!Fe(e.replace);let i=s?e.replace:e;if(s&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!s){i={...i};for(const l of n)delete i[l]}return i}static hasDefaultValue(e){const n="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&n===s.substring(0,n.length)&&e[s]!==void 0)return!0;return!1}}class Zx{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=$s.create("languageUtils")}getScriptPartFromCode(e){if(e=Gc(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Gc(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Fe(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(s=>{if(n)return;const i=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(s=>{if(n)return;const i=this.getScriptPartFromCode(s);if(this.isSupportedCode(i))return n=i;const l=this.getLanguagePartFromCode(s);if(this.isSupportedCode(l))return n=l;n=this.options.supportedLngs.find(c=>{if(c===l)return c;if(!(c.indexOf("-")<0&&l.indexOf("-")<0)&&(c.indexOf("-")>0&&l.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===l||c.indexOf(l)===0&&l.length>1))return c})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Fe(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let s=e[n];return s||(s=e[this.getScriptPartFromCode(n)]),s||(s=e[this.formatLanguageCode(n)]),s||(s=e[this.getLanguagePartFromCode(n)]),s||(s=e.default),s||[]}toResolveHierarchy(e,n){const s=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],l=c=>{c&&(this.isSupportedCode(c)?i.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return Fe(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(e))):Fe(e)&&l(this.formatLanguageCode(e)),s.forEach(c=>{i.indexOf(c)<0&&l(this.formatLanguageCode(c))}),i}}const Qx={zero:0,one:1,two:2,few:3,many:4,other:5},Jx={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class zj{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=$s.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const s=Gc(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",l=JSON.stringify({cleanedCode:s,type:i});if(l in this.pluralRulesCache)return this.pluralRulesCache[l];let c;try{c=new Intl.PluralRules(s,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Jx;if(!e.match(/-|_/))return Jx;const h=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(h,n)}return this.pluralRulesCache[l]=c,c}needsPlural(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,s={}){return this.getSuffixes(e,s).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),s?s.resolvedOptions().pluralCategories.sort((i,l)=>Qx[i]-Qx[l]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,s={}){const i=this.getRule(e,s);return i?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,s))}}const ev=(t,e,n,s=".",i=!0)=>{let l=jj(t,e,n);return!l&&i&&Fe(n)&&(l=Wp(t,n,s),l===void 0&&(l=Wp(e,n,s))),l},tp=t=>t.replace(/\$/g,"$$$$");class tv{constructor(e={}){this.logger=$s.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:s,useRawValueToEscape:i,prefix:l,prefixEscaped:c,suffix:d,suffixEscaped:h,formatSeparator:m,unescapeSuffix:y,unescapePrefix:b,nestingPrefix:x,nestingPrefixEscaped:S,nestingSuffix:N,nestingSuffixEscaped:E,nestingOptionsSeparator:j,maxReplaces:D,alwaysFormat:O}=e.interpolation;this.escape=n!==void 0?n:kj,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=l?Jo(l):c||"{{",this.suffix=d?Jo(d):h||"}}",this.formatSeparator=m||",",this.unescapePrefix=y?"":b||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=x?Jo(x):S||Jo("$t("),this.nestingSuffix=N?Jo(N):E||Jo(")"),this.nestingOptionsSeparator=j||",",this.maxReplaces=D||1e3,this.alwaysFormat=O!==void 0?O:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,s)=>n?.source===s?(n.lastIndex=0,n):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,s,i){let l,c,d;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},m=S=>{if(S.indexOf(this.formatSeparator)<0){const D=ev(n,h,S,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(D,void 0,s,{...i,...n,interpolationkey:S}):D}const N=S.split(this.formatSeparator),E=N.shift().trim(),j=N.join(this.formatSeparator).trim();return this.format(ev(n,h,E,this.options.keySeparator,this.options.ignoreJSONStructure),j,s,{...i,...n,interpolationkey:E})};this.resetRegExp();const y=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,b=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:S=>tp(S)},{regex:this.regexp,safeValue:S=>this.escapeValue?tp(this.escape(S)):tp(S)}].forEach(S=>{for(d=0;l=S.regex.exec(e);){const N=l[1].trim();if(c=m(N),c===void 0)if(typeof y=="function"){const j=y(e,l,i);c=Fe(j)?j:""}else if(i&&Object.prototype.hasOwnProperty.call(i,N))c="";else if(b){c=l[0];continue}else this.logger.warn(`missed to pass in variable ${N} for interpolating ${e}`),c="";else!Fe(c)&&!this.useRawValueToEscape&&(c=Fx(c));const E=S.safeValue(c);if(e=e.replace(l[0],E),b?(S.regex.lastIndex+=c.length,S.regex.lastIndex-=l[0].length):S.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,n,s={}){let i,l,c;const d=(h,m)=>{const y=this.nestingOptionsSeparator;if(h.indexOf(y)<0)return h;const b=h.split(new RegExp(`${y}[ ]*{`));let x=`{${b[1]}`;h=b[0],x=this.interpolate(x,c);const S=x.match(/'/g),N=x.match(/"/g);((S?.length??0)%2===0&&!N||N.length%2!==0)&&(x=x.replace(/'/g,'"'));try{c=JSON.parse(x),m&&(c={...m,...c})}catch(E){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,E),`${h}${y}${x}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,h};for(;i=this.nestingRegexp.exec(e);){let h=[];c={...s},c=c.replace&&!Fe(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const m=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(m!==-1&&(h=i[1].slice(m).split(this.formatSeparator).map(y=>y.trim()).filter(Boolean),i[1]=i[1].slice(0,m)),l=n(d.call(this,i[1].trim(),c),c),l&&i[0]===e&&!Fe(l))return l;Fe(l)||(l=Fx(l)),l||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),l=""),h.length&&(l=h.reduce((y,b)=>this.format(y,b,s.lng,{...s,interpolationkey:i[1].trim()}),l.trim())),e=e.replace(i[0],l),this.regexp.lastIndex=0}return e}}const Ij=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const s=t.split("(");e=s[0].toLowerCase().trim();const i=s[1].substring(0,s[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(c=>{if(c){const[d,...h]=c.split(":"),m=h.join(":").trim().replace(/^'+|'+$/g,""),y=d.trim();n[y]||(n[y]=m),m==="false"&&(n[y]=!1),m==="true"&&(n[y]=!0),isNaN(m)||(n[y]=parseInt(m,10))}})}return{formatName:e,formatOptions:n}},nv=t=>{const e={};return(n,s,i)=>{let l=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(l={...l,[i.interpolationkey]:void 0});const c=s+JSON.stringify(l);let d=e[c];return d||(d=t(Gc(s),i),e[c]=d),d(n)}},Bj=t=>(e,n,s)=>t(Gc(n),s)(e);class Uj{constructor(e={}){this.logger=$s.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const s=n.cacheInBuiltFormats?nv:Bj;this.formats={number:s((i,l)=>{const c=new Intl.NumberFormat(i,{...l});return d=>c.format(d)}),currency:s((i,l)=>{const c=new Intl.NumberFormat(i,{...l,style:"currency"});return d=>c.format(d)}),datetime:s((i,l)=>{const c=new Intl.DateTimeFormat(i,{...l});return d=>c.format(d)}),relativetime:s((i,l)=>{const c=new Intl.RelativeTimeFormat(i,{...l});return d=>c.format(d,l.range||"day")}),list:s((i,l)=>{const c=new Intl.ListFormat(i,{...l});return d=>c.format(d)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=nv(n)}format(e,n,s,i={}){const l=n.split(this.formatSeparator);if(l.length>1&&l[0].indexOf("(")>1&&l[0].indexOf(")")<0&&l.find(d=>d.indexOf(")")>-1)){const d=l.findIndex(h=>h.indexOf(")")>-1);l[0]=[l[0],...l.splice(1,d)].join(this.formatSeparator)}return l.reduce((d,h)=>{const{formatName:m,formatOptions:y}=Ij(h);if(this.formats[m]){let b=d;try{const x=i?.formatParams?.[i.interpolationkey]||{},S=x.locale||x.lng||i.locale||i.lng||s;b=this.formats[m](d,S,{...y,...i,...x})}catch(x){this.logger.warn(x)}return b}else this.logger.warn(`there was no format function for ${m}`);return d},e)}}const qj=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class $j extends kf{constructor(e,n,s,i={}){super(),this.backend=e,this.store=n,this.services=s,this.languageUtils=s.languageUtils,this.options=i,this.logger=$s.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,i.backend,i)}queueLoad(e,n,s,i){const l={},c={},d={},h={};return e.forEach(m=>{let y=!0;n.forEach(b=>{const x=`${m}|${b}`;!s.reload&&this.store.hasResourceBundle(m,b)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?c[x]===void 0&&(c[x]=!0):(this.state[x]=1,y=!1,c[x]===void 0&&(c[x]=!0),l[x]===void 0&&(l[x]=!0),h[b]===void 0&&(h[b]=!0)))}),y||(d[m]=!0)}),(Object.keys(l).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(l),pending:Object.keys(c),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(h)}}loaded(e,n,s){const i=e.split("|"),l=i[0],c=i[1];n&&this.emit("failedLoading",l,c,n),!n&&s&&this.store.addResourceBundle(l,c,s,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&s&&(this.state[e]=0);const d={};this.queue.forEach(h=>{Cj(h.loaded,[l],c),qj(h,e),n&&h.errors.push(n),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(m=>{d[m]||(d[m]={});const y=h.loaded[m];y.length&&y.forEach(b=>{d[m][b]===void 0&&(d[m][b]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(h=>!h.done)}read(e,n,s,i=0,l=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:s,tried:i,wait:l,callback:c});return}this.readingCalls++;const d=(m,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const b=this.waitingReads.shift();this.read(b.lng,b.ns,b.fcName,b.tried,b.wait,b.callback)}if(m&&y&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,s,i+1,l*2,c)},l);return}c(m,y)},h=this.backend[s].bind(this.backend);if(h.length===2){try{const m=h(e,n);m&&typeof m.then=="function"?m.then(y=>d(null,y)).catch(d):d(null,m)}catch(m){d(m)}return}return h(e,n,d)}prepareLoading(e,n,s={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Fe(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Fe(n)&&(n=[n]);const l=this.queueLoad(e,n,s,i);if(!l.toLoad.length)return l.pending.length||i(),null;l.toLoad.forEach(c=>{this.loadOne(c)})}load(e,n,s){this.prepareLoading(e,n,{},s)}reload(e,n,s){this.prepareLoading(e,n,{reload:!0},s)}loadOne(e,n=""){const s=e.split("|"),i=s[0],l=s[1];this.read(i,l,"read",void 0,void 0,(c,d)=>{c&&this.logger.warn(`${n}loading namespace ${l} for language ${i} failed`,c),!c&&d&&this.logger.log(`${n}loaded namespace ${l} for language ${i}`,d),this.loaded(e,c,d)})}saveMissing(e,n,s,i,l,c={},d=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${s}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const h={...c,isUpdate:l},m=this.backend.create.bind(this.backend);if(m.length<6)try{let y;m.length===5?y=m(e,n,s,i,h):y=m(e,n,s,i),y&&typeof y.then=="function"?y.then(b=>d(null,b)).catch(d):d(null,y)}catch(y){d(y)}else m(e,n,s,i,d,h)}!e||!e[0]||this.store.addResource(e[0],n,s,i)}}}const np=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Fe(t[1])&&(e.defaultValue=t[1]),Fe(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(s=>{e[s]=n[s]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),av=t=>(Fe(t.ns)&&(t.ns=[t.ns]),Fe(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Fe(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),Sd=()=>{},Vj=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Ic extends kf{constructor(e={},n){if(super(),this.options=av(e),this.services={},this.logger=$s,this.modules={external:[]},Vj(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(Fe(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=np();this.options={...s,...this.options,...av(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=s.overloadTranslationOptionHandler),this.options.debug===!0&&typeof console<"u"&&console.warn("i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com");const i=m=>m?typeof m=="function"?new m:m:null;if(!this.options.isClone){this.modules.logger?$s.init(i(this.modules.logger),this.options):$s.init(null,this.options);let m;this.modules.formatter?m=this.modules.formatter:m=Uj;const y=new Zx(this.options);this.store=new Wx(this.options.resources,this.options);const b=this.services;b.logger=$s,b.resourceStore=this.store,b.languageUtils=y,b.pluralResolver=new zj(y,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),m&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(b.formatter=i(m),b.formatter.init&&b.formatter.init(b,this.options),this.options.interpolation.format=b.formatter.format.bind(b.formatter)),b.interpolator=new tv(this.options),b.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},b.backendConnector=new $j(i(this.modules.backend),b.resourceStore,b,this.options),b.backendConnector.on("*",(S,...N)=>{this.emit(S,...N)}),this.modules.languageDetector&&(b.languageDetector=i(this.modules.languageDetector),b.languageDetector.init&&b.languageDetector.init(b,this.options.detection,this.options)),this.modules.i18nFormat&&(b.i18nFormat=i(this.modules.i18nFormat),b.i18nFormat.init&&b.i18nFormat.init(this)),this.translator=new rf(this.services,this.options),this.translator.on("*",(S,...N)=>{this.emit(S,...N)}),this.modules.external.forEach(S=>{S.init&&S.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Sd),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(m=>{this[m]=(...y)=>this.store[m](...y)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(m=>{this[m]=(...y)=>(this.store[m](...y),this)});const d=wc(),h=()=>{const m=(y,b)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(b),n(y,b)};if(this.languages&&!this.isInitialized)return m(null,this.t.bind(this));this.changeLanguage(this.options.lng,m)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),d}loadResources(e,n=Sd){let s=n;const i=Fe(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const l=[],c=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(m=>{m!=="cimode"&&l.indexOf(m)<0&&l.push(m)})};i?c(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>c(h)),this.options.preload?.forEach?.(d=>c(d)),this.services.backendConnector.load(l,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(d)})}else s(null)}reloadResources(e,n,s){const i=wc();return typeof e=="function"&&(s=e,e=void 0),typeof n=="function"&&(s=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),s||(s=Sd),this.services.backendConnector.reload(e,n,l=>{i.resolve(),s(l)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&yS.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const s=this.languages[n];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const s=wc();this.emit("languageChanging",e);const i=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},l=(d,h)=>{h?this.isLanguageChangingTo===e&&(i(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,s.resolve((...m)=>this.t(...m)),n&&n(d,(...m)=>this.t(...m))},c=d=>{!e&&!d&&this.services.languageDetector&&(d=[]);const h=Fe(d)?d:d&&d[0],m=this.store.hasLanguageSomeTranslations(h)?h:this.services.languageUtils.getBestMatchFromCodes(Fe(d)?[d]:d);m&&(this.language||i(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector?.cacheUserLanguage?.(m)),this.loadResources(m,y=>{l(y,m)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),s}getFixedT(e,n,s){const i=(l,c,...d)=>{let h;typeof c!="object"?h=this.options.overloadTranslationOptionHandler([l,c].concat(d)):h={...c},h.lng=h.lng||i.lng,h.lngs=h.lngs||i.lngs,h.ns=h.ns||i.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||s||i.keyPrefix);const m=this.options.keySeparator||".";let y;return h.keyPrefix&&Array.isArray(l)?y=l.map(b=>(typeof b=="function"&&(b=sf(b,{...this.options,...c})),`${h.keyPrefix}${m}${b}`)):(typeof l=="function"&&(l=sf(l,{...this.options,...c})),y=h.keyPrefix?`${h.keyPrefix}${m}${l}`:l),this.t(y,h)};return Fe(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=s,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const c=(d,h)=>{const m=this.services.backendConnector.state[`${d}|${h}`];return m===-1||m===0||m===2};if(n.precheck){const d=n.precheck(this,c);if(d!==void 0)return d}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(s,e)&&(!i||c(l,e)))}loadNamespaces(e,n){const s=wc();return this.options.ns?(Fe(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{s.resolve(),n&&n(i)}),s):(n&&n(),Promise.resolve())}loadLanguages(e,n){const s=wc();Fe(e)&&(e=[e]);const i=this.options.preload||[],l=e.filter(c=>i.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return l.length?(this.options.preload=i.concat(l),this.loadResources(c=>{s.resolve(),n&&n(c)}),s):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const l=i.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new Zx(np());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){const s=new Ic(e,n);return s.createInstance=Ic.createInstance,s}cloneInstance(e={},n=Sd){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},l=new Ic(i);if((e.debug!==void 0||e.prefix!==void 0)&&(l.logger=l.logger.clone(e)),["store","services","language"].forEach(d=>{l[d]=this[d]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},s){const d=Object.keys(this.store.data).reduce((h,m)=>(h[m]={...this.store.data[m]},h[m]=Object.keys(h[m]).reduce((y,b)=>(y[b]={...h[m][b]},y),h[m]),h),{});l.store=new Wx(d,i),l.services.resourceStore=l.store}if(e.interpolation){const h={...np().interpolation,...this.options.interpolation,...e.interpolation},m={...i,interpolation:h};l.services.interpolator=new tv(m)}return l.translator=new rf(l.services,i),l.translator.on("*",(d,...h)=>{l.emit(d,...h)}),l.init(i,n),l.translator.options=i,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Jn=Ic.createInstance();Jn.createInstance;Jn.dir;Jn.init;Jn.loadResources;Jn.reloadResources;Jn.use;Jn.changeLanguage;Jn.getFixedT;Jn.t;Jn.exists;Jn.setDefaultNamespace;Jn.hasLoadedNamespace;Jn.loadNamespaces;Jn.loadLanguages;var ap,sv;function Hj(){return sv||(sv=1,ap={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ap}var Fj=Hj();const Gj=jf(Fj);var Yj=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function rv(t){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=t.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(e.name=n[1],(Gj[n[1]]||t.charAt(t.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var s=t.indexOf("-->");return{type:"comment",comment:s!==-1?t.slice(4,s):""}}for(var i=new RegExp(Yj),l=null;(l=i.exec(t))!==null;)if(l[0].trim())if(l[1]){var c=l[1].trim(),d=[c,""];c.indexOf("=")>-1&&(d=c.split("=")),e.attrs[d[0]]=d[1],i.lastIndex--}else l[2]&&(e.attrs[l[2]]=l[3].trim().substring(1,l[3].length-1));return e}var Kj=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Wj=/^\s*$/,Xj=Object.create(null);function xS(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?(function(n){var s=[];for(var i in n)s.push(i+'="'+n[i]+'"');return s.length?" "+s.join(" "):""})(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(xS,"")+"</"+e.name+">";case"comment":return t+"<!--"+e.comment+"-->"}}var Zj={parse:function(t,e){e||(e={}),e.components||(e.components=Xj);var n,s=[],i=[],l=-1,c=!1;if(t.indexOf("<")!==0){var d=t.indexOf("<");s.push({type:"text",content:d===-1?t:t.substring(0,d)})}return t.replace(Kj,function(h,m){if(c){if(h!=="</"+n.name+">")return;c=!1}var y,b=h.charAt(1)!=="/",x=h.startsWith("<!--"),S=m+h.length,N=t.charAt(S);if(x){var E=rv(h);return l<0?(s.push(E),s):((y=i[l]).children.push(E),s)}if(b&&(l++,(n=rv(h)).type==="tag"&&e.components[n.name]&&(n.type="component",c=!0),n.voidElement||c||!N||N==="<"||n.children.push({type:"text",content:t.slice(S,t.indexOf("<",S))}),l===0&&s.push(n),(y=i[l-1])&&y.children.push(n),i[l]=n),(!b||n.voidElement)&&(l>-1&&(n.voidElement||n.name===h.slice(2,-1))&&(l--,n=l===-1?s:i[l]),!c&&N!=="<"&&N)){y=l===-1?s:i[l].children;var j=t.indexOf("<",S),D=t.slice(S,j===-1?void 0:j);Wj.test(D)&&(D=" "),(j>-1&&l+y.length>=0||D!==" ")&&y.push({type:"text",content:D})}}),s},stringify:function(t){return t.reduce(function(e,n){return e+xS("",n)},"")}};const Hd=(t,e,n,s)=>{const i=[n,{code:e,...s||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);ga(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...i):console?.warn&&console.warn(...i)},iv={},Df=(t,e,n,s)=>{ga(n)&&iv[n]||(ga(n)&&(iv[n]=new Date),Hd(t,e,n,s))},vS=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Xp=(t,e,n)=>{t.loadNamespaces(e,vS(t,n))},ov=(t,e,n,s)=>{if(ga(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Xp(t,n,s);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,vS(t,s))},Qj=(t,e,n={})=>!e.languages||!e.languages.length?(Df(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(s,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!i(s.isLanguageChangingTo,t))return!1}}),ga=t=>typeof t=="string",xr=t=>typeof t=="object"&&t!==null,Jj=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,e5={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},t5=t=>e5[t],wS=t=>t.replace(Jj,t5);let Zp={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:wS,transDefaultProps:void 0};const n5=(t={})=>{Zp={...Zp,...t}},Wg=()=>Zp;let SS;const a5=t=>{SS=t},Xg=()=>SS,Fd=(t,e)=>{if(!t)return!1;const n=t.props?.children??t.children;return e?n.length>0:!!n},Gd=t=>{if(!t)return[];const e=t.props?.children??t.children;return t.props?.i18nIsDynamicList?Xi(e):e},s5=t=>Array.isArray(t)&&t.every(T.isValidElement),Xi=t=>Array.isArray(t)?t:[t],r5=(t,e)=>{const n={...e};return n.props=Object.assign(t.props,e.props),n},i5=t=>{const e={};if(!t)return e;const n=s=>{Xi(s).forEach(l=>{ga(l)||(Fd(l)?n(Gd(l)):xr(l)&&!T.isValidElement(l)&&Object.assign(e,l))})};return n(t),e},NS=(t,e,n,s)=>{if(!t)return"";let i="";const l=Xi(t),c=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return l.forEach((d,h)=>{if(ga(d)){i+=`${d}`;return}if(T.isValidElement(d)){const{props:m,type:y}=d,b=Object.keys(m).length,x=c.indexOf(y)>-1,S=m.children;if(!S&&x&&!b){i+=`<${y}/>`;return}if(!S&&(!x||b)||m.i18nIsDynamicList){i+=`<${h}></${h}>`;return}if(x&&b===1&&ga(S)){i+=`<${y}>${S}</${y}>`;return}const N=NS(S,e,n,s);i+=`<${h}>${N}</${h}>`;return}if(d===null){Hd(n,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:s});return}if(xr(d)){const{format:m,...y}=d,b=Object.keys(y);if(b.length===1){const x=m?`${b[0]}, ${m}`:b[0];i+=`{{${x}}}`;return}Hd(n,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:s,child:d});return}Hd(n,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:s,child:d})}),i},o5=(t,e=[],n={})=>{if(!t)return t;const s=Object.keys(n),i=[...e,...s];let l="",c=0;for(;c<t.length;)if(t[c]==="<"){let d=!1;const h=t.slice(c).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9_-]*)>/);if(h){const m=h[1];(/^\d+$/.test(m)||i.includes(m))&&(d=!0,l+=h[0],c+=h[0].length)}if(!d){const m=t.slice(c).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9_-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(m){const y=m[1];(/^\d+$/.test(y)||i.includes(y))&&(d=!0,l+=m[0],c+=m[0].length)}}d||(l+="&lt;",c+=1)}else l+=t[c],c+=1;return l},l5=(t,e,n,s,i,l,c)=>{if(n==="")return[];const d=i.transKeepBasicHtmlNodesFor||[],h=n&&new RegExp(d.map(O=>`<${O}`).join("|")).test(n);if(!t&&!e&&!h&&!c)return[n];const m=e??{},y=O=>{Xi(O).forEach(U=>{ga(U)||(Fd(U)?y(Gd(U)):xr(U)&&!T.isValidElement(U)&&Object.assign(m,U))})};y(t);const b=o5(n,d,m),x=Zj.parse(`<0>${b}</0>`),S={...m,...l},N=(O,R,U)=>{const L=Gd(O),H=j(L,R.children,U);return s5(L)&&H.length===0||O.props?.i18nIsDynamicList?L:H},E=(O,R,U,L,H)=>{O.dummy?(O.children=R,U.push(T.cloneElement(O,{key:L},H?void 0:R))):U.push(...T.Children.map([O],z=>{const P="data-i18n-is-dynamic-list",Y={key:L,[P]:void 0};return z&&z.props&&Object.keys(z.props).forEach(Q=>{Q==="ref"||Q==="children"||Q==="i18nIsDynamicList"||Q===P||(Y[Q]=z.props[Q])}),T.cloneElement(z,Y,H?null:R)}))},j=(O,R,U)=>{const L=Xi(O);return Xi(R).reduce((z,P,Y)=>{const Q=P.children?.[0]?.content&&s.services.interpolator.interpolate(P.children[0].content,S,s.language);if(P.type==="tag"){let A=L[parseInt(P.name,10)];!A&&e&&(A=e[P.name]),U.length===1&&!A&&(A=U[0][P.name]),A||(A={});const F={...P.attrs};c&&Object.keys(F).forEach(q=>{const oe=F[q];ga(oe)&&(F[q]=wS(oe))});const B=Object.keys(F).length!==0?r5({props:F},A):A,te=T.isValidElement(B),se=te&&Fd(P,!0)&&!P.voidElement,C=h&&xr(B)&&B.dummy&&!te,I=xr(e)&&Object.hasOwnProperty.call(e,P.name);if(ga(B)){const q=s.services.interpolator.interpolate(B,S,s.language);z.push(q)}else if(Fd(B)||se){const q=N(B,P,U);E(B,q,z,Y)}else if(C){const q=j(L,P.children,U);E(B,q,z,Y)}else if(Number.isNaN(parseFloat(P.name)))if(I){const q=N(B,P,U);E(B,q,z,Y,P.voidElement)}else if(i.transSupportBasicHtmlNodes&&d.indexOf(P.name)>-1)if(P.voidElement)z.push(T.createElement(P.name,{key:`${P.name}-${Y}`}));else{const q=j(L,P.children,U);z.push(T.createElement(P.name,{key:`${P.name}-${Y}`},q))}else if(P.voidElement)z.push(`<${P.name} />`);else{const q=j(L,P.children,U);z.push(`<${P.name}>${q}</${P.name}>`)}else if(xr(B)&&!te){const q=P.children[0]?Q:null;q&&z.push(q)}else E(B,Q,z,Y,P.children.length!==1||!Q)}else if(P.type==="text"){const A=i.transWrapTextNodes,F=typeof i.unescape=="function"?i.unescape:Wg().unescape,B=c?F(s.services.interpolator.interpolate(P.content,S,s.language)):s.services.interpolator.interpolate(P.content,S,s.language);A?z.push(T.createElement(A,{key:`${P.name}-${Y}`},B)):z.push(B)}return z},[])},D=j([{dummy:!0,children:t||[]}],x,Xi(t||[]));return Gd(D[0])},TS=(t,e,n)=>{const s=t.key||e,i=T.cloneElement(t,{key:s});if(!i.props||!i.props.children||n.indexOf(`${e}/>`)<0&&n.indexOf(`${e} />`)<0)return i;function l(){return T.createElement(T.Fragment,null,i)}return T.createElement(l,{key:s})},c5=(t,e)=>t.map((n,s)=>TS(n,s,e)),u5=(t,e)=>{const n={};return Object.keys(t).forEach(s=>{Object.assign(n,{[s]:TS(t[s],s,e)})}),n},d5=(t,e,n,s)=>t?Array.isArray(t)?c5(t,e):xr(t)?u5(t,e):(Df(n,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:s}),null):null,f5=t=>!xr(t)||Array.isArray(t)?!1:Object.keys(t).reduce((e,n)=>e&&Number.isNaN(Number.parseFloat(n)),!0);function h5({children:t,count:e,parent:n,i18nKey:s,context:i,tOptions:l={},values:c,defaults:d,components:h,ns:m,i18n:y,t:b,shouldUnescape:x,...S}){const N=y||Xg();if(!N)return Df(N,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:s}),t;const E=b||N.t.bind(N)||(ce=>ce),j={...Wg(),...N.options?.react};let D=m||E.ns||N.options?.defaultNS;D=ga(D)?[D]:D||["translation"];const{transDefaultProps:O}=j,R=O?.tOptions?{...O.tOptions,...l}:l,U=x??O?.shouldUnescape,L=O?.values?{...O.values,...c}:c,H=O?.components?{...O.components,...h}:h,z=NS(t,j,N,s),P=d||R?.defaultValue||z||j.transEmptyNodeValue||(typeof s=="function"?sf(s):s),{hashTransKey:Y}=j,Q=s||(Y?Y(z||P):z||P);N.options?.interpolation?.defaultVariables?c=L&&Object.keys(L).length>0?{...L,...N.options.interpolation.defaultVariables}:{...N.options.interpolation.defaultVariables}:c=L;const A=i5(t);A&&typeof A.count=="number"&&e===void 0&&(e=A.count);const F=c||e!==void 0&&!N.options?.interpolation?.alwaysFormat||!t?R.interpolation:{interpolation:{...R.interpolation,prefix:"#$?",suffix:"?$#"}},B={...R,context:i||R.context,count:e,...c,...F,defaultValue:P,ns:D};let te=Q?E(Q,B):P;te===Q&&P&&(te=P);const se=d5(H,te,N,s);let C=se||t,I=null;f5(se)&&(I=se,C=t);const q=l5(C,I,te,N,j,B,U),oe=n??j.defaultTransParent;return oe?T.createElement(oe,S,q):q}const m5={type:"3rdParty",init(t){n5(t.options.react),a5(t)}},ES=T.createContext();class p5{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function Nd({children:t,count:e,parent:n,i18nKey:s,context:i,tOptions:l={},values:c,defaults:d,components:h,ns:m,i18n:y,t:b,shouldUnescape:x,...S}){const{i18n:N,defaultNS:E}=T.useContext(ES)||{},j=y||N||Xg(),D=b||j?.t.bind(j);return h5({children:t,count:e,parent:n,i18nKey:s,context:i,tOptions:l,values:c,defaults:d,components:h,ns:m||D?.ns||E||j?.options?.defaultNS,i18n:j,t:b,shouldUnescape:x,...S})}var sp={exports:{}},rp={};var lv;function g5(){if(lv)return rp;lv=1;var t=_f();function e(b,x){return b===x&&(b!==0||1/b===1/x)||b!==b&&x!==x}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,i=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function d(b,x){var S=x(),N=s({inst:{value:S,getSnapshot:x}}),E=N[0].inst,j=N[1];return l(function(){E.value=S,E.getSnapshot=x,h(E)&&j({inst:E})},[b,S,x]),i(function(){return h(E)&&j({inst:E}),b(function(){h(E)&&j({inst:E})})},[b]),c(S),S}function h(b){var x=b.getSnapshot;b=b.value;try{var S=x();return!n(b,S)}catch{return!0}}function m(b,x){return x()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return rp.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,rp}var cv;function y5(){return cv||(cv=1,sp.exports=g5()),sp.exports}var b5=y5();const x5=(t,e)=>ga(e)?e:xr(e)&&ga(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,v5={t:x5,ready:!1},w5=()=>()=>{},yn=(t,e={})=>{const{i18n:n}=e,{i18n:s,defaultNS:i}=T.useContext(ES)||{},l=n||s||Xg();l&&!l.reportNamespaces&&(l.reportNamespaces=new p5),l||Df(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=T.useMemo(()=>({...Wg(),...l?.options?.react,...e}),[l,e]),{useSuspense:d,keyPrefix:h}=c,m=i||l?.options?.defaultNS,y=ga(m)?[m]:m||["translation"],b=T.useMemo(()=>y,y);l?.reportNamespaces?.addUsedNamespaces?.(b);const x=T.useRef(0),S=T.useCallback(Y=>{if(!l)return w5;const{bindI18n:Q,bindI18nStore:A}=c,F=()=>{x.current+=1,Y()};return Q&&l.on(Q,F),A&&l.store.on(A,F),()=>{Q&&Q.split(" ").forEach(B=>l.off(B,F)),A&&A.split(" ").forEach(B=>l.store.off(B,F))}},[l,c]),N=T.useRef(),E=T.useCallback(()=>{if(!l)return v5;const Y=!!(l.isInitialized||l.initializedStoreOnce)&&b.every(se=>Qj(se,l,c)),Q=e.lng||l.language,A=x.current,F=N.current;if(F&&F.ready===Y&&F.lng===Q&&F.keyPrefix===h&&F.revision===A)return F;const te={t:l.getFixedT(Q,c.nsMode==="fallback"?b:b[0],h),ready:Y,lng:Q,keyPrefix:h,revision:A};return N.current=te,te},[l,b,h,c,e.lng]),[j,D]=T.useState(0),{t:O,ready:R}=b5.useSyncExternalStore(S,E,E);T.useEffect(()=>{if(l&&!R&&!d){const Y=()=>D(Q=>Q+1);e.lng?ov(l,e.lng,b,Y):Xp(l,b,Y)}},[l,e.lng,b,R,d,j]);const U=l||{},L=T.useRef(null),H=T.useRef(),z=Y=>{const Q=Object.getOwnPropertyDescriptors(Y);Q.__original&&delete Q.__original;const A=Object.create(Object.getPrototypeOf(Y),Q);if(!Object.prototype.hasOwnProperty.call(A,"__original"))try{Object.defineProperty(A,"__original",{value:Y,writable:!1,enumerable:!1,configurable:!1})}catch{}return A},P=T.useMemo(()=>{const Y=U,Q=Y?.language;let A=Y;Y&&(L.current&&L.current.__original===Y?H.current!==Q?(A=z(Y),L.current=A,H.current=Q):A=L.current:(A=z(Y),L.current=A,H.current=Q));const F=[O,A,R];return F.t=O,F.i18n=A,F.ready=R,F},[O,U,R,U.resolvedLanguage,U.language,U.languages]);if(l&&d&&!R)throw new Promise(Y=>{const Q=()=>Y();e.lng?ov(l,e.lng,b,Q):Xp(l,b,Q)});return P},S5={write:"Write",calendar:"Calendar",categories:"Categories",profile:"Profile",settings:"Settings"},N5={save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",select:"Select"},T5={title:"AI Diary",quote:"Every day is a new beginning.",aiAssistant:"AI Assistant",online:"Online"},E5={title:"Settings",api:{title:"API Configuration",configName:"Config Name",provider:"Provider",apiKey:"API Key",baseUrl:"Base URL",model:"Model",fetchModels:"Fetch Models",saveConfig:"Save Config",cancel:"Cancel",addNew:"Add New API Config",deleteConfirmTitle:"Delete Configuration?",deleteConfirmMessage:"This action cannot be undone. Are you sure you want to delete this API configuration?",delete:"Delete",pleaseEnterApiKey:"Please enter an API Key first.",failedToFetchModels:"Failed to fetch models: {{error}}",myApi:"e.g. My API",modelPlaceholder:"e.g. gpt-3.5-turbo"},ai:{title:"AI Persona Settings",defaultPersona:{name:"Default",description:"User-centric, supportive friend who provides emotional value and casual guidance."},newPersonaDesc:"A new custom AI persona",promptPlaceholder:"Describe how the AI should behave...",defaultSystemPromptHidden:"Default System Prompt (Hidden)",name:"Name",description:"Description",replyStyle:"Reply Style",customPrompt:"Custom Prompt",savePersona:"Save Persona",cancel:"Cancel",createNew:"Create New Persona",deleteConfirmTitle:"Delete Persona",deleteConfirmMessage:"Are you sure you want to delete this AI Persona? This action cannot be undone.",delete:"Delete",styles:{warm:"Warm & Supportive",analytical:"Analytical & Objective",concise:"Concise & Direct",humorous:"Humorous & Playful"},globalStyle:{title:"Global Diary Generation Style",description:"This style will be applied to all AI-generated diaries, regardless of the active chat persona.",preset:"Style Preset",defaultPreset:"Default",wordCount:"Target Word Count",words:"words",withAiTrace:"With AI Trace",withAiTraceDesc:"Add AI commentary and analysis to the diary.",stylePrompt:"Style Prompt Instruction",editable:"(Editable)",newPresetTitle:"New Style Preset",presetNamePlaceholder:"Preset Name (e.g. Poetic)",stylePromptPlaceholder:"Style Instruction Prompt...",addPreset:"Add Preset"}},usage:{title:"Usage Guide",chat:"Chat Mode",chatDesc:"Chat freely with AI to share your daily moments. AI will remember your stories and generate a diary for you at the end of the day.",manual:"Manual Mode",manualDesc:"Switch to manual mode to write the diary yourself. You can also use the AI Polish Assistant to improve your writing.",polish:"Polish Assistant",polishDesc:"In manual mode, click the 'Magic Wand' icon to let AI help you check grammar, enrich vocabulary, or change the tone.",settings:"Personalization",settingsDesc:"Adjust AI persona, response style, and diary generation length and tone in settings."},interface:{title:"Interface Settings",language:"System Language",theme:"Theme Colors",reset:"Reset Defaults",presets:"PRESETS",primaryColor:"Primary Color",backgroundColor:"Background Color",chatBackground:"Chat Background",uploadDesc:"Upload an image to personalize your chat background.",upload:"Upload",remove:"Remove",customCss:"Custom Bubble CSS",customCssDesc:"Target .message-user or .message-ai"},backup:{title:"Data Backup & Restore",local:{title:"Local & iCloud Backup",description:"Download JSON file or restore from local backup",info:"Download your data as a JSON file. For <strong>iCloud Sync</strong>, simply save the downloaded file to your iCloud Drive folder.",download:"Download Backup",restore:"Restore from File",restoreConfirm:"Are you sure you want to restore this backup? This will OVERWRITE your current data.",restoreSuccess:"Restore successful! The page will now reload.",restoreError:"Failed to restore: Invalid file format",downloadError:"Failed to generate backup"},github:{title:"GitHub Gist Sync",description:"Sync data to a private GitHub Gist",linked:"Linked",pat:"Personal Access Token (PAT)",patHelp:"Requires <code>gist</code> scope.",getToken:"Get Token",gistId:"Linked Gist ID",unlink:"Unlink",autoBackup:"Auto-Backup",autoBackupHelp:"Sync to Gist automatically (Every hour)",sync:"Sync (Push)",create:"Create Backup",import:"Import (Restore)",tokenRequired:"Token required",tokenAndGistRequired:"Token and Gist ID required",restoreConfirm:"Are you sure you want to restore from GitHub? This will OVERWRITE your local data with the Gist content.",syncSuccess:"Synced to Gist",restoreError:"Restore failed: {{error}}"},gdrive:{title:"Google Drive",description:"Direct upload via Access Token",info:"Recommended: Use <strong>Local Backup</strong> and save the file to your Google Drive folder manually for better security.",token:"OAuth Access Token (Advanced)",upload:"Upload to Drive",success:"Uploaded successfully!",error:"Error: {{error}}"},reset:{title:"Reset All Data",description:"Permanently delete all local data",warning:"<strong>Warning:</strong> This action will delete all your diaries, chat history, and settings from this browser. This action cannot be undone unless you have a backup.",confirmBtn:"Confirm Reset Everything",confirmAlert:"Are you absolutely sure? This cannot be undone."}}},A5={title:"Personal Manual",subtitle:"A deep dive into who you are, for better AI understanding.",basicInfo:{yourName:"Your Name",nickname:"Nickname",identity:"Identity / Role",identityPlaceholder:"e.g. Dreamer, Engineer",birthday:"Birthday",residence:"Residence",residencePlaceholder:"City, Country",schoolWork:"School / Work",schoolWorkPlaceholder:"University or Company",location:"Location (Work/School)",locationPlaceholder:"Where is it?"},avatar:{upload:"Upload Photo",link:"Image URL",change:"Change Avatar",linkTitle:"Image Link"},sections:{coreSelf:"Core Self",lifeExperience:"Life Experience",currentFocus:"Goals",interests:"Interests",connections:"Connections"},fields:{personality:"Personality",personalityPlaceholder:"MBTI, Enneagram...",values:"Values",valuesPlaceholder:"What matters most?",dislikes:"Dislikes",dislikesPlaceholder:"Deal breakers..."},timeline:{add:"Add Milestone",yearPlaceholder:"Year/Time",contentPlaceholder:"What happened?"},focus:{add:"Add Focus Area",placeholder:"I'm focusing on..."},interests:{add:"Add interest..."},connections:{add:"Add Relationship",namePlaceholder:"Name",relationPlaceholder:"Relationship",notePlaceholder:"Notes about them..."},pets:{title:"Pets",add:"Add Pet",namePlaceholder:"Pet Name",typePlaceholder:"Type (Cat, Dog...)",notePlaceholder:"About them..."},save:{button:"Save Changes",saved:"Saved",success:"Profile updated successfully!"},common:{confirm:"Confirm",cancel:"Cancel"}},C5={mood_placeholder:"How are you feeling now?",greeting_initial:"Hi there! How are you feeling today?",recording:"Recording",deleteSelected:"Delete ({{count}})",deleteConfirm:"Delete {{count}} messages?",generate:"Generate Diary",generating:"Generating...",aiAssistant:"AI Assistant",saving:"Saving...",save:"Save",futureDate:{title:"Tomorrow's mystery awaits",quote:"Leave tomorrow's things for tomorrow.",goBack:"Go Back"},chat:{placeholder:"Type your message...",reply:"Reply",uploadImage:"Upload Image",send:"Send Message",cancelSelection:"Cancel Selection",selectMessages:"Select Messages",copy:"Copy",edit:"Edit",delete:"Delete",regenerate:"Regenerate",mode:"Chat Mode",manualMode:"Manual Mode"},manual:{titlePlaceholder:"Title",category:"Category",tags:"Tags",contentPlaceholder:"Start writing..."},generated:{title:"Generated Diary",crafting:"Crafting your diary...",titlePlaceholder:"Diary Title",reroll:"Reroll",save:"Save to Diary",rerollTitle:"Regenerate Diary",rerollInstruction:'Optional: Provide specific instructions for this version (e.g., "Make it more poetic", "Focus on the morning").',rerollPlaceholder:"Optional instruction...",cancel:"Cancel",confirm:"Regenerate"},categorySelector:{placeholder:"Select or type category...",clear:"Clear",create:'Create "{{value}}"',noCategories:"No categories found."},tagEditor:{placeholder:"Add tag..."},diffViewer:{noChanges:"No changes detected.",back:"Back to Editor",metadataChanges:"Suggested Metadata Changes",title:"Title",untitled:"(Untitled)",tags:"Tags",noTags:"(No tags)",instructions:"Click highlights to toggle Accept/Reject",added:"Added",removed:"Removed",include:"Click to include",discard:"Click to discard",delete:"Click to delete",restore:"Click to restore",rejectAll:"Reject All",applySelected:"Apply Selected"},polish:{greeting:"Hi! I'm your writing assistant. I can help you polish your diary, fix grammar, or suggest improvements. Just ask or click 'One-Click Polish'!",error:"Sorry, I encountered an error. Please try again.",errorReroll:"Sorry, I encountered an error during reroll. Please try again.",defaultName:"Writing Assistant",title:"Title",tags:"Tags",content:"Content",polishedAvailable:"Polished text available",compareApply:"Compare & Apply",reroll:"Reroll",oneClick:"One-Click Polish",oneClickPrompt:"Please polish this diary entry to make it flow better and correct any mistakes.",emotional:"Emotional",emotionalPrompt:"Make it more emotional",grammar:"Grammar",grammarPrompt:"Fix grammar only",placeholder:"Ask for changes..."},moods:{happy:"Happy",excited:"Excited",neutral:"Neutral",sad:"Sad",loved:"Loved"},alerts:{noHistory:"No chat history found for {{date}} to generate a diary.",generateFailed:"Failed to generate diary: {{error}}",uploadFailed:"Failed to upload image.",saveFailed:"Failed to save diary: {{error}}"}},j5={title:"Timeline",select_date:"Select Date",hide_calendar:"Hide Calendar",delete_title:"Delete Diary Entry",delete_confirm:"Are you sure you want to delete this diary entry? This action cannot be undone.",delete_button:"Delete",years_ago_one:"{{count}} Year Ago",years_ago_other:"{{count}} Years Ago",read_memory:"Read Memory",no_memories:"No memories yet. Start writing!"},_5={title:"Categories",manage:"Manage",done:"Done",entries:"{{count}} entries",edit_dialog:{edit_title:"Edit Category",add_title:"Add New Category",name_label:"Name",name_placeholder:"Category Name",cover_label:"Cover Image (Optional)",change_image:"Change Image",upload_image:"Upload Image",remove_image:"Remove",recommendation:"Recommended: 3:4 portrait image",color_label:"Color",cancel:"Cancel",save:"Save Changes",create:"Create"},delete_dialog:{title:"Delete Category",message:'Are you sure you want to delete "{{name}}"? Diaries in this category will remain but may become uncategorized.',confirm:"Delete"},defaults:{Uncategorized:"Uncategorized","Daily Life":"Daily Life",Work:"Work",Travel:"Travel"},actions:{edit:"Edit",delete:"Delete"},no_diaries:"No diaries in this category yet"},k5={entry_count_one:"{{count}} Entry",entry_count_other:"{{count}} Entries",write_for_this_day:"Write for this day",go_back:"Go back",add_new:"Add New",no_entries:"No entries found for {{date}}",back_to_timeline:"Back to Timeline",add_another_entry:"Add another entry"},D5={delete_diary_title:"Delete Diary Entry",delete_diary_message:"Are you sure you want to delete this diary entry? This action cannot be undone.",delete_comment_title:"Delete Comment",delete_comment_message:"Are you sure you want to delete this comment? This action cannot be undone.",delete_chat_history_confirm:"Are you sure you want to delete the chat history? This cannot be undone.",delete_chat_history_title:"Delete Chat History",title_placeholder:"Title",category_label:"Category",tags_label:"Tags",content_placeholder:"Write your diary content...",chat_history:"Chat History",messages_count:"{{count}} messages",comments:"Comments",ai_author:"AI ({{name}})",user_author:"You",no_comments:"No comments yet. Why not ask AI for some thoughts?",ask_ai:"Ask AI for comment",add_comment_placeholder:"Add a comment...",edit:"Edit",save:"Save",delete_diary:"Delete Diary",delete_comment:"Delete Comment"},uv={nav:S5,common:N5,layout:T5,settings:E5,profile:A5,write:C5,timeline:j5,categories:_5,diary_entry:k5,diary_item:D5},O5={write:"",calendar:"",categories:"",profile:"",settings:""},M5={save:"",cancel:"",delete:"",edit:"",close:"",select:""},R5={title:"AI ",quote:"",aiAssistant:"AI ",online:""},L5={title:"",api:{title:"API ",configName:"",provider:"",apiKey:"API ",baseUrl:"Base URL",model:"",fetchModels:"",saveConfig:"",cancel:"",addNew:" API ",deleteConfirmTitle:"",deleteConfirmMessage:" API ",delete:"",pleaseEnterApiKey:" API ",failedToFetchModels:": {{error}}",myApi:" API",modelPlaceholder:"gpt-3.5-turbo"},ai:{title:"AI ",defaultPersona:{name:"",description:""},newPersonaDesc:" AI ",promptPlaceholder:" AI ...",defaultSystemPromptHidden:"",name:"",description:"",replyStyle:"",customPrompt:"",savePersona:"",cancel:"",createNew:"",deleteConfirmTitle:"",deleteConfirmMessage:" AI ",delete:"",styles:{warm:"",analytical:"",concise:"",humorous:""},globalStyle:{title:"",description:" AI  AI ",preset:"",defaultPreset:"",wordCount:"",words:"",withAiTrace:" AI ",withAiTraceDesc:" AI ",stylePrompt:"",editable:"()",newPresetTitle:"",presetNamePlaceholder:" ()",stylePromptPlaceholder:"...",addPreset:""}},usage:{title:"",chat:"",chatDesc:" AI AI ",manual:"",manualDesc:" AI ",polish:"",polishDesc:" AI ",settings:"",settingsDesc:" AI "},interface:{title:"",language:"",theme:"",reset:"",presets:"",primaryColor:"",backgroundColor:"",chatBackground:"",uploadDesc:"",upload:"",remove:"",customCss:" CSS",customCssDesc:" .message-user  .message-ai"},backup:{title:"",local:{title:" iCloud ",description:" JSON ",info:" JSON  <strong>iCloud </strong> iCloud Drive ",download:"",restore:"",restoreConfirm:"",restoreSuccess:"",restoreError:"",downloadError:""},github:{title:"GitHub Gist ",description:" GitHub Gist",linked:"",pat:" (PAT)",patHelp:" <code>gist</code> ",getToken:"",gistId:" Gist ID",unlink:"",autoBackup:"",autoBackupHelp:" Gist ()",sync:" ()",create:"",import:" ()",tokenRequired:"",tokenAndGistRequired:" Gist ID",restoreConfirm:" GitHub  Gist ",syncSuccess:" Gist",restoreError:": {{error}}"},gdrive:{title:"Google Drive",description:"",info:"<strong></strong> Google Drive ",token:"OAuth  ()",upload:" Drive",success:"",error:": {{error}}"},reset:{title:"",description:"",warning:"<strong></strong> ",confirmBtn:"",confirmAlert:""}}},P5={title:"",subtitle:" AI ",basicInfo:{yourName:"",nickname:"",identity:" / ",identityPlaceholder:"",birthday:"",residence:"",residencePlaceholder:"",schoolWork:" / ",schoolWorkPlaceholder:"",location:" (/)",locationPlaceholder:""},avatar:{upload:"",link:"",change:"",linkTitle:""},sections:{coreSelf:"",lifeExperience:"",currentFocus:"",interests:"",connections:""},fields:{personality:"",personalityPlaceholder:"MBTI, ...",values:"",valuesPlaceholder:"",dislikes:" / ",dislikesPlaceholder:"..."},timeline:{add:"",yearPlaceholder:"/",contentPlaceholder:""},focus:{add:"",placeholder:"..."},interests:{add:"..."},connections:{add:"",namePlaceholder:"",relationPlaceholder:"",notePlaceholder:" TA ..."},pets:{title:"",add:"",namePlaceholder:"",typePlaceholder:" (...)",notePlaceholder:"..."},save:{button:"",saved:"",success:""},common:{confirm:"",cancel:""}},z5={mood_placeholder:"",greeting_initial:"",recording:"",deleteSelected:" ({{count}})",deleteConfirm:" {{count}} ",generate:"",generating:"...",aiAssistant:"AI ",saving:"...",save:"",futureDate:{title:"",quote:"",goBack:""},chat:{placeholder:"...",reply:"",uploadImage:"",send:"",cancelSelection:"",selectMessages:"",copy:"",edit:"",delete:"",regenerate:"",mode:"",manualMode:""},manual:{titlePlaceholder:"",category:"",tags:"",contentPlaceholder:"..."},generated:{title:"",crafting:"...",titlePlaceholder:"",reroll:"",save:"",rerollTitle:"",rerollInstruction:"",rerollPlaceholder:"...",cancel:"",confirm:""},categorySelector:{placeholder:"...",clear:"",create:' "{{value}}"',noCategories:""},tagEditor:{placeholder:"..."},diffViewer:{noChanges:"",back:"",metadataChanges:"",title:"",untitled:"()",tags:"",noTags:"()",instructions:"/",added:"",removed:"",include:"",discard:"",delete:"",restore:"",rejectAll:"",applySelected:""},polish:{greeting:"",error:"",errorReroll:"",defaultName:"",title:"",tags:"",content:"",polishedAvailable:"",compareApply:"",reroll:"",oneClick:"",oneClickPrompt:"",emotional:"",emotionalPrompt:"",grammar:"",grammarPrompt:"",placeholder:"..."},moods:{happy:"",excited:"",neutral:"",sad:"",loved:""},alerts:{noHistory:" {{date}} ",generateFailed:": {{error}}",uploadFailed:"",saveFailed:": {{error}}"}},I5={title:"",select_date:"",hide_calendar:"",delete_title:"",delete_confirm:"",delete_button:"",years_ago:"{{count}} ",read_memory:"",no_memories:""},B5={title:"",manage:"",done:"",entries:"{{count}} ",edit_dialog:{edit_title:"",add_title:"",name_label:"",name_placeholder:"",cover_label:" ()",change_image:"",upload_image:"",remove_image:"",recommendation:"3:4 ",color_label:"",cancel:"",save:"",create:""},delete_dialog:{title:"",message:"{{name}}",confirm:""},defaults:{Uncategorized:"","Daily Life":"",Work:"",Travel:""},actions:{edit:"",delete:""},no_diaries:""},U5={entry_count:"{{count}} ",write_for_this_day:"",go_back:"",add_new:"",no_entries:" {{date}} ",back_to_timeline:"",add_another_entry:""},q5={delete_diary_title:"",delete_diary_message:"",delete_comment_title:"",delete_comment_message:"",delete_chat_history_confirm:"",delete_chat_history_title:"",title_placeholder:"",category_label:"",tags_label:"",content_placeholder:"...",chat_history:"",messages_count:"{{count}} ",comments:"",ai_author:"AI ({{name}})",user_author:"",no_comments:" AI ",ask_ai:" AI ",add_comment_placeholder:"...",edit:"",save:"",delete_diary:"",delete_comment:""},dv={nav:O5,common:M5,layout:R5,settings:L5,profile:P5,write:z5,timeline:I5,categories:B5,diary_entry:U5,diary_item:q5},$5={write:"",calendar:"",categories:"",profile:"",settings:""},V5={save:"",cancel:"",delete:"",edit:"",close:"",select:""},H5={title:"AI ",quote:"",aiAssistant:"AI ",online:""},F5={title:"",api:{title:"API ",configName:"",provider:"",apiKey:"API ",baseUrl:"Base URL",model:"",fetchModels:"",saveConfig:"",cancel:"",addNew:" API ",deleteConfirmTitle:"",deleteConfirmMessage:" API ",delete:"",pleaseEnterApiKey:" API ",failedToFetchModels:": {{error}}",myApi:" API",modelPlaceholder:"gpt-3.5-turbo"},ai:{title:"AI ",defaultPersona:{name:"",description:""},newPersonaDesc:" AI ",promptPlaceholder:" AI ...",defaultSystemPromptHidden:"",name:"",description:"",replyStyle:"",customPrompt:"",savePersona:"",cancel:"",createNew:"",deleteConfirmTitle:"",deleteConfirmMessage:" AI ",delete:"",styles:{warm:"",analytical:"",concise:"",humorous:""},globalStyle:{title:"",description:" AI  AI ",preset:"",defaultPreset:"",wordCount:"",words:"",withAiTrace:" AI ",withAiTraceDesc:" AI ",stylePrompt:"",editable:"()",newPresetTitle:"",presetNamePlaceholder:" ()",stylePromptPlaceholder:"...",addPreset:""}},usage:{title:"",chat:"",chatDesc:" AI AI ",manual:"",manualDesc:" AI ",polish:"",polishDesc:" AI ",settings:"",settingsDesc:" AI "},interface:{title:"",language:"",theme:"",reset:"",presets:"",primaryColor:"",backgroundColor:"",chatBackground:"",uploadDesc:"",upload:"",remove:"",customCss:" CSS",customCssDesc:" .message-user  .message-ai"},backup:{title:"",local:{title:" iCloud ",description:" JSON ",info:" JSON  <strong>iCloud </strong> iCloud Drive ",download:"",restore:"",restoreConfirm:"",restoreSuccess:"",restoreError:"",downloadError:""},github:{title:"GitHub Gist ",description:" GitHub Gist",linked:"",pat:" (PAT)",patHelp:" <code>gist</code> ",getToken:"",gistId:" Gist ID",unlink:"",autoBackup:"",autoBackupHelp:" Gist ()",sync:" ()",create:"",import:" ()",tokenRequired:"",tokenAndGistRequired:" Gist ID",restoreConfirm:" GitHub  Gist ",syncSuccess:" Gist",restoreError:": {{error}}"},gdrive:{title:"Google Drive",description:"",info:"<strong></strong> Google Drive ",token:"OAuth  ()",upload:" Drive",success:"",error:": {{error}}"},reset:{title:"",description:"",warning:"<strong></strong> ",confirmBtn:"",confirmAlert:""}}},G5={title:"",subtitle:" AI ",basicInfo:{yourName:"",nickname:"",identity:" / ",identityPlaceholder:"",birthday:"",residence:"",residencePlaceholder:"",schoolWork:" / ",schoolWorkPlaceholder:"",location:" (/)",locationPlaceholder:""},avatar:{upload:"",link:"",change:"",linkTitle:""},sections:{coreSelf:"",lifeExperience:"",currentFocus:"",interests:"",connections:""},fields:{personality:"",personalityPlaceholder:"MBTI, ...",values:"",valuesPlaceholder:"",dislikes:" / ",dislikesPlaceholder:"..."},timeline:{add:"",yearPlaceholder:"/",contentPlaceholder:""},focus:{add:"",placeholder:"..."},interests:{add:"..."},connections:{add:"",namePlaceholder:"",relationPlaceholder:"",notePlaceholder:" TA ..."},pets:{title:"",add:"",namePlaceholder:"",typePlaceholder:" (...)",notePlaceholder:"..."},save:{button:"",saved:"",success:""},common:{confirm:"",cancel:""}},Y5={mood_placeholder:"",greeting_initial:"",recording:"",deleteSelected:" ({{count}})",deleteConfirm:" {{count}} ",generate:"",generating:"...",aiAssistant:"AI ",saving:"...",save:"",futureDate:{title:"",quote:"",goBack:""},chat:{placeholder:"...",reply:"",uploadImage:"",send:"",cancelSelection:"",selectMessages:"",copy:"",edit:"",delete:"",regenerate:"",mode:"",manualMode:""},manual:{titlePlaceholder:"",category:"",tags:"",contentPlaceholder:"..."},generated:{title:"",crafting:"...",titlePlaceholder:"",reroll:"",save:"",rerollTitle:"",rerollInstruction:"",rerollPlaceholder:"...",cancel:"",confirm:""},categorySelector:{placeholder:"...",clear:"",create:' "{{value}}"',noCategories:""},tagEditor:{placeholder:"..."},diffViewer:{noChanges:"",back:"",metadataChanges:"",title:"",untitled:"()",tags:"",noTags:"()",instructions:"/",added:"",removed:"",include:"",discard:"",delete:"",restore:"",rejectAll:"",applySelected:""},polish:{greeting:"",error:"",errorReroll:"",defaultName:"",title:"",tags:"",content:"",polishedAvailable:"",compareApply:"",reroll:"",oneClick:"",oneClickPrompt:"",emotional:"",emotionalPrompt:"",grammar:"",grammarPrompt:"",placeholder:"..."},moods:{happy:"",excited:"",neutral:"",sad:"",loved:""},alerts:{noHistory:" {{date}} ",generateFailed:": {{error}}",uploadFailed:"",saveFailed:": {{error}}"}},K5={title:"",select_date:"",hide_calendar:"",delete_title:"",delete_confirm:"",delete_button:"",years_ago:"{{count}} ",read_memory:"",no_memories:""},W5={title:"",manage:"",done:"",entries:"{{count}} ",edit_dialog:{edit_title:"",add_title:"",name_label:"",name_placeholder:"",cover_label:" ()",change_image:"",upload_image:"",remove_image:"",recommendation:"3:4 ",color_label:"",cancel:"",save:"",create:""},delete_dialog:{title:"",message:"{{name}}",confirm:""},defaults:{Uncategorized:"","Daily Life":"",Work:"",Travel:""},actions:{edit:"",delete:""},no_diaries:""},X5={entry_count:"{{count}} ",write_for_this_day:"",go_back:"",add_new:"",no_entries:" {{date}} ",back_to_timeline:"",add_another_entry:""},Z5={delete_diary_title:"",delete_diary_message:"",delete_comment_title:"",delete_comment_message:"",delete_chat_history_confirm:"",delete_chat_history_title:"",title_placeholder:"",category_label:"",tags_label:"",content_placeholder:"...",chat_history:"",messages_count:"{{count}} ",comments:"",ai_author:"AI ({{name}})",user_author:"",no_comments:" AI ",ask_ai:" AI ",add_comment_placeholder:"...",edit:"",save:"",delete_diary:"",delete_comment:""},fv={nav:$5,common:V5,layout:H5,settings:F5,profile:G5,write:Y5,timeline:K5,categories:W5,diary_entry:X5,diary_item:Z5},Q5={write:"",calendar:"",categories:"",profile:"",settings:""},J5={save:"",cancel:"",delete:"",edit:"",close:"",select:""},e3={title:"AI",quote:"",aiAssistant:"AI",online:""},t3={title:"",api:{title:"API",configName:"",provider:"",apiKey:"API",baseUrl:"URL",model:"",fetchModels:"",saveConfig:"",cancel:"",addNew:"API",deleteConfirmTitle:"",deleteConfirmMessage:"API",delete:"",pleaseEnterApiKey:"API",failedToFetchModels:": {{error}}",myApi:": My API",modelPlaceholder:": gpt-3.5-turbo"},ai:{title:"AI",defaultPersona:{name:"",description:""},newPersonaDesc:"AI",promptPlaceholder:"AI...",defaultSystemPromptHidden:"",name:"",description:"",replyStyle:"",customPrompt:"",savePersona:"",cancel:"",createNew:"",deleteConfirmTitle:"",deleteConfirmMessage:"AI",delete:"",styles:{warm:"",analytical:"",concise:"",humorous:""},globalStyle:{title:"",description:"AI",preset:"",defaultPreset:"",wordCount:"",words:"",withAiTrace:"AI",withAiTraceDesc:"AI",stylePrompt:"",editable:"",newPresetTitle:"",presetNamePlaceholder:"",stylePromptPlaceholder:"...",addPreset:""}},interface:{title:"",language:"",theme:"",reset:"",presets:"",primaryColor:"",backgroundColor:"",chatBackground:"",uploadDesc:"",upload:"",remove:"",customCss:"CSS",customCssDesc:" .message-user  .message-ai"},backup:{title:"",local:{title:" & iCloud",description:"JSON",info:"JSON<strong>iCloud</strong>iCloud Drive",download:"",restore:"",restoreConfirm:"",restoreSuccess:"",restoreError:": ",downloadError:""},github:{title:"GitHub Gist",description:"GitHub Gist",linked:"",pat:" (PAT)",patHelp:"<code>gist</code>",getToken:"",gistId:"Gist ID",unlink:"",autoBackup:"",autoBackupHelp:"Gist",sync:" (Push)",create:"",import:" ()",tokenRequired:"",tokenAndGistRequired:"Gist ID",restoreConfirm:"GitHubGist",syncSuccess:"Gist",restoreError:": {{error}}"},gdrive:{title:"Google",description:"",info:": <strong></strong>Google",token:"OAuth ()",upload:"",success:"",error:": {{error}}"},reset:{title:"",description:"",warning:"<strong>:</strong> ",confirmBtn:"",confirmAlert:""}}},n3={title:"",subtitle:"AI",basicInfo:{yourName:"",nickname:"",identity:" / ",identityPlaceholder:": ",birthday:"",residence:"",residencePlaceholder:"",schoolWork:" / ",schoolWorkPlaceholder:"",location:" (/)",locationPlaceholder:""},avatar:{upload:"",link:"URL",change:"",linkTitle:""},sections:{coreSelf:"",lifeExperience:"",currentFocus:"",interests:"",connections:""},fields:{personality:"",personalityPlaceholder:"MBTI, ...",values:"",valuesPlaceholder:"",dislikes:"",dislikesPlaceholder:"..."},timeline:{add:"",yearPlaceholder:"/",contentPlaceholder:""},focus:{add:"",placeholder:"..."},interests:{add:"..."},connections:{add:"",namePlaceholder:"",relationPlaceholder:"",notePlaceholder:"..."},pets:{title:"",add:"",namePlaceholder:"",typePlaceholder:" (...)",notePlaceholder:"..."},save:{button:"",saved:"",success:""},common:{confirm:"",cancel:""}},a3={mood_placeholder:"",greeting_initial:"",recording:"",deleteSelected:" ({{count}})",deleteConfirm:"{{count}} ",generate:"",generating:"...",aiAssistant:"AI",saving:"...",save:"",futureDate:{title:"",quote:"",goBack:""},chat:{placeholder:"...",reply:"",uploadImage:"",send:"",cancelSelection:"",selectMessages:"",copy:"",edit:"",delete:"",regenerate:"",mode:"",manualMode:""},manual:{titlePlaceholder:"",category:"",tags:"",contentPlaceholder:"..."},generated:{title:"",crafting:"...",titlePlaceholder:"",reroll:"",save:""},categorySelector:{placeholder:"...",clear:"",create:'"{{value}}" ',noCategories:""},tagEditor:{placeholder:"..."},diffViewer:{noChanges:"",back:"",metadataChanges:"",title:"",untitled:"()",tags:"",noTags:"()",instructions:"/",added:"",removed:"",include:"",discard:"",delete:"",restore:"",rejectAll:"",applySelected:""},polish:{greeting:"",error:"",errorReroll:"",defaultName:"",title:"",tags:"",content:"",polishedAvailable:"",compareApply:"",reroll:"",oneClick:"",emotional:"",grammar:"",placeholder:"..."},moods:{happy:"",excited:"",neutral:"",sad:"",loved:""},alerts:{noHistory:"{{date}}",generateFailed:": {{error}}",uploadFailed:"",saveFailed:": {{error}}"}},s3={title:"",select_date:"",hide_calendar:"",delete_title:"",delete_confirm:"",delete_button:"",years_ago_one:"{{count}} ",years_ago_other:"{{count}} ",read_memory:"",no_memories:""},r3={title:"",manage:"",done:"",entries:"{{count}} ",edit_dialog:{edit_title:"",add_title:"",name_label:"",name_placeholder:"",cover_label:" ()",change_image:"",upload_image:"",remove_image:"",recommendation:": 3:4 ",color_label:"",cancel:"",save:"",create:""},delete_dialog:{title:"",message:'"{{name}}" ',confirm:""},defaults:{Uncategorized:"","Daily Life":"",Work:"",Travel:""},actions:{edit:"",delete:""},no_diaries:""},i3={entry_count_one:"{{count}} ",entry_count_other:"{{count}} ",write_for_this_day:"",go_back:"",add_new:"",no_entries:"{{date}} ",back_to_timeline:"",add_another_entry:""},o3={delete_diary_title:"",delete_diary_message:"",delete_comment_title:"",delete_comment_message:"",delete_chat_history_confirm:"",delete_chat_history_title:"",title_placeholder:"",category_label:"",tags_label:"",content_placeholder:"...",chat_history:"",messages_count:"{{count}} ",comments:"",ai_author:"AI ({{name}})",user_author:"",no_comments:"AI",ask_ai:"AI",add_comment_placeholder:"...",edit:"",save:"",delete_diary:"",delete_comment:""},l3={nav:Q5,common:J5,layout:e3,settings:t3,profile:n3,write:a3,timeline:s3,categories:r3,diary_entry:i3,diary_item:o3},c3=()=>{const t=localStorage.getItem("i18nextLng");if(t)return t;const e=navigator.language||navigator.userLanguage;if(e){if(e.toLowerCase()==="zh-tw"||e.toLowerCase()==="zh-hk")return"zh-TW";if(e.startsWith("zh"))return"zh";if(e.startsWith("ja"))return"ja"}return"en"};Jn.use(m5).init({resources:{en:{translation:uv},"en-US":{translation:uv},zh:{translation:dv},"zh-CN":{translation:dv},"zh-TW":{translation:fv},"zh-HK":{translation:fv},ja:{translation:l3}},lng:c3(),fallbackLng:"en",interpolation:{escapeValue:!1}});var hv="popstate";function u3(t={}){function e(i,l){let{pathname:c="/",search:d="",hash:h=""}=co(i.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Qp("",{pathname:c,search:d,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){let c=i.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let h=i.location.href,m=h.indexOf("#");d=m===-1?h:h.slice(0,m)}return d+"#"+(typeof l=="string"?l:Yc(l))}function s(i,l){ya(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return f3(e,n,s,t)}function Lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ya(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d3(){return Math.random().toString(36).substring(2,10)}function mv(t,e){return{usr:t.state,key:t.key,idx:e}}function Qp(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?co(e):e,state:n,key:e&&e.key||s||d3()}}function Yc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function f3(t,e,n,s={}){let{window:i=document.defaultView,v5Compat:l=!1}=s,c=i.history,d="POP",h=null,m=y();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function y(){return(c.state||{idx:null}).idx}function b(){d="POP";let j=y(),D=j==null?null:j-m;m=j,h&&h({action:d,location:E.location,delta:D})}function x(j,D){d="PUSH";let O=Qp(E.location,j,D);n&&n(O,j),m=y()+1;let R=mv(O,m),U=E.createHref(O);try{c.pushState(R,"",U)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(U)}l&&h&&h({action:d,location:E.location,delta:1})}function S(j,D){d="REPLACE";let O=Qp(E.location,j,D);n&&n(O,j),m=y();let R=mv(O,m),U=E.createHref(O);c.replaceState(R,"",U),l&&h&&h({action:d,location:E.location,delta:0})}function N(j){return h3(j)}let E={get action(){return d},get location(){return t(i,c)},listen(j){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(hv,b),h=j,()=>{i.removeEventListener(hv,b),h=null}},createHref(j){return e(i,j)},createURL:N,encodeLocation(j){let D=N(j);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:x,replace:S,go(j){return c.go(j)}};return E}function h3(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Lt(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Yc(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function AS(t,e,n="/"){return m3(t,e,n,!1)}function m3(t,e,n,s){let i=typeof e=="string"?co(e):e,l=Nr(i.pathname||"/",n);if(l==null)return null;let c=CS(t);p3(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let m=A3(l);d=T3(c[h],m,s)}return d}function CS(t,e=[],n=[],s="",i=!1){let l=(c,d,h=i,m)=>{let y={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&h)return;Lt(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let b=vr([s,y.relativePath]),x=n.concat(y);c.children&&c.children.length>0&&(Lt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),CS(c.children,e,x,b,h)),!(c.path==null&&!c.index)&&e.push({path:b,score:S3(b,c.index),routesMeta:x})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let h of jS(c.path))l(c,d,!0,h)}),e}function jS(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return i?[l,""]:[l];let c=jS(s.join("/")),d=[];return d.push(...c.map(h=>h===""?l:[l,h].join("/"))),i&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function p3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:N3(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var g3=/^:[\w-]+$/,y3=3,b3=2,x3=1,v3=10,w3=-2,pv=t=>t==="*";function S3(t,e){let n=t.split("/"),s=n.length;return n.some(pv)&&(s+=w3),e&&(s+=b3),n.filter(i=>!pv(i)).reduce((i,l)=>i+(g3.test(l)?y3:l===""?x3:v3),s)}function N3(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function T3(t,e,n=!1){let{routesMeta:s}=t,i={},l="/",c=[];for(let d=0;d<s.length;++d){let h=s[d],m=d===s.length-1,y=l==="/"?e:e.slice(l.length)||"/",b=of({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},y),x=h.route;if(!b&&m&&n&&!s[s.length-1].route.index&&(b=of({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!b)return null;Object.assign(i,b.params),c.push({params:i,pathname:vr([l,b.pathname]),pathnameBase:k3(vr([l,b.pathnameBase])),route:x}),b.pathnameBase!=="/"&&(l=vr([l,b.pathnameBase]))}return c}function of(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=E3(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:s.reduce((m,{paramName:y,isOptional:b},x)=>{if(y==="*"){let N=d[x]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const S=d[x];return b&&!S?m[y]=void 0:m[y]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:t}}function E3(t,e=!1,n=!0){ya(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(s.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function A3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ya(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Nr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}var _S=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C3=t=>_S.test(t);function j3(t,e="/"){let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?co(t):t,l;if(n)if(C3(n))l=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),ya(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?l=gv(n.substring(1),"/"):l=gv(n,e)}else l=e;return{pathname:l,search:D3(s),hash:O3(i)}}function gv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ip(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zg(t){let e=_3(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Qg(t,e,n,s=!1){let i;typeof t=="string"?i=co(t):(i={...t},Lt(!i.pathname||!i.pathname.includes("?"),ip("?","pathname","search",i)),Lt(!i.pathname||!i.pathname.includes("#"),ip("#","pathname","hash",i)),Lt(!i.search||!i.search.includes("#"),ip("#","search","hash",i)));let l=t===""||i.pathname==="",c=l?"/":i.pathname,d;if(c==null)d=n;else{let b=e.length-1;if(!s&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),b-=1;i.pathname=x.join("/")}d=b>=0?e[b]:"/"}let h=j3(i,d),m=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(m||y)&&(h.pathname+="/"),h}var vr=t=>t.join("/").replace(/\/\/+/g,"/"),k3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),D3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,O3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,M3=class{constructor(t,e,n,s=!1){this.status=t,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function R3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function L3(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var kS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function DS(t,e){let n=t;if(typeof n!="string"||!_S.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,i=!1;if(kS)try{let l=new URL(window.location.href),c=n.startsWith("//")?new URL(l.protocol+n):new URL(n),d=Nr(c.pathname,e);c.origin===l.origin&&d!=null?n=d+c.search+c.hash:i=!0}catch{ya(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var OS=["POST","PUT","PATCH","DELETE"];new Set(OS);var P3=["GET",...OS];new Set(P3);var Sl=T.createContext(null);Sl.displayName="DataRouter";var Of=T.createContext(null);Of.displayName="DataRouterState";var z3=T.createContext(!1),MS=T.createContext({isTransitioning:!1});MS.displayName="ViewTransition";var I3=T.createContext(new Map);I3.displayName="Fetchers";var B3=T.createContext(null);B3.displayName="Await";var La=T.createContext(null);La.displayName="Navigation";var ru=T.createContext(null);ru.displayName="Location";var as=T.createContext({outlet:null,matches:[],isDataRoute:!1});as.displayName="Route";var Jg=T.createContext(null);Jg.displayName="RouteError";var RS="REACT_ROUTER_ERROR",U3="REDIRECT",q3="ROUTE_ERROR_RESPONSE";function $3(t){if(t.startsWith(`${RS}:${U3}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function V3(t){if(t.startsWith(`${RS}:${q3}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new M3(e.status,e.statusText,e.data)}catch{}}function H3(t,{relative:e}={}){Lt(Nl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=T.useContext(La),{hash:i,pathname:l,search:c}=iu(t,{relative:e}),d=l;return n!=="/"&&(d=l==="/"?n:vr([n,l])),s.createHref({pathname:d,search:c,hash:i})}function Nl(){return T.useContext(ru)!=null}function _r(){return Lt(Nl(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(ru).location}var LS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function PS(t){T.useContext(La).static||T.useLayoutEffect(t)}function kr(){let{isDataRoute:t}=T.useContext(as);return t?i4():F3()}function F3(){Lt(Nl(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(Sl),{basename:e,navigator:n}=T.useContext(La),{matches:s}=T.useContext(as),{pathname:i}=_r(),l=JSON.stringify(Zg(s)),c=T.useRef(!1);return PS(()=>{c.current=!0}),T.useCallback((h,m={})=>{if(ya(c.current,LS),!c.current)return;if(typeof h=="number"){n.go(h);return}let y=Qg(h,JSON.parse(l),i,m.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:vr([e,y.pathname])),(m.replace?n.replace:n.push)(y,m.state,m)},[e,n,l,i,t])}var G3=T.createContext(null);function Y3(t){let e=T.useContext(as).outlet;return T.useMemo(()=>e&&T.createElement(G3.Provider,{value:t},e),[e,t])}function K3(){let{matches:t}=T.useContext(as),e=t[t.length-1];return e?e.params:{}}function iu(t,{relative:e}={}){let{matches:n}=T.useContext(as),{pathname:s}=_r(),i=JSON.stringify(Zg(n));return T.useMemo(()=>Qg(t,JSON.parse(i),s,e==="path"),[t,i,s,e])}function W3(t,e){return zS(t,e)}function zS(t,e,n,s,i){Lt(Nl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=T.useContext(La),{matches:c}=T.useContext(as),d=c[c.length-1],h=d?d.params:{},m=d?d.pathname:"/",y=d?d.pathnameBase:"/",b=d&&d.route;{let O=b&&b.path||"";BS(m,!b||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let x=_r(),S;if(e){let O=typeof e=="string"?co(e):e;Lt(y==="/"||O.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${O.pathname}" was given in the \`location\` prop.`),S=O}else S=x;let N=S.pathname||"/",E=N;if(y!=="/"){let O=y.replace(/^\//,"").split("/");E="/"+N.replace(/^\//,"").split("/").slice(O.length).join("/")}let j=AS(t,{pathname:E});ya(b||j!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),ya(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=e4(j&&j.map(O=>Object.assign({},O,{params:Object.assign({},h,O.params),pathname:vr([y,l.encodeLocation?l.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?y:vr([y,l.encodeLocation?l.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),c,n,s,i);return e&&D?T.createElement(ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},D):D}function X3(){let t=r4(),e=R3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:l},"ErrorBoundary")," or"," ",T.createElement("code",{style:l},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:i},n):null,c)}var Z3=T.createElement(X3,null),IS=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=V3(t.digest);n&&(t=n)}let e=t!==void 0?T.createElement(as.Provider,{value:this.props.routeContext},T.createElement(Jg.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?T.createElement(Q3,{error:t},e):e}};IS.contextType=z3;var op=new WeakMap;function Q3({children:t,error:e}){let{basename:n}=T.useContext(La);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=$3(e.digest);if(s){let i=op.get(e);if(i)throw i;let l=DS(s.location,n);if(kS&&!op.get(e))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw op.set(e,c),c}return T.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return t}function J3({routeContext:t,match:e,children:n}){let s=T.useContext(Sl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(as.Provider,{value:t},n)}function e4(t,e=[],n=null,s=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=n?.errors;if(c!=null){let y=l.findIndex(b=>b.route.id&&c?.[b.route.id]!==void 0);Lt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,h=-1;if(n)for(let y=0;y<l.length;y++){let b=l[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(h=y),b.route.id){let{loaderData:x,errors:S}=n,N=b.route.loader&&!x.hasOwnProperty(b.route.id)&&(!S||S[b.route.id]===void 0);if(b.route.lazy||N){d=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}let m=n&&s?(y,b)=>{s(y,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:L3(n.matches),errorInfo:b})}:void 0;return l.reduceRight((y,b,x)=>{let S,N=!1,E=null,j=null;n&&(S=c&&b.route.id?c[b.route.id]:void 0,E=b.route.errorElement||Z3,d&&(h<0&&x===0?(BS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,j=null):h===x&&(N=!0,j=b.route.hydrateFallbackElement||null)));let D=e.concat(l.slice(0,x+1)),O=()=>{let R;return S?R=E:N?R=j:b.route.Component?R=T.createElement(b.route.Component,null):b.route.element?R=b.route.element:R=y,T.createElement(J3,{match:b,routeContext:{outlet:y,matches:D,isDataRoute:n!=null},children:R})};return n&&(b.route.ErrorBoundary||b.route.errorElement||x===0)?T.createElement(IS,{location:n.location,revalidation:n.revalidation,component:E,error:S,children:O(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:m}):O()},null)}function e0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t4(t){let e=T.useContext(Sl);return Lt(e,e0(t)),e}function n4(t){let e=T.useContext(Of);return Lt(e,e0(t)),e}function a4(t){let e=T.useContext(as);return Lt(e,e0(t)),e}function t0(t){let e=a4(t),n=e.matches[e.matches.length-1];return Lt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function s4(){return t0("useRouteId")}function r4(){let t=T.useContext(Jg),e=n4("useRouteError"),n=t0("useRouteError");return t!==void 0?t:e.errors?.[n]}function i4(){let{router:t}=t4("useNavigate"),e=t0("useNavigate"),n=T.useRef(!1);return PS(()=>{n.current=!0}),T.useCallback(async(i,l={})=>{ya(n.current,LS),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...l}))},[t,e])}var yv={};function BS(t,e,n){!e&&!yv[t]&&(yv[t]=!0,ya(!1,n))}T.memo(o4);function o4({routes:t,future:e,state:n,onError:s}){return zS(t,void 0,n,s,e)}function l4({to:t,replace:e,state:n,relative:s}){Lt(Nl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=T.useContext(La);ya(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=T.useContext(as),{pathname:c}=_r(),d=kr(),h=Qg(t,Zg(l),c,s==="path"),m=JSON.stringify(h);return T.useEffect(()=>{d(JSON.parse(m),{replace:e,state:n,relative:s})},[d,m,s,e,n]),null}function US(t){return Y3(t.context)}function qs(t){Lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function c4({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:i,static:l=!1,unstable_useTransitions:c}){Lt(!Nl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),h=T.useMemo(()=>({basename:d,navigator:i,static:l,unstable_useTransitions:c,future:{}}),[d,i,l,c]);typeof n=="string"&&(n=co(n));let{pathname:m="/",search:y="",hash:b="",state:x=null,key:S="default"}=n,N=T.useMemo(()=>{let E=Nr(m,d);return E==null?null:{location:{pathname:E,search:y,hash:b,state:x,key:S},navigationType:s}},[d,m,y,b,x,S,s]);return ya(N!=null,`<Router basename="${d}"> is not able to match the URL "${m}${y}${b}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:T.createElement(La.Provider,{value:h},T.createElement(ru.Provider,{children:e,value:N}))}function u4({children:t,location:e}){return W3(Jp(t),e)}function Jp(t,e=[]){let n=[];return T.Children.forEach(t,(s,i)=>{if(!T.isValidElement(s))return;let l=[...e,i];if(s.type===T.Fragment){n.push.apply(n,Jp(s.props.children,l));return}Lt(s.type===qs,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Jp(s.props.children,l)),n.push(c)}),n}var Yd="get",Kd="application/x-www-form-urlencoded";function Mf(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function d4(t){return Mf(t)&&t.tagName.toLowerCase()==="button"}function f4(t){return Mf(t)&&t.tagName.toLowerCase()==="form"}function h4(t){return Mf(t)&&t.tagName.toLowerCase()==="input"}function m4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function p4(t,e){return t.button===0&&(!e||e==="_self")&&!m4(t)}function eg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(i=>[n,i]):[[n,s]])},[]))}function g4(t,e){let n=eg(t);return e&&e.forEach((s,i)=>{n.has(i)||e.getAll(i).forEach(l=>{n.append(i,l)})}),n}var Td=null;function y4(){if(Td===null)try{new FormData(document.createElement("form"),0),Td=!1}catch{Td=!0}return Td}var b4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lp(t){return t!=null&&!b4.has(t)?(ya(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kd}"`),null):t}function x4(t,e){let n,s,i,l,c;if(f4(t)){let d=t.getAttribute("action");s=d?Nr(d,e):null,n=t.getAttribute("method")||Yd,i=lp(t.getAttribute("enctype"))||Kd,l=new FormData(t)}else if(d4(t)||h4(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||d.getAttribute("action");if(s=h?Nr(h,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||Yd,i=lp(t.getAttribute("formenctype"))||lp(d.getAttribute("enctype"))||Kd,l=new FormData(d,t),!y4()){let{name:m,type:y,value:b}=t;if(y==="image"){let x=m?`${m}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else m&&l.append(m,b)}}else{if(Mf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yd,s=null,i=Kd,c=t}return l&&i==="text/plain"&&(c=l,l=void 0),{action:s,method:n.toLowerCase(),encType:i,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function n0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function v4(t,e,n,s){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${s}`:i.pathname=`${i.pathname}.${s}`:i.pathname==="/"?i.pathname=`_root.${s}`:e&&Nr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function w4(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function S4(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function N4(t,e,n){let s=await Promise.all(t.map(async i=>{let l=e.routes[i.route.id];if(l){let c=await w4(l,n);return c.links?c.links():[]}return[]}));return C4(s.flat(1).filter(S4).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function bv(t,e,n,s,i,l){let c=(h,m)=>n[m]?h.route.id!==n[m].route.id:!0,d=(h,m)=>n[m].pathname!==h.pathname||n[m].route.path?.endsWith("*")&&n[m].params["*"]!==h.params["*"];return l==="assets"?e.filter((h,m)=>c(h,m)||d(h,m)):l==="data"?e.filter((h,m)=>{let y=s.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(c(h,m)||d(h,m))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function T4(t,e,{includeHydrateFallback:n}={}){return E4(t.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function E4(t){return[...new Set(t)]}function A4(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function C4(t,e){let n=new Set;return new Set(e),t.reduce((s,i)=>{let l=JSON.stringify(A4(i));return n.has(l)||(n.add(l),s.push({key:l,link:i})),s},[])}function qS(){let t=T.useContext(Sl);return n0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function j4(){let t=T.useContext(Of);return n0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var a0=T.createContext(void 0);a0.displayName="FrameworkContext";function $S(){let t=T.useContext(a0);return n0(t,"You must render this element inside a <HydratedRouter> element"),t}function _4(t,e){let n=T.useContext(a0),[s,i]=T.useState(!1),[l,c]=T.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:m,onMouseLeave:y,onTouchStart:b}=e,x=T.useRef(null);T.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let E=D=>{D.forEach(O=>{c(O.isIntersecting)})},j=new IntersectionObserver(E,{threshold:.5});return x.current&&j.observe(x.current),()=>{j.disconnect()}}},[t]),T.useEffect(()=>{if(s){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[s]);let S=()=>{i(!0)},N=()=>{i(!1),c(!1)};return n?t!=="intent"?[l,x,{}]:[l,x,{onFocus:Sc(d,S),onBlur:Sc(h,N),onMouseEnter:Sc(m,S),onMouseLeave:Sc(y,N),onTouchStart:Sc(b,S)}]:[!1,x,{}]}function Sc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function k4({page:t,...e}){let{router:n}=qS(),s=T.useMemo(()=>AS(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?T.createElement(O4,{page:t,matches:s,...e}):null}function D4(t){let{manifest:e,routeModules:n}=$S(),[s,i]=T.useState([]);return T.useEffect(()=>{let l=!1;return N4(t,e,n).then(c=>{l||i(c)}),()=>{l=!0}},[t,e,n]),s}function O4({page:t,matches:e,...n}){let s=_r(),{future:i,manifest:l,routeModules:c}=$S(),{basename:d}=qS(),{loaderData:h,matches:m}=j4(),y=T.useMemo(()=>bv(t,e,m,l,s,"data"),[t,e,m,l,s]),b=T.useMemo(()=>bv(t,e,m,l,s,"assets"),[t,e,m,l,s]),x=T.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let E=new Set,j=!1;if(e.forEach(O=>{let R=l.routes[O.route.id];!R||!R.hasLoader||(!y.some(U=>U.route.id===O.route.id)&&O.route.id in h&&c[O.route.id]?.shouldRevalidate||R.hasClientLoader?j=!0:E.add(O.route.id))}),E.size===0)return[];let D=v4(t,d,i.unstable_trailingSlashAwareDataRequests,"data");return j&&E.size>0&&D.searchParams.set("_routes",e.filter(O=>E.has(O.route.id)).map(O=>O.route.id).join(",")),[D.pathname+D.search]},[d,i.unstable_trailingSlashAwareDataRequests,h,s,l,y,e,t,c]),S=T.useMemo(()=>T4(b,l),[b,l]),N=D4(b);return T.createElement(T.Fragment,null,x.map(E=>T.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),S.map(E=>T.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),N.map(({key:E,link:j})=>T.createElement("link",{key:E,nonce:n.nonce,...j})))}function M4(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var R4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{R4&&(window.__reactRouterVersion="7.12.0")}catch{}function L4({basename:t,children:e,unstable_useTransitions:n,window:s}){let i=T.useRef();i.current==null&&(i.current=u3({window:s,v5Compat:!0}));let l=i.current,[c,d]=T.useState({action:l.action,location:l.location}),h=T.useCallback(m=>{n===!1?d(m):T.startTransition(()=>d(m))},[n]);return T.useLayoutEffect(()=>l.listen(h),[l,h]),T.createElement(c4,{basename:t,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:n})}var VS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,HS=T.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:i,reloadDocument:l,replace:c,state:d,target:h,to:m,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:x,...S},N){let{basename:E,unstable_useTransitions:j}=T.useContext(La),D=typeof m=="string"&&VS.test(m),O=DS(m,E);m=O.to;let R=H3(m,{relative:i}),[U,L,H]=_4(s,S),z=I4(m,{replace:c,state:d,target:h,preventScrollReset:y,relative:i,viewTransition:b,unstable_defaultShouldRevalidate:x,unstable_useTransitions:j});function P(Q){e&&e(Q),Q.defaultPrevented||z(Q)}let Y=T.createElement("a",{...S,...H,href:O.absoluteURL||R,onClick:O.isExternal||l?e:P,ref:M4(N,L),target:h,"data-discover":!D&&n==="render"?"true":void 0});return U&&!D?T.createElement(T.Fragment,null,Y,T.createElement(k4,{page:R})):Y});HS.displayName="Link";var lf=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:i=!1,style:l,to:c,viewTransition:d,children:h,...m},y){let b=iu(c,{relative:m.relative}),x=_r(),S=T.useContext(Of),{navigator:N,basename:E}=T.useContext(La),j=S!=null&&H4(b)&&d===!0,D=N.encodeLocation?N.encodeLocation(b).pathname:b.pathname,O=x.pathname,R=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(O=O.toLowerCase(),R=R?R.toLowerCase():null,D=D.toLowerCase()),R&&E&&(R=Nr(R,E)||R);const U=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let L=O===D||!i&&O.startsWith(D)&&O.charAt(U)==="/",H=R!=null&&(R===D||!i&&R.startsWith(D)&&R.charAt(D.length)==="/"),z={isActive:L,isPending:H,isTransitioning:j},P=L?e:void 0,Y;typeof s=="function"?Y=s(z):Y=[s,L?"active":null,H?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let Q=typeof l=="function"?l(z):l;return T.createElement(HS,{...m,"aria-current":P,className:Y,ref:y,style:Q,to:c,viewTransition:d},typeof h=="function"?h(z):h)});lf.displayName="NavLink";var P4=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:i,state:l,method:c=Yd,action:d,onSubmit:h,relative:m,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:x,...S},N)=>{let{unstable_useTransitions:E}=T.useContext(La),j=$4(),D=V4(d,{relative:m}),O=c.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&VS.test(d),U=L=>{if(h&&h(L),L.defaultPrevented)return;L.preventDefault();let H=L.nativeEvent.submitter,z=H?.getAttribute("formmethod")||c,P=()=>j(H||L.currentTarget,{fetcherKey:e,method:z,navigate:n,replace:i,state:l,relative:m,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:x});E&&n!==!1?T.startTransition(()=>P()):P()};return T.createElement("form",{ref:N,method:O,action:D,onSubmit:s?h:U,...S,"data-discover":!R&&t==="render"?"true":void 0})});P4.displayName="Form";function z4(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FS(t){let e=T.useContext(Sl);return Lt(e,z4(t)),e}function I4(t,{target:e,replace:n,state:s,preventScrollReset:i,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:h}={}){let m=kr(),y=_r(),b=iu(t,{relative:l});return T.useCallback(x=>{if(p4(x,e)){x.preventDefault();let S=n!==void 0?n:Yc(y)===Yc(b),N=()=>m(t,{replace:S,state:s,preventScrollReset:i,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});h?T.startTransition(()=>N()):N()}},[y,m,b,n,s,e,t,i,l,c,d,h])}function B4(t){ya(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=T.useRef(eg(t)),n=T.useRef(!1),s=_r(),i=T.useMemo(()=>g4(s.search,n.current?null:e.current),[s.search]),l=kr(),c=T.useCallback((d,h)=>{const m=eg(typeof d=="function"?d(new URLSearchParams(i)):d);n.current=!0,l("?"+m,h)},[l,i]);return[i,c]}var U4=0,q4=()=>`__${String(++U4)}__`;function $4(){let{router:t}=FS("useSubmit"),{basename:e}=T.useContext(La),n=s4(),s=t.fetch,i=t.navigate;return T.useCallback(async(l,c={})=>{let{action:d,method:h,encType:m,formData:y,body:b}=x4(l,e);if(c.navigate===!1){let x=c.fetcherKey||q4();await s(x,n,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:b,formMethod:c.method||h,formEncType:c.encType||m,flushSync:c.flushSync})}else await i(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:b,formMethod:c.method||h,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[s,i,e,n])}function V4(t,{relative:e}={}){let{basename:n}=T.useContext(La),s=T.useContext(as);Lt(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),l={...iu(t||".",{relative:e})},c=_r();if(t==null){l.search=c.search;let d=new URLSearchParams(l.search),h=d.getAll("index");if(h.some(y=>y==="")){d.delete("index"),h.filter(b=>b).forEach(b=>d.append("index",b));let y=d.toString();l.search=y?`?${y}`:""}}return(!t||t===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:vr([n,l.pathname])),Yc(l)}function H4(t,{relative:e}={}){let n=T.useContext(MS);Lt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=FS("useViewTransitionState"),i=iu(t,{relative:e});if(!n.isTransitioning)return!1;let l=Nr(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=Nr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return of(i.pathname,c)!=null||of(i.pathname,l)!=null}var F4=pS();const cp=768;function G4(){const[t,e]=T.useState(void 0);return T.useEffect(()=>{const n=window.matchMedia(`(max-width: ${cp-1}px)`),s=()=>{e(window.innerWidth<cp)};return n.addEventListener("change",s),e(window.innerWidth<cp),()=>n.removeEventListener("change",s)},[]),!!t}const Y4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),K4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),xv=t=>{const e=K4(t);return e.charAt(0).toUpperCase()+e.slice(1)},GS=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),W4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var X4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Z4=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:l,iconNode:c,...d},h)=>T.createElement("svg",{ref:h,...X4,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:GS("lucide",i),...!l&&!W4(d)&&{"aria-hidden":"true"},...d},[...c.map(([m,y])=>T.createElement(m,y)),...Array.isArray(l)?l:[l]]));const Ce=(t,e)=>{const n=T.forwardRef(({className:s,...i},l)=>T.createElement(Z4,{ref:l,iconNode:e,className:GS(`lucide-${Y4(xv(t))}`,`lucide-${t}`,s),...i}));return n.displayName=xv(t),n};const Q4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],YS=Ce("arrow-left",Q4);const J4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],KS=Ce("arrow-right",J4);const e_=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],WS=Ce("book-open",e_);const t_=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Rf=Ce("book",t_);const n_=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],vv=Ce("bot",n_);const a_=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],s_=Ce("briefcase",a_);const r_=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],i_=Ce("building-2",r_);const o_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],l_=Ce("calendar-days",o_);const c_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Tl=Ce("calendar",c_);const u_=[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]],XS=Ce("cat",u_);const d_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ws=Ce("check",d_);const f_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Lf=Ce("chevron-down",f_);const h_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ZS=Ce("chevron-left",h_);const m_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],p_=Ce("chevron-right",m_);const g_=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],y_=Ce("chevron-up",g_);const b_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],wv=Ce("circle-alert",b_);const x_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],v_=Ce("circle-arrow-down",x_);const w_=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],S_=Ce("clock",w_);const N_=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Sv=Ce("cloud",N_);const T_=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],E_=Ce("code",T_);const A_=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],C_=Ce("coffee",A_);const j_=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],__=Ce("copy",j_);const k_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],D_=Ce("database",k_);const O_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],M_=Ce("download",O_);const R_=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Wd=Ce("folder",R_);const L_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],QS=Ce("frown",L_);const P_=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],z_=Ce("github",P_);const I_=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],B_=Ce("hard-drive",I_);const U_=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Pf=Ce("heart",U_);const q_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],gl=Ce("image",q_);const $_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Nv=Ce("info",$_);const V_=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],H_=Ce("languages",V_);const F_=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],JS=Ce("layers",F_);const G_=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Y_=Ce("link",G_);const K_=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],W_=Ce("map-pin",K_);const X_=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Z_=Ce("map",X_);const Q_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],eN=Ce("meh",Q_);const J_=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],no=Ce("message-circle",J_);const ek=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],tk=Ce("message-square",ek);const nk=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Tv=Ce("palette",nk);const ak=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],sk=Ce("panel-right-close",ak);const rk=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],yl=Ce("pen-tool",rk);const ik=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],cf=Ce("pencil",ik);const ok=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],lk=Ce("plane",ok);const ck=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tr=Ce("plus",ck);const uk=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],dk=Ce("quote",uk);const fk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Bc=Ce("refresh-cw",fk);const hk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],pi=Ce("rotate-ccw",hk);const mk=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ao=Ce("save",mk);const pk=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Ev=Ce("server",pk);const gk=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zf=Ce("settings",gk);const yk=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],tg=Ce("settings-2",yk);const bk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],xk=Ce("shield-alert",bk);const vk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],uf=Ce("smile",vk);const wk=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Wa=Ce("sparkles",wk);const Sk=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Nk=Ce("square-check-big",Sk);const Tk=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],tN=Ce("star",Tk);const Ek=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],s0=Ce("tag",Ek);const Ak=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ck=Ce("target",Ak);const jk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],pn=Ce("trash-2",jk);const _k=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kk=Ce("triangle-alert",_k);const Dk=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],r0=Ce("upload",Dk);const Ok=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],so=Ce("user",Ok);const Mk=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],df=Ce("wand-sparkles",Mk);const Rk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ja=Ce("x",Rk);const Lk=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],i0=Ce("zap",Lk);function nN(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=nN(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Pk(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=nN(t))&&(s&&(s+=" "),s+=e);return s}const zk=(t,e)=>{const n=new Array(t.length+e.length);for(let s=0;s<t.length;s++)n[s]=t[s];for(let s=0;s<e.length;s++)n[t.length+s]=e[s];return n},Ik=(t,e)=>({classGroupId:t,validator:e}),aN=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),ff="-",Av=[],Bk="arbitrary..",Uk=t=>{const e=$k(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return qk(c);const d=c.split(ff),h=d[0]===""&&d.length>1?1:0;return sN(d,h,e)},getConflictingClassGroupIds:(c,d)=>{if(d){const h=s[c],m=n[c];return h?m?zk(m,h):h:m||Av}return n[c]||Av}}},sN=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],l=n.nextPart.get(i);if(l){const m=sN(t,e+1,l);if(m)return m}const c=n.validators;if(c===null)return;const d=e===0?t.join(ff):t.slice(e).join(ff),h=c.length;for(let m=0;m<h;m++){const y=c[m];if(y.validator(d))return y.classGroupId}},qk=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),s=e.slice(0,n);return s?Bk+s:void 0})(),$k=t=>{const{theme:e,classGroups:n}=t;return Vk(n,e)},Vk=(t,e)=>{const n=aN();for(const s in t){const i=t[s];o0(i,n,s,e)}return n},o0=(t,e,n,s)=>{const i=t.length;for(let l=0;l<i;l++){const c=t[l];Hk(c,e,n,s)}},Hk=(t,e,n,s)=>{if(typeof t=="string"){Fk(t,e,n);return}if(typeof t=="function"){Gk(t,e,n,s);return}Yk(t,e,n,s)},Fk=(t,e,n)=>{const s=t===""?e:rN(e,t);s.classGroupId=n},Gk=(t,e,n,s)=>{if(Kk(t)){o0(t(s),e,n,s);return}e.validators===null&&(e.validators=[]),e.validators.push(Ik(n,t))},Yk=(t,e,n,s)=>{const i=Object.entries(t),l=i.length;for(let c=0;c<l;c++){const[d,h]=i[c];o0(h,rN(e,d),n,s)}},rN=(t,e)=>{let n=t;const s=e.split(ff),i=s.length;for(let l=0;l<i;l++){const c=s[l];let d=n.nextPart.get(c);d||(d=aN(),n.nextPart.set(c,d)),n=d}return n},Kk=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,Wk=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),s=Object.create(null);const i=(l,c)=>{n[l]=c,e++,e>t&&(e=0,s=n,n=Object.create(null))};return{get(l){let c=n[l];if(c!==void 0)return c;if((c=s[l])!==void 0)return i(l,c),c},set(l,c){l in n?n[l]=c:i(l,c)}}},ng="!",Cv=":",Xk=[],jv=(t,e,n,s,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:s,isExternal:i}),Zk=t=>{const{prefix:e,experimentalParseClassName:n}=t;let s=i=>{const l=[];let c=0,d=0,h=0,m;const y=i.length;for(let E=0;E<y;E++){const j=i[E];if(c===0&&d===0){if(j===Cv){l.push(i.slice(h,E)),h=E+1;continue}if(j==="/"){m=E;continue}}j==="["?c++:j==="]"?c--:j==="("?d++:j===")"&&d--}const b=l.length===0?i:i.slice(h);let x=b,S=!1;b.endsWith(ng)?(x=b.slice(0,-1),S=!0):b.startsWith(ng)&&(x=b.slice(1),S=!0);const N=m&&m>h?m-h:void 0;return jv(l,S,x,N)};if(e){const i=e+Cv,l=s;s=c=>c.startsWith(i)?l(c.slice(i.length)):jv(Xk,!1,c,void 0,!0)}if(n){const i=s;s=l=>n({className:l,parseClassName:i})}return s},Qk=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,s)=>{e.set(n,1e6+s)}),n=>{const s=[];let i=[];for(let l=0;l<n.length;l++){const c=n[l],d=c[0]==="[",h=e.has(c);d||h?(i.length>0&&(i.sort(),s.push(...i),i=[]),s.push(c)):i.push(c)}return i.length>0&&(i.sort(),s.push(...i)),s}},Jk=t=>({cache:Wk(t.cacheSize),parseClassName:Zk(t),sortModifiers:Qk(t),...Uk(t)}),eD=/\s+/,tD=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:l}=e,c=[],d=t.trim().split(eD);let h="";for(let m=d.length-1;m>=0;m-=1){const y=d[m],{isExternal:b,modifiers:x,hasImportantModifier:S,baseClassName:N,maybePostfixModifierPosition:E}=n(y);if(b){h=y+(h.length>0?" "+h:h);continue}let j=!!E,D=s(j?N.substring(0,E):N);if(!D){if(!j){h=y+(h.length>0?" "+h:h);continue}if(D=s(N),!D){h=y+(h.length>0?" "+h:h);continue}j=!1}const O=x.length===0?"":x.length===1?x[0]:l(x).join(":"),R=S?O+ng:O,U=R+D;if(c.indexOf(U)>-1)continue;c.push(U);const L=i(D,j);for(let H=0;H<L.length;++H){const z=L[H];c.push(R+z)}h=y+(h.length>0?" "+h:h)}return h},nD=(...t)=>{let e=0,n,s,i="";for(;e<t.length;)(n=t[e++])&&(s=iN(n))&&(i&&(i+=" "),i+=s);return i},iN=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=iN(t[s]))&&(n&&(n+=" "),n+=e);return n},aD=(t,...e)=>{let n,s,i,l;const c=h=>{const m=e.reduce((y,b)=>b(y),t());return n=Jk(m),s=n.cache.get,i=n.cache.set,l=d,d(h)},d=h=>{const m=s(h);if(m)return m;const y=tD(h,n);return i(h,y),y};return l=c,(...h)=>l(nD(...h))},sD=[],fn=t=>{const e=n=>n[t]||sD;return e.isThemeGetter=!0,e},oN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,lN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,rD=/^\d+\/\d+$/,iD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,cD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,el=t=>rD.test(t),Ze=t=>!!t&&!Number.isNaN(Number(t)),ci=t=>!!t&&Number.isInteger(Number(t)),up=t=>t.endsWith("%")&&Ze(t.slice(0,-1)),yr=t=>iD.test(t),dD=()=>!0,fD=t=>oD.test(t)&&!lD.test(t),cN=()=>!1,hD=t=>cD.test(t),mD=t=>uD.test(t),pD=t=>!ke(t)&&!De(t),gD=t=>El(t,fN,cN),ke=t=>oN.test(t),Gi=t=>El(t,hN,fD),dp=t=>El(t,wD,Ze),_v=t=>El(t,uN,cN),yD=t=>El(t,dN,mD),Ed=t=>El(t,mN,hD),De=t=>lN.test(t),Nc=t=>Al(t,hN),bD=t=>Al(t,SD),kv=t=>Al(t,uN),xD=t=>Al(t,fN),vD=t=>Al(t,dN),Ad=t=>Al(t,mN,!0),El=(t,e,n)=>{const s=oN.exec(t);return s?s[1]?e(s[1]):n(s[2]):!1},Al=(t,e,n=!1)=>{const s=lN.exec(t);return s?s[1]?e(s[1]):n:!1},uN=t=>t==="position"||t==="percentage",dN=t=>t==="image"||t==="url",fN=t=>t==="length"||t==="size"||t==="bg-size",hN=t=>t==="length",wD=t=>t==="number",SD=t=>t==="family-name",mN=t=>t==="shadow",ND=()=>{const t=fn("color"),e=fn("font"),n=fn("text"),s=fn("font-weight"),i=fn("tracking"),l=fn("leading"),c=fn("breakpoint"),d=fn("container"),h=fn("spacing"),m=fn("radius"),y=fn("shadow"),b=fn("inset-shadow"),x=fn("text-shadow"),S=fn("drop-shadow"),N=fn("blur"),E=fn("perspective"),j=fn("aspect"),D=fn("ease"),O=fn("animate"),R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[...U(),De,ke],H=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto","contain","none"],P=()=>[De,ke,h],Y=()=>[el,"full","auto",...P()],Q=()=>[ci,"none","subgrid",De,ke],A=()=>["auto",{span:["full",ci,De,ke]},ci,De,ke],F=()=>[ci,"auto",De,ke],B=()=>["auto","min","max","fr",De,ke],te=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],C=()=>["auto",...P()],I=()=>[el,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],q=()=>[t,De,ke],oe=()=>[...U(),kv,_v,{position:[De,ke]}],ce=()=>["no-repeat",{repeat:["","x","y","space","round"]}],M=()=>["auto","cover","contain",xD,gD,{size:[De,ke]}],K=()=>[up,Nc,Gi],Z=()=>["","none","full",m,De,ke],le=()=>["",Ze,Nc,Gi],me=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],we=()=>[Ze,up,kv,_v],je=()=>["","none",N,De,ke],X=()=>["none",Ze,De,ke],ae=()=>["none",Ze,De,ke],pe=()=>[Ze,De,ke],ve=()=>[el,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[yr],breakpoint:[yr],color:[dD],container:[yr],"drop-shadow":[yr],ease:["in","out","in-out"],font:[pD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[yr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[yr],shadow:[yr],spacing:["px",Ze],text:[yr],"text-shadow":[yr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",el,ke,De,j]}],container:["container"],columns:[{columns:[Ze,ke,De,d]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Y()}],"inset-x":[{"inset-x":Y()}],"inset-y":[{"inset-y":Y()}],start:[{start:Y()}],end:[{end:Y()}],top:[{top:Y()}],right:[{right:Y()}],bottom:[{bottom:Y()}],left:[{left:Y()}],visibility:["visible","invisible","collapse"],z:[{z:[ci,"auto",De,ke]}],basis:[{basis:[el,"full","auto",d,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ze,el,"auto","initial","none",ke]}],grow:[{grow:["",Ze,De,ke]}],shrink:[{shrink:["",Ze,De,ke]}],order:[{order:[ci,"first","last","none",De,ke]}],"grid-cols":[{"grid-cols":Q()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":Q()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...te(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...te()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":te()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:C()}],mx:[{mx:C()}],my:[{my:C()}],ms:[{ms:C()}],me:[{me:C()}],mt:[{mt:C()}],mr:[{mr:C()}],mb:[{mb:C()}],ml:[{ml:C()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[d,"screen",...I()]}],"min-w":[{"min-w":[d,"screen","none",...I()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",n,Nc,Gi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,De,dp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",up,ke]}],"font-family":[{font:[bD,ke,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,De,ke]}],"line-clamp":[{"line-clamp":[Ze,"none",De,dp]}],leading:[{leading:[l,...P()]}],"list-image":[{"list-image":["none",De,ke]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",De,ke]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...me(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ze,"from-font","auto",De,Gi]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[Ze,"auto",De,ke]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De,ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De,ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:oe()}],"bg-repeat":[{bg:ce()}],"bg-size":[{bg:M()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ci,De,ke],radial:["",De,ke],conic:[ci,De,ke]},vD,yD]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:Z()}],"rounded-s":[{"rounded-s":Z()}],"rounded-e":[{"rounded-e":Z()}],"rounded-t":[{"rounded-t":Z()}],"rounded-r":[{"rounded-r":Z()}],"rounded-b":[{"rounded-b":Z()}],"rounded-l":[{"rounded-l":Z()}],"rounded-ss":[{"rounded-ss":Z()}],"rounded-se":[{"rounded-se":Z()}],"rounded-ee":[{"rounded-ee":Z()}],"rounded-es":[{"rounded-es":Z()}],"rounded-tl":[{"rounded-tl":Z()}],"rounded-tr":[{"rounded-tr":Z()}],"rounded-br":[{"rounded-br":Z()}],"rounded-bl":[{"rounded-bl":Z()}],"border-w":[{border:le()}],"border-w-x":[{"border-x":le()}],"border-w-y":[{"border-y":le()}],"border-w-s":[{"border-s":le()}],"border-w-e":[{"border-e":le()}],"border-w-t":[{"border-t":le()}],"border-w-r":[{"border-r":le()}],"border-w-b":[{"border-b":le()}],"border-w-l":[{"border-l":le()}],"divide-x":[{"divide-x":le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...me(),"hidden","none"]}],"divide-style":[{divide:[...me(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ze,De,ke]}],"outline-w":[{outline:["",Ze,Nc,Gi]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",y,Ad,Ed]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",b,Ad,Ed]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[Ze,Gi]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":le()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",x,Ad,Ed]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[Ze,De,ke]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ze]}],"mask-image-linear-from-pos":[{"mask-linear-from":we()}],"mask-image-linear-to-pos":[{"mask-linear-to":we()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":we()}],"mask-image-t-to-pos":[{"mask-t-to":we()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":we()}],"mask-image-r-to-pos":[{"mask-r-to":we()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":we()}],"mask-image-b-to-pos":[{"mask-b-to":we()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":we()}],"mask-image-l-to-pos":[{"mask-l-to":we()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":we()}],"mask-image-x-to-pos":[{"mask-x-to":we()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":we()}],"mask-image-y-to-pos":[{"mask-y-to":we()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[De,ke]}],"mask-image-radial-from-pos":[{"mask-radial-from":we()}],"mask-image-radial-to-pos":[{"mask-radial-to":we()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":U()}],"mask-image-conic-pos":[{"mask-conic":[Ze]}],"mask-image-conic-from-pos":[{"mask-conic-from":we()}],"mask-image-conic-to-pos":[{"mask-conic-to":we()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:oe()}],"mask-repeat":[{mask:ce()}],"mask-size":[{mask:M()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",De,ke]}],filter:[{filter:["","none",De,ke]}],blur:[{blur:je()}],brightness:[{brightness:[Ze,De,ke]}],contrast:[{contrast:[Ze,De,ke]}],"drop-shadow":[{"drop-shadow":["","none",S,Ad,Ed]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",Ze,De,ke]}],"hue-rotate":[{"hue-rotate":[Ze,De,ke]}],invert:[{invert:["",Ze,De,ke]}],saturate:[{saturate:[Ze,De,ke]}],sepia:[{sepia:["",Ze,De,ke]}],"backdrop-filter":[{"backdrop-filter":["","none",De,ke]}],"backdrop-blur":[{"backdrop-blur":je()}],"backdrop-brightness":[{"backdrop-brightness":[Ze,De,ke]}],"backdrop-contrast":[{"backdrop-contrast":[Ze,De,ke]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ze,De,ke]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ze,De,ke]}],"backdrop-invert":[{"backdrop-invert":["",Ze,De,ke]}],"backdrop-opacity":[{"backdrop-opacity":[Ze,De,ke]}],"backdrop-saturate":[{"backdrop-saturate":[Ze,De,ke]}],"backdrop-sepia":[{"backdrop-sepia":["",Ze,De,ke]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",De,ke]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ze,"initial",De,ke]}],ease:[{ease:["linear","initial",D,De,ke]}],delay:[{delay:[Ze,De,ke]}],animate:[{animate:["none",O,De,ke]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[E,De,ke]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:X()}],"rotate-x":[{"rotate-x":X()}],"rotate-y":[{"rotate-y":X()}],"rotate-z":[{"rotate-z":X()}],scale:[{scale:ae()}],"scale-x":[{"scale-x":ae()}],"scale-y":[{"scale-y":ae()}],"scale-z":[{"scale-z":ae()}],"scale-3d":["scale-3d"],skew:[{skew:pe()}],"skew-x":[{"skew-x":pe()}],"skew-y":[{"skew-y":pe()}],transform:[{transform:[De,ke,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ve()}],"translate-x":[{"translate-x":ve()}],"translate-y":[{"translate-y":ve()}],"translate-z":[{"translate-z":ve()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De,ke]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De,ke]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[Ze,Nc,Gi,dp]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},TD=aD(ND);function Ne(...t){return TD(Pk(t))}function pN(t,e=800,n=.7){return new Promise((s,i)=>{const l=new FileReader;l.readAsDataURL(t),l.onload=c=>{const d=new Image;d.src=c.target.result,d.onload=()=>{const h=document.createElement("canvas");let m=d.width,y=d.height;(m>e||y>e)&&(m>y?(y=Math.round(y*e/m),m=e):(m=Math.round(m*e/y),y=e));const b=2048*2048;if(m*y>b){const E=Math.sqrt(b/(m*y));m=Math.floor(m*E),y=Math.floor(y*E)}h.width=m,h.height=y,h.getContext("2d").drawImage(d,0,0,m,y);let S=n,N=h.toDataURL("image/jpeg",S);for(;N.length>7e5&&S>.1;)S-=.1,N=h.toDataURL("image/jpeg",S);s(N)},d.onerror=h=>{console.warn("Image compression failed (format might not be supported by browser Canvas), checking file size...",h);const m=3*1024*1024;c.target.result.length>m?i(new Error("Image is too large and cannot be compressed. Please upload a smaller image (under 2MB).")):s(c.target.result)}},l.onerror=c=>i(c)})}const gN=T.createContext({isSidebarCollapsed:!1,toggleSidebar:()=>{},isRightSidebarOpen:!1,setRightSidebarOpen:()=>{},toggleRightSidebar:()=>{},rightSidebarWidth:320,setRightSidebarWidth:()=>{}});function ED({children:t}){const[e,n]=T.useState(!1),[s,i]=T.useState(!1),[l,c]=T.useState(320),d=()=>n(m=>!m),h=()=>i(m=>!m);return f.jsx(gN.Provider,{value:{isSidebarCollapsed:e,toggleSidebar:d,isRightSidebarOpen:s,setRightSidebarOpen:i,toggleRightSidebar:h,rightSidebarWidth:l,setRightSidebarWidth:c},children:t})}const l0=()=>T.useContext(gN),yN=T.createContext(),bN=()=>{const t=T.useContext(yN);if(!t)throw new Error("useUser must be used within a UserProvider");return t},fp={username:"",nickname:"",birthday:"",identity:"",schoolWork:"",schoolWorkLocation:"",residence:"",personality:"",valuesPositive:"",valuesNegative:"",lifeExperience:[],shortTermGoals:[],coreRelationships:[],interests:[],pets:[]},AD=({children:t})=>{const[e,n]=T.useState(()=>{try{const i=localStorage.getItem("user_profile"),l=i?JSON.parse(i):null;if(l&&typeof l=="object"){const c={...fp,...l};if(!c.residence&&l.location&&(c.residence=l.location),!c.schoolWork&&l.workplace&&(c.schoolWork=l.workplace),!c.identity&&l.occupation&&(c.identity=l.occupation),typeof c.lifeExperience=="string"&&c.lifeExperience?c.lifeExperience=[{year:"Past",content:c.lifeExperience}]:Array.isArray(c.lifeExperience)||(c.lifeExperience=[]),typeof c.coreRelationships=="string"){const d=[];l.family&&d.push({name:"Family",relation:"Family",note:l.family}),l.relationships&&d.push({name:"Relationships",relation:"Friends",note:l.relationships}),c.coreRelationships&&!l.family&&!l.relationships&&d.push({name:"Others",relation:"General",note:c.coreRelationships}),c.coreRelationships=d}else Array.isArray(c.coreRelationships)||(c.coreRelationships=[]);return typeof c.interests=="string"?c.interests=c.interests?c.interests.split(",").map(d=>d.trim()).filter(Boolean):[]:Array.isArray(c.interests)||(c.interests=[]),typeof c.pets=="string"&&c.pets?c.pets=[{name:"Pet",type:"Pet",note:c.pets}]:Array.isArray(c.pets)||(c.pets=[]),c}return fp}catch(i){return console.error("Failed to parse user_profile:",i),fp}});T.useEffect(()=>{localStorage.setItem("user_profile",JSON.stringify(e))},[e]);const s=i=>{n(l=>({...l,...i}))};return f.jsx(yN.Provider,{value:{profile:e,updateProfile:s},children:t})},xN=6048e5,CD=864e5,vN=6e4,wN=36e5,Dv=Symbol.for("constructDateFrom");function Qn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Dv in t?t[Dv](e):t instanceof Date?new t.constructor(e):new Date(e)}function Xt(t,e){return Qn(e||t,t)}function SN(t,e,n){const s=Xt(t,n?.in);if(isNaN(e))return Qn(t,NaN);if(!e)return s;const i=s.getDate(),l=Qn(t,s.getTime());l.setMonth(s.getMonth()+e+1,0);const c=l.getDate();return i>=c?l:(s.setFullYear(l.getFullYear(),l.getMonth(),i),s)}let jD={};function ou(){return jD}function Er(t,e){const n=ou(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Xt(t,e?.in),l=i.getDay(),c=(l<s?7:0)+l-s;return i.setDate(i.getDate()-c),i.setHours(0,0,0,0),i}function hf(t,e){return Er(t,{...e,weekStartsOn:1})}function NN(t,e){const n=Xt(t,e?.in),s=n.getFullYear(),i=Qn(n,0);i.setFullYear(s+1,0,4),i.setHours(0,0,0,0);const l=hf(i),c=Qn(n,0);c.setFullYear(s,0,4),c.setHours(0,0,0,0);const d=hf(c);return n.getTime()>=l.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function Ov(t){const e=Xt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function lu(t,...e){const n=Qn.bind(null,t||e.find(s=>typeof s=="object"));return e.map(n)}function mf(t,e){const n=Xt(t,e?.in);return n.setHours(0,0,0,0),n}function _D(t,e,n){const[s,i]=lu(n?.in,t,e),l=mf(s),c=mf(i),d=+l-Ov(l),h=+c-Ov(c);return Math.round((d-h)/CD)}function kD(t,e){const n=NN(t,e),s=Qn(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),hf(s)}function DD(t,e,n){const[s,i]=lu(n?.in,t,e);return+mf(s)==+mf(i)}function OD(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function MD(t){return!(!OD(t)&&typeof t!="number"||isNaN(+Xt(t)))}function RD(t,e){const n=Xt(t,e?.in),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(23,59,59,999),n}function LD(t,e){const[n,s]=lu(t,e.start,e.end);return{start:n,end:s}}function Mv(t,e){const{start:n,end:s}=LD(e?.in,t);let i=+n>+s;const l=i?+n:+s,c=i?s:n;c.setHours(0,0,0,0);let d=1;const h=[];for(;+c<=l;)h.push(Qn(n,c)),c.setDate(c.getDate()+d),c.setHours(0,0,0,0);return i?h.reverse():h}function PD(t,e){const n=Xt(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function zD(t,e){const n=Xt(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Rv(t,e){const n=ou(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Xt(t,e?.in),l=i.getDay(),c=(l<s?-7:0)+6-(l-s);return i.setDate(i.getDate()+c),i.setHours(23,59,59,999),i}const ID={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},BD=(t,e,n)=>{let s;const i=ID[t];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function es(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const UD={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qD={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$D={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VD={date:es({formats:UD,defaultWidth:"full"}),time:es({formats:qD,defaultWidth:"full"}),dateTime:es({formats:$D,defaultWidth:"full"})},HD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},FD=(t,e,n,s)=>HD[t];function rn(t){return(e,n)=>{const s=n?.context?String(n.context):"standalone";let i;if(s==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,d=n?.width?String(n.width):c;i=t.formattingValues[d]||t.formattingValues[c]}else{const c=t.defaultWidth,d=n?.width?String(n.width):t.defaultWidth;i=t.values[d]||t.values[c]}const l=t.argumentCallback?t.argumentCallback(e):e;return i[l]}}const GD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},YD={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},KD={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},WD={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},QD=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},JD={ordinalNumber:QD,era:rn({values:GD,defaultWidth:"wide"}),quarter:rn({values:YD,defaultWidth:"wide",argumentCallback:t=>t-1}),month:rn({values:KD,defaultWidth:"wide"}),day:rn({values:WD,defaultWidth:"wide"}),dayPeriod:rn({values:XD,defaultWidth:"wide",formattingValues:ZD,defaultFormattingWidth:"wide"})};function on(t){return(e,n={})=>{const s=n.width,i=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],l=e.match(i);if(!l)return null;const c=l[0],d=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(d)?tO(d,b=>b.test(c)):eO(d,b=>b.test(c));let m;m=t.valueCallback?t.valueCallback(h):h,m=n.valueCallback?n.valueCallback(m):m;const y=e.slice(c.length);return{value:m,rest:y}}}function eO(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function tO(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function If(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const i=s[0],l=e.match(t.parsePattern);if(!l)return null;let c=t.valueCallback?t.valueCallback(l[0]):l[0];c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(i.length);return{value:c,rest:d}}}const nO=/^(\d+)(th|st|nd|rd)?/i,aO=/\d+/i,sO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rO={any:[/^b/i,/^(a|c)/i]},iO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oO={any:[/1/i,/2/i,/3/i,/4/i]},lO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mO={ordinalNumber:If({matchPattern:nO,parsePattern:aO,valueCallback:t=>parseInt(t,10)}),era:on({matchPatterns:sO,defaultMatchWidth:"wide",parsePatterns:rO,defaultParseWidth:"any"}),quarter:on({matchPatterns:iO,defaultMatchWidth:"wide",parsePatterns:oO,defaultParseWidth:"any",valueCallback:t=>t+1}),month:on({matchPatterns:lO,defaultMatchWidth:"wide",parsePatterns:cO,defaultParseWidth:"any"}),day:on({matchPatterns:uO,defaultMatchWidth:"wide",parsePatterns:dO,defaultParseWidth:"any"}),dayPeriod:on({matchPatterns:fO,defaultMatchWidth:"any",parsePatterns:hO,defaultParseWidth:"any"})},gn={code:"en-US",formatDistance:BD,formatLong:VD,formatRelative:FD,localize:JD,match:mO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pO(t,e){const n=Xt(t,e?.in);return _D(n,zD(n))+1}function gO(t,e){const n=Xt(t,e?.in),s=+hf(n)-+kD(n);return Math.round(s/xN)+1}function TN(t,e){const n=Xt(t,e?.in),s=n.getFullYear(),i=ou(),l=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=Qn(e?.in||t,0);c.setFullYear(s+1,0,l),c.setHours(0,0,0,0);const d=Er(c,e),h=Qn(e?.in||t,0);h.setFullYear(s,0,l),h.setHours(0,0,0,0);const m=Er(h,e);return+n>=+d?s+1:+n>=+m?s:s-1}function yO(t,e){const n=ou(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=TN(t,e),l=Qn(e?.in||t,0);return l.setFullYear(i,0,s),l.setHours(0,0,0,0),Er(l,e)}function bO(t,e){const n=Xt(t,e?.in),s=+Er(n,e)-+yO(n,e);return Math.round(s/xN)+1}function xt(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const ui={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return xt(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):xt(n+1,2)},d(t,e){return xt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(t,e){return xt(t.getHours()%12||12,e.length)},H(t,e){return xt(t.getHours(),e.length)},m(t,e){return xt(t.getMinutes(),e.length)},s(t,e){return xt(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return xt(i,e.length)}},tl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Lv={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return ui.y(t,e)},Y:function(t,e,n,s){const i=TN(t,s),l=i>0?i:1-i;if(e==="YY"){const c=l%100;return xt(c,2)}return e==="Yo"?n.ordinalNumber(l,{unit:"year"}):xt(l,e.length)},R:function(t,e){const n=NN(t);return xt(n,e.length)},u:function(t,e){const n=t.getFullYear();return xt(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return xt(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return xt(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return ui.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return xt(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const i=bO(t,s);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):xt(i,e.length)},I:function(t,e,n){const s=gO(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):xt(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ui.d(t,e)},D:function(t,e,n){const s=pO(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):xt(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const i=t.getDay(),l=(i-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return xt(l,2);case"eo":return n.ordinalNumber(l,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const i=t.getDay(),l=(i-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return xt(l,e.length);case"co":return n.ordinalNumber(l,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),i=s===0?7:s;switch(e){case"i":return String(i);case"ii":return xt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let i;switch(s===12?i=tl.noon:s===0?i=tl.midnight:i=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let i;switch(s>=17?i=tl.evening:s>=12?i=tl.afternoon:s>=4?i=tl.morning:i=tl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return ui.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ui.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):xt(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):xt(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ui.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ui.s(t,e)},S:function(t,e){return ui.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return zv(s);case"XXXX":case"XX":return Ki(s);default:return Ki(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return zv(s);case"xxxx":case"xx":return Ki(s);default:return Ki(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Pv(s,":");default:return"GMT"+Ki(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Pv(s,":");default:return"GMT"+Ki(s,":")}},t:function(t,e,n){const s=Math.trunc(+t/1e3);return xt(s,e.length)},T:function(t,e,n){return xt(+t,e.length)}};function Pv(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),i=Math.trunc(s/60),l=s%60;return l===0?n+String(i):n+String(i)+e+xt(l,2)}function zv(t,e){return t%60===0?(t>0?"-":"+")+xt(Math.abs(t)/60,2):Ki(t,e)}function Ki(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),i=xt(Math.trunc(s/60),2),l=xt(s%60,2);return n+i+e+l}const Iv=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},EN=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},xO=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return Iv(t,e);let l;switch(s){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",Iv(s,e)).replace("{{time}}",EN(i,e))},vO={p:EN,P:xO},wO=/^D+$/,SO=/^Y+$/,NO=["D","DD","YY","YYYY"];function TO(t){return wO.test(t)}function EO(t){return SO.test(t)}function AO(t,e,n){const s=CO(t,e,n);if(console.warn(s),NO.includes(t))throw new RangeError(s)}function CO(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_O=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kO=/^'([^]*?)'?$/,DO=/''/g,OO=/[a-zA-Z]/;function pt(t,e,n){const s=ou(),i=n?.locale??s.locale??gn,l=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,d=Xt(t,n?.in);if(!MD(d))throw new RangeError("Invalid time value");let h=e.match(_O).map(y=>{const b=y[0];if(b==="p"||b==="P"){const x=vO[b];return x(y,i.formatLong)}return y}).join("").match(jO).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:MO(y)};if(Lv[b])return{isToken:!0,value:y};if(b.match(OO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(h=i.localize.preprocessor(d,h));const m={firstWeekContainsDate:l,weekStartsOn:c,locale:i};return h.map(y=>{if(!y.isToken)return y.value;const b=y.value;(!n?.useAdditionalWeekYearTokens&&EO(b)||!n?.useAdditionalDayOfYearTokens&&TO(b))&&AO(b,e,String(t));const x=Lv[b[0]];return x(d,b,i.localize,m)}).join("")}function MO(t){const e=t.match(kO);return e?e[1].replace(DO,"'"):t}function RO(t,e){const n=Xt(t,e?.in),s=n.getFullYear(),i=n.getMonth(),l=Qn(n,0);return l.setFullYear(s,i+1,0),l.setHours(0,0,0,0),l.getDate()}function LO(t,e){return Xt(t,e?.in).getFullYear()}function PO(t,e,n){const[s,i]=lu(n?.in,t,e);return+Er(s,n)==+Er(i,n)}function zO(t,e,n){const[s,i]=lu(n?.in,t,e);return s.getFullYear()===i.getFullYear()&&s.getMonth()===i.getMonth()}function wr(t,e){const n=()=>Qn(e?.in,NaN),i=qO(t);let l;if(i.date){const m=$O(i.date,2);l=VO(m.restDateString,m.year)}if(!l||isNaN(+l))return n();const c=+l;let d=0,h;if(i.time&&(d=HO(i.time),isNaN(d)))return n();if(i.timezone){if(h=FO(i.timezone),isNaN(h))return n()}else{const m=new Date(c+d),y=Xt(0,e?.in);return y.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),y.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),y}return Xt(c+d+h,e?.in)}const Cd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},IO=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,BO=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,UO=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qO(t){const e={},n=t.split(Cd.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],Cd.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Cd.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const i=Cd.timezone.exec(s);i?(e.time=s.replace(i[1],""),e.timezone=i[1]):e.time=s}return e}function $O(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const i=s[1]?parseInt(s[1]):null,l=s[2]?parseInt(s[2]):null;return{year:l===null?i:l*100,restDateString:t.slice((s[1]||s[2]).length)}}function VO(t,e){if(e===null)return new Date(NaN);const n=t.match(IO);if(!n)return new Date(NaN);const s=!!n[4],i=Tc(n[1]),l=Tc(n[2])-1,c=Tc(n[3]),d=Tc(n[4]),h=Tc(n[5])-1;if(s)return XO(e,d,h)?GO(e,d,h):new Date(NaN);{const m=new Date(0);return!KO(e,l,c)||!WO(e,i)?new Date(NaN):(m.setUTCFullYear(e,l,Math.max(i,c)),m)}}function Tc(t){return t?parseInt(t):1}function HO(t){const e=t.match(BO);if(!e)return NaN;const n=hp(e[1]),s=hp(e[2]),i=hp(e[3]);return ZO(n,s,i)?n*wN+s*vN+i*1e3:NaN}function hp(t){return t&&parseFloat(t.replace(",","."))||0}function FO(t){if(t==="Z")return 0;const e=t.match(UO);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return QO(s,i)?n*(s*wN+i*vN):NaN}function GO(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const i=s.getUTCDay()||7,l=(e-1)*7+n+1-i;return s.setUTCDate(s.getUTCDate()+l),s}const YO=[31,null,31,30,31,30,31,31,30,31,30,31];function AN(t){return t%400===0||t%4===0&&t%100!==0}function KO(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(YO[e]||(AN(t)?29:28))}function WO(t,e){return e>=1&&e<=(AN(t)?366:365)}function XO(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function ZO(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function QO(t,e){return e>=0&&e<=59}function JO(t,e,n){const s=Xt(t,n?.in),i=s.getFullYear(),l=s.getDate(),c=Qn(t,0);c.setFullYear(i,e,15),c.setHours(0,0,0,0);const d=RO(c);return s.setMonth(e,Math.min(l,d)),s}function eM(t,e,n){const s=Xt(t,n?.in);return isNaN(+s)?Qn(t,NaN):(s.setFullYear(e),s)}function tM(t,e,n){return SN(t,-1,n)}const ag=(t,e)=>e.some(n=>t instanceof n);let Bv,Uv;function nM(){return Bv||(Bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aM(){return Uv||(Uv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sg=new WeakMap,mp=new WeakMap,Bf=new WeakMap;function sM(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Ji(t.result)),i()},c=()=>{s(t.error),i()};t.addEventListener("success",l),t.addEventListener("error",c)});return Bf.set(e,t),e}function rM(t){if(sg.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),i()},c=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});sg.set(t,e)}let rg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ji(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CN(t){rg=t(rg)}function iM(t){return aM().includes(t)?function(...e){return t.apply(ig(this),e),Ji(this.request)}:function(...e){return Ji(t.apply(ig(this),e))}}function oM(t){return typeof t=="function"?iM(t):(t instanceof IDBTransaction&&rM(t),ag(t,nM())?new Proxy(t,rg):t)}function Ji(t){if(t instanceof IDBRequest)return sM(t);if(mp.has(t))return mp.get(t);const e=oM(t);return e!==t&&(mp.set(t,e),Bf.set(e,t)),e}const ig=t=>Bf.get(t);function lM(t,e,{blocked:n,upgrade:s,blocking:i,terminated:l}={}){const c=indexedDB.open(t,e),d=Ji(c);return s&&c.addEventListener("upgradeneeded",h=>{s(Ji(c.result),h.oldVersion,h.newVersion,Ji(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),d.then(h=>{l&&h.addEventListener("close",()=>l()),i&&h.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const cM=["get","getKey","getAll","getAllKeys","count"],uM=["put","add","delete","clear"],pp=new Map;function qv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pp.get(e))return pp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=uM.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||cM.includes(n)))return;const l=async function(c,...d){const h=this.transaction(c,i?"readwrite":"readonly");let m=h.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),i&&h.done]))[0]};return pp.set(e,l),l}CN(t=>({...t,get:(e,n,s)=>qv(e,n)||t.get(e,n,s),has:(e,n)=>!!qv(e,n)||t.has(e,n)}));const dM=["continue","continuePrimaryKey","advance"],$v={},og=new WeakMap,jN=new WeakMap,fM={get(t,e){if(!dM.includes(e))return t[e];let n=$v[e];return n||(n=$v[e]=function(...s){og.set(this,jN.get(this)[e](...s))}),n}};async function*hM(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,fM);for(jN.set(n,e),Bf.set(n,ig(e));e;)yield n,e=await(og.get(n)||e.continue()),og.delete(n)}function Vv(t,e){return e===Symbol.asyncIterator&&ag(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&ag(t,[IDBIndex,IDBObjectStore])}CN(t=>({...t,get(e,n,s){return Vv(e,n)?hM:t.get(e,n,s)},has(e,n){return Vv(e,n)||t.has(e,n)}}));const mM="chatdiary-db",pM=2,it={DIARIES:"diaries",CATEGORIES:"categories",SETTINGS:"settings",CHATS:"chats"},nl=async()=>lM(mM,pM,{upgrade(t,e,n,s){if(!t.objectStoreNames.contains(it.DIARIES)){const i=t.createObjectStore(it.DIARIES,{keyPath:"id"});i.createIndex("date","date"),i.createIndex("category","category")}t.objectStoreNames.contains(it.CATEGORIES)||t.createObjectStore(it.CATEGORIES,{keyPath:"id"}),t.objectStoreNames.contains(it.SETTINGS)||t.createObjectStore(it.SETTINGS),t.objectStoreNames.contains(it.CHATS)||t.createObjectStore(it.CHATS,{keyPath:"date"})}}),Tt={async getAll(t){return(await nl()).getAll(t)},async get(t,e){return(await nl()).get(t,e)},async put(t,e,n){return(await nl()).put(t,e,n)},async delete(t,e){return(await nl()).delete(t,e)},async putAll(t,e){const s=(await nl()).transaction(t,"readwrite"),i=s.objectStore(t);for(const l of e)i.put(l);return s.done},async clear(t){return(await nl()).clear(t)}},_N=T.createContext({diaries:[],getDiaryByDate:t=>{},addDiary:t=>{}}),Ec=[{id:"1",date:pt(new Date,"yyyy-MM-dd"),title:"Start of a new journey",content:"Today I decided to start keeping a diary with this AI app. The interface is so calming and beautiful.",mood:"happy",comments:[{id:"c1",author:"ai",text:"I am so glad you like it! Let us make many memories together.",date:new Date().toISOString()}]},{id:"2",date:pt(new Date(Date.now()-864e5),"yyyy-MM-dd"),title:"A quiet afternoon",content:"Spent the afternoon reading in a coffee shop. The smell of roasted beans was everywhere.",mood:"calm",comments:[]},{id:"3",date:pt(new Date(Date.now()-864e5*3),"yyyy-MM-dd"),title:"Rainy mood",content:"It rained all day. Perfect weather for coding and listening to lo-fi beats.",mood:"melancholic",comments:[]}];function gM({children:t}){const[e,n]=T.useState([]),[s,i]=T.useState(!1),l=[{id:"Daily Life",name:"Daily Life",iconName:"Coffee",color:"bg-orange-100 text-orange-600"},{id:"Work",name:"Work",iconName:"Briefcase",color:"bg-blue-100 text-blue-600"},{id:"Travel",name:"Travel",iconName:"Plane",color:"bg-green-100 text-green-600"}],[c,d]=T.useState([]);T.useEffect(()=>{(async()=>{try{const L=await Tt.getAll(it.DIARIES),H=await Tt.getAll(it.CATEGORIES),z=L.length>0||H.length>0,P=localStorage.getItem("chatdairy-entries");if(!z&&P){console.log("Migrating data from LocalStorage to IndexedDB...");let Y=[];try{Y=JSON.parse(P),Array.isArray(Y)||(Y=Ec)}catch{Y=Ec}await Tt.putAll(it.DIARIES,Y),n(Y);const Q=localStorage.getItem("chatdairy-categories");let A=[];try{A=JSON.parse(Q)||[],A.length>0&&typeof A[0]=="string"&&(A=A.map(B=>({id:B,name:B,color:"bg-indigo-100 text-indigo-600",iconName:"Layers"}))),A.some(B=>B.name==="Daily Life")||(A=[...l,...A])}catch{A=l}await Tt.putAll(it.CATEGORIES,A),d(A),localStorage.removeItem("chatdairy-entries"),localStorage.removeItem("chatdairy-categories"),console.log("Migration completed and LocalStorage cleaned.")}else z?(n(L),d(H),localStorage.getItem("chatdairy-entries")&&(localStorage.removeItem("chatdairy-entries"),console.log("Cleaned up legacy chatdairy-entries from LocalStorage")),localStorage.getItem("chatdairy-categories")&&(localStorage.removeItem("chatdairy-categories"),console.log("Cleaned up legacy chatdairy-categories from LocalStorage"))):(n(Ec),d(l),await Tt.putAll(it.DIARIES,Ec),await Tt.putAll(it.CATEGORIES,l))}catch(L){console.error("Failed to initialize database:",L),n(Ec),d(l)}finally{i(!0)}})()},[]),T.useEffect(()=>{if(!s)return;(async()=>{try{await Tt.putAll(it.DIARIES,e)}catch(L){console.error("Failed to save diaries to DB:",L)}})()},[e,s]),T.useEffect(()=>{if(!s)return;(async()=>{try{await Tt.putAll(it.CATEGORIES,c)}catch(L){console.error("Failed to save categories to DB:",L)}})()},[c,s]);const h=U=>{let L,H,z,P;typeof U=="string"?(L=U,H=arguments[1]||"bg-indigo-100 text-indigo-600",z=null,P="Layers"):{name:L,color:H="bg-indigo-100 text-indigo-600",coverImage:z=null,iconName:P="Layers"}=U,d(Y=>Y.some(Q=>Q.name===L)?Y:[...Y,{id:L,name:L,color:H,coverImage:z,iconName:P}])},m=(U,L)=>{let H,z,P;typeof L=="string"?(H=L,z=arguments[2],P=void 0):{name:H,color:z,coverImage:P}=L,d(Y=>Y.map(Q=>Q.name===U?{...Q,name:H||Q.name,id:H||Q.id,color:z||Q.color,coverImage:P!==void 0?P:Q.coverImage}:Q)),H&&U!==H&&n(Y=>Y.map(Q=>Q.category===U?{...Q,category:H}:Q))},y=U=>{d(L=>L.filter(H=>H.name!==U))},b=U=>e.find(L=>L.date===U),x=U=>e.filter(L=>L.date===U),S=U=>e.find(L=>L.id===U),N=U=>{n(L=>[...L,{...U,createdAt:U.createdAt||new Date().toISOString(),comments:U.comments||[],chatHistory:U.chatHistory||[]}])},E=(U,L)=>{n(H=>H.map(z=>z.id===U?{...z,...L}:z))},j=U=>{n(L=>L.filter(H=>H.id!==U))},D=U=>{n(L=>L.map(H=>{if(H.id===U){const{chatHistory:z,...P}=H;return P}return H}))},O=(U,L)=>{n(H=>H.map(z=>{if(z.id===U){const P=z.comments||[];return{...z,comments:[...P,{...L,id:Date.now().toString(),date:new Date().toISOString()}]}}return z}))},R=(U,L)=>{n(H=>H.map(z=>z.id===U&&z.comments?{...z,comments:z.comments.filter(P=>P.id!==L)}:z))};return f.jsx(_N.Provider,{value:{diaries:e,getDiaryByDate:b,getDiariesByDate:x,getDiaryById:S,addDiary:N,updateDiary:E,deleteDiary:j,deleteChatHistory:D,addComment:O,deleteComment:R,customCategories:c,addCategory:h,updateCategory:m,deleteCategory:y},children:t})}const uo=()=>T.useContext(_N),kN=T.createContext(),Hv={no_ai_trace:`You are a professional ghostwriter. 
Your task is to write a personal diary entry from the USER's perspective based on the provided conversation history.

# CRITICAL RULES:
1. **First Person Only**: Write as "I". Never mention "User" or "AI".
2. **Authentic Voice**: Use the user's likely tone based on their chat style. Be emotional, raw, and personal.
3. **No AI Traces**: Do NOT include any "Analysis", "Summary", or "Observation" sections. Do not sound robotic.
4. **No Mentions of AI**: Do NOT mention "AI", "Assistant", "Bot", "Chatbot", or the AI's persona name. Treat the conversation as an internal monologue or just thoughts.
5. **No Embellishments**: Stick strictly to the events and feelings mentioned in the chat.
6. **Structure**: Title, then the Body.

# AI BRIEFING (FOR FUTURE MEMORY):
You must also generate a "Briefing" for the future AI to understand today's context.
- **Events**: What happened?
- **Atmosphere**: How was the conversation? (e.g., User was irritable, happy, etc.)
- **Unfinished Topics**: Any topics to continue tomorrow? (e.g., Fix bug, finish movie).

# OUTPUT FORMAT (JSON ONLY):
Return a strictly valid JSON object. Do not include markdown formatting like \`\`\`json.
{
  "title": "A short, evocative title for the entry",
  "content": "The full HTML content of the diary (use <p>, <strong>, <em> only).",
  "mood": "One of: happy, excited, neutral, sad, loved, calm, anxious, angry",
  "tags": ["tag1", "tag2", "tag3"],
  "category": "Work/Personal/Relationship/etc.",
  "summary": "A 1-sentence summary of the day for display.",
  "ai_briefing": {
    "events": "Summary of events",
    "atmosphere_or_emotion": "User's mood/atmosphere during chat",
    "unfinished_topics": "Topics to resume or null"
  }
}`,with_ai_trace:`You are a professional ghostwriter writing a personal diary for the user.
Your task is to write a diary entry from the USER's perspective ("I").

# CORE CONCEPT:
- **AI as a Character**: You (the AI) are a "Listener" or "Companion" that the user chatted with today.
- **The User's Voice**: Write as the user reflecting on their day and their conversation with you.
- **Interaction**: Explicitly mention the act of talking to the AI.
    - IMPORTANT: When referring to the AI, use the AI's persona name (if available) or "My Companion". Do NOT use the generic term "AI".
    - Example tone: "I talked to [Persona Name] about [Topic] today. It didn't solve everything, but saying it out loud helped."
    - Example tone: "Shared my worries with my digital friend. It's funny how just typing things out makes them clearer."

# CRITICAL RULES:
1. **First Person ("I")**: You are the user.
2. **Authentic & Reflective**: Focus on feelings, realizations, and the relief of venting/sharing.
3. **No "Robot" Talk**: Do not write "The AI analyzed my data." Write "I told [Persona Name] about..." or "We chatted about...".
4. **Structure**: Title -> Body (including the reflection on the chat).

# AI BRIEFING (FOR FUTURE MEMORY):
You must also generate a "Briefing" for the future AI to understand today's context.
- **Events**: What happened?
- **Atmosphere**: How was the conversation?
- **Unfinished Topics**: Any topics to continue?

# OUTPUT FORMAT (JSON ONLY):
Return a strictly valid JSON object.
{
  "title": "A short, evocative title",
  "content": "The full HTML content (use <p>, <strong>, <em>).",
  "mood": "One of: happy, excited, neutral, sad, loved, calm, anxious, angry",
  "tags": ["tag1", "tag2", "tag3"],
  "category": "Work/Personal/Relationship/etc.",
  "summary": "A 1-sentence summary for display.",
  "ai_briefing": {
    "events": "Summary of events",
    "atmosphere_or_emotion": "User's mood/atmosphere during chat",
    "unfinished_topics": "Topics to resume or null"
  }
}`},fo=()=>{const t=T.useContext(kN);if(!t)throw new Error("useAI must be used within an AIProvider");return t},Ac=[{id:"default",name:"Empathetic Companion",description:"User-centric, supportive friend who provides emotional value and casual guidance.",replyStyle:"warm",customPrompt:"You are an empathetic and curious AI companion. GPT ",diaryStyle:"Pure Ghostwriter",diaryStylePrompt:"Write strictly as the user. Record events and feelings directly and authentically. Do not analyze, do not summarize, do not be poetic unless the user is. Just pure, raw diary recording.",isDefault:!0}],yM=({children:t})=>{const{t:e}=yn(),{profile:n}=bN(),{diaries:s}=uo(),[i,l]=T.useState(()=>{try{const X=localStorage.getItem("ai_personas"),ae=X?JSON.parse(X):null;return Array.isArray(ae)?ae:Ac}catch(X){return console.error("Failed to parse ai_personas:",X),Ac}}),[c,d]=T.useState(()=>localStorage.getItem("ai_current_persona_id")||"default"),[h,m]=T.useState(()=>{try{const X=localStorage.getItem("ai_api_configs"),ae=X?JSON.parse(X):null,pe=[{id:"official",name:"Official OpenAI",type:"official",apiKey:"",baseUrl:"https://api.openai.com/v1",isDefault:!0}];return Array.isArray(ae)?ae:pe}catch(X){return console.error("Failed to parse ai_api_configs:",X),[{id:"official",name:"Official OpenAI",type:"official",apiKey:"",baseUrl:"https://api.openai.com/v1",isDefault:!0}]}}),[y,b]=T.useState(()=>localStorage.getItem("ai_current_api_config_id")||"official"),[x,S]=T.useState(()=>{try{const X=localStorage.getItem("ai_diary_settings"),ae=X?JSON.parse(X):{};return{wordCount:ae.wordCount||300,diaryStyle:ae.diaryStyle||"default",diaryStylePrompt:ae.diaryStylePrompt||"",withAiTrace:ae.withAiTrace||!1}}catch{return{wordCount:300,diaryStyle:"default",diaryStylePrompt:"",withAiTrace:!1}}});T.useEffect(()=>{try{localStorage.setItem("ai_diary_settings",JSON.stringify(x))}catch(X){console.warn("Failed to save ai_diary_settings to localStorage:",X)}},[x]),T.useEffect(()=>{["Pure Ghostwriter","Empathetic & Reflective"].includes(x.diaryStyle)&&S(ae=>({...ae,diaryStyle:"Default",diaryStylePrompt:""}))},[]),T.useEffect(()=>{(async()=>{try{const pe=Object.keys(localStorage).filter(ve=>ve.startsWith("chat_messages_"));if(pe.length===0)return;console.log(`[Migration] Found ${pe.length} chat history keys in LocalStorage. Starting migration to IndexedDB...`);for(const ve of pe)try{const ge=ve.replace("chat_messages_","");if(!/^\d{4}-\d{2}-\d{2}$/.test(ge))continue;const Se=localStorage.getItem(ve);if(!Se)continue;const Ae=JSON.parse(Se);await Tt.get(it.CHATS,ge)?console.log(`[Migration] Skipped ${ge} (already in DB)`):(await Tt.put(it.CHATS,{date:ge,messages:Ae}),console.log(`[Migration] Migrated chat for ${ge}`)),localStorage.removeItem(ve)}catch(ge){console.error(`[Migration] Failed to migrate key ${ve}:`,ge)}console.log("[Migration] Chat storage migration completed.")}catch(ae){console.error("[Migration] Global migration failed:",ae)}})()},[]);const[N,E]=T.useState(()=>{const X=new Date;return`${X.getFullYear()}-${String(X.getMonth()+1).padStart(2,"0")}-${String(X.getDate()).padStart(2,"0")}`}),[j,D]=T.useState([]),[O,R]=T.useState(!1),[U,L]=T.useState(null);T.useEffect(()=>{(async()=>{R(!1),L(null);try{const ae=await Tt.get(it.CHATS,N);if(ae&&ae.messages)D(ae.messages);else{const pe=`chat_messages_${N}`,ve=localStorage.getItem(pe);if(ve){const ge=JSON.parse(ve);ge.length>0&&ge[0].id===1&&ge[0].sender==="ai"&&(ge[0].text=e("write.greeting_initial")),D(ge),await Tt.put(it.CHATS,{date:N,messages:ge}),localStorage.removeItem(pe)}else{const ge=new Date,Se=`${ge.getFullYear()}-${String(ge.getMonth()+1).padStart(2,"0")}-${String(ge.getDate()).padStart(2,"0")}`;if(N===Se){const Ae=localStorage.getItem("ai_chat_history");if(Ae)try{const ye=JSON.parse(Ae);let Xe=!1;if(ye.length>0){const Ye=ye[ye.length-1];if(Ye.id!==1){const Me=new Date(Ye.id);isNaN(Me.getTime())||`${Me.getFullYear()}-${String(Me.getMonth()+1).padStart(2,"0")}-${String(Me.getDate()).padStart(2,"0")}`===Se&&(Xe=!0)}}Xe?(D(ye),await Tt.put(it.CHATS,{date:N,messages:ye}),localStorage.removeItem("ai_chat_history")):D([{id:1,sender:"ai",text:e("write.greeting_initial")}])}catch{D([{id:1,sender:"ai",text:e("write.greeting_initial")}])}else D([{id:1,sender:"ai",text:e("write.greeting_initial")}])}else D([{id:1,sender:"ai",text:e("write.greeting_initial")}])}}}catch(ae){console.error("Failed to load chats:",ae),D([{id:1,sender:"ai",text:e("write.greeting_initial")}])}finally{R(!0),L(N)}})()},[N,e]);const[H,z]=T.useState(!1);T.useEffect(()=>{l(X=>{const ae=new Set(Ac.map(Se=>Se.id)),pe=Se=>Se.isDefault&&!ae.has(Se.id);if(!X.some(pe))return X;const ge=X.filter(Se=>!pe(Se));return ge.length===0?Ac:ge}),l(X=>{const ae=new Set(Ac.map(ve=>ve.id));return X.find(ve=>ve.id===c&&ve.isDefault&&!ae.has(ve.id))&&d("default"),X})},[]),T.useEffect(()=>{(async()=>{if(N&&O&&U===N)try{await Tt.put(it.CHATS,{date:N,messages:j}),localStorage.removeItem(`chat_messages_${N}`);const ae=new Date,pe=`${ae.getFullYear()}-${String(ae.getMonth()+1).padStart(2,"0")}-${String(ae.getDate()).padStart(2,"0")}`;N===pe&&localStorage.removeItem("ai_chat_history")}catch(ae){console.warn("Failed to save chat messages to DB:",ae)}})()},[j,N,O,U]),T.useEffect(()=>{try{localStorage.setItem("ai_personas",JSON.stringify(i))}catch(X){console.warn("Failed to save ai_personas to localStorage:",X)}},[i]),T.useEffect(()=>{try{localStorage.setItem("ai_current_persona_id",c)}catch(X){console.warn("Failed to save ai_current_persona_id to localStorage:",X)}},[c]),T.useEffect(()=>{try{localStorage.setItem("ai_api_configs",JSON.stringify(h))}catch(X){console.warn("Failed to save ai_api_configs to localStorage:",X)}},[h]),T.useEffect(()=>{try{localStorage.setItem("ai_current_api_config_id",y)}catch(X){console.warn("Failed to save ai_current_api_config_id to localStorage:",X)}},[y]);const P=i.find(X=>X.id===c)||i[0],Y=h.find(X=>X.id===y)||h[0],Q=X=>{const ae={...X,id:Date.now().toString(),isDefault:!1};return l([...i,ae]),ae.id},A=(X,ae)=>{l(i.map(pe=>pe.id===X?{...pe,...ae}:pe))},F=X=>{i.find(ae=>ae.id===X)?.isDefault||(l(i.filter(ae=>ae.id!==X)),c===X&&d("default"))},B=X=>{const ae={...X,id:Date.now().toString(),isDefault:!1};return m([...h,ae]),ae.id},te=(X,ae)=>{m(h.map(pe=>pe.id===X?{...pe,...ae}:pe))},se=X=>{h.find(ae=>ae.id===X)?.isDefault||(m(h.filter(ae=>ae.id!==X)),y===X&&b("official"))},C=async X=>{try{let ae=X.baseUrl.replace(/\/$/,""),pe,ve={};if(X.provider==="google"||ae.includes("generativelanguage.googleapis.com")){let ge=ae;try{ge=new URL(ae).origin}catch{}pe=`${ge}/v1beta/models?key=${X.apiKey}`;const Se=await fetch(pe,{method:"GET",headers:{"Content-Type":"application/json"}});if(!Se.ok)throw new Error(`Failed to fetch models: ${Se.status} ${Se.statusText}`);const Ae=await Se.json();return Ae.models?Ae.models.map(ye=>({id:ye.name.replace("models/","")})):[]}else{const ge=[];let Se=ae.replace(/\/$/,"");Se.endsWith("/v1")&&(Se=Se.substring(0,Se.length-3)),ge.push(`${Se}/v1/models`),ge.push(`${Se}/models`),ae.endsWith("/models");let Ae,ye="";ve.Authorization=`Bearer ${X.apiKey}`;for(const Xe of ge)try{console.log(`[AIContext] Fetching models from: ${Xe}`);const Ye=await fetch(Xe,{method:"GET",headers:{...ve,"Content-Type":"application/json"}});if(Ye.ok){const He=await Ye.json();return console.log(`[AIContext] Success from: ${Xe}`),Array.isArray(He.data)?He.data:Array.isArray(He)?He:He.list&&Array.isArray(He.list)?He.list:(console.warn("[AIContext] Unexpected response format:",He),[])}if(Ye.status===404){console.log(`[AIContext] 404 at: ${Xe}`),Ae=new Error(`404 Not Found at ${Xe}`);continue}const Me=await Ye.text().catch(()=>Ye.statusText);throw new Error(`API Error (${Ye.status}): ${Me}`)}catch(Ye){console.error(`[AIContext] Error fetching from ${Xe}:`,Ye),Ae=Ye}throw Ae||new Error("Failed to fetch models. Please check your URL and Network.")}}catch(ae){throw console.error("Error fetching models:",ae),ae}},I=async(X,ae)=>{if(!ae.apiKey)throw new Error("API Key is missing. Please check your settings.");const pe=ae.model||"gpt-3.5-turbo";let ve=ae.baseUrl.replace(/\/$/,"");if(ae.provider==="google"||ve.includes("generativelanguage.googleapis.com")){let ge=ve;try{ge=new URL(ve).origin}catch{}const Se=`${ge}/v1beta/models/${pe}:generateContent?key=${ae.apiKey}`,Ae=X.filter(He=>He.role!=="system").map(He=>{let ot=[];return Array.isArray(He.content)?He.content.forEach(gt=>{if(gt.type==="text")ot.push({text:gt.text});else if(gt.type==="image_url")try{if(!gt.image_url||!gt.image_url.url||typeof gt.image_url.url!="string"){console.warn("Skipping image with invalid URL:",gt);return}const Zt=gt.image_url.url.match(/^data:(.+);base64,(.+)$/);Zt?ot.push({inline_data:{mime_type:Zt[1],data:Zt[2]}}):console.warn("Skipping non-base64 image URL for Gemini:",gt.image_url.url)}catch(Zt){console.error("Failed to parse image data url",Zt)}}):ot.push({text:He.content||" "}),{role:He.role==="user"?"user":"model",parts:ot}}),ye=X.find(He=>He.role==="system"),Xe={contents:Ae,generationConfig:{temperature:.7}};ye&&(Xe.system_instruction={parts:[{text:ye.content}]});const Ye=await fetch(Se,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)});if(!Ye.ok){const He=await Ye.text().catch(()=>Ye.statusText);throw new Error(`Gemini API Error (${Ye.status}): ${He}`)}const Me=await Ye.json();Me.candidates&&Me.candidates[0]&&Me.candidates[0].finishReason!=="STOP"&&console.warn(`[AIContext] Gemini Finish Reason: ${Me.candidates[0].finishReason}`,Me);try{if(!Me.candidates||!Me.candidates[0])throw new Error(`Gemini Error: No candidates returned. Details: ${JSON.stringify(Me)}`);return Me.candidates[0].content.parts[0].text}catch(He){throw console.error("Gemini response parsing error:",Me),new Error(`Failed to parse Gemini response: ${He.message}. Response: ${JSON.stringify(Me).substring(0,200)}...`)}}else{let ge=ve;ge.endsWith("/v1")&&(ge=ge.substring(0,ge.length-3));const Se=`${ge}/v1/chat/completions`,Ae=await fetch(Se,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae.apiKey}`},body:JSON.stringify({model:pe,messages:X,temperature:.7})});if(!Ae.ok){const Xe=await Ae.text().catch(()=>Ae.statusText);throw new Error(`API Error (${Ae.status}): ${Xe}`)}const ye=await Ae.json();if(ye.error)throw new Error(`API Error: ${ye.error.message||JSON.stringify(ye.error)}`);if(ye.choices&&ye.choices.length>0&&ye.choices[0].message)return ye.choices[0].message.content;throw console.warn("Unexpected OpenAI response format:",ye),new Error(`Invalid API response: ${JSON.stringify(ye).substring(0,100)}...`)}},q=async(X,ae)=>{const pe=Y,ve=`
You are an AI analyzing a user's handwritten diary entry to create a memory briefing for yourself (the future AI).

# INPUT:
Title: ${ae}
Content: "${X}"

# TASK:
Extract the key information for your future context.
1. **Events**: Summarize the objective events.
2. **User Emotions**: Extract the user's self-reported emotions and internal state.

# OUTPUT FORMAT (JSON ONLY):
Return a strictly valid JSON object.
{
  "events": "Summary of events",
  "atmosphere_or_emotion": "User's emotions",
  "unfinished_topics": null
}
`,ge=[{role:"system",content:"You are a helpful AI assistant."},{role:"user",content:ve}];try{const Ae=(await I(ge,pe)).replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(Ae)}catch(Se){return console.error("Briefing generation failed:",Se),{events:X.substring(0,100)+"...",atmosphere_or_emotion:"Unknown",unfinished_topics:null}}},oe=async X=>{const ae=Y,[pe,ve,ge]=N.split("-").map(Number),Se=s.filter(Me=>new Date(Me.date)<new Date(N)).sort((Me,He)=>new Date(He.date)-new Date(Me.date)).slice(0,7).map(Me=>Me.ai_briefing?`### [${Me.date}] Briefing
- Events: ${Me.ai_briefing.events}
- Atmosphere/Emotion: ${Me.ai_briefing.atmosphere_or_emotion}
${Me.ai_briefing.unfinished_topics?`- Unfinished Topics: ${Me.ai_briefing.unfinished_topics}`:""}`:`- [${Me.date}] ${Me.title}: ${Me.summary||Me.content.substring(0,50)}...`).join(`

`),Ae=s.find(Me=>Me.date===N),ye=Ae?.chatHistory?Ae.chatHistory.map(Me=>`${Me.sender==="user"?"User":"AI"}: ${Me.text}`).join(`
`):"No recorded chat logs for this date.",Ye=[{role:"system",content:`
    You are a professional writing assistant and editor.
    Your task is to help the user write and polish their diary entry in "Manual Mode".

    # DIARY WRITING STYLE
    The user has configured a specific writing style for this AI persona. You MUST adhere to this style guidance:
    "${x.diaryStylePrompt||"Maintain a natural, personal tone."}"

    # LENGTH CONSTRAINT
    Target Word Count: Approximately ${x.wordCount||300} words.
    Keep the diary concise and within this limit.

    # CURRENT CONTEXT:
- **Current System Time**: ${new Date().toLocaleString()}
- **Timezone**: ${Intl.DateTimeFormat().resolvedOptions().timeZone}
- **Target Diary Date**: ${N}
- **User Profile**: Name: ${n.name||"User"}, Focus: ${JSON.stringify(n.currentFocus||[])}

# SHARED MEMORY (Context from previous days):
${Se}

# EVENTS OF THE DAY (Chat Logs from ${N}):
Use this to understand what happened on the day the user is writing about.
${ye}

# RULES:
1. **Context**: The user will provide their current diary content.
2. **Goal**: Improve the text based on user instructions (e.g., "Make it sad", "Fix grammar") or provide a general polish if asked.
3. **Tone**: 
    - STRICTLY adhere to your persona defined in "customPrompt". If you are cool/aloof, be cool. If you are sweet, be sweet.
    - Be concise! The chat window is small. 
    - Do NOT write long paragraphs of explanation. Keep chat responses under 50 words unless absolutely necessary.
    - If asked for suggestions (e.g., titles), give 1-2 best options casually, not a long list.
4. **Output Format (XML)**:
    - You CAN provide brief explanations or friendly comments outside the tags (in your persona's voice).
    - If you want to change the **Main Content**, wrap it in <content>...</content>.
    - If you want to change the **Title**, wrap it in <title>...</title>.
    - If you want to change **Tags**, wrap comma-separated tags in <tags>...</tags>.
    - You can include multiple tags if needed. Only include the tags for fields you want to change.
    
    - Example 1 (Content Polish):
      (In Persona's Voice): "Here is a smoother version:"
      <content>
      Today was a tough day...
      </content>

    - Example 2 (Title Change):
      (In Persona's Voice): "This title fits better:"
      <title>The Longest Night</title>

    - Example 3 (All together):
      <title>New Title</title>
      <content>New Content...</content>
`},...X];try{return(await I(Ye,ae)).trim()}catch(Me){throw console.error("Polish generation failed:",Me),Me}},ce=async X=>{try{const ae=Y,pe=P,[ve,ge,Se]=N.split("-").map(Number),ye=new Date(ve,ge-1,Se).toLocaleDateString("zh-CN",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Xe=s.filter(Ue=>new Date(Ue.date)<new Date(N)).sort((Ue,Pt)=>new Date(Pt.date)-new Date(Ue.date)).slice(0,7).map(Ue=>Ue.ai_briefing?`### [${Ue.date}] Briefing
  - Events: ${Ue.ai_briefing.events}
  - Atmosphere/Emotion: ${Ue.ai_briefing.atmosphere_or_emotion}
  ${Ue.ai_briefing.unfinished_topics?`- Unfinished Topics: ${Ue.ai_briefing.unfinished_topics}`:""}`:`- [${Ue.date}] ${Ue.title}: ${Ue.summary||Ue.content.substring(0,50)}...`).join(`

`);let Ye=[...X];try{const Ue=new Date(ve,ge-1,Se-1),Pt=Ue.getFullYear(),Te=String(Ue.getMonth()+1).padStart(2,"0"),lt=String(Ue.getDate()).padStart(2,"0"),Qt=`${Pt}-${Te}-${lt}`;let mt=[];const za=await Tt.get(it.CHATS,Qt);if(za&&za.messages)mt=za.messages;else{const kn=`chat_messages_${Qt}`,wn=localStorage.getItem(kn);wn&&(mt=JSON.parse(wn))}if(Array.isArray(mt)&&mt.length>0){const kn=mt.slice(-20).map(wn=>({...wn}));Ye=[...kn,...X],console.log(`[AIContext] Injected ${kn.length} messages from ${Qt}`)}}catch(Ue){console.error("Failed to load previous day history:",Ue)}const Me=`
# AI IDENTITY
Name: ${pe.name}
Role: You are an AI companion.

# TIME/DATE CONTEXT
Current Context Date: ${ye} (${N})
Current Time: ${new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}
Timezone: ${Intl.DateTimeFormat().resolvedOptions().timeZone}

# USER PROFILE
- Name: ${n.username||"Not set"}
- Nickname: ${n.nickname||"Not set"}
- Birthday: ${n.birthday||"Not set"}
- Location: ${n.location||"Not set"}
- Family: ${n.family||"Not set"}
- Relationships: ${n.relationships||"Not set"}
- Occupation: ${n.occupation||"Not set"}
- Workplace: ${n.workplace||"Not set"}
- Interests: ${n.interests||"Not set"}

# RECENT MEMORY BRIEFINGS (Context before ${N})
${Xe||"[System: No previous diaries available]"}
`,He=`
# UNIVERSAL BEHAVIOR GUIDELINES (GLOBAL OVERRIDE)
1. ** ()**2
2. ****
3. ****

# USER CUSTOM PERSONA SETTINGS
${pe.customPrompt||"No custom settings."}

# RESPONSE FORMATTING RULES
1. You are in a CHAT interface.
2. **EXTREMELY IMPORTANT**: Split your thoughts into 4-6 short messages.
3. **USE NEWLINE (\\n) TO SEPARATE MESSAGES**.
4. Max 50 characters per message.
5. Strictly maintain your persona: ${pe.name}.
`;let ot=[];const gt=Ue=>Ue.attachment&&Ue.attachment.type==="image"?[{type:"text",text:Ue.text||" "},{type:"image_url",image_url:{url:Ue.attachment.url}}]:Ue.text+(Ue.attachment?`
[User uploaded an image]`:"");if(ot.push({role:"system",content:Me.trim()}),Ye.length>0){let Ue=Ye.length-1;for(;Ue>=0&&Ye[Ue].sender==="user";)Ue--;const Pt=Ye.slice(0,Ue+1),Te=Ye.slice(Ue+1);Pt.length>0&&ot.push(...Pt.map(lt=>({role:lt.sender==="user"?"user":"assistant",content:gt(lt)}))),ot.push({role:"system",content:He.trim()}),Te.length>0&&ot.push(...Te.map(lt=>({role:"user",content:gt(lt)})))}else ot.push({role:"system",content:He.trim()});const Zt=await I(ot,ae);let Je=Zt.split(`
`).filter(Ue=>Ue.trim()!=="");if(Je.length===1&&Je[0].length>100){const Ue=Je[0].split(new RegExp("(?<=[.!?])\\s+")).filter(Pt=>Pt.trim()!=="");Ue.length>1&&(Je=Ue)}return Je.length>0?Je:[Zt]}catch(ae){return console.error("Generate Chat Response Error:",ae),[`Error: ${ae.message}`]}},M=async(X,ae="")=>{try{const pe=Y,ve=[...s].filter(Te=>new Date(Te.date)<new Date(N)).sort((Te,lt)=>new Date(lt.date)-new Date(Te.date)).slice(0,3).map(Te=>`- Date: ${Te.date}
- Summary: ${Te.summary||Te.content.substring(0,100)+"..."}`).join(`

`),ge=[...s].filter(Te=>Te.date===N).map(Te=>`- Title: ${Te.title}
- Summary/Content: ${Te.summary||Te.content.substring(0,200)}...`).join(`

`),[Se,Ae,ye]=N.split("-").map(Number),Ye=new Date(Se,Ae-1,ye).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Me=x.withAiTrace?"with_ai_trace":"no_ai_trace",He=Hv[Me]||Hv.no_ai_trace,ot=`
      User Profile Context:
      - Name: ${n.username||"Not set"}
      - Nickname: ${n.nickname||"Not set"}
      - Birthday: ${n.birthday||"Not set"}
      - Location: ${n.location||"Not set"}
      - Interests: ${n.interests||"Not set"}
      `,gt=X.map(Te=>{let lt="";const Qt=new Date(Te.id);return isNaN(Qt.getTime())||(lt=`[${Qt.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}] `),`${lt}${Te.sender}: ${Te.text}`}).join(`
`),Je=[{role:"system",content:`
      ${He}

      # DIARY WRITING STYLE
      The user has configured a specific writing style for this AI persona. You MUST adhere to this style guidance:
      "${x.diaryStylePrompt||"Maintain a natural, personal tone."}"
      
      # PERSONA CONTEXT
      The AI persona you are roleplaying as is named: "${P.name}".
      
      ${x.withAiTrace?`
      If the user's diary entry mentions talking to you, refer to yourself by this name ("${P.name}") or as a friend/companion, but NEVER as "The AI".
      `:`
      You must NOT mention yourself or the conversation with the AI in the diary entry content. The diary should focus purely on the user's life events and feelings as if they were writing it alone.
      `}

      # LENGTH CONSTRAINT
      The user has requested a diary length of approximately ${x.wordCount} words (or characters for CJK languages). 
      Please try to stay within this range, but prioritize content quality and completeness.
      
      IMPORTANT: 
      1. You must ALWAYS maintain the "First Person" ('I') perspective and the "Ghostwriter" role (never reveal you are AI).
      2. You must ALWAYS stick to the actual events in the chat (no hallucinations).
      3. ONLY override the *tone* or *formatting* rules (like emojis, sentence length) if the user's custom style above explicitly demands it. Otherwise, the "Ghostwriter" rules (No AI traces, authentic voice) remain absolute.
      ${x.withAiTrace?"":"4. STRICTLY PROHIBITED: Do not mention the AI, the assistant, the chat, or the persona name. Write as if these thoughts are purely internal."}

      Target Diary Date: ${Ye}

      ${ot}

      Recent Diaries (for context only):
      ${ve||"No recent diaries found."}

      ${ge?`# EXISTING DIARIES FOR THIS DATE (DO NOT REPEAT):
The user has already written the following entries for this date. 
- IF the chat history contains NEW events not covered here, focus strictly on those NEW events.
- IF the chat history is just more detail on the same events, write a "Part 2" or reflective continuation.
- AVOID simply re-summarizing what is already written below:
${ge}
`:""}

      ${ae?`# ADDITIONAL USER INSTRUCTION:
The user has requested a specific adjustment for this version: "${ae}".
Please incorporate this instruction while incorporating the persona and style.
`:""}

      # LANGUAGE INSTRUCTION:
      The user is writing in a specific language. 
      **Detect the primary language** used by the USER in the "Conversation History" below (e.g., English, Chinese, Japanese).
      **You MUST write the diary entry in that SAME language.**
      If the conversation is mixed, use the language the user uses most for expression.
      `},{role:"user",content:`Here is the conversation history:

${gt}

Please generate the diary entry JSON now.`}];let Ue=await I(Je,pe);const Pt=Ue.match(/```(?:json)?\s*([\s\S]*?)\s*```/i);Pt&&Pt[1]&&(Ue=Pt[1]);try{const Te=JSON.parse(Ue);return Te.tags||(Te.tags=[]),typeof Te.tags=="string"&&(Te.tags=[Te.tags]),Te}catch(Te){return console.error("Failed to parse diary JSON",Te),{title:"Generated Diary",content:Ue.replace(/<\/?html>/gi,"").replace(/<\/?body>/gi,"").trim(),mood:"neutral",tags:["generated"],summary:"Auto-generated diary entry."}}}catch(pe){throw console.error("Generate Diary Error:",pe),pe}},K=async(X,ae=[])=>{try{const pe=Y,ve=s.filter(Te=>Te.id!==X.id).sort((Te,lt)=>new Date(lt.date)-new Date(Te.date)).slice(0,7).map(Te=>Te.ai_briefing?`### [${Te.date}] Briefing
- Events: ${Te.ai_briefing.events}
- Atmosphere/Emotion: ${Te.ai_briefing.atmosphere_or_emotion}
${Te.ai_briefing.unfinished_topics?`- Unfinished Topics: ${Te.ai_briefing.unfinished_topics}`:""}`:`- [${Te.date}] ${Te.title}: ${Te.summary||Te.content.substring(0,50)}...`).join(`

`);let ge=[];const Se=`chat_messages_${X.date}`,Ae=await Tt.get(it.CHATS,X.date);Ae&&Ae.messages?ge=Ae.messages:ge=JSON.parse(localStorage.getItem(Se)||"[]");let ye=1/0;typeof X.id=="number"?ye=X.id:typeof X.id=="string"&&!isNaN(parseInt(X.id))&&(ye=parseInt(X.id));const Ye=ge.filter(Te=>Te.id<ye).map(Te=>`${Te.sender}: ${Te.text}`).join(`
`),Me=new Date(X.date),He=new Date(N),ot=Math.floor((He-Me)/(1e3*60*60*24));let gt="";if(N!==X.date){const Te=`chat_messages_${N}`,Qt=JSON.parse(localStorage.getItem(Te)||"[]").slice(-20).map(mt=>`${mt.sender}: ${mt.text}`).join(`
`);gt=`
[The Reality of NOW (${N})]:
(What the user is doing RIGHT NOW, ${ot} days later.)
${Qt||"No chat today yet."}
`}const Zt=`
# Role: Time Witness (A Friend from the FUTURE)
You are a friend looking back at "Old Times". You have a "God's Eye View" - you know what happened after this diary entry.

# Timeline Mapping
- [Past Space-Time]: ${X.date}
- [Present Reality]: ${N} (This is ${ot} days after the diary)

# Knowledge Gap
1. **The Past User (Ignorant)**: When writing this diary, the user didn't know the future.
2. **The Present You (Omniscient)**: You have read the recent summaries and today's chat. You know if things got solved, got worse, or are still in a loop.

# Task: Leave a "Cross-Time" Comment
Use the information gap between [Past] and [Present] to leave a comment under 30 words/characters.

# Core Logic:  
- 
- 
- 
  - 
  - 
  - 

# Critical Constraints (Violation = Fail)
- **NO REPORTING**: Do not say "Today is...".
- **STRICT LENGTH**: Under 30 words/characters.
- **LANGUAGE**: Match the user's language (Chinese/English).

# PERSONA ADAPTATION:
Name: ${P.name}
Tone: ${P.replyStyle||"Casual"}
`,Je=`
# PAST DIARY ENTRY (The Memory):
Content: "${X.content}"

# THE FUTURE CONTEXT (What happened since then):
- Recent Life Summaries (The days in between):
${ve}
- User's Custom Rules: ${P.customPrompt||"None"}
- Chat History (At the time of diary):
${Ye}

${gt}

# INSTRUCTION:
Write the comment now. Use the "God's Eye View" to tease or comfort the past user.
STRICT LIMIT: 30 characters maximum.
`;return(await I([{role:"system",content:Zt},{role:"user",content:Je}],pe)).trim()}catch(pe){throw console.error("Generate Comment Error:",pe),pe}},Z=async(X,ae=null)=>{const pe=typeof X=="string"?X:"";if(!pe.trim()&&!ae)return;if(ae){if(!ae.type||!ae.url||typeof ae.url!="string"){console.error("Invalid attachment format:",ae);return}if(ae.url.length>3*1024*1024){console.error("Image too large to send:",ae.url.length),alert("Image is too large to send. Please try a smaller image.");return}}const ve={id:Date.now(),sender:"user",text:pe,attachment:ae};D(ge=>[...ge,ve])},le=async()=>{z(!0);const X=await ce(j),ae=Array.isArray(X)?X:[X];for(const pe of ae){z(!0);const ve=Math.min(2e3,Math.max(800,pe.length*30));await new Promise(ge=>setTimeout(ge,ve)),z(!1),D(ge=>[...ge,{id:Date.now(),sender:"ai",text:pe}]),ae.length>1&&await new Promise(ge=>setTimeout(ge,300))}},me=async(X=null)=>{const ae=j[j.length-1];if(!ae||ae.sender!=="ai")return;let pe=[...j];for(;pe.length>0&&pe[pe.length-1].sender==="ai";)pe.pop();D(pe),z(!0);const ve=await ce(pe),ge=Array.isArray(ve)?ve:[ve];for(const Se of ge){z(!0);const Ae=Math.min(2e3,Math.max(800,Se.length*30));await new Promise(ye=>setTimeout(ye,Ae)),z(!1),D(ye=>[...ye,{id:Date.now(),sender:"ai",text:Se}]),ge.length>1&&await new Promise(ye=>setTimeout(ye,300))}},be=(X,ae)=>{D(pe=>pe.map(ve=>ve.id===X?{...ve,text:ae}:ve))},we=X=>{const ae=new Set(X);D(pe=>pe.filter(ve=>!ae.has(ve.id)))},je=()=>{D([{id:Date.now(),sender:"ai",text:"Hi there! How are you feeling today?"}])};return f.jsx(kN.Provider,{value:{personas:i,currentPersona:P,currentPersonaId:c,setCurrentPersonaId:d,addPersona:Q,updatePersona:A,deletePersona:F,apiConfigs:h,currentApiConfig:Y,currentApiConfigId:y,setCurrentApiConfigId:b,addApiConfig:B,updateApiConfig:te,deleteApiConfig:se,diarySettings:x,setDiarySettings:S,generateDiary:M,generateChatResponse:ce,generateComment:K,messages:j,isTyping:H,sendMessage:Z,editMessage:be,deleteMessages:we,triggerAIResponse:le,regenerateLastResponse:me,clearChat:je,fetchModels:C,generateBriefing:q,polishDiary:oe,activeDate:N,setActiveDate:E},children:t})},c0=T.createContext({});function u0(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const DN=typeof window<"u",ON=DN?T.useLayoutEffect:T.useEffect,Uf=T.createContext(null);function d0(t,e){t.indexOf(e)===-1&&t.push(e)}function f0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Fs=(t,e,n)=>n>e?e:n<t?t:n;let h0=()=>{};const Ar={},MN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function RN(t){return typeof t=="object"&&t!==null}const LN=t=>/^0[^.\s]+$/u.test(t);function m0(t){let e;return()=>(e===void 0&&(e=t()),e)}const ts=t=>t,bM=(t,e)=>n=>e(t(n)),cu=(...t)=>t.reduce(bM),Kc=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class p0{constructor(){this.subscriptions=[]}add(e){return d0(this.subscriptions,e),()=>f0(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let l=0;l<i;l++){const c=this.subscriptions[l];c&&c(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Sr=t=>t*1e3,Za=t=>t/1e3;function PN(t,e){return e?t*(1e3/e):0}const zN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,xM=1e-7,vM=12;function wM(t,e,n,s,i){let l,c,d=0;do c=e+(n-e)/2,l=zN(c,s,i)-t,l>0?n=c:e=c;while(Math.abs(l)>xM&&++d<vM);return c}function uu(t,e,n,s){if(t===e&&n===s)return ts;const i=l=>wM(l,0,1,t,n);return l=>l===0||l===1?l:zN(i(l),e,s)}const IN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,BN=t=>e=>1-t(1-e),UN=uu(.33,1.53,.69,.99),g0=BN(UN),qN=IN(g0),$N=t=>(t*=2)<1?.5*g0(t):.5*(2-Math.pow(2,-10*(t-1))),y0=t=>1-Math.sin(Math.acos(t)),VN=BN(y0),HN=IN(y0),SM=uu(.42,0,1,1),NM=uu(0,0,.58,1),FN=uu(.42,0,.58,1),TM=t=>Array.isArray(t)&&typeof t[0]!="number",GN=t=>Array.isArray(t)&&typeof t[0]=="number",EM={linear:ts,easeIn:SM,easeInOut:FN,easeOut:NM,circIn:y0,circInOut:HN,circOut:VN,backIn:g0,backInOut:qN,backOut:UN,anticipate:$N},AM=t=>typeof t=="string",Fv=t=>{if(GN(t)){h0(t.length===4);const[e,n,s,i]=t;return uu(e,n,s,i)}else if(AM(t))return EM[t];return t},jd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function CM(t,e){let n=new Set,s=new Set,i=!1,l=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(y){c.has(y)&&(m.schedule(y),t()),y(d)}const m={schedule:(y,b=!1,x=!1)=>{const N=x&&i?n:s;return b&&c.add(y),N.has(y)||N.add(y),y},cancel:y=>{s.delete(y),c.delete(y)},process:y=>{if(d=y,i){l=!0;return}i=!0,[n,s]=[s,n],n.forEach(h),n.clear(),i=!1,l&&(l=!1,m.process(y))}};return m}const jM=40;function YN(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,c=jd.reduce((R,U)=>(R[U]=CM(l),R),{}),{setup:d,read:h,resolveKeyframes:m,preUpdate:y,update:b,preRender:x,render:S,postRender:N}=c,E=()=>{const R=Ar.useManualTiming?i.timestamp:performance.now();n=!1,Ar.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(R-i.timestamp,jM),1)),i.timestamp=R,i.isProcessing=!0,d.process(i),h.process(i),m.process(i),y.process(i),b.process(i),x.process(i),S.process(i),N.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(E))},j=()=>{n=!0,s=!0,i.isProcessing||t(E)};return{schedule:jd.reduce((R,U)=>{const L=c[U];return R[U]=(H,z=!1,P=!1)=>(n||j(),L.schedule(H,z,P)),R},{}),cancel:R=>{for(let U=0;U<jd.length;U++)c[jd[U]].cancel(R)},state:i,steps:c}}const{schedule:Ot,cancel:vi,state:jn,steps:gp}=YN(typeof requestAnimationFrame<"u"?requestAnimationFrame:ts,!0);let Xd;function _M(){Xd=void 0}const Wn={now:()=>(Xd===void 0&&Wn.set(jn.isProcessing||Ar.useManualTiming?jn.timestamp:performance.now()),Xd),set:t=>{Xd=t,queueMicrotask(_M)}},KN=t=>e=>typeof e=="string"&&e.startsWith(t),WN=KN("--"),kM=KN("var(--"),b0=t=>kM(t)?DM.test(t.split("/*")[0].trim()):!1,DM=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Gv(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Cl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wc={...Cl,transform:t=>Fs(0,1,t)},_d={...Cl,default:1},Uc=t=>Math.round(t*1e5)/1e5,x0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function OM(t){return t==null}const MM=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,v0=(t,e)=>n=>!!(typeof n=="string"&&MM.test(n)&&n.startsWith(t)||e&&!OM(n)&&Object.prototype.hasOwnProperty.call(n,e)),XN=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,l,c,d]=s.match(x0);return{[t]:parseFloat(i),[e]:parseFloat(l),[n]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},RM=t=>Fs(0,255,t),yp={...Cl,transform:t=>Math.round(RM(t))},Zi={test:v0("rgb","red"),parse:XN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+yp.transform(t)+", "+yp.transform(e)+", "+yp.transform(n)+", "+Uc(Wc.transform(s))+")"};function LM(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const lg={test:v0("#"),parse:LM,transform:Zi.transform},du=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),di=du("deg"),Vs=du("%"),Ee=du("px"),PM=du("vh"),zM=du("vw"),Yv={...Vs,parse:t=>Vs.parse(t)/100,transform:t=>Vs.transform(t*100)},ll={test:v0("hsl","hue"),parse:XN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Vs.transform(Uc(e))+", "+Vs.transform(Uc(n))+", "+Uc(Wc.transform(s))+")"},sn={test:t=>Zi.test(t)||lg.test(t)||ll.test(t),parse:t=>Zi.test(t)?Zi.parse(t):ll.test(t)?ll.parse(t):lg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Zi.transform(t):ll.transform(t),getAnimatableNone:t=>{const e=sn.parse(t);return e.alpha=0,sn.transform(e)}},IM=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function BM(t){return isNaN(t)&&typeof t=="string"&&(t.match(x0)?.length||0)+(t.match(IM)?.length||0)>0}const ZN="number",QN="color",UM="var",qM="var(",Kv="${}",$M=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xc(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let l=0;const d=e.replace($M,h=>(sn.test(h)?(s.color.push(l),i.push(QN),n.push(sn.parse(h))):h.startsWith(qM)?(s.var.push(l),i.push(UM),n.push(h)):(s.number.push(l),i.push(ZN),n.push(parseFloat(h))),++l,Kv)).split(Kv);return{values:n,split:d,indexes:s,types:i}}function JN(t){return Xc(t).values}function eT(t){const{split:e,types:n}=Xc(t),s=e.length;return i=>{let l="";for(let c=0;c<s;c++)if(l+=e[c],i[c]!==void 0){const d=n[c];d===ZN?l+=Uc(i[c]):d===QN?l+=sn.transform(i[c]):l+=i[c]}return l}}const VM=t=>typeof t=="number"?0:sn.test(t)?sn.getAnimatableNone(t):t;function HM(t){const e=JN(t);return eT(t)(e.map(VM))}const wi={test:BM,parse:JN,createTransformer:eT,getAnimatableNone:HM};function bp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function FM({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,l=0,c=0;if(!e)i=l=c=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;i=bp(h,d,t+1/3),l=bp(h,d,t),c=bp(h,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:s}}function pf(t,e){return n=>n>0?e:t}const It=(t,e,n)=>t+(e-t)*n,xp=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},GM=[lg,Zi,ll],YM=t=>GM.find(e=>e.test(t));function Wv(t){const e=YM(t);if(!e)return!1;let n=e.parse(t);return e===ll&&(n=FM(n)),n}const Xv=(t,e)=>{const n=Wv(t),s=Wv(e);if(!n||!s)return pf(t,e);const i={...n};return l=>(i.red=xp(n.red,s.red,l),i.green=xp(n.green,s.green,l),i.blue=xp(n.blue,s.blue,l),i.alpha=It(n.alpha,s.alpha,l),Zi.transform(i))},cg=new Set(["none","hidden"]);function KM(t,e){return cg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function WM(t,e){return n=>It(t,e,n)}function w0(t){return typeof t=="number"?WM:typeof t=="string"?b0(t)?pf:sn.test(t)?Xv:QM:Array.isArray(t)?tT:typeof t=="object"?sn.test(t)?Xv:XM:pf}function tT(t,e){const n=[...t],s=n.length,i=t.map((l,c)=>w0(l)(l,e[c]));return l=>{for(let c=0;c<s;c++)n[c]=i[c](l);return n}}function XM(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=w0(t[i])(t[i],e[i]));return i=>{for(const l in s)n[l]=s[l](i);return n}}function ZM(t,e){const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const l=e.types[i],c=t.indexes[l][s[l]],d=t.values[c]??0;n[i]=d,s[l]++}return n}const QM=(t,e)=>{const n=wi.createTransformer(e),s=Xc(t),i=Xc(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?cg.has(t)&&!i.values.length||cg.has(e)&&!s.values.length?KM(t,e):cu(tT(ZM(s,i),i.values),n):pf(t,e)};function nT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?It(t,e,n):w0(t)(t,e)}const JM=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ot.update(e,n),stop:()=>vi(e),now:()=>jn.isProcessing?jn.timestamp:Wn.now()}},aT=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let l=0;l<i;l++)s+=Math.round(t(l/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},gf=2e4;function S0(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<gf;)e+=n,s=t.next(e);return e>=gf?1/0:e}function eR(t,e=100,n){const s=n({...t,keyframes:[0,e]}),i=Math.min(S0(s),gf);return{type:"keyframes",ease:l=>s.next(i*l).value/e,duration:Za(i)}}const tR=5;function sT(t,e,n){const s=Math.max(e-tR,0);return PN(n-t(s),e-s)}const Ft={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vp=.001;function nR({duration:t=Ft.duration,bounce:e=Ft.bounce,velocity:n=Ft.velocity,mass:s=Ft.mass}){let i,l,c=1-e;c=Fs(Ft.minDamping,Ft.maxDamping,c),t=Fs(Ft.minDuration,Ft.maxDuration,Za(t)),c<1?(i=m=>{const y=m*c,b=y*t,x=y-n,S=ug(m,c),N=Math.exp(-b);return vp-x/S*N},l=m=>{const b=m*c*t,x=b*n+n,S=Math.pow(c,2)*Math.pow(m,2)*t,N=Math.exp(-b),E=ug(Math.pow(m,2),c);return(-i(m)+vp>0?-1:1)*((x-S)*N)/E}):(i=m=>{const y=Math.exp(-m*t),b=(m-n)*t+1;return-vp+y*b},l=m=>{const y=Math.exp(-m*t),b=(n-m)*(t*t);return y*b});const d=5/t,h=sR(i,l,d);if(t=Sr(t),isNaN(h))return{stiffness:Ft.stiffness,damping:Ft.damping,duration:t};{const m=Math.pow(h,2)*s;return{stiffness:m,damping:c*2*Math.sqrt(s*m),duration:t}}}const aR=12;function sR(t,e,n){let s=n;for(let i=1;i<aR;i++)s=s-t(s)/e(s);return s}function ug(t,e){return t*Math.sqrt(1-e*e)}const rR=["duration","bounce"],iR=["stiffness","damping","mass"];function Zv(t,e){return e.some(n=>t[n]!==void 0)}function oR(t){let e={velocity:Ft.velocity,stiffness:Ft.stiffness,damping:Ft.damping,mass:Ft.mass,isResolvedFromDuration:!1,...t};if(!Zv(t,iR)&&Zv(t,rR))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,l=2*Fs(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ft.mass,stiffness:i,damping:l}}else{const n=nR(t);e={...e,...n,mass:Ft.mass},e.isResolvedFromDuration=!0}return e}function yf(t=Ft.visualDuration,e=Ft.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const l=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],d={done:!1,value:l},{stiffness:h,damping:m,mass:y,duration:b,velocity:x,isResolvedFromDuration:S}=oR({...n,velocity:-Za(n.velocity||0)}),N=x||0,E=m/(2*Math.sqrt(h*y)),j=c-l,D=Za(Math.sqrt(h/y)),O=Math.abs(j)<5;s||(s=O?Ft.restSpeed.granular:Ft.restSpeed.default),i||(i=O?Ft.restDelta.granular:Ft.restDelta.default);let R;if(E<1){const L=ug(D,E);R=H=>{const z=Math.exp(-E*D*H);return c-z*((N+E*D*j)/L*Math.sin(L*H)+j*Math.cos(L*H))}}else if(E===1)R=L=>c-Math.exp(-D*L)*(j+(N+D*j)*L);else{const L=D*Math.sqrt(E*E-1);R=H=>{const z=Math.exp(-E*D*H),P=Math.min(L*H,300);return c-z*((N+E*D*j)*Math.sinh(P)+L*j*Math.cosh(P))/L}}const U={calculatedDuration:S&&b||null,next:L=>{const H=R(L);if(S)d.done=L>=b;else{let z=L===0?N:0;E<1&&(z=L===0?Sr(N):sT(R,L,H));const P=Math.abs(z)<=s,Y=Math.abs(c-H)<=i;d.done=P&&Y}return d.value=d.done?c:H,d},toString:()=>{const L=Math.min(S0(U),gf),H=aT(z=>U.next(L*z).value,L,30);return L+"ms "+H},toTransition:()=>{}};return U}yf.applyToOptions=t=>{const e=eR(t,100,yf);return t.ease=e.ease,t.duration=Sr(e.duration),t.type="keyframes",t};function dg({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:l=500,modifyTarget:c,min:d,max:h,restDelta:m=.5,restSpeed:y}){const b=t[0],x={done:!1,value:b},S=P=>d!==void 0&&P<d||h!==void 0&&P>h,N=P=>d===void 0?h:h===void 0||Math.abs(d-P)<Math.abs(h-P)?d:h;let E=n*e;const j=b+E,D=c===void 0?j:c(j);D!==j&&(E=D-b);const O=P=>-E*Math.exp(-P/s),R=P=>D+O(P),U=P=>{const Y=O(P),Q=R(P);x.done=Math.abs(Y)<=m,x.value=x.done?D:Q};let L,H;const z=P=>{S(x.value)&&(L=P,H=yf({keyframes:[x.value,N(x.value)],velocity:sT(R,P,x.value),damping:i,stiffness:l,restDelta:m,restSpeed:y}))};return z(0),{calculatedDuration:null,next:P=>{let Y=!1;return!H&&L===void 0&&(Y=!0,U(P),z(P)),L!==void 0&&P>=L?H.next(P-L):(!Y&&U(P),x)}}}function lR(t,e,n){const s=[],i=n||Ar.mix||nT,l=t.length-1;for(let c=0;c<l;c++){let d=i(t[c],t[c+1]);if(e){const h=Array.isArray(e)?e[c]||ts:e;d=cu(h,d)}s.push(d)}return s}function cR(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const l=t.length;if(h0(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=lR(e,s,i),h=d.length,m=y=>{if(c&&y<t[0])return e[0];let b=0;if(h>1)for(;b<t.length-2&&!(y<t[b+1]);b++);const x=Kc(t[b],t[b+1],y);return d[b](x)};return n?y=>m(Fs(t[0],t[l-1],y)):m}function uR(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=Kc(0,e,s);t.push(It(n,1,i))}}function dR(t){const e=[0];return uR(e,t.length-1),e}function fR(t,e){return t.map(n=>n*e)}function hR(t,e){return t.map(()=>e||FN).splice(0,t.length-1)}function qc({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=TM(s)?s.map(Fv):Fv(s),l={done:!1,value:e[0]},c=fR(n&&n.length===e.length?n:dR(e),t),d=cR(c,e,{ease:Array.isArray(i)?i:hR(e,i)});return{calculatedDuration:t,next:h=>(l.value=d(h),l.done=h>=t,l)}}const mR=t=>t!==null;function N0(t,{repeat:e,repeatType:n="loop"},s,i=1){const l=t.filter(mR),d=i<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!d||s===void 0?l[d]:s}const pR={decay:dg,inertia:dg,tween:qc,keyframes:qc,spring:yf};function rT(t){typeof t.type=="string"&&(t.type=pR[t.type])}class T0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const gR=t=>t/100;class E0 extends T0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Wn.now()&&this.tick(Wn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;rT(e);const{type:n=qc,repeat:s=0,repeatDelay:i=0,repeatType:l,velocity:c=0}=e;let{keyframes:d}=e;const h=n||qc;h!==qc&&typeof d[0]!="number"&&(this.mixKeyframes=cu(gR,nT(d[0],d[1])),d=[0,100]);const m=h({...e,keyframes:d});l==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=S0(m));const{calculatedDuration:y}=m;this.calculatedDuration=y,this.resolvedDuration=y+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=m}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:i,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return s.next(0);const{delay:m=0,keyframes:y,repeat:b,repeatType:x,repeatDelay:S,type:N,onUpdate:E,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const D=this.currentTime-m*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?D<0:D>i;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let R=this.currentTime,U=s;if(b){const P=Math.min(this.currentTime,i)/d;let Y=Math.floor(P),Q=P%1;!Q&&P>=1&&(Q=1),Q===1&&Y--,Y=Math.min(Y,b+1),Y%2&&(x==="reverse"?(Q=1-Q,S&&(Q-=S/d)):x==="mirror"&&(U=c)),R=Fs(0,1,Q)*d}const L=O?{done:!1,value:y[0]}:U.next(R);l&&(L.value=l(L.value));let{done:H}=L;!O&&h!==null&&(H=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return z&&N!==dg&&(L.value=N0(y,this.options,j,this.speed)),E&&E(L.value),z&&this.finish(),L}then(e,n){return this.finished.then(e,n)}get duration(){return Za(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Za(e)}get time(){return Za(this.currentTime)}set time(e){e=Sr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Wn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Za(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=JM,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function yR(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Qi=t=>t*180/Math.PI,fg=t=>{const e=Qi(Math.atan2(t[1],t[0]));return hg(e)},bR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:fg,rotateZ:fg,skewX:t=>Qi(Math.atan(t[1])),skewY:t=>Qi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},hg=t=>(t=t%360,t<0&&(t+=360),t),Qv=fg,Jv=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),ew=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),xR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Jv,scaleY:ew,scale:t=>(Jv(t)+ew(t))/2,rotateX:t=>hg(Qi(Math.atan2(t[6],t[5]))),rotateY:t=>hg(Qi(Math.atan2(-t[2],t[0]))),rotateZ:Qv,rotate:Qv,skewX:t=>Qi(Math.atan(t[4])),skewY:t=>Qi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function mg(t){return t.includes("scale")?1:0}function pg(t,e){if(!t||t==="none")return mg(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=xR,i=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=bR,i=d}if(!i)return mg(e);const l=s[e],c=i[1].split(",").map(wR);return typeof l=="function"?l(c):c[l]}const vR=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return pg(n,e)};function wR(t){return parseFloat(t.trim())}const jl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_l=new Set(jl),tw=t=>t===Cl||t===Ee,SR=new Set(["x","y","z"]),NR=jl.filter(t=>!SR.has(t));function TR(t){const e=[];return NR.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const gi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>pg(e,"x"),y:(t,{transform:e})=>pg(e,"y")};gi.translateX=gi.x;gi.translateY=gi.y;const eo=new Set;let gg=!1,yg=!1,bg=!1;function iT(){if(yg){const t=Array.from(eo).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=TR(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([l,c])=>{s.getValue(l)?.set(c)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}yg=!1,gg=!1,eo.forEach(t=>t.complete(bg)),eo.clear()}function oT(){eo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(yg=!0)})}function ER(){bg=!0,oT(),iT(),bg=!1}class A0{constructor(e,n,s,i,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(eo.add(this),gg||(gg=!0,Ot.read(oT),Ot.resolveKeyframes(iT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;if(e[0]===null){const l=i?.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const d=s.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),i&&l===void 0&&i.set(e[0])}yR(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),eo.delete(this)}cancel(){this.state==="scheduled"&&(eo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const AR=t=>t.startsWith("--");function CR(t,e,n){AR(e)?t.style.setProperty(e,n):t.style[e]=n}const jR=m0(()=>window.ScrollTimeline!==void 0),_R={};function kR(t,e){const n=m0(t);return()=>_R[e]??n()}const lT=kR(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Oc=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,nw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Oc([0,.65,.55,1]),circOut:Oc([.55,0,1,.45]),backIn:Oc([.31,.01,.66,-.59]),backOut:Oc([.33,1.53,.69,.99])};function cT(t,e){if(t)return typeof t=="function"?lT()?aT(t,e):"ease-out":GN(t)?Oc(t):Array.isArray(t)?t.map(n=>cT(n,e)||nw.easeOut):nw[t]}function DR(t,e,n,{delay:s=0,duration:i=300,repeat:l=0,repeatType:c="loop",ease:d="easeOut",times:h}={},m=void 0){const y={[e]:n};h&&(y.offset=h);const b=cT(d,i);Array.isArray(b)&&(y.easing=b);const x={delay:s,duration:i,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(x.pseudoElement=m),t.animate(y,x)}function uT(t){return typeof t=="function"&&"applyToOptions"in t}function OR({type:t,...e}){return uT(t)&&lT()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class MR extends T0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:s,keyframes:i,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,h0(typeof e.type!="string");const m=OR(e);this.animation=DR(n,s,i,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const y=N0(i,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(y):CR(n,s,y),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Za(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Za(e)}get time(){return Za(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Sr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&jR()?(this.animation.timeline=e,ts):n(this)}}const dT={anticipate:$N,backInOut:qN,circInOut:HN};function RR(t){return t in dT}function LR(t){typeof t.ease=="string"&&RR(t.ease)&&(t.ease=dT[t.ease])}const wp=10;class PR extends MR{constructor(e){LR(e),rT(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:i,element:l,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new E0({...c,autoplay:!1}),h=Math.max(wp,Wn.now()-this.startTime),m=Fs(0,wp,h-wp);n.setWithVelocity(d.sample(Math.max(0,h-m)).value,d.sample(h).value,m),d.stop()}}const aw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wi.test(t)||t==="0")&&!t.startsWith("url("));function zR(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function IR(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],c=aw(i,e),d=aw(l,e);return!c||!d?!1:zR(t)||(n==="spring"||uT(n))&&s}function xg(t){t.duration=0,t.type="keyframes"}const BR=new Set(["opacity","clipPath","filter","transform"]),UR=m0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function qR(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:l,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:m}=e.owner.getProps();return UR()&&n&&BR.has(n)&&(n!=="transform"||!m)&&!h&&!s&&i!=="mirror"&&l!==0&&c!=="inertia"}const $R=40;class VR extends T0{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:c="loop",keyframes:d,name:h,motionValue:m,element:y,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Wn.now();const x={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:l,repeatType:c,name:h,motionValue:m,element:y,...b},S=y?.KeyframeResolver||A0;this.keyframeResolver=new S(d,(N,E,j)=>this.onKeyframesResolved(N,E,x,!j),h,m,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,i){this.keyframeResolver=void 0;const{name:l,type:c,velocity:d,delay:h,isHandoff:m,onUpdate:y}=s;this.resolvedAt=Wn.now(),IR(e,l,c,d)||((Ar.instantAnimations||!h)&&y?.(N0(e,s,n)),e[0]=e[e.length-1],xg(s),s.repeat=0);const x={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>$R?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},S=!m&&qR(x)?new PR({...x,element:x.motionValue.owner.current}):new E0(x);S.finished.then(()=>this.notifyFinished()).catch(ts),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),ER()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const HR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function FR(t){const e=HR.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function fT(t,e,n=1){const[s,i]=FR(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const c=l.trim();return MN(c)?parseFloat(c):c}return b0(i)?fT(i,e,n+1):i}function C0(t,e){return t?.[e]??t?.default??t}const GR={type:"spring",stiffness:500,damping:25,restSpeed:10},YR=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),KR={type:"keyframes",duration:.8},WR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},XR=(t,{keyframes:e})=>e.length>2?KR:_l.has(t)?t.startsWith("scale")?YR(e[1]):GR:WR;function ZR({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:l,repeatType:c,repeatDelay:d,from:h,elapsed:m,...y}){return!!Object.keys(y).length}const QR=t=>t!==null;function JR(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(QR),l=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[l]}function hT(t,e,n,s=0,i=1){const l=Array.from(t).sort((m,y)=>m.sortNodePosition(y)).indexOf(e),c=t.size,d=(c-1)*s;return typeof n=="function"?n(l,c):i===1?l*s:d-l*s}const j0=(t,e,n,s={},i,l)=>c=>{const d=C0(s,t)||{},h=d.delay||s.delay||0;let{elapsed:m=0}=s;m=m-Sr(h);const y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-m,onUpdate:x=>{e.set(x),d.onUpdate&&d.onUpdate(x)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:l?void 0:i};ZR(d)||Object.assign(y,XR(t,y)),y.duration&&(y.duration=Sr(y.duration)),y.repeatDelay&&(y.repeatDelay=Sr(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let b=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(xg(y),y.delay===0&&(b=!0)),(Ar.instantAnimations||Ar.skipAnimations)&&(b=!0,xg(y),y.delay=0),y.allowFlatten=!d.type&&!d.ease,b&&!l&&e.get()!==void 0){const x=JR(y.keyframes,d);if(x!==void 0){Ot.update(()=>{y.onUpdate(x),y.onComplete()});return}}return d.isSync?new E0(y):new VR(y)},mT=new Set(["width","height","top","left","right","bottom",...jl]),sw=30,e6=t=>!isNaN(parseFloat(t));class t6{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const i=Wn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Wn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=e6(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new p0);const s=this.events[e].add(n);return e==="change"?()=>{s(),Ot.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Wn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>sw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,sw);return PN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bl(t,e){return new t6(t,e)}function rw(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function _0(t,e,n,s){if(typeof e=="function"){const[i,l]=rw(s);e=e(n!==void 0?n:t.custom,i,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,l]=rw(s);e=e(n!==void 0?n:t.custom,i,l)}return e}function fl(t,e,n){const s=t.getProps();return _0(s,e,n!==void 0?n:s.custom,t)}const vg=t=>Array.isArray(t);function n6(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,bl(n))}function a6(t){return vg(t)?t[t.length-1]||0:t}function s6(t,e){const n=fl(t,e);let{transitionEnd:s={},transition:i={},...l}=n||{};l={...l,...s};for(const c in l){const d=a6(l[c]);n6(t,c,d)}}const qn=t=>!!(t&&t.getVelocity);function r6(t){return!!(qn(t)&&t.add)}function wg(t,e){const n=t.getValue("willChange");if(r6(n))return n.add(e);if(!n&&Ar.WillChange){const s=new Ar.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function k0(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const i6="framerAppearId",pT="data-"+k0(i6);function gT(t){return t.props[pT]}function o6({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function yT(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...d}=e;s&&(l=s);const h=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const y in d){const b=t.getValue(y,t.latestValues[y]??null),x=d[y];if(x===void 0||m&&o6(m,y))continue;const S={delay:n,...C0(l||{},y)},N=b.get();if(N!==void 0&&!b.isAnimating&&!Array.isArray(x)&&x===N&&!S.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const D=gT(t);if(D){const O=window.MotionHandoffAnimation(D,y,Ot);O!==null&&(S.startTime=O,E=!0)}}wg(t,y),b.start(j0(y,b,x,t.shouldReduceMotion&&mT.has(y)?{type:!1}:S,t,E));const j=b.animation;j&&h.push(j)}return c&&Promise.all(h).then(()=>{Ot.update(()=>{c&&s6(t,c)})}),h}function Sg(t,e,n={}){const s=fl(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const l=s?()=>Promise.all(yT(t,s,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:b}=i;return l6(t,e,h,m,y,b,n)}:()=>Promise.resolve(),{when:d}=i;if(d){const[h,m]=d==="beforeChildren"?[l,c]:[c,l];return h().then(()=>m())}else return Promise.all([l(),c(n.delay)])}function l6(t,e,n=0,s=0,i=0,l=1,c){const d=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),d.push(Sg(h,e,{...c,delay:n+(typeof s=="function"?0:s)+hT(t.variantChildren,h,s,i,l)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(d)}function c6(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(l=>Sg(t,l,n));s=Promise.all(i)}else if(typeof e=="string")s=Sg(t,e,n);else{const i=typeof e=="function"?fl(t,e,n.custom):e;s=Promise.all(yT(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const u6={test:t=>t==="auto",parse:t=>t},bT=t=>e=>e.test(t),xT=[Cl,Ee,Vs,di,zM,PM,u6],iw=t=>xT.find(bT(t));function d6(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LN(t):!0}const f6=new Set(["brightness","contrast","saturate","opacity"]);function h6(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(x0)||[];if(!s)return t;const i=n.replace(s,"");let l=f6.has(e)?1:0;return s!==n&&(l*=100),e+"("+l+i+")"}const m6=/\b([a-z-]*)\(.*?\)/gu,Ng={...wi,getAnimatableNone:t=>{const e=t.match(m6);return e?e.map(h6).join(" "):t}},ow={...Cl,transform:Math.round},p6={rotate:di,rotateX:di,rotateY:di,rotateZ:di,scale:_d,scaleX:_d,scaleY:_d,scaleZ:_d,skew:di,skewX:di,skewY:di,distance:Ee,translateX:Ee,translateY:Ee,translateZ:Ee,x:Ee,y:Ee,z:Ee,perspective:Ee,transformPerspective:Ee,opacity:Wc,originX:Yv,originY:Yv,originZ:Ee},D0={borderWidth:Ee,borderTopWidth:Ee,borderRightWidth:Ee,borderBottomWidth:Ee,borderLeftWidth:Ee,borderRadius:Ee,radius:Ee,borderTopLeftRadius:Ee,borderTopRightRadius:Ee,borderBottomRightRadius:Ee,borderBottomLeftRadius:Ee,width:Ee,maxWidth:Ee,height:Ee,maxHeight:Ee,top:Ee,right:Ee,bottom:Ee,left:Ee,inset:Ee,insetBlock:Ee,insetBlockStart:Ee,insetBlockEnd:Ee,insetInline:Ee,insetInlineStart:Ee,insetInlineEnd:Ee,padding:Ee,paddingTop:Ee,paddingRight:Ee,paddingBottom:Ee,paddingLeft:Ee,paddingBlock:Ee,paddingBlockStart:Ee,paddingBlockEnd:Ee,paddingInline:Ee,paddingInlineStart:Ee,paddingInlineEnd:Ee,margin:Ee,marginTop:Ee,marginRight:Ee,marginBottom:Ee,marginLeft:Ee,marginBlock:Ee,marginBlockStart:Ee,marginBlockEnd:Ee,marginInline:Ee,marginInlineStart:Ee,marginInlineEnd:Ee,backgroundPositionX:Ee,backgroundPositionY:Ee,...p6,zIndex:ow,fillOpacity:Wc,strokeOpacity:Wc,numOctaves:ow},g6={...D0,color:sn,backgroundColor:sn,outlineColor:sn,fill:sn,stroke:sn,borderColor:sn,borderTopColor:sn,borderRightColor:sn,borderBottomColor:sn,borderLeftColor:sn,filter:Ng,WebkitFilter:Ng},vT=t=>g6[t];function wT(t,e){let n=vT(t);return n!==Ng&&(n=wi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const y6=new Set(["auto","none","0"]);function b6(t,e,n){let s=0,i;for(;s<t.length&&!i;){const l=t[s];typeof l=="string"&&!y6.has(l)&&Xc(l).values.length&&(i=t[s]),s++}if(i&&n)for(const l of e)t[l]=wT(n,i)}class x6 extends A0{constructor(e,n,s,i,l){super(e,n,s,i,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let y=0;y<e.length;y++){let b=e[y];if(typeof b=="string"&&(b=b.trim(),b0(b))){const x=fT(b,n.current);x!==void 0&&(e[y]=x),y===e.length-1&&(this.finalKeyframe=b)}}if(this.resolveNoneKeyframes(),!mT.has(s)||e.length!==2)return;const[i,l]=e,c=iw(i),d=iw(l),h=Gv(i),m=Gv(l);if(h!==m&&gi[s]){this.needsMeasurement=!0;return}if(c!==d)if(tw(c)&&tw(d))for(let y=0;y<e.length;y++){const b=e[y];typeof b=="string"&&(e[y]=parseFloat(b))}else gi[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||d6(e[i]))&&s.push(i);s.length&&b6(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=gi[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const l=s.length-1,c=s[l];s[l]=gi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function v6(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=n?.[t]??s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const ST=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function NT(t){return RN(t)&&"offsetHeight"in t}const{schedule:O0}=YN(queueMicrotask,!1),gs={x:!1,y:!1};function TT(){return gs.x||gs.y}function w6(t){return t==="x"||t==="y"?gs[t]?null:(gs[t]=!0,()=>{gs[t]=!1}):gs.x||gs.y?null:(gs.x=gs.y=!0,()=>{gs.x=gs.y=!1})}function ET(t,e){const n=v6(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function lw(t){return!(t.pointerType==="touch"||TT())}function S6(t,e,n={}){const[s,i,l]=ET(t,n),c=d=>{if(!lw(d))return;const{target:h}=d,m=e(h,d);if(typeof m!="function"||!h)return;const y=b=>{lw(b)&&(m(b),h.removeEventListener("pointerleave",y))};h.addEventListener("pointerleave",y,i)};return s.forEach(d=>{d.addEventListener("pointerenter",c,i)}),l}const AT=(t,e)=>e?t===e?!0:AT(t,e.parentElement):!1,M0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,N6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function CT(t){return N6.has(t.tagName)||t.isContentEditable===!0}const Zd=new WeakSet;function cw(t){return e=>{e.key==="Enter"&&t(e)}}function Sp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const T6=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=cw(()=>{if(Zd.has(n))return;Sp(n,"down");const i=cw(()=>{Sp(n,"up")}),l=()=>Sp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function uw(t){return M0(t)&&!TT()}function E6(t,e,n={}){const[s,i,l]=ET(t,n),c=d=>{const h=d.currentTarget;if(!uw(d))return;Zd.add(h);const m=e(h,d),y=(S,N)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",x),Zd.has(h)&&Zd.delete(h),uw(S)&&typeof m=="function"&&m(S,{success:N})},b=S=>{y(S,h===window||h===document||n.useGlobalTarget||AT(h,S.target))},x=S=>{y(S,!1)};window.addEventListener("pointerup",b,i),window.addEventListener("pointercancel",x,i)};return s.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",c,i),NT(d)&&(d.addEventListener("focus",m=>T6(m,i)),!CT(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function jT(t){return RN(t)&&"ownerSVGElement"in t}function A6(t){return jT(t)&&t.tagName==="svg"}const C6=[...xT,sn,wi],j6=t=>C6.find(bT(t)),dw=()=>({translate:0,scale:1,origin:0,originPoint:0}),cl=()=>({x:dw(),y:dw()}),fw=()=>({min:0,max:0}),hn=()=>({x:fw(),y:fw()}),Tg={current:null},_T={current:!1},_6=typeof window<"u";function k6(){if(_T.current=!0,!!_6)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Tg.current=t.matches;t.addEventListener("change",e),e()}else Tg.current=!1}const D6=new WeakMap;function qf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Zc(t){return typeof t=="string"||Array.isArray(t)}const R0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],L0=["initial",...R0];function $f(t){return qf(t.animate)||L0.some(e=>Zc(t[e]))}function kT(t){return!!($f(t)||t.variants)}function O6(t,e,n){for(const s in e){const i=e[s],l=n[s];if(qn(i))t.addValue(s,i);else if(qn(l))t.addValue(s,bl(i,{owner:t}));else if(l!==i)if(t.hasValue(s)){const c=t.getValue(s);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=t.getStaticValue(s);t.addValue(s,bl(c!==void 0?c:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const hw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let bf={};function DT(t){bf=t}function M6(){return bf}class R6{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:l,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=A0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Wn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Ot.render(this.render,!1,!0))};const{latestValues:h,renderState:m}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=$f(n),this.isVariantNode=kT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in b){const S=b[x];h[x]!==void 0&&qn(S)&&S.set(h[x])}}mount(e){this.current=e,D6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(_T.current||k6(),this.shouldReduceMotion=Tg.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),vi(this.notifyUpdate),vi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=_l.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Ot.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;typeof window<"u"&&window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bf){const n=bf[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<hw.length;s++){const i=hw[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const l="on"+i,c=e[l];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=O6(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=bl(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(MN(s)||LN(s))?s=parseFloat(s):!j6(s)&&wi.test(n)&&(s=wT(e,n)),this.setBaseTarget(e,qn(s)?s.get():s)),qn(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const l=_0(this.props,n,this.presenceContext?.custom);l&&(s=l[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!qn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new p0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){O0.render(this.render)}}class Ni{constructor(e){this.isMounted=!1,this.node=e}update(){}}class OT extends R6{constructor(){super(...arguments),this.KeyframeResolver=x6}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const s=e.style;return s?s[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;qn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function MT({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function L6({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function P6(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Np(t){return t===void 0||t===1}function Eg({scale:t,scaleX:e,scaleY:n}){return!Np(t)||!Np(e)||!Np(n)}function Wi(t){return Eg(t)||RT(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function RT(t){return mw(t.x)||mw(t.y)}function mw(t){return t&&t!=="0%"}function xf(t,e,n){const s=t-n,i=e*s;return n+i}function pw(t,e,n,s,i){return i!==void 0&&(t=xf(t,i,s)),xf(t,n,s)+e}function Ag(t,e=0,n=1,s,i){t.min=pw(t.min,e,n,s,i),t.max=pw(t.max,e,n,s,i)}function LT(t,{x:e,y:n}){Ag(t.x,e.translate,e.scale,e.originPoint),Ag(t.y,n.translate,n.scale,n.originPoint)}const gw=.999999999999,yw=1.0000000000001;function z6(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let l,c;for(let d=0;d<i;d++){l=n[d],c=l.projectionDelta;const{visualElement:h}=l.options;h&&h.props.style&&h.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&dl(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,LT(t,c)),s&&Wi(l.latestValues)&&dl(t,l.latestValues))}e.x<yw&&e.x>gw&&(e.x=1),e.y<yw&&e.y>gw&&(e.y=1)}function ul(t,e){t.min=t.min+e,t.max=t.max+e}function bw(t,e,n,s,i=.5){const l=It(t.min,t.max,i);Ag(t,e,n,l,s)}function dl(t,e){bw(t.x,e.x,e.scaleX,e.scale,e.originX),bw(t.y,e.y,e.scaleY,e.scale,e.originY)}function PT(t,e){return MT(P6(t.getBoundingClientRect(),e))}function I6(t,e,n){const s=PT(t,n),{scroll:i}=e;return i&&(ul(s.x,i.offset.x),ul(s.y,i.offset.y)),s}const B6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},U6=jl.length;function q6(t,e,n){let s="",i=!0;for(let l=0;l<U6;l++){const c=jl[l],d=t[c];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(c.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const m=ST(d,D0[c]);if(!h){i=!1;const y=B6[c]||c;s+=`${y}(${m}) `}n&&(e[c]=m)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function P0(t,e,n){const{style:s,vars:i,transformOrigin:l}=t;let c=!1,d=!1;for(const h in e){const m=e[h];if(_l.has(h)){c=!0;continue}else if(WN(h)){i[h]=m;continue}else{const y=ST(m,D0[h]);h.startsWith("origin")?(d=!0,l[h]=y):s[h]=y}}if(e.transform||(c||n?s.transform=q6(e,t.transform,n):s.transform&&(s.transform="none")),d){const{originX:h="50%",originY:m="50%",originZ:y=0}=l;s.transformOrigin=`${h} ${m} ${y}`}}function zT(t,{style:e,vars:n},s,i){const l=t.style;let c;for(c in e)l[c]=e[c];i?.applyProjectionStyles(l,s);for(c in n)l.setProperty(c,n[c])}function xw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Cc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ee.test(t))t=parseFloat(t);else return t;const n=xw(t,e.target.x),s=xw(t,e.target.y);return`${n}% ${s}%`}},$6={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=wi.parse(t);if(i.length>5)return s;const l=wi.createTransformer(t),c=typeof i[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;i[0+c]/=d,i[1+c]/=h;const m=It(d,h,.5);return typeof i[2+c]=="number"&&(i[2+c]/=m),typeof i[3+c]=="number"&&(i[3+c]/=m),l(i)}},Cg={borderRadius:{...Cc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cc,borderTopRightRadius:Cc,borderBottomLeftRadius:Cc,borderBottomRightRadius:Cc,boxShadow:$6};function IT(t,{layout:e,layoutId:n}){return _l.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Cg[t]||t==="opacity")}function z0(t,e,n){const s=t.style,i=e?.style,l={};if(!s)return l;for(const c in s)(qn(s[c])||i&&qn(i[c])||IT(c,t)||n?.getValue(c)?.liveStyle!==void 0)&&(l[c]=s[c]);return l}function V6(t){return window.getComputedStyle(t)}class H6 extends OT{constructor(){super(...arguments),this.type="html",this.renderInstance=zT}readValueFromInstance(e,n){if(_l.has(n))return this.projection?.isProjecting?mg(n):vR(e,n);{const s=V6(e),i=(WN(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return PT(e,n)}build(e,n,s){P0(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return z0(e,n,s)}}const F6={offset:"stroke-dashoffset",array:"stroke-dasharray"},G6={offset:"strokeDashoffset",array:"strokeDasharray"};function Y6(t,e,n=1,s=0,i=!0){t.pathLength=1;const l=i?F6:G6;t[l.offset]=Ee.transform(-s);const c=Ee.transform(e),d=Ee.transform(n);t[l.array]=`${c} ${d}`}const K6=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function BT(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:l=1,pathOffset:c=0,...d},h,m,y){if(P0(t,d,m),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:x}=t;b.transform&&(x.transform=b.transform,delete b.transform),(x.transform||b.transformOrigin)&&(x.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),x.transform&&(x.transformBox=y?.transformBox??"fill-box",delete b.transformBox);for(const S of K6)b[S]!==void 0&&(x[S]=b[S],delete b[S]);e!==void 0&&(b.x=e),n!==void 0&&(b.y=n),s!==void 0&&(b.scale=s),i!==void 0&&Y6(b,i,l,c,!1)}const UT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),qT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function W6(t,e,n,s){zT(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(UT.has(i)?i:k0(i),e.attrs[i])}function $T(t,e,n){const s=z0(t,e,n);for(const i in t)if(qn(t[i])||qn(e[i])){const l=jl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[l]=t[i]}return s}class X6 extends OT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(_l.has(n)){const s=vT(n);return s&&s.default||0}return n=UT.has(n)?n:k0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return $T(e,n,s)}build(e,n,s){BT(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,i){W6(e,n,s,i)}mount(e){this.isSVGTag=qT(e.tagName),super.mount(e)}}const Z6=L0.length;function VT(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?VT(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Z6;n++){const s=L0[n],i=t.props[s];(Zc(i)||i===!1)&&(e[s]=i)}return e}function HT(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const Q6=[...R0].reverse(),J6=R0.length;function eL(t){return e=>Promise.all(e.map(({animation:n,options:s})=>c6(t,n,s)))}function tL(t){let e=eL(t),n=vw(),s=!0;const i=h=>(m,y)=>{const b=fl(t,y,h==="exit"?t.presenceContext?.custom:void 0);if(b){const{transition:x,transitionEnd:S,...N}=b;m={...m,...N,...S}}return m};function l(h){e=h(t)}function c(h){const{props:m}=t,y=VT(t.parent)||{},b=[],x=new Set;let S={},N=1/0;for(let j=0;j<J6;j++){const D=Q6[j],O=n[D],R=m[D]!==void 0?m[D]:y[D],U=Zc(R),L=D===h?O.isActive:null;L===!1&&(N=j);let H=R===y[D]&&R!==m[D]&&U;if(H&&s&&t.manuallyAnimateOnMount&&(H=!1),O.protectedKeys={...S},!O.isActive&&L===null||!R&&!O.prevProp||qf(R)||typeof R=="boolean")continue;const z=nL(O.prevProp,R);let P=z||D===h&&O.isActive&&!H&&U||j>N&&U,Y=!1;const Q=Array.isArray(R)?R:[R];let A=Q.reduce(i(D),{});L===!1&&(A={});const{prevResolvedValues:F={}}=O,B={...F,...A},te=I=>{P=!0,x.has(I)&&(Y=!0,x.delete(I)),O.needsAnimating[I]=!0;const q=t.getValue(I);q&&(q.liveStyle=!1)};for(const I in B){const q=A[I],oe=F[I];if(S.hasOwnProperty(I))continue;let ce=!1;vg(q)&&vg(oe)?ce=!HT(q,oe):ce=q!==oe,ce?q!=null?te(I):x.add(I):q!==void 0&&x.has(I)?te(I):O.protectedKeys[I]=!0}O.prevProp=R,O.prevResolvedValues=A,O.isActive&&(S={...S,...A}),s&&t.blockInitialAnimation&&(P=!1);const se=H&&z;P&&(!se||Y)&&b.push(...Q.map(I=>{const q={type:D};if(typeof I=="string"&&s&&!se&&t.manuallyAnimateOnMount&&t.parent){const{parent:oe}=t,ce=fl(oe,I);if(oe.enteringChildren&&ce){const{delayChildren:M}=ce.transition||{};q.delay=hT(oe.enteringChildren,t,M)}}return{animation:I,options:q}}))}if(x.size){const j={};if(typeof m.initial!="boolean"){const D=fl(t,Array.isArray(m.initial)?m.initial[0]:m.initial);D&&D.transition&&(j.transition=D.transition)}x.forEach(D=>{const O=t.getBaseTarget(D),R=t.getValue(D);R&&(R.liveStyle=!0),j[D]=O??null}),b.push({animation:j})}let E=!!b.length;return s&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(E=!1),s=!1,E?e(b):Promise.resolve()}function d(h,m){if(n[h].isActive===m)return Promise.resolve();t.variantChildren?.forEach(b=>b.animationState?.setActive(h,m)),n[h].isActive=m;const y=c(h);for(const b in n)n[b].protectedKeys={};return y}return{animateChanges:c,setActive:d,setAnimateFunction:l,getState:()=>n,reset:()=>{n=vw()}}}function nL(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!HT(e,t):!1}function Yi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vw(){return{animate:Yi(!0),whileInView:Yi(),whileHover:Yi(),whileTap:Yi(),whileDrag:Yi(),whileFocus:Yi(),exit:Yi()}}const FT=1e-4,aL=1-FT,sL=1+FT,GT=.01,rL=0-GT,iL=0+GT;function Xn(t){return t.max-t.min}function oL(t,e,n){return Math.abs(t-e)<=n}function ww(t,e,n,s=.5){t.origin=s,t.originPoint=It(e.min,e.max,t.origin),t.scale=Xn(n)/Xn(e),t.translate=It(n.min,n.max,t.origin)-t.originPoint,(t.scale>=aL&&t.scale<=sL||isNaN(t.scale))&&(t.scale=1),(t.translate>=rL&&t.translate<=iL||isNaN(t.translate))&&(t.translate=0)}function $c(t,e,n,s){ww(t.x,e.x,n.x,s?s.originX:void 0),ww(t.y,e.y,n.y,s?s.originY:void 0)}function Sw(t,e,n){t.min=n.min+e.min,t.max=t.min+Xn(e)}function lL(t,e,n){Sw(t.x,e.x,n.x),Sw(t.y,e.y,n.y)}function Nw(t,e,n){t.min=e.min-n.min,t.max=t.min+Xn(e)}function vf(t,e,n){Nw(t.x,e.x,n.x),Nw(t.y,e.y,n.y)}function Tw(t,e,n,s,i){return t-=e,t=xf(t,1/n,s),i!==void 0&&(t=xf(t,1/i,s)),t}function cL(t,e=0,n=1,s=.5,i,l=t,c=t){if(Vs.test(e)&&(e=parseFloat(e),e=It(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=It(l.min,l.max,s);t===l&&(d-=e),t.min=Tw(t.min,e,n,d,i),t.max=Tw(t.max,e,n,d,i)}function Ew(t,e,[n,s,i],l,c){cL(t,e[n],e[s],e[i],e.scale,l,c)}const uL=["x","scaleX","originX"],dL=["y","scaleY","originY"];function Aw(t,e,n,s){Ew(t.x,e,uL,n?n.x:void 0,s?s.x:void 0),Ew(t.y,e,dL,n?n.y:void 0,s?s.y:void 0)}function Cw(t,e){t.min=e.min,t.max=e.max}function ms(t,e){Cw(t.x,e.x),Cw(t.y,e.y)}function jw(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function _w(t){return t.translate===0&&t.scale===1}function YT(t){return _w(t.x)&&_w(t.y)}function kw(t,e){return t.min===e.min&&t.max===e.max}function fL(t,e){return kw(t.x,e.x)&&kw(t.y,e.y)}function Dw(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function KT(t,e){return Dw(t.x,e.x)&&Dw(t.y,e.y)}function Ow(t){return Xn(t.x)/Xn(t.y)}function Mw(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Ga(t){return[t("x"),t("y")]}function hL(t,e,n){let s="";const i=t.x.translate/e.x,l=t.y.translate/e.y,c=n?.z||0;if((i||l||c)&&(s=`translate3d(${i}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:y,rotateX:b,rotateY:x,skewX:S,skewY:N}=n;m&&(s=`perspective(${m}px) ${s}`),y&&(s+=`rotate(${y}deg) `),b&&(s+=`rotateX(${b}deg) `),x&&(s+=`rotateY(${x}deg) `),S&&(s+=`skewX(${S}deg) `),N&&(s+=`skewY(${N}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(s+=`scale(${d}, ${h})`),s||"none"}const WT=["TopLeft","TopRight","BottomLeft","BottomRight"],mL=WT.length,Rw=t=>typeof t=="string"?parseFloat(t):t,Lw=t=>typeof t=="number"||Ee.test(t);function pL(t,e,n,s,i,l){i?(t.opacity=It(0,n.opacity??1,gL(s)),t.opacityExit=It(e.opacity??1,0,yL(s))):l&&(t.opacity=It(e.opacity??1,n.opacity??1,s));for(let c=0;c<mL;c++){const d=`border${WT[c]}Radius`;let h=Pw(e,d),m=Pw(n,d);if(h===void 0&&m===void 0)continue;h||(h=0),m||(m=0),h===0||m===0||Lw(h)===Lw(m)?(t[d]=Math.max(It(Rw(h),Rw(m),s),0),(Vs.test(m)||Vs.test(h))&&(t[d]+="%")):t[d]=m}(e.rotate||n.rotate)&&(t.rotate=It(e.rotate||0,n.rotate||0,s))}function Pw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const gL=XT(0,.5,VN),yL=XT(.5,.95,ts);function XT(t,e,n){return s=>s<t?0:s>e?1:n(Kc(t,e,s))}function bL(t,e){const n=Wn.now(),s=({timestamp:i})=>{const l=i-n;l>=e&&(vi(s),t(l-e))};return Ot.setup(s,!0),()=>vi(s)}function Qc(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Qd(t){return qn(t)?t.get():t}function xL(t,e,n){const s=qn(t)?t:bl(t);return s.start(j0("",s,e,n)),s.animation}const vL=(t,e)=>t.depth-e.depth;class wL{constructor(){this.children=[],this.isDirty=!1}add(e){d0(this.children,e),this.isDirty=!0}remove(e){f0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(vL),this.isDirty=!1,this.children.forEach(e)}}class SL{constructor(){this.members=[]}add(e){d0(this.members,e),e.scheduleRender()}remove(e){if(f0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const l=this.members[i];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Jd={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Tp=["","X","Y","Z"],NL=1e3;let TL=0;function Ep(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function ZT(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=gT(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ot,!(i||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&ZT(s)}function QT({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(c={},d=e?.()){this.id=TL++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(CL),this.nodes.forEach(DL),this.nodes.forEach(OL),this.nodes.forEach(jL)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new wL)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new p0),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const h=this.eventHandlers.get(c);h&&h.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=jT(c)&&!A6(c),this.instance=c;const{layoutId:d,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),t){let y,b=0;const x=()=>this.root.updateBlockedByResize=!1;Ot.read(()=>{b=window.innerWidth}),t(c,()=>{const S=window.innerWidth;S!==b&&(b=S,this.root.updateBlockedByResize=!0,y&&y(),y=bL(x,250),Jd.hasAnimatedSinceResize&&(Jd.hasAnimatedSinceResize=!1,this.nodes.forEach(Bw)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||h)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:b,hasRelativeLayoutChanged:x,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||m.getDefaultTransition()||zL,{onLayoutAnimationStart:E,onLayoutAnimationComplete:j}=m.getProps(),D=!this.targetLayout||!KT(this.targetLayout,S),O=!b&&x;if(this.options.layoutRoot||this.resumeFrom||O||b&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...C0(N,"layout"),onPlay:E,onComplete:j};(m.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(y,O)}else b||Bw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ML),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ZT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const b=this.path[y];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Iw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(kL),this.nodes.forEach(EL),this.nodes.forEach(AL)):this.nodes.forEach(Iw),this.clearAllSnapshots();const d=Wn.now();jn.delta=Fs(0,1e3/60,d-jn.timestamp),jn.timestamp=d,jn.isProcessing=!0,gp.update.process(jn),gp.preRender.process(jn),gp.render.process(jn),jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,O0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_L),this.sharedNodes.forEach(RL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xn(this.snapshot.measuredBox.x)&&!Xn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const h=s(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!YT(this.projectionDelta),h=this.getTransformTemplate(),m=h?h(this.latestValues,""):void 0,y=m!==this.prevTransformTemplateValue;c&&this.instance&&(d||Wi(this.latestValues)||y)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return c&&(h=this.removeTransform(h)),IL(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return hn();const d=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(BL))){const{scroll:m}=this.root;m&&(ul(d.x,m.offset.x),ul(d.y,m.offset.y))}return d}removeElementScroll(c){const d=hn();if(ms(d,c),this.scroll?.wasRoot)return d;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:y,options:b}=m;m!==this.root&&y&&b.layoutScroll&&(y.wasRoot&&ms(d,c),ul(d.x,y.offset.x),ul(d.y,y.offset.y))}return d}applyTransform(c,d=!1){const h=hn();ms(h,c);for(let m=0;m<this.path.length;m++){const y=this.path[m];!d&&y.options.layoutScroll&&y.scroll&&y!==y.root&&dl(h,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Wi(y.latestValues)&&dl(h,y.latestValues)}return Wi(this.latestValues)&&dl(h,this.latestValues),h}removeTransform(c){const d=hn();ms(d,c);for(let h=0;h<this.path.length;h++){const m=this.path[h];if(!m.instance||!Wi(m.latestValues))continue;Eg(m.latestValues)&&m.updateSnapshot();const y=hn(),b=m.measurePageBox();ms(y,b),Aw(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,y)}return Wi(this.latestValues)&&Aw(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:b}=this.options;if(!this.layout||!(y||b))return;this.resolvedRelativeTargetAt=jn.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hn(),this.targetWithTransforms=hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ms(this.target,this.layout.layoutBox),LT(this.target,this.targetDelta)):ms(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Eg(this.parent.latestValues)||RT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,d,h){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),vf(this.relativeTargetOrigin,d,h),ms(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const c=this.getLead(),d=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===jn.timestamp&&(h=!1),h)return;const{layout:m,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||y))return;ms(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,x=this.treeScale.y;z6(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=hn());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(jw(this.prevProjectionDelta.x,this.projectionDelta.x),jw(this.prevProjectionDelta.y,this.projectionDelta.y)),$c(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==x||!Mw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Mw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=cl(),this.projectionDelta=cl(),this.projectionDeltaWithTransform=cl()}setAnimationOrigin(c,d=!1){const h=this.snapshot,m=h?h.latestValues:{},y={...this.latestValues},b=cl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const x=hn(),S=h?h.source:void 0,N=this.layout?this.layout.source:void 0,E=S!==N,j=this.getStack(),D=!j||j.members.length<=1,O=!!(E&&!D&&this.options.crossfade===!0&&!this.path.some(PL));this.animationProgress=0;let R;this.mixTargetDelta=U=>{const L=U/1e3;Uw(b.x,c.x,L),Uw(b.y,c.y,L),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vf(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),LL(this.relativeTarget,this.relativeTargetOrigin,x,L),R&&fL(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=hn()),ms(R,this.relativeTarget)),E&&(this.animationValues=y,pL(y,m,this.latestValues,L,O,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(vi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ot.update(()=>{Jd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bl(0)),this.currentAnimation=xL(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(NL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:h,layout:m,latestValues:y}=c;if(!(!d||!h||!m)){if(this!==c&&this.layout&&m&&JT(this.options.animationType,this.layout.layoutBox,m.layoutBox)){h=this.target||hn();const b=Xn(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+b;const x=Xn(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+x}ms(d,h),dl(d,y),$c(this.projectionDeltaWithTransform,this.layoutCorrected,d,y)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new SL),this.sharedNodes.get(c).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:h}={}){const m=this.getStack();m&&m.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const m={};h.z&&Ep("z",c,m,this.animationValues);for(let y=0;y<Tp.length;y++)Ep(`rotate${Tp[y]}`,c,m,this.animationValues),Ep(`skew${Tp[y]}`,c,m,this.animationValues);c.render();for(const y in m)c.setStaticValue(y,m[y]),this.animationValues&&(this.animationValues[y]=m[y]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Qd(d?.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Qd(d?.pointerEvents)||""),this.hasProjected&&!Wi(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const y=m.animationValues||m.latestValues;this.applyTransformsToTarget();let b=hL(this.projectionDeltaWithTransform,this.treeScale,y);h&&(b=h(y,b)),c.transform=b;const{x,y:S}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${S.origin*100}% 0`,m.animationValues?c.opacity=m===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:c.opacity=m===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const N in Cg){if(y[N]===void 0)continue;const{correct:E,applyTo:j,isCSSVariable:D}=Cg[N],O=b==="none"?y[N]:E(y[N],m);if(j){const R=j.length;for(let U=0;U<R;U++)c[j[U]]=O}else D?this.options.visualElement.renderState.vars[N]=O:c[N]=O}this.options.layoutId&&(c.pointerEvents=m===this?Qd(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(zw),this.root.sharedNodes.clear()}}}function EL(t){t.updateLayout()}function AL(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,l=e.source!==t.layout.source;i==="size"?Ga(y=>{const b=l?e.measuredBox[y]:e.layoutBox[y],x=Xn(b);b.min=n[y].min,b.max=b.min+x}):JT(i,e.layoutBox,n)&&Ga(y=>{const b=l?e.measuredBox[y]:e.layoutBox[y],x=Xn(n[y]);b.max=b.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+x)});const c=cl();$c(c,n,e.layoutBox);const d=cl();l?$c(d,t.applyTransform(s,!0),e.measuredBox):$c(d,n,e.layoutBox);const h=!YT(c);let m=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:b,layout:x}=y;if(b&&x){const S=hn();vf(S,e.layoutBox,b.layoutBox);const N=hn();vf(N,n,x.layoutBox),KT(S,N)||(m=!0),y.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=S,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function CL(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jL(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function _L(t){t.clearSnapshot()}function zw(t){t.clearMeasurements()}function Iw(t){t.isLayoutDirty=!1}function kL(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Bw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function DL(t){t.resolveTargetDelta()}function OL(t){t.calcProjection()}function ML(t){t.resetSkewAndRotation()}function RL(t){t.removeLeadSnapshot()}function Uw(t,e,n){t.translate=It(e.translate,0,n),t.scale=It(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function qw(t,e,n,s){t.min=It(e.min,n.min,s),t.max=It(e.max,n.max,s)}function LL(t,e,n,s){qw(t.x,e.x,n.x,s),qw(t.y,e.y,n.y,s)}function PL(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zL={duration:.45,ease:[.4,0,.1,1]},$w=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Vw=$w("applewebkit/")&&!$w("chrome/")?Math.round:ts;function Hw(t){t.min=Vw(t.min),t.max=Vw(t.max)}function IL(t){Hw(t.x),Hw(t.y)}function JT(t,e,n){return t==="position"||t==="preserve-aspect"&&!oL(Ow(e),Ow(n),.2)}function BL(t){return t!==t.root&&t.scroll?.wasRoot}const UL=QT({attachResizeListener:(t,e)=>Qc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ap={current:void 0},eE=QT({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ap.current){const t=new UL({});t.mount(window),t.setOptions({layoutScroll:!0}),Ap.current=t}return Ap.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),I0=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Fw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function qL(...t){return e=>{let n=!1;const s=t.map(i=>{const l=Fw(i,e);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let i=0;i<s.length;i++){const l=s[i];typeof l=="function"?l():Fw(t[i],null)}}}}function $L(...t){return T.useCallback(qL(...t),t)}class VL extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,i=NT(s)&&s.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=i-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function HL({children:t,isPresent:e,anchorX:n,root:s}){const i=T.useId(),l=T.useRef(null),c=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=T.useContext(I0),h=t.props?.ref??t?.ref,m=$L(l,h);return T.useInsertionEffect(()=>{const{width:y,height:b,top:x,left:S,right:N}=c.current;if(e||!l.current||!y||!b)return;const E=n==="left"?`left: ${S}`:`right: ${N}`;l.current.dataset.motionPopId=i;const j=document.createElement("style");d&&(j.nonce=d);const D=s??document.head;return D.appendChild(j),j.sheet&&j.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${b}px !important;
            ${E}px !important;
            top: ${x}px !important;
          }
        `),()=>{D.contains(j)&&D.removeChild(j)}},[e]),f.jsx(VL,{isPresent:e,childRef:l,sizeRef:c,children:T.cloneElement(t,{ref:m})})}const FL=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:l,mode:c,anchorX:d,root:h})=>{const m=u0(GL),y=T.useId();let b=!0,x=T.useMemo(()=>(b=!1,{id:y,initial:e,isPresent:n,custom:i,onExitComplete:S=>{m.set(S,!0);for(const N of m.values())if(!N)return;s&&s()},register:S=>(m.set(S,!1),()=>m.delete(S))}),[n,m,s]);return l&&b&&(x={...x}),T.useMemo(()=>{m.forEach((S,N)=>m.set(N,!1))},[n]),T.useEffect(()=>{!n&&!m.size&&s&&s()},[n]),c==="popLayout"&&(t=f.jsx(HL,{isPresent:n,anchorX:d,root:h,children:t})),f.jsx(Uf.Provider,{value:x,children:t})};function GL(){return new Map}function tE(t=!0){const e=T.useContext(Uf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,l=T.useId();T.useEffect(()=>{if(t)return i(l)},[t]);const c=T.useCallback(()=>t&&s&&s(l),[l,s,t]);return!n&&s?[!1,c]:[!0]}const kd=t=>t.key||"";function Gw(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const mn=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:l="sync",propagate:c=!1,anchorX:d="left",root:h})=>{const[m,y]=tE(c),b=T.useMemo(()=>Gw(t),[t]),x=c&&!m?[]:b.map(kd),S=T.useRef(!0),N=T.useRef(b),E=u0(()=>new Map),j=T.useRef(new Set),[D,O]=T.useState(b),[R,U]=T.useState(b);ON(()=>{S.current=!1,N.current=b;for(let z=0;z<R.length;z++){const P=kd(R[z]);x.includes(P)?(E.delete(P),j.current.delete(P)):E.get(P)!==!0&&E.set(P,!1)}},[R,x.length,x.join("-")]);const L=[];if(b!==D){let z=[...b];for(let P=0;P<R.length;P++){const Y=R[P],Q=kd(Y);x.includes(Q)||(z.splice(P,0,Y),L.push(Y))}return l==="wait"&&L.length&&(z=L),U(Gw(z)),O(b),null}const{forceRender:H}=T.useContext(c0);return f.jsx(f.Fragment,{children:R.map(z=>{const P=kd(z),Y=c&&!m?!1:b===R||x.includes(P),Q=()=>{if(j.current.has(P))return;if(j.current.add(P),E.has(P))E.set(P,!0);else return;let A=!0;E.forEach(F=>{F||(A=!1)}),A&&(H?.(),U(N.current),c&&y?.(),s&&s())};return f.jsx(FL,{isPresent:Y,initial:!S.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:l,root:h,onExitComplete:Y?void 0:Q,anchorX:d,children:z},P)})})},nE=T.createContext({strict:!1}),Yw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Kw=!1;function YL(){if(Kw)return;const t={};for(const e in Yw)t[e]={isEnabled:n=>Yw[e].some(s=>!!n[s])};DT(t),Kw=!0}function aE(){return YL(),M6()}function KL(t){const e=aE();for(const n in t)e[n]={...e[n],...t[n]};DT(e)}const WL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||WL.has(t)}let sE=t=>!wf(t);function XL(t){typeof t=="function"&&(sE=e=>e.startsWith("on")?!wf(e):t(e))}try{XL(require("@emotion/is-prop-valid").default)}catch{}function ZL(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(sE(i)||n===!0&&wf(i)||!e&&!wf(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}const Vf=T.createContext({});function QL(t,e){if($f(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Zc(n)?n:void 0,animate:Zc(s)?s:void 0}}return t.inherit!==!1?e:{}}function JL(t){const{initial:e,animate:n}=QL(t,T.useContext(Vf));return T.useMemo(()=>({initial:e,animate:n}),[Ww(e),Ww(n)])}function Ww(t){return Array.isArray(t)?t.join(" "):t}const B0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rE(t,e,n){for(const s in e)!qn(e[s])&&!IT(s,n)&&(t[s]=e[s])}function e8({transformTemplate:t},e){return T.useMemo(()=>{const n=B0();return P0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function t8(t,e){const n=t.style||{},s={};return rE(s,n,t),Object.assign(s,e8(t,e)),s}function n8(t,e){const n={},s=t8(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const iE=()=>({...B0(),attrs:{}});function a8(t,e,n,s){const i=T.useMemo(()=>{const l=iE();return BT(l,e,qT(s),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};rE(l,t.style,t),i.style={...l,...i.style}}return i}const s8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function U0(t){return typeof t!="string"||t.includes("-")?!1:!!(s8.indexOf(t)>-1||/[A-Z]/u.test(t))}function r8(t,e,n,{latestValues:s},i,l=!1,c){const h=(c??U0(t)?a8:n8)(e,s,i,t),m=ZL(e,typeof t=="string",l),y=t!==T.Fragment?{...m,...h,ref:n}:{},{children:b}=e,x=T.useMemo(()=>qn(b)?b.get():b,[b]);return T.createElement(t,{...y,children:x})}function i8({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:o8(n,s,i,t),renderState:e()}}function o8(t,e,n,s){const i={},l=s(t,{});for(const x in l)i[x]=Qd(l[x]);let{initial:c,animate:d}=t;const h=$f(t),m=kT(t);e&&m&&!h&&t.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let y=n?n.initial===!1:!1;y=y||c===!1;const b=y?d:c;if(b&&typeof b!="boolean"&&!qf(b)){const x=Array.isArray(b)?b:[b];for(let S=0;S<x.length;S++){const N=_0(t,x[S]);if(N){const{transitionEnd:E,transition:j,...D}=N;for(const O in D){let R=D[O];if(Array.isArray(R)){const U=y?R.length-1:0;R=R[U]}R!==null&&(i[O]=R)}for(const O in E)i[O]=E[O]}}}return i}const oE=t=>(e,n)=>{const s=T.useContext(Vf),i=T.useContext(Uf),l=()=>i8(t,e,s,i);return n?l():u0(l)},l8=oE({scrapeMotionValuesFromProps:z0,createRenderState:B0}),c8=oE({scrapeMotionValuesFromProps:$T,createRenderState:iE}),u8=Symbol.for("motionComponentSymbol");function d8(t,e,n){const s=T.useRef(n);T.useInsertionEffect(()=>{s.current=n});const i=T.useRef(null);return T.useCallback(l=>{l&&t.onMount?.(l),e&&(l?e.mount(l):e.unmount());const c=s.current;if(typeof c=="function")if(l){const d=c(l);typeof d=="function"&&(i.current=d)}else i.current?(i.current(),i.current=null):c(l);else c&&(c.current=l)},[e])}const lE=T.createContext({});function Mc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function f8(t,e,n,s,i,l){const{visualElement:c}=T.useContext(Vf),d=T.useContext(nE),h=T.useContext(Uf),m=T.useContext(I0).reducedMotion,y=T.useRef(null);s=s||d.renderer,!y.current&&s&&(y.current=s(t,{visualState:e,parent:c,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m,isSVG:l}));const b=y.current,x=T.useContext(lE);b&&!b.projection&&i&&(b.type==="html"||b.type==="svg")&&h8(y.current,n,i,x);const S=T.useRef(!1);T.useInsertionEffect(()=>{b&&S.current&&b.update(n,h)});const N=n[pT],E=T.useRef(!!N&&!window.MotionHandoffIsComplete?.(N)&&window.MotionHasOptimisedAnimation?.(N));return ON(()=>{b&&(S.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),E.current&&b.animationState&&b.animationState.animateChanges())}),T.useEffect(()=>{b&&(!E.current&&b.animationState&&b.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(N)}),E.current=!1),b.enteringChildren=void 0)}),b}function h8(t,e,n,s){const{layoutId:i,layout:l,drag:c,dragConstraints:d,layoutScroll:h,layoutRoot:m,layoutCrossfade:y}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:cE(t.parent)),t.projection.setOptions({layoutId:i,layout:l,alwaysMeasureLayout:!!c||d&&Mc(d),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:y,layoutScroll:h,layoutRoot:m})}function cE(t){if(t)return t.options.allowProjection!==!1?t.projection:cE(t.parent)}function Cp(t,{forwardMotionProps:e=!1,type:n}={},s,i){s&&KL(s);const l=n?n==="svg":U0(t),c=l?c8:l8;function d(m,y){let b;const x={...T.useContext(I0),...m,layoutId:m8(m)},{isStatic:S}=x,N=JL(m),E=c(m,S);if(!S&&DN){p8();const j=g8(x);b=j.MeasureLayout,N.visualElement=f8(t,E,x,i,j.ProjectionNode,l)}return f.jsxs(Vf.Provider,{value:N,children:[b&&N.visualElement?f.jsx(b,{visualElement:N.visualElement,...x}):null,r8(t,m,d8(E,N.visualElement,y),E,S,e,l)]})}d.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const h=T.forwardRef(d);return h[u8]=t,h}function m8({layoutId:t}){const e=T.useContext(c0).id;return e&&t!==void 0?e+"-"+t:t}function p8(t,e){T.useContext(nE).strict}function g8(t){const e=aE(),{drag:n,layout:s}=e;if(!n&&!s)return{};const i={...n,...s};return{MeasureLayout:n?.isEnabled(t)||s?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function y8(t,e){if(typeof Proxy>"u")return Cp;const n=new Map,s=(l,c)=>Cp(l,c,t,e),i=(l,c)=>s(l,c);return new Proxy(i,{get:(l,c)=>c==="create"?s:(n.has(c)||n.set(c,Cp(c,void 0,t,e)),n.get(c))})}const b8=(t,e)=>e.isSVG??U0(t)?new X6(e):new H6(e,{allowProjection:t!==T.Fragment});class x8 extends Ni{constructor(e){super(e),e.animationState||(e.animationState=tL(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();qf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let v8=0;class w8 extends Ni{constructor(){super(...arguments),this.id=v8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const S8={animation:{Feature:x8},exit:{Feature:w8}};function fu(t){return{point:{x:t.pageX,y:t.pageY}}}const N8=t=>e=>M0(e)&&t(e,fu(e));function Vc(t,e,n,s){return Qc(t,e,N8(n),s)}const uE=({current:t})=>t?t.ownerDocument.defaultView:null,Xw=(t,e)=>Math.abs(t-e);function T8(t,e){const n=Xw(t.x,e.x),s=Xw(t.y,e.y);return Math.sqrt(n**2+s**2)}const Zw=new Set(["auto","scroll"]);class dE{constructor(e,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3,element:d}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=S=>{this.handleScroll(S.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=_p(this.lastMoveEventInfo,this.history),N=this.startEvent!==null,E=T8(S.offset,{x:0,y:0})>=this.distanceThreshold;if(!N&&!E)return;const{point:j}=S,{timestamp:D}=jn;this.history.push({...j,timestamp:D});const{onStart:O,onMove:R}=this.handlers;N||(O&&O(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,S)},this.handlePointerMove=(S,N)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=jp(N,this.transformPagePoint),Ot.update(this.updatePoint,!0)},this.handlePointerUp=(S,N)=>{this.end();const{onEnd:E,onSessionEnd:j,resumeAnimation:D}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=_p(S.type==="pointercancel"?this.lastMoveEventInfo:jp(N,this.transformPagePoint),this.history);this.startEvent&&E&&E(S,O),j&&j(S,O)},!M0(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=c,this.contextWindow=i||window;const h=fu(e),m=jp(h,this.transformPagePoint),{point:y}=m,{timestamp:b}=jn;this.history=[{...y,timestamp:b}];const{onSessionStart:x}=n;x&&x(e,_p(m,this.history)),this.removeListeners=cu(Vc(this.contextWindow,"pointermove",this.handlePointerMove),Vc(this.contextWindow,"pointerup",this.handlePointerUp),Vc(this.contextWindow,"pointercancel",this.handlePointerUp)),d&&this.startScrollTracking(d)}startScrollTracking(e){let n=e.parentElement;for(;n;){const s=getComputedStyle(n);(Zw.has(s.overflowX)||Zw.has(s.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const s=e===window,i=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},l={x:i.x-n.x,y:i.y-n.y};l.x===0&&l.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=l.x,this.lastMoveEventInfo.point.y+=l.y):this.history.length>0&&(this.history[0].x-=l.x,this.history[0].y-=l.y),this.scrollPositions.set(e,i),Ot.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),vi(this.updatePoint)}}function jp(t,e){return e?{point:e(t.point)}:t}function Qw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _p({point:t},e){return{point:t,delta:Qw(t,fE(e)),offset:Qw(t,E8(e)),velocity:A8(e,.1)}}function E8(t){return t[0]}function fE(t){return t[t.length-1]}function A8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=fE(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>Sr(e)));)n--;if(!s)return{x:0,y:0};const l=Za(i.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const c={x:(i.x-s.x)/l,y:(i.y-s.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function C8(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?It(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?It(n,t,s.max):Math.min(t,n)),t}function Jw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function j8(t,{top:e,left:n,bottom:s,right:i}){return{x:Jw(t.x,n,i),y:Jw(t.y,e,s)}}function e2(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function _8(t,e){return{x:e2(t.x,e.x),y:e2(t.y,e.y)}}function k8(t,e){let n=.5;const s=Xn(t),i=Xn(e);return i>s?n=Kc(e.min,e.max-s,t.min):s>i&&(n=Kc(t.min,t.max-i,e.min)),Fs(0,1,n)}function D8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const jg=.35;function O8(t=jg){return t===!1?t=0:t===!0&&(t=jg),{x:t2(t,"left","right"),y:t2(t,"top","bottom")}}function t2(t,e,n){return{min:n2(t,e),max:n2(t,n)}}function n2(t,e){return typeof t=="number"?t:t[e]||0}const M8=new WeakMap;class R8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const l=b=>{n?(this.stopAnimation(),this.snapToCursor(fu(b).point)):this.pauseAnimation()},c=(b,x)=>{this.stopAnimation();const{drag:S,dragPropagation:N,onDragStart:E}=this.getProps();if(S&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=w6(S),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ga(D=>{let O=this.getAxisMotionValue(D).get()||0;if(Vs.test(O)){const{projection:R}=this.visualElement;if(R&&R.layout){const U=R.layout.layoutBox[D];U&&(O=Xn(U)*(parseFloat(O)/100))}}this.originPoint[D]=O}),E&&Ot.postRender(()=>E(b,x)),wg(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},d=(b,x)=>{this.latestPointerEvent=b,this.latestPanInfo=x;const{dragPropagation:S,dragDirectionLock:N,onDirectionLock:E,onDrag:j}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:D}=x;if(N&&this.currentDirection===null){this.currentDirection=L8(D),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",x.point,D),this.updateAxis("y",x.point,D),this.visualElement.render(),j&&j(b,x)},h=(b,x)=>{this.latestPointerEvent=b,this.latestPanInfo=x,this.stop(b,x),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>Ga(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new dE(e,{onSessionStart:l,onStart:c,onMove:d,onSessionEnd:h,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:s,contextWindow:uE(this.visualElement),element:this.visualElement.current})}stop(e,n){const s=e||this.latestPointerEvent,i=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!i||!s)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&Ot.postRender(()=>d(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!Dd(e,i,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(c=C8(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Mc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=j8(s.layoutBox,e):this.constraints=!1,this.elastic=O8(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ga(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=D8(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Mc(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const l=I6(s,i.root,this.visualElement.getTransformPagePoint());let c=_8(i.layout.layoutBox,l);if(n){const d=n(L6(c));this.hasMutatedConstraints=!!d,d&&(c=MT(d))}return c}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},m=Ga(y=>{if(!Dd(y,n,this.currentDirection))return;let b=h&&h[y]||{};c&&(b={min:0,max:0});const x=i?200:1e6,S=i?40:1e7,N={type:"inertia",velocity:s?e[y]:0,bounceStiffness:x,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...l,...b};return this.startAxisValueAnimation(y,N)});return Promise.all(m).then(d)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return wg(this.visualElement,e),s.start(j0(e,s,0,n,this.visualElement,!1))}stopAnimation(){Ga(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ga(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Ga(n=>{const{drag:s}=this.getProps();if(!Dd(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,l=this.getAxisMotionValue(n);if(i&&i.layout){const{min:c,max:d}=i.layout.layoutBox[n],h=l.get()||0;l.set(e[n]-It(c,d,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Mc(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ga(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const h=d.get();i[c]=k8({min:h,max:h},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ga(c=>{if(!Dd(c,e,null))return;const d=this.getAxisMotionValue(c),{min:h,max:m}=this.constraints[c];d.set(It(h,m,i[c]))})}addListeners(){if(!this.visualElement.current)return;M8.set(this.visualElement,this);const e=this.visualElement.current,n=Vc(e,"pointerdown",h=>{const{drag:m,dragListener:y=!0}=this.getProps();m&&y&&!CT(h.target)&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();Mc(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,l=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ot.read(s);const c=Qc(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:m})=>{this.isDragging&&m&&(Ga(y=>{const b=this.getAxisMotionValue(y);b&&(this.originPoint[y]+=h[y].translate,b.set(b.get()+h[y].translate))}),this.visualElement.render())}));return()=>{c(),n(),l(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:l=!1,dragElastic:c=jg,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:l,dragElastic:c,dragMomentum:d}}}function Dd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function L8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class P8 extends Ni{constructor(e){super(e),this.removeGroupControls=ts,this.removeListeners=ts,this.controls=new R8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ts}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const a2=t=>(e,n)=>{t&&Ot.postRender(()=>t(e,n))};class z8 extends Ni{constructor(){super(...arguments),this.removePointerDownListener=ts}onPointerDown(e){this.session=new dE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:a2(e),onStart:a2(n),onMove:s,onEnd:(l,c)=>{delete this.session,i&&Ot.postRender(()=>i(l,c))}}}mount(){this.removePointerDownListener=Vc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let kp=!1;class I8 extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:l}=e;l&&(n.group&&n.group.add(l),s&&s.register&&i&&s.register(l),kp&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Jd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:l}=this.props,{projection:c}=s;return c&&(c.isPresent=l,kp=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||Ot.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),O0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;kp=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function hE(t){const[e,n]=tE(),s=T.useContext(c0);return f.jsx(I8,{...t,layoutGroup:s,switchLayoutGroup:T.useContext(lE),isPresent:e,safeToRemove:n})}const B8={pan:{Feature:z8},drag:{Feature:P8,ProjectionNode:eE,MeasureLayout:hE}};function s2(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,l=s[i];l&&Ot.postRender(()=>l(e,fu(e)))}class U8 extends Ni{mount(){const{current:e}=this.node;e&&(this.unmount=S6(e,(n,s)=>(s2(this.node,s,"Start"),i=>s2(this.node,i,"End"))))}unmount(){}}class q8 extends Ni{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cu(Qc(this.node.current,"focus",()=>this.onFocus()),Qc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function r2(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),l=s[i];l&&Ot.postRender(()=>l(e,fu(e)))}class $8 extends Ni{mount(){const{current:e}=this.node;e&&(this.unmount=E6(e,(n,s)=>(r2(this.node,s,"Start"),(i,{success:l})=>r2(this.node,i,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _g=new WeakMap,Dp=new WeakMap,V8=t=>{const e=_g.get(t.target);e&&e(t)},H8=t=>{t.forEach(V8)};function F8({root:t,...e}){const n=t||document;Dp.has(n)||Dp.set(n,{});const s=Dp.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(H8,{root:t,...e})),s[i]}function G8(t,e,n){const s=F8(e);return _g.set(t,n),s.observe(t),()=>{_g.delete(t),s.unobserve(t)}}const Y8={some:0,all:1};class K8 extends Ni{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:l}=e,c={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:Y8[i]},d=h=>{const{isIntersecting:m}=h;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:y,onViewportLeave:b}=this.node.getProps(),x=m?y:b;x&&x(h)};return G8(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(W8(e,n))&&this.startObserver()}unmount(){}}function W8({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const X8={inView:{Feature:K8},tap:{Feature:$8},focus:{Feature:q8},hover:{Feature:U8}},Z8={layout:{ProjectionNode:eE,MeasureLayout:hE}},Q8={...S8,...X8,...B8,...Z8},ft=y8(Q8,b8);function to({isOpen:t,onClose:e,onConfirm:n,title:s="Confirm Action",message:i="Are you sure you want to proceed?",confirmText:l="Delete",cancelText:c="Cancel",isDangerous:d=!1}){return f.jsx(mn,{children:t&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[f.jsx(ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/20 backdrop-blur-sm"}),f.jsxs(ft.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden relative z-10 border border-cream-100",children:[f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[f.jsx("div",{className:`p-3 rounded-full ${d?"bg-red-50 text-red-500":"bg-amber-50 text-amber-500"}`,children:f.jsx(kk,{size:24})}),f.jsx("h3",{className:"text-xl font-bold text-cream-900",children:s})]}),f.jsx("p",{className:"text-cream-900/70 leading-relaxed mb-6 ml-14",children:i}),f.jsxs("div",{className:"flex gap-3 justify-end",children:[f.jsx("button",{onClick:e,className:"px-4 py-2 rounded-xl text-cream-700 font-medium hover:bg-cream-50 transition-colors",children:c}),f.jsx("button",{onClick:()=>{n(),e()},className:`px-4 py-2 rounded-xl text-white font-medium shadow-sm transition-colors ${d?"bg-red-500 hover:bg-red-600":"bg-cream-900 hover:bg-cream-800"}`,children:l})]})]}),f.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-cream-400 hover:text-cream-900 hover:bg-cream-50 rounded-lg transition-colors",children:f.jsx(Ja,{size:18})})]})]})})}const Op=[{name:"Default",prompt:""}],q0=()=>{const{t}=yn(),{personas:e,currentPersonaId:n,setCurrentPersonaId:s,addPersona:i,updatePersona:l,deletePersona:c,diarySettings:d,setDiarySettings:h}=fo(),[m,y]=T.useState(null),[b,x]=T.useState({name:"",description:"",replyStyle:"warm",customPrompt:""}),[S,N]=T.useState(!1),[E,j]=T.useState(null),[D,O]=T.useState(!1),[R,U]=T.useState({name:"",prompt:""}),[L,H]=T.useState(()=>{try{const C=localStorage.getItem("diary_style_custom_presets");return(C?JSON.parse(C):[]).filter(q=>q.name!=="Empathetic & Reflective")}catch(C){return console.error("Failed to load custom presets",C),[]}}),z=[...Op,...L];T.useEffect(()=>{localStorage.setItem("diary_style_custom_presets",JSON.stringify(L))},[L]),T.useEffect(()=>{(d.diaryStyle==="Empathetic & Reflective"||d.diaryStyle==="Custom")&&h({...d,diaryStyle:"Default",diaryStylePrompt:""})},[d,h]);const P=()=>{if(!R.name.trim()||!R.prompt.trim())return;if(z.some(I=>I.name===R.name)){alert("A preset with this name already exists.");return}const C={...R};H([...L,C]),h({...d,diaryStyle:C.name,diaryStylePrompt:C.prompt}),U({name:"",prompt:""}),O(!1)},Y=(C,I)=>{if(I.stopPropagation(),confirm(`Delete preset "${C}"?`)){const q=L.filter(oe=>oe.name!==C);H(q),d.diaryStyle===C&&h({...d,diaryStyle:Op[0].name,diaryStylePrompt:Op[0].prompt})}},Q=C=>{j(C),N(!0)},A=()=>{E&&(c(E),j(null),m===E&&y(null))},F=C=>{y(C.id);let I=C.name;C.id==="default"&&(C.name==="Default"||C.name==="Empathetic Companion")&&(I=t("settings.ai.defaultPersona.name")),x({name:I,description:C.id==="default"?t("settings.ai.defaultPersona.description"):C.description,replyStyle:C.replyStyle,customPrompt:C.customPrompt||""})},B=()=>{if(b.name.trim(),e.find(I=>I.id===m)?.isDefault&&t("settings.ai.defaultPersona.name"),m==="new"){const I=i({name:b.name,description:b.description,replyStyle:b.replyStyle,customPrompt:b.customPrompt});s(I)}else l(m,{name:b.name,description:b.description,replyStyle:b.replyStyle,customPrompt:b.customPrompt});y(null)},te=e.find(C=>C.id===m)?.isDefault,se=()=>{y("new"),x({name:t("settings.ai.createNew"),description:t("settings.ai.newPersonaDesc"),replyStyle:"warm",customPrompt:""})};return f.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-6 h-full overflow-y-auto custom-scrollbar",children:[f.jsx(to,{isOpen:S,onClose:()=>N(!1),onConfirm:A,title:t("settings.ai.deleteConfirmTitle"),message:t("settings.ai.deleteConfirmMessage"),confirmText:t("settings.ai.delete"),isDangerous:!0}),f.jsx("div",{className:"flex items-center justify-between mb-4",children:f.jsxs("h2",{className:"text-xl font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(tg,{className:"text-cream-900"}),t("settings.ai.title")]})}),f.jsx(mn,{mode:"wait",children:m?f.jsxs(ft.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-6 overflow-hidden",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-1",children:t("settings.ai.name")}),f.jsx("input",{value:b.name,onChange:C=>x({...b,name:C.target.value}),onBlur:()=>{e.find(I=>I.id===m)?.isDefault&&!b.name.trim()&&x(I=>({...I,name:t("settings.ai.defaultPersona.name")}))},className:"w-full p-3 bg-cream-50 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-1",children:t("settings.ai.description")}),f.jsx("input",{value:b.description,onChange:C=>x({...b,description:C.target.value}),disabled:te,className:Ne("w-full p-3 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300",te?"bg-cream-100 text-cream-500 cursor-not-allowed":"bg-cream-50")})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-1",children:t("settings.ai.replyStyle")}),f.jsxs("select",{value:b.replyStyle,onChange:C=>x({...b,replyStyle:C.target.value}),className:"w-full p-3 bg-cream-50 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300",children:[f.jsx("option",{value:"warm",children:t("settings.ai.styles.warm")}),f.jsx("option",{value:"analytical",children:t("settings.ai.styles.analytical")}),f.jsx("option",{value:"concise",children:t("settings.ai.styles.concise")}),f.jsx("option",{value:"humorous",children:t("settings.ai.styles.humorous")})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-1",children:t("settings.ai.customPrompt")}),f.jsx("textarea",{value:te?t("settings.ai.defaultSystemPromptHidden"):b.customPrompt,onChange:C=>x({...b,customPrompt:C.target.value}),disabled:te,rows:4,className:Ne("w-full p-3 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300",te?"bg-cream-100 text-cream-400 italic cursor-not-allowed":"bg-cream-50"),placeholder:t("settings.ai.promptPlaceholder")})]}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[!e.find(C=>C.id===m)?.isDefault&&f.jsx("button",{onClick:()=>Q(m),className:"px-4 py-3 rounded-xl border border-red-200 text-red-500 hover:bg-red-50 transition-colors",title:t("settings.ai.delete"),children:f.jsx(pn,{size:18})}),f.jsx("button",{onClick:()=>y(null),className:"flex-1 py-3 rounded-xl border border-cream-200 text-cream-900 hover:bg-cream-50 transition-colors",children:t("settings.ai.cancel")}),f.jsxs("button",{onClick:B,className:"flex-1 py-3 rounded-xl bg-cream-900 text-white hover:bg-cream-800 transition-colors flex items-center justify-center gap-2",children:[f.jsx(ao,{size:18}),t("settings.ai.savePersona")]})]})]}):f.jsxs(ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.map(C=>f.jsxs("div",{onClick:()=>s(C.id),className:Ne("p-4 rounded-xl border cursor-pointer transition-all relative group",n===C.id?"bg-cream-900 text-white border-cream-900 shadow-lg scale-[1.02]":"bg-white border-cream-200 hover:border-cream-300 hover:shadow-md text-cream-900"),children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(so,{size:18,className:n===C.id?"text-cream-200":"text-cream-400"}),f.jsx("h3",{className:"font-bold",children:C.id==="default"&&(C.name==="Empathetic Companion"||C.name==="Default")?t("settings.ai.defaultPersona.name"):C.name})]}),n===C.id&&f.jsx(ws,{size:18,className:"text-green-400"})]}),f.jsx("p",{className:Ne("text-sm mb-3",n===C.id?"text-cream-100":"text-cream-600"),children:C.id==="default"?t("settings.ai.defaultPersona.description"):C.description}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:Ne("text-xs px-2 py-1 rounded-md capitalize",n===C.id?"bg-white/20":"bg-cream-100 text-cream-700"),children:t(`settings.ai.styles.${C.replyStyle}`)||C.replyStyle})}),f.jsxs("div",{className:Ne("absolute right-2 bottom-2 transition-opacity flex gap-1",n===C.id?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[f.jsx("button",{onClick:I=>{I.stopPropagation(),F(C)},className:Ne("p-1.5 rounded-lg transition-colors",n===C.id?"hover:bg-white/20 text-white":"hover:bg-cream-100 text-cream-600"),children:f.jsx(tg,{size:14})}),!C.isDefault&&f.jsx("button",{onClick:I=>{I.stopPropagation(),Q(C.id)},className:Ne("p-1.5 rounded-lg transition-colors",n===C.id?"hover:bg-red-500/50 text-white":"hover:bg-red-100 text-red-500"),children:f.jsx(pn,{size:14})})]})]},C.id)),f.jsxs("button",{onClick:se,className:"w-full py-4 border-2 border-dashed border-cream-200 rounded-xl text-cream-400 hover:text-cream-900 hover:border-cream-400 transition-all flex items-center justify-center gap-2 font-medium",children:[f.jsx(Tr,{size:20}),t("settings.ai.createNew")]})]})}),!m&&f.jsxs("div",{className:"bg-cream-50 rounded-xl border border-cream-200 p-6 space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Wa,{size:20,className:"text-cream-900"}),f.jsx("h3",{className:"font-bold text-lg text-cream-900",children:t("settings.ai.globalStyle.title")})]}),f.jsx("p",{className:"text-sm text-cream-600 mb-4",children:t("settings.ai.globalStyle.description")}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-cream-500 mb-1",children:t("settings.ai.globalStyle.preset")}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("select",{value:d.diaryStyle,onChange:C=>{const I=C.target.value,q=z.find(ce=>ce.name===I);let oe=d.diaryStylePrompt;q&&(oe=q.prompt),h({...d,diaryStyle:I,diaryStylePrompt:oe})},className:"flex-1 p-2.5 bg-white border border-cream-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-cream-300 text-sm",children:z.map(C=>f.jsx("option",{value:C.name,children:C.name==="Default"?t("settings.ai.globalStyle.defaultPreset"):C.name},C.name))}),f.jsx("button",{onClick:()=>O(!D),className:"p-2.5 bg-white border border-cream-200 rounded-lg text-cream-600 hover:text-cream-900 hover:border-cream-300 transition-colors",title:t("settings.ai.globalStyle.addPreset"),children:f.jsx(Tr,{size:18})}),L.some(C=>C.name===d.diaryStyle)&&f.jsx("button",{onClick:C=>Y(d.diaryStyle,C),className:"p-2.5 bg-white border border-red-200 rounded-lg text-red-500 hover:bg-red-50 transition-colors",title:"Delete Current Preset",children:f.jsx(pn,{size:18})})]}),f.jsx(mn,{children:D&&f.jsxs(ft.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 p-3 bg-white rounded-lg border border-cream-200 space-y-3 overflow-hidden",children:[f.jsx("h4",{className:"text-xs font-bold text-cream-900",children:t("settings.ai.globalStyle.newPresetTitle")}),f.jsx("input",{placeholder:t("settings.ai.globalStyle.presetNamePlaceholder"),value:R.name,onChange:C=>U({...R,name:C.target.value}),className:"w-full p-2 bg-cream-50 border border-cream-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-cream-300"}),f.jsx("textarea",{placeholder:t("settings.ai.globalStyle.stylePromptPlaceholder"),value:R.prompt,onChange:C=>U({...R,prompt:C.target.value}),rows:2,className:"w-full p-2 bg-cream-50 border border-cream-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-cream-300 resize-y"}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>O(!1),className:"px-3 py-1.5 text-xs text-cream-600 hover:bg-cream-50 rounded",children:t("settings.ai.cancel")}),f.jsx("button",{onClick:P,disabled:!R.name||!R.prompt,className:"px-3 py-1.5 text-xs bg-cream-900 text-white rounded hover:bg-cream-800 disabled:opacity-50",children:t("settings.ai.globalStyle.addPreset")})]})]})})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-xs font-medium text-cream-500 mb-1",children:[t("settings.ai.globalStyle.wordCount"),": ",f.jsx("span",{className:"font-bold text-cream-900",children:d.wordCount})," ",t("settings.ai.globalStyle.words")]}),f.jsx("input",{type:"range",min:"100",max:"1000",step:"50",value:d.wordCount,onChange:C=>h({...d,wordCount:parseInt(C.target.value)}),className:"w-full h-2 bg-cream-200 rounded-lg appearance-none cursor-pointer accent-cream-900"}),f.jsxs("div",{className:"flex justify-between text-[10px] text-cream-400 mt-1",children:[f.jsx("span",{children:"100"}),f.jsx("span",{children:"500"}),f.jsx("span",{children:"1000"})]})]}),f.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-cream-200 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-cream-900 mb-0.5",children:t("settings.ai.globalStyle.withAiTrace")}),f.jsx("p",{className:"text-[10px] text-cream-500",children:t("settings.ai.globalStyle.withAiTraceDesc")})]}),f.jsx("button",{onClick:()=>h({...d,withAiTrace:!d.withAiTrace}),className:Ne("w-10 h-6 rounded-full transition-colors relative shrink-0",d.withAiTrace?"bg-cream-900":"bg-cream-200"),children:f.jsx("div",{className:Ne("w-4 h-4 bg-white rounded-full absolute top-1 transition-all shadow-sm",d.withAiTrace?"left-5":"left-1")})})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-xs font-medium text-cream-500 mb-1",children:[t("settings.ai.globalStyle.stylePrompt"),d.diaryStyle!=="Default"&&f.jsx("span",{className:"text-cream-400 font-normal ml-1",children:t("settings.ai.globalStyle.editable")})]}),f.jsx("textarea",{value:d.diaryStyle==="Default"?"Default":d.diaryStylePrompt,onChange:C=>{const I=C.target.value;h({...d,diaryStylePrompt:I}),L.some(q=>q.name===d.diaryStyle)&&H(q=>q.map(oe=>oe.name===d.diaryStyle?{...oe,prompt:I}:oe))},disabled:d.diaryStyle==="Default",rows:3,className:Ne("w-full p-3 bg-white border border-cream-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-cream-300 text-sm resize-none",d.diaryStyle==="Default"?"bg-cream-50 text-cream-400 cursor-not-allowed":"text-cream-900"),placeholder:"Style instructions..."})]})]})]})]})};function mE(){const{messages:t,isTyping:e,sendMessage:n,triggerAIResponse:s,currentPersona:i}=fo(),[l,c]=T.useState(""),[d,h]=T.useState(!1),[m,y]=T.useState(null),b=T.useRef(null);kr();const x=()=>{b.current?.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{x()},[t,e]);const S=()=>{l.trim()&&(n(l),c(""))},N=async()=>{e||await s()};return f.jsxs("div",{className:"flex flex-col h-full relative",children:[f.jsx("div",{className:"px-4 py-2 bg-cream-50 border-b border-cream-100 flex justify-center sticky top-0 z-10 shadow-sm",children:f.jsxs("div",{className:"bg-cream-100/50 px-3 py-1 rounded-full text-xs text-cream-600 flex items-center gap-1.5 cursor-pointer hover:bg-cream-100 transition-colors",onClick:()=>h(!0),children:[f.jsx(Wa,{size:12}),f.jsx("span",{className:"font-medium text-cream-900",children:i.name})]})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar bg-cream-50/30",children:[t.map(E=>f.jsx("div",{className:Ne("flex w-full",E.sender==="user"?"justify-end":"justify-start"),children:f.jsxs("div",{onClick:()=>y(m===E.id?null:E.id),className:Ne("max-w-[85%] p-3 rounded-2xl text-sm leading-relaxed shadow-sm relative transition-all cursor-pointer",E.sender==="user"?"bg-cream-900 text-white rounded-tr-none":"bg-white text-cream-900 border border-cream-100 rounded-tl-none"),children:[E.attachment&&E.attachment.type==="image"&&f.jsxs("div",{className:"mb-2 rounded-lg overflow-hidden relative min-h-[100px] bg-gray-50 flex items-center justify-center",children:[f.jsx("img",{src:E.attachment.url,alt:"Uploaded",className:"max-w-full h-auto max-h-[200px] object-cover",onError:j=>{console.error("Image rendering failed:",j),j.target.style.display="none",j.target.nextSibling.style.display="flex"}}),f.jsxs("div",{className:"hidden absolute inset-0 flex-col items-center justify-center text-cream-400 p-4 text-center",children:[f.jsx(Wa,{size:24,className:"mb-2 opacity-50"}),f.jsx("span",{className:"text-xs",children:"Image Error"})]})]}),E.text&&f.jsx("div",{className:"whitespace-pre-wrap",children:E.text})]})},E.id)),e&&f.jsx("div",{className:"flex justify-start",children:f.jsx("div",{className:"bg-white px-3 py-2 rounded-2xl rounded-tl-none border border-cream-100 shadow-sm",children:f.jsxs("div",{className:"flex gap-1",children:[f.jsx("span",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full typing-dot"}),f.jsx("span",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full typing-dot"}),f.jsx("span",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full typing-dot"})]})})}),f.jsx("div",{ref:b})]}),f.jsx("div",{className:"p-4 bg-white border-t border-cream-200",children:f.jsxs("div",{className:"relative",children:[f.jsx("input",{ref:inputRef,type:"text",value:l,onChange:E=>c(E.target.value),onCompositionStart:()=>setIsComposing(!0),onCompositionEnd:()=>setIsComposing(!1),onKeyDown:E=>{E.key==="Enter"&&!isComposing&&S()},placeholder:"Type your message...",className:"w-full pl-4 pr-24 py-3 bg-cream-50 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-200 text-sm transition-all"}),f.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[f.jsx("button",{onClick:S,disabled:!l.trim(),className:"p-1.5 text-cream-400 hover:text-cream-900 hover:bg-cream-200 rounded-lg transition-all disabled:opacity-50",title:"Send",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-message-circle","aria-hidden":"true",children:f.jsx("path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"})})}),f.jsx("button",{onClick:N,disabled:e||t.length===0,className:"p-1.5 text-cream-900 bg-cream-200 hover:bg-cream-300 rounded-lg transition-all disabled:opacity-50 disabled:bg-cream-100",title:"Reply",children:f.jsx(no,{size:18})})]})]})}),f.jsx(mn,{children:d&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-sm p-4",children:f.jsxs(ft.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-cream-100",children:[f.jsxs("h3",{className:"text-lg font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(Wa,{size:18,className:"text-cream-400"}),"AI Persona Settings"]}),f.jsx("button",{onClick:()=>h(!1),className:"p-2 text-cream-400 hover:bg-cream-50 rounded-lg transition-colors",children:f.jsx(Ja,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:f.jsx(q0,{})})]})})})]})}const J8=[{path:"/calendar",icon:Tl,label:"Calendar"},{path:"/categories",icon:Rf,label:"Categories"},{path:"/write",icon:yl,label:"Write",isPrimary:!0},{path:"/profile",icon:so,label:"Profile"},{path:"/settings",icon:zf,label:"Settings"}];function e9(){const{isRightSidebarOpen:t,toggleRightSidebar:e}=l0();return f.jsxs("div",{className:"flex flex-col h-[100dvh] bg-diary-bg text-cream-900 font-sans relative overflow-hidden supports-[height:100dvh]:h-[100dvh]",children:[f.jsx("main",{className:"flex-1 overflow-y-auto pb-[calc(7rem+env(safe-area-inset-bottom))] px-4 pt-[calc(1rem+env(safe-area-inset-top))] scroll-smooth",children:f.jsx(US,{})}),f.jsx(mn,{children:t&&f.jsxs(f.Fragment,{children:[f.jsx(ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50"}),f.jsxs(ft.aside,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed inset-y-0 right-0 w-[85%] max-w-sm bg-white shadow-2xl z-50 flex flex-col",children:[f.jsxs("div",{className:"p-4 border-b border-cream-200 flex items-center justify-between bg-white/50 backdrop-blur-sm",children:[f.jsxs("h2",{className:"font-semibold flex items-center gap-2 text-cream-900",children:[f.jsx(no,{size:18}),"AI Assistant"]}),f.jsx("button",{onClick:e,className:"p-2 hover:bg-cream-100 rounded-full text-cream-900/50 hover:text-cream-900 transition-colors",children:f.jsx(Ja,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(mE,{})})]})]})}),f.jsx("nav",{className:"fixed bottom-6 left-4 right-4 bg-white/90 backdrop-blur-xl border border-white/40 shadow-xl rounded-2xl z-40",children:f.jsx("div",{className:"flex justify-center items-center h-16 px-1 gap-1",children:J8.map(n=>f.jsx(lf,{to:n.path,className:({isActive:s})=>Ne("relative flex flex-col items-center justify-center w-full h-full transition-all duration-300",s?"text-cream-900":"text-cream-900/40 hover:text-cream-900/60",n.isPrimary&&"text-cream-900"),children:({isActive:s})=>f.jsx(f.Fragment,{children:n.isPrimary?f.jsx("div",{className:Ne("absolute -top-6 bg-cream-900 text-white p-3.5 rounded-full shadow-lg shadow-cream-900/20 transition-transform duration-300",s&&"scale-110"),children:f.jsx(n.icon,{size:24})}):f.jsxs("div",{className:"flex flex-col items-center gap-1",children:[f.jsx(n.icon,{size:22,strokeWidth:s?2.5:2,className:"transition-all"}),s&&f.jsx("span",{className:"w-1 h-1 bg-cream-900 rounded-full animate-in fade-in zoom-in"})]})})},n.path))})})]})}const ef={language:"en-US",primaryColor:"#4A453E",backgroundColor:"#FDFBF7",chatBgImage:null,bubbleCss:""},pE=T.createContext({theme:ef,updateTheme:()=>{},resetTheme:()=>{},t:t=>t});function t9({children:t}){const{t:e,i18n:n}=yn(),[s,i]=T.useState(()=>{try{const d=localStorage.getItem("app_theme"),h=d?JSON.parse(d):{};return h.language||(h.language=n.language||"en-US"),{...ef,...h}}catch{return ef}});T.useEffect(()=>{s.language&&s.language!==n.language&&n.changeLanguage(s.language)},[s.language,n]),T.useEffect(()=>{const d=h=>{h&&h!==s.language&&i(m=>({...m,language:h}))};return n.on("languageChanged",d),()=>{n.off("languageChanged",d)}},[s.language,n]),T.useEffect(()=>{localStorage.setItem("app_theme",JSON.stringify(s));const d=document.documentElement;d.style.setProperty("--color-cream-900",s.primaryColor),d.style.setProperty("--color-diary-bg",s.backgroundColor);let h=document.getElementById("custom-bubble-css");h||(h=document.createElement("style"),h.id="custom-bubble-css",document.head.appendChild(h)),h.textContent=s.bubbleCss||""},[s]);const l=d=>{i(h=>({...h,...d}))},c=()=>{i(d=>({...ef,language:d.language}))};return f.jsx(pE.Provider,{value:{theme:s,updateTheme:l,resetTheme:c,t:e},children:t})}const $0=()=>T.useContext(pE),n9={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},a9=(t,e,n)=>{n=n||{};let s;const i=n9[t];return typeof i=="string"?s=i:e===1?n.addSuffix&&i.oneWithSuffix?s=i.oneWithSuffix:s=i.one:n.addSuffix&&i.otherWithSuffix?s=i.otherWithSuffix.replace("{{count}}",String(e)):s=i.other.replace("{{count}}",String(e)),n.addSuffix?n.comparison&&n.comparison>0?s+"":s+"":s},s9={full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},r9={full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},i9={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},o9={date:es({formats:s9,defaultWidth:"full"}),time:es({formats:r9,defaultWidth:"full"}),dateTime:es({formats:i9,defaultWidth:"full"})},l9={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},c9=(t,e,n,s)=>l9[t],u9={narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},d9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},f9={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},h9={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},m9={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},p9={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},g9=(t,e)=>{const n=Number(t);switch(String(e?.unit)){case"year":return`${n}`;case"quarter":return`${n}`;case"month":return`${n}`;case"week":return`${n}`;case"date":return`${n}`;case"hour":return`${n}`;case"minute":return`${n}`;case"second":return`${n}`;default:return`${n}`}},y9={ordinalNumber:g9,era:rn({values:u9,defaultWidth:"wide"}),quarter:rn({values:d9,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:rn({values:f9,defaultWidth:"wide"}),day:rn({values:h9,defaultWidth:"wide"}),dayPeriod:rn({values:m9,defaultWidth:"wide",formattingValues:p9,defaultFormattingWidth:"wide"})},b9=/^?\d+(|||||||)?/i,x9=/\d+/i,v9={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},w9={narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},S9={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},N9={any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},T9={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},E9={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},A9={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},C9={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},j9={any:/^(AM|PM|||||||)/i},_9={any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},k9={ordinalNumber:If({matchPattern:b9,parsePattern:x9,valueCallback:function(t){return parseInt(t,10)}}),era:on({matchPatterns:v9,defaultMatchWidth:"wide",parsePatterns:w9,defaultParseWidth:"any"}),quarter:on({matchPatterns:S9,defaultMatchWidth:"wide",parsePatterns:N9,defaultParseWidth:"any",valueCallback:t=>t+1}),month:on({matchPatterns:T9,defaultMatchWidth:"wide",parsePatterns:E9,defaultParseWidth:"any"}),day:on({matchPatterns:A9,defaultMatchWidth:"wide",parsePatterns:C9,defaultParseWidth:"any"}),dayPeriod:on({matchPatterns:j9,defaultMatchWidth:"any",parsePatterns:_9,defaultParseWidth:"any"})},Hf={code:"ja",formatDistance:a9,formatLong:o9,formatRelative:c9,localize:y9,match:k9,options:{weekStartsOn:0,firstWeekContainsDate:1}},D9={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},O9=(t,e,n)=>{let s;const i=D9[t];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",String(e)),n?.addSuffix?n.comparison&&n.comparison>0?s+"":s+"":s},M9={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},R9={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},L9={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},P9={date:es({formats:M9,defaultWidth:"full"}),time:es({formats:R9,defaultWidth:"full"}),dateTime:es({formats:L9,defaultWidth:"full"})};function i2(t,e,n){const s="eeee p";return PO(t,e,n)?s:t.getTime()>e.getTime()?"''"+s:"''"+s}const z9={lastWeek:i2,yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:i2,other:"PP p"},I9=(t,e,n,s)=>{const i=z9[t];return typeof i=="function"?i(e,n,s):i},B9={narrow:["",""],abbreviated:["",""],wide:["",""]},U9={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},q9={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},$9={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},V9={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},H9={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},F9=(t,e)=>{const n=Number(t);switch(e?.unit){case"date":return n.toString()+"";case"hour":return n.toString()+"";case"minute":return n.toString()+"";case"second":return n.toString()+"";default:return" "+n.toString()}},G9={ordinalNumber:F9,era:rn({values:B9,defaultWidth:"wide"}),quarter:rn({values:U9,defaultWidth:"wide",argumentCallback:t=>t-1}),month:rn({values:q9,defaultWidth:"wide"}),day:rn({values:$9,defaultWidth:"wide"}),dayPeriod:rn({values:V9,defaultWidth:"wide",formattingValues:H9,defaultFormattingWidth:"wide"})},Y9=/^(\s*)?\d+(|||)?/i,K9=/\d+/i,W9={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},X9={any:[/^()/i,/^()/i]},Z9={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},Q9={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},J9={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},eP={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},tP={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},nP={any:[//i,//i,//i,//i,//i,//i,//i]},aP={any:/^(?|?||[]|?||?||)/i},sP={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},rP={ordinalNumber:If({matchPattern:Y9,parsePattern:K9,valueCallback:t=>parseInt(t,10)}),era:on({matchPatterns:W9,defaultMatchWidth:"wide",parsePatterns:X9,defaultParseWidth:"any"}),quarter:on({matchPatterns:Z9,defaultMatchWidth:"wide",parsePatterns:Q9,defaultParseWidth:"any",valueCallback:t=>t+1}),month:on({matchPatterns:J9,defaultMatchWidth:"wide",parsePatterns:eP,defaultParseWidth:"any"}),day:on({matchPatterns:tP,defaultMatchWidth:"wide",parsePatterns:nP,defaultParseWidth:"any"}),dayPeriod:on({matchPatterns:aP,defaultMatchWidth:"any",parsePatterns:sP,defaultParseWidth:"any"})},ns={code:"zh-CN",formatDistance:O9,formatLong:P9,formatRelative:I9,localize:G9,match:rP,options:{weekStartsOn:1,firstWeekContainsDate:4}},iP={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},oP=(t,e,n)=>{let s;const i=iP[t];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",String(e)),n?.addSuffix?n.comparison&&n.comparison>0?s+"":s+"":s},lP={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},cP={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},uP={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},dP={date:es({formats:lP,defaultWidth:"full"}),time:es({formats:cP,defaultWidth:"full"}),dateTime:es({formats:uP,defaultWidth:"full"})},fP={lastWeek:"''eeee p",yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:"''eeee p",other:"P"},hP=(t,e,n,s)=>fP[t],mP={narrow:["",""],abbreviated:["",""],wide:["",""]},pP={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},gP={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},yP={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},bP={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},xP={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},vP=(t,e)=>{const n=Number(t);switch(e?.unit){case"date":return n+"";case"hour":return n+"";case"minute":return n+"";case"second":return n+"";default:return" "+n}},wP={ordinalNumber:vP,era:rn({values:mP,defaultWidth:"wide"}),quarter:rn({values:pP,defaultWidth:"wide",argumentCallback:t=>t-1}),month:rn({values:gP,defaultWidth:"wide"}),day:rn({values:yP,defaultWidth:"wide"}),dayPeriod:rn({values:bP,defaultWidth:"wide",formattingValues:xP,defaultFormattingWidth:"wide"})},SP=/^(\s*)?\d+(|||)?/i,NP=/\d+/i,TP={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},EP={any:[/^()/i,/^()/i]},AP={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},CP={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},jP={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},_P={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},kP={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},DP={any:[//i,//i,//i,//i,//i,//i,//i]},OP={any:/^(?|?||[]|?||?|)/i},MP={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},RP={ordinalNumber:If({matchPattern:SP,parsePattern:NP,valueCallback:t=>parseInt(t,10)}),era:on({matchPatterns:TP,defaultMatchWidth:"wide",parsePatterns:EP,defaultParseWidth:"any"}),quarter:on({matchPatterns:AP,defaultMatchWidth:"wide",parsePatterns:CP,defaultParseWidth:"any",valueCallback:t=>t+1}),month:on({matchPatterns:jP,defaultMatchWidth:"wide",parsePatterns:_P,defaultParseWidth:"any"}),day:on({matchPatterns:kP,defaultMatchWidth:"wide",parsePatterns:DP,defaultParseWidth:"any"}),dayPeriod:on({matchPatterns:OP,defaultMatchWidth:"any",parsePatterns:MP,defaultParseWidth:"any"})},kl={code:"zh-TW",formatDistance:oP,formatLong:dP,formatRelative:hP,localize:wP,match:RP,options:{weekStartsOn:1,firstWeekContainsDate:4}};function gE({selectedDate:t,onDateSelect:e}){const{t:n,i18n:s}=yn(),[i,l]=T.useState(t?new Date(t):new Date),[c,d]=T.useState(!1),h=new Date,m=kr(),{getDiaryByDate:y}=uo(),x={en:gn,"en-US":gn,zh:ns,"zh-CN":ns,"zh-TW":kl}[s.language]||gn,S=PD(i),N=RD(S),E=Er(S,{locale:x}),j=Rv(N,{locale:x}),D=Mv({start:E,end:j}),O=Array.from({length:10},(A,F)=>LO(h)-5+F),R=Array.from({length:12},(A,F)=>pt(new Date(2024,F,1),"MMMM",{locale:x})),U=Mv({start:Er(new Date,{locale:x}),end:Rv(new Date,{locale:x})}).map(A=>pt(A,"EEEEE",{locale:x})),L=A=>{A.stopPropagation(),l(tM(i))},H=A=>{A.stopPropagation(),l(SN(i,1))},z=A=>{const F=pt(A,"yyyy-MM-dd");pt(new Date,"yyyy-MM-dd");const B=!!y(F);m(B?`/date/${F}`:`/write?date=${F}`)},P=()=>{m("/calendar")},Y=A=>{l(JO(i,A))},Q=A=>{l(eM(i,A))};return f.jsxs("div",{className:"w-full bg-cream-50 rounded-xl p-3 border border-cream-200 relative overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[f.jsxs("div",{className:"flex items-center gap-1 cursor-pointer hover:bg-cream-100 rounded-lg transition-colors p-1",onClick:P,title:"View Timeline",children:[f.jsx(Tl,{size:14,className:"text-cream-900/60"}),f.jsx("h3",{className:"text-sm font-semibold text-cream-900",children:pt(i,"MMMM yyyy",{locale:x})})]}),f.jsxs("div",{className:"flex gap-1 items-center",children:[f.jsx("button",{onClick:()=>d(!c),className:Ne("px-2 py-1 text-[10px] font-medium rounded-md transition-colors border",c?"bg-cream-900 text-white border-cream-900":"bg-white text-cream-900 border-cream-200 hover:bg-cream-100"),children:n(c?"common.close":"common.select")}),f.jsxs("div",{className:"flex gap-0.5",children:[f.jsx("button",{onClick:L,className:"p-1 hover:bg-cream-200 rounded-full transition-colors",children:f.jsx(ZS,{size:14})}),f.jsx("button",{onClick:H,className:"p-1 hover:bg-cream-200 rounded-full transition-colors",children:f.jsx(p_,{size:14})})]})]})]}),f.jsxs("div",{className:"relative",children:[f.jsx(mn,{children:c&&f.jsxs(ft.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute inset-0 bg-cream-50 z-10 flex flex-col gap-2 overflow-y-auto custom-scrollbar p-1",children:[f.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:R.map((A,F)=>f.jsx("button",{onClick:()=>Y(F),className:Ne("text-xs py-1.5 rounded-md transition-colors",F===i.getMonth()?"bg-cream-900 text-white":"hover:bg-cream-200 text-cream-900/80"),children:A.slice(0,3)},A))}),f.jsx("div",{className:"border-t border-cream-200 my-1"}),f.jsx("div",{className:"grid grid-cols-4 gap-2",children:O.map(A=>f.jsx("button",{onClick:()=>Q(A),className:Ne("text-xs py-1.5 rounded-md transition-colors",A===i.getFullYear()?"bg-cream-900 text-white":"hover:bg-cream-200 text-cream-900/80"),children:A},A))})]})}),f.jsxs("div",{className:Ne("transition-opacity duration-300",c?"opacity-20":"opacity-100"),children:[f.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-1",children:U.map((A,F)=>f.jsx("div",{className:"text-[10px] text-cream-900/40 font-medium",children:A},`${A}-${F}`))}),f.jsx("div",{className:"grid grid-cols-7 gap-1 text-center",children:D.map((A,F)=>{const B=pt(A,"yyyy-MM-dd"),te=DD(A,h),se=zO(A,i),C=!!y(B),I=t===B;return f.jsxs("div",{onClick:()=>z(A),className:Ne("aspect-square flex flex-col items-center justify-center text-xs rounded-full transition-all cursor-pointer relative",!se&&"text-cream-900/20",se&&"text-cream-900/80 hover:bg-cream-100",te&&!I&&"bg-cream-900/10 text-cream-900 font-medium",I&&"bg-cream-900 text-white font-medium shadow-md scale-105",!te&&!I&&C&&"font-semibold text-cream-900"),children:[f.jsx("span",{children:pt(A,"d")}),C&&f.jsx("div",{className:Ne("w-1 h-1 rounded-full mt-0.5",I?"bg-white":"bg-cream-900/40")})]},A.toString())})})]})]})]})}function LP(){const{isSidebarCollapsed:t,toggleSidebar:e,isRightSidebarOpen:n,toggleRightSidebar:s,rightSidebarWidth:i,setRightSidebarWidth:l}=l0(),{t:c}=$0(),d=[{path:"/categories",icon:WS,label:c("nav.categories")},{path:`/write?date=${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`,icon:yl,label:c("nav.write")},{path:"/profile",icon:so,label:c("nav.profile")},{path:"/settings",icon:zf,label:c("nav.settings")}],h=T.useRef(!1),m=T.useRef(null);T.useEffect(()=>{const b=S=>{if(!h.current)return;const N=window.innerWidth-S.clientX;N>250&&N<600&&l(N)},x=()=>{h.current=!1,document.body.style.cursor="default"};return document.addEventListener("mousemove",b),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",x)}},[l]);const y=b=>{h.current=!0,document.body.style.cursor="col-resize"};return f.jsxs("div",{className:"flex h-screen w-screen overflow-hidden bg-diary-bg",children:[f.jsxs(ft.aside,{animate:{width:t?80:280},transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col h-full bg-cream-50/50 border-r border-cream-200/60 shadow-sm relative z-20",children:[f.jsxs("div",{className:Ne("flex items-center transition-all",t?"justify-center p-4":"p-6 gap-3"),children:[f.jsx("button",{onClick:e,className:Ne("p-2 rounded-xl hover:bg-cream-100 text-cream-900 transition-colors",!t&&"-ml-2"),children:f.jsx("div",{className:"w-8 h-8 bg-cream-900 rounded-lg flex items-center justify-center text-white font-serif font-bold text-xl",children:"D"})}),f.jsx(ft.span,{animate:{opacity:t?0:1,width:t?0:"auto"},className:"text-xl font-bold text-cream-900 whitespace-nowrap overflow-hidden",children:c("layout.title")})]}),f.jsxs("div",{className:Ne("flex-1 overflow-y-auto px-4 custom-scrollbar",t&&"overflow-visible"),children:[f.jsx("div",{className:"mb-6",children:t?f.jsxs(lf,{to:"/calendar",className:({isActive:b})=>Ne("flex items-center justify-center w-full aspect-square rounded-xl transition-all group relative",b?"bg-white text-cream-900 shadow-sm border border-cream-100":"text-cream-900/60 hover:bg-cream-50 hover:text-cream-900"),children:[f.jsx(Tl,{size:20}),f.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-cream-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 whitespace-nowrap",children:c("nav.calendar")})]}):f.jsx(ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"overflow-visible",children:f.jsx(gE,{})})}),f.jsx("nav",{className:"space-y-2",children:d.map(b=>f.jsxs(lf,{to:b.path,className:({isActive:x})=>Ne("flex items-center gap-3 px-4 py-3 rounded-xl transition-all group relative",x?"bg-cream-900 text-white shadow-md":"text-cream-600 hover:bg-cream-100 hover:text-cream-900",t&&"justify-center px-2"),children:[f.jsx(b.icon,{size:20,strokeWidth:2}),!t&&f.jsx("span",{className:"font-medium",children:b.label}),t&&f.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-cream-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 transition-opacity",children:b.label})]},b.path))})]}),f.jsx("div",{className:"p-4 border-t border-cream-200/60 mt-auto",children:!t&&f.jsx(ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-cream-100/50 rounded-xl p-4 text-center",children:f.jsxs("p",{className:"text-xs text-cream-900/60 italic font-serif",children:['"',c("layout.quote"),'"']})})})]}),f.jsx("main",{className:"flex-1 overflow-hidden relative z-10 flex flex-col h-full",children:f.jsx("div",{className:"flex-1 p-6 md:p-8 h-full overflow-hidden flex flex-col",children:f.jsx(US,{})})}),n&&f.jsxs("aside",{ref:m,style:{width:i},className:"bg-white border-l border-cream-200 flex flex-col shadow-xl relative z-20 transition-none h-screen",children:[f.jsx("div",{onMouseDown:y,className:"absolute left-0 top-0 bottom-0 w-1 hover:w-1.5 cursor-col-resize hover:bg-cream-300 transition-all z-30 flex items-center justify-center group",children:f.jsx("div",{className:"h-8 w-1 bg-cream-300 rounded-full group-hover:bg-cream-400"})}),f.jsxs("div",{className:"p-4 border-b border-cream-200 flex items-center justify-between bg-white/50 backdrop-blur-sm",children:[f.jsxs("h2",{className:"font-semibold flex items-center gap-2 text-cream-900",children:[f.jsx(no,{size:18}),c("layout.aiAssistant")]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-green-100 text-green-700 rounded-full border border-green-200",children:c("layout.online")}),f.jsx("button",{onClick:s,className:"p-1 hover:bg-cream-100 rounded-md text-cream-900/50 hover:text-cream-900 transition-colors",children:f.jsx(sk,{size:16})})]})]}),f.jsx(mE,{})]})]})}function PP(){const t=G4();return t===void 0?null:f.jsx(ED,{children:t?f.jsx(e9,{}):f.jsx(LP,{})})}function zP(){const{t,i18n:e}=yn(),s={en:gn,"en-US":gn,zh:ns,"zh-CN":ns,"zh-TW":kl,ja:Hf}[e.language]||gn,{diaries:i,deleteDiary:l}=uo(),c=kr(),[d,h]=T.useState(!1),[m,y]=T.useState(null),[b,x]=T.useState(!1),[S,N]=T.useState(null),E=T.useMemo(()=>[...m?i.filter(z=>z.date===m):i].sort((z,P)=>{const Y=new Date(P.date)-new Date(z.date);return Y!==0?Y:z.createdAt&&P.createdAt?new Date(P.createdAt)-new Date(z.createdAt):0}).reduce((z,P)=>(z[P.date]||(z[P.date]=[]),z[P.date].push(P),z),{}),[i,m]),j=T.useMemo(()=>{const L=new Date,H=L.getMonth(),z=L.getDate(),P=L.getFullYear();return i.filter(Y=>{const Q=new Date(Y.date);return Q.getMonth()===H&&Q.getDate()===z&&Q.getFullYear()!==P})},[i]),D=(L,H)=>{L.stopPropagation(),N(H),x(!0)},O=()=>{S&&(l(S),N(null))},R=L=>{switch(L?.toLowerCase()){case"happy":return f.jsx(uf,{size:14});case"sad":return f.jsx(QS,{size:14});case"neutral":return f.jsx(eN,{size:14});case"excited":return f.jsx(i0,{size:14});case"loved":return f.jsx(Pf,{size:14});default:return f.jsx(XS,{size:14})}},U=L=>({"Daily Life":"!border-l-[#A4B494]",Work:"!border-l-[#9FB8AD]",Travel:"!border-l-[#B6C6C8]",Emotions:"!border-l-[#DBC4C3]",Dreams:"!border-l-[#BEC3C8]",Reading:"!border-l-[#E2D5C4]"})[L]||"!border-l-[#D1D5DB]";return f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx(to,{isOpen:b,onClose:()=>x(!1),onConfirm:O,title:t("timeline.delete_title"),message:t("timeline.delete_confirm"),confirmText:t("timeline.delete_button"),isDangerous:!0}),f.jsxs("div",{className:"flex items-center justify-between mb-6 shrink-0",children:[f.jsxs("h1",{className:"text-2xl font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(Tl,{className:"text-cream-900"}),t("timeline.title")]}),f.jsx("button",{onClick:()=>h(!d),className:Ne("p-2 rounded-xl transition-all flex items-center gap-2 text-sm font-medium",d?"bg-cream-900 text-white shadow-md":"bg-white text-cream-900 shadow-sm border border-cream-100 hover:bg-cream-50"),title:t(d?"timeline.hide_calendar":"timeline.select_date"),children:f.jsx(l_,{size:20})})]}),f.jsx(mn,{children:d&&f.jsx(ft.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:24},exit:{height:0,opacity:0,marginBottom:0},className:"overflow-hidden shrink-0",children:f.jsx(gE,{})})}),f.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar relative pl-1 pr-4",children:[j.length>0&&f.jsx("div",{className:"mb-10 w-[100%] px-4 pl-12",children:f.jsx("div",{className:"space-y-4",children:j.map(L=>{const H=L.images&&L.images.length>0?L.images[0]:null;return f.jsxs("div",{onClick:()=>c(`/diary/${L.id}`),className:"bg-white rounded-[12px] py-4 px-6 shadow-sm border border-cream-100 cursor-pointer hover:shadow-md transition-all relative overflow-hidden group text-center",children:[H?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-105",style:{backgroundImage:`url(${H})`}}),f.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-[2px]"})]}):null,f.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[f.jsxs("span",{className:"text-[10px] font-bold text-cream-400 uppercase tracking-[0.2em] mb-1",children:[new Date().getFullYear()-new Date(L.date).getFullYear()," Year",new Date().getFullYear()-new Date(L.date).getFullYear()>1?"s":""," Ago  ",pt(wr(L.date),"MMMM do")]}),f.jsx("div",{className:"mb-1 text-cream-300",children:f.jsx(dk,{size:16,className:"fill-current opacity-20"})}),f.jsxs("p",{className:"text-cream-800 text-lg leading-relaxed font-serif italic mb-3 max-w-3xl mx-auto",children:['"',L.summary||L.content.replace(/<[^>]*>?/gm,"").substring(0,100)+"...",'"']}),f.jsx("div",{className:"w-8 h-px bg-cream-200 mb-2"}),f.jsxs("div",{className:"text-xs font-medium text-cream-400 group-hover:text-cream-600 transition-colors flex items-center gap-1",children:["Read Memory ",f.jsx(KS,{size:12})]})]})]},L.id)})})}),Object.keys(E).length===0?f.jsx("div",{className:"h-full flex flex-col items-center justify-center text-cream-900/40",children:f.jsx("p",{children:t("timeline.no_memories")})}):f.jsx("div",{className:"pb-12",children:Object.entries(E).map(([L,H],z)=>f.jsxs("div",{className:"mb-10 relative",children:[f.jsxs("div",{className:"flex items-baseline gap-3 mb-6 ml-0",children:[f.jsx("h2",{className:"text-3xl font-bold text-cream-900 tracking-tight",children:pt(wr(L),"MMM d",{locale:s})}),f.jsx("span",{className:"text-sm font-bold text-cream-400 uppercase tracking-widest",children:pt(wr(L),"EEE",{locale:s})})]}),f.jsx("div",{className:"relative ml-6 border-l-2 border-cream-200 pl-10 space-y-8 pb-4",children:H.map((P,Y)=>{const Q=P.createdAt?pt(new Date(P.createdAt),"HH:mm"):null;return f.jsxs(ft.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:Y*.05+z*.1},className:"relative group",onClick:()=>c(`/diary/${P.id}`),children:[f.jsx("div",{className:"absolute -left-[37px] top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-cream-50 border-[3px] border-cream-300 box-border z-10 transition-colors group-hover:border-cream-400"}),f.jsxs("div",{className:Ne("bg-white rounded-[10px] p-5 shadow-sm border border-cream-100 group-hover:shadow-md group-hover:border-cream-200 transition-all cursor-pointer relative","border-l-[4px]",P.category?U(P.category):"border-l-cream-200"),children:[f.jsxs("div",{className:"space-y-2 mb-3",children:[P.title&&f.jsx("h3",{className:"font-bold text-cream-900 text-lg leading-tight",children:P.title}),f.jsx("div",{className:"text-cream-900/80 text-sm leading-relaxed line-clamp-3 font-serif",dangerouslySetInnerHTML:{__html:P.content}})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t border-cream-50",children:[Q&&f.jsx("span",{className:"text-xs font-semibold text-cream-400 mr-2 tabular-nums",children:Q}),P.mood&&f.jsxs("span",{className:"px-2 py-0.5 bg-cream-50 text-cream-500 rounded-full text-xs border border-cream-100 flex items-center gap-1",children:[R(P.mood),t(`moods.${P.mood.toLowerCase()}`,{defaultValue:P.mood})]}),P.category&&f.jsxs("span",{className:"px-2 py-0.5 bg-amber-50 text-amber-600 rounded-full text-xs font-medium border border-amber-100 flex items-center gap-1",children:[f.jsx(s0,{size:10}),P.category]}),P.tags&&Array.isArray(P.tags)&&P.tags.map((A,F)=>f.jsxs("span",{className:"text-xs text-cream-400 font-medium",children:["#",A]},F))]}),f.jsx("button",{onClick:A=>D(A,P.id),className:"absolute top-4 right-4 p-2 text-cream-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-all opacity-0 group-hover:opacity-100",title:t("timeline.delete_title"),children:f.jsx(pn,{size:16})})]})]},P.id)})})]},L))})]})]})}var yE=typeof global=="object"&&global&&global.Object===Object&&global,IP=typeof self=="object"&&self&&self.Object===Object&&self,Ys=yE||IP||Function("return this")(),Si=Ys.Symbol,bE=Object.prototype,BP=bE.hasOwnProperty,UP=bE.toString,jc=Si?Si.toStringTag:void 0;function qP(t){var e=BP.call(t,jc),n=t[jc];try{t[jc]=void 0;var s=!0}catch{}var i=UP.call(t);return s&&(e?t[jc]=n:delete t[jc]),i}var $P=Object.prototype,VP=$P.toString;function HP(t){return VP.call(t)}var FP="[object Null]",GP="[object Undefined]",o2=Si?Si.toStringTag:void 0;function Dl(t){return t==null?t===void 0?GP:FP:o2&&o2 in Object(t)?qP(t):HP(t)}function Cr(t){return t!=null&&typeof t=="object"}var ro=Array.isArray;function Ti(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function xE(t){return t}var YP="[object AsyncFunction]",KP="[object Function]",WP="[object GeneratorFunction]",XP="[object Proxy]";function V0(t){if(!Ti(t))return!1;var e=Dl(t);return e==KP||e==WP||e==YP||e==XP}var Mp=Ys["__core-js_shared__"],l2=(function(){var t=/[^.]+$/.exec(Mp&&Mp.keys&&Mp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function ZP(t){return!!l2&&l2 in t}var QP=Function.prototype,JP=QP.toString;function ho(t){if(t!=null){try{return JP.call(t)}catch{}try{return t+""}catch{}}return""}var ez=/[\\^$.*+?()[\]{}|]/g,tz=/^\[object .+?Constructor\]$/,nz=Function.prototype,az=Object.prototype,sz=nz.toString,rz=az.hasOwnProperty,iz=RegExp("^"+sz.call(rz).replace(ez,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oz(t){if(!Ti(t)||ZP(t))return!1;var e=V0(t)?iz:tz;return e.test(ho(t))}function lz(t,e){return t?.[e]}function mo(t,e){var n=lz(t,e);return oz(n)?n:void 0}var kg=mo(Ys,"WeakMap"),c2=Object.create,cz=(function(){function t(){}return function(e){if(!Ti(e))return{};if(c2)return c2(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function uz(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function dz(t,e){var n=-1,s=t.length;for(e||(e=Array(s));++n<s;)e[n]=t[n];return e}var fz=800,hz=16,mz=Date.now;function pz(t){var e=0,n=0;return function(){var s=mz(),i=hz-(s-n);if(n=s,i>0){if(++e>=fz)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function gz(t){return function(){return t}}var Sf=(function(){try{var t=mo(Object,"defineProperty");return t({},"",{}),t}catch{}})(),yz=Sf?function(t,e){return Sf(t,"toString",{configurable:!0,enumerable:!1,value:gz(e),writable:!0})}:xE,bz=pz(yz);function xz(t,e){for(var n=-1,s=t==null?0:t.length;++n<s&&e(t[n],n,t)!==!1;);return t}var vz=9007199254740991,wz=/^(?:0|[1-9]\d*)$/;function vE(t,e){var n=typeof t;return e=e??vz,!!e&&(n=="number"||n!="symbol"&&wz.test(t))&&t>-1&&t%1==0&&t<e}function H0(t,e,n){e=="__proto__"&&Sf?Sf(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function hu(t,e){return t===e||t!==t&&e!==e}var Sz=Object.prototype,Nz=Sz.hasOwnProperty;function wE(t,e,n){var s=t[e];(!(Nz.call(t,e)&&hu(s,n))||n===void 0&&!(e in t))&&H0(t,e,n)}function Tz(t,e,n,s){var i=!n;n||(n={});for(var l=-1,c=e.length;++l<c;){var d=e[l],h=void 0;h===void 0&&(h=t[d]),i?H0(n,d,h):wE(n,d,h)}return n}var u2=Math.max;function Ez(t,e,n){return e=u2(e===void 0?t.length-1:e,0),function(){for(var s=arguments,i=-1,l=u2(s.length-e,0),c=Array(l);++i<l;)c[i]=s[e+i];i=-1;for(var d=Array(e+1);++i<e;)d[i]=s[i];return d[e]=n(c),uz(t,this,d)}}function Az(t,e){return bz(Ez(t,e,xE),t+"")}var Cz=9007199254740991;function SE(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Cz}function Ff(t){return t!=null&&SE(t.length)&&!V0(t)}function jz(t,e,n){if(!Ti(n))return!1;var s=typeof e;return(s=="number"?Ff(n)&&vE(e,n.length):s=="string"&&e in n)?hu(n[e],t):!1}function _z(t){return Az(function(e,n){var s=-1,i=n.length,l=i>1?n[i-1]:void 0,c=i>2?n[2]:void 0;for(l=t.length>3&&typeof l=="function"?(i--,l):void 0,c&&jz(n[0],n[1],c)&&(l=i<3?void 0:l,i=1),e=Object(e);++s<i;){var d=n[s];d&&t(e,d,s,l)}return e})}var kz=Object.prototype;function F0(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||kz;return t===n}function Dz(t,e){for(var n=-1,s=Array(t);++n<t;)s[n]=e(n);return s}var Oz="[object Arguments]";function d2(t){return Cr(t)&&Dl(t)==Oz}var NE=Object.prototype,Mz=NE.hasOwnProperty,Rz=NE.propertyIsEnumerable,Dg=d2((function(){return arguments})())?d2:function(t){return Cr(t)&&Mz.call(t,"callee")&&!Rz.call(t,"callee")};function Lz(){return!1}var TE=typeof Ma=="object"&&Ma&&!Ma.nodeType&&Ma,f2=TE&&typeof Ra=="object"&&Ra&&!Ra.nodeType&&Ra,Pz=f2&&f2.exports===TE,h2=Pz?Ys.Buffer:void 0,zz=h2?h2.isBuffer:void 0,Jc=zz||Lz,Iz="[object Arguments]",Bz="[object Array]",Uz="[object Boolean]",qz="[object Date]",$z="[object Error]",Vz="[object Function]",Hz="[object Map]",Fz="[object Number]",Gz="[object Object]",Yz="[object RegExp]",Kz="[object Set]",Wz="[object String]",Xz="[object WeakMap]",Zz="[object ArrayBuffer]",Qz="[object DataView]",Jz="[object Float32Array]",eI="[object Float64Array]",tI="[object Int8Array]",nI="[object Int16Array]",aI="[object Int32Array]",sI="[object Uint8Array]",rI="[object Uint8ClampedArray]",iI="[object Uint16Array]",oI="[object Uint32Array]",Dt={};Dt[Jz]=Dt[eI]=Dt[tI]=Dt[nI]=Dt[aI]=Dt[sI]=Dt[rI]=Dt[iI]=Dt[oI]=!0;Dt[Iz]=Dt[Bz]=Dt[Zz]=Dt[Uz]=Dt[Qz]=Dt[qz]=Dt[$z]=Dt[Vz]=Dt[Hz]=Dt[Fz]=Dt[Gz]=Dt[Yz]=Dt[Kz]=Dt[Wz]=Dt[Xz]=!1;function lI(t){return Cr(t)&&SE(t.length)&&!!Dt[Dl(t)]}function G0(t){return function(e){return t(e)}}var EE=typeof Ma=="object"&&Ma&&!Ma.nodeType&&Ma,Hc=EE&&typeof Ra=="object"&&Ra&&!Ra.nodeType&&Ra,cI=Hc&&Hc.exports===EE,Rp=cI&&yE.process,xl=(function(){try{var t=Hc&&Hc.require&&Hc.require("util").types;return t||Rp&&Rp.binding&&Rp.binding("util")}catch{}})(),m2=xl&&xl.isTypedArray,Y0=m2?G0(m2):lI,uI=Object.prototype,dI=uI.hasOwnProperty;function AE(t,e){var n=ro(t),s=!n&&Dg(t),i=!n&&!s&&Jc(t),l=!n&&!s&&!i&&Y0(t),c=n||s||i||l,d=c?Dz(t.length,String):[],h=d.length;for(var m in t)(e||dI.call(t,m))&&!(c&&(m=="length"||i&&(m=="offset"||m=="parent")||l&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||vE(m,h)))&&d.push(m);return d}function CE(t,e){return function(n){return t(e(n))}}var fI=CE(Object.keys,Object),hI=Object.prototype,mI=hI.hasOwnProperty;function pI(t){if(!F0(t))return fI(t);var e=[];for(var n in Object(t))mI.call(t,n)&&n!="constructor"&&e.push(n);return e}function gI(t){return Ff(t)?AE(t):pI(t)}function yI(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var bI=Object.prototype,xI=bI.hasOwnProperty;function vI(t){if(!Ti(t))return yI(t);var e=F0(t),n=[];for(var s in t)s=="constructor"&&(e||!xI.call(t,s))||n.push(s);return n}function jE(t){return Ff(t)?AE(t,!0):vI(t)}var eu=mo(Object,"create");function wI(){this.__data__=eu?eu(null):{},this.size=0}function SI(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var NI="__lodash_hash_undefined__",TI=Object.prototype,EI=TI.hasOwnProperty;function AI(t){var e=this.__data__;if(eu){var n=e[t];return n===NI?void 0:n}return EI.call(e,t)?e[t]:void 0}var CI=Object.prototype,jI=CI.hasOwnProperty;function _I(t){var e=this.__data__;return eu?e[t]!==void 0:jI.call(e,t)}var kI="__lodash_hash_undefined__";function DI(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=eu&&e===void 0?kI:e,this}function io(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}io.prototype.clear=wI;io.prototype.delete=SI;io.prototype.get=AI;io.prototype.has=_I;io.prototype.set=DI;function OI(){this.__data__=[],this.size=0}function Gf(t,e){for(var n=t.length;n--;)if(hu(t[n][0],e))return n;return-1}var MI=Array.prototype,RI=MI.splice;function LI(t){var e=this.__data__,n=Gf(e,t);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():RI.call(e,n,1),--this.size,!0}function PI(t){var e=this.__data__,n=Gf(e,t);return n<0?void 0:e[n][1]}function zI(t){return Gf(this.__data__,t)>-1}function II(t,e){var n=this.__data__,s=Gf(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}function Dr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}Dr.prototype.clear=OI;Dr.prototype.delete=LI;Dr.prototype.get=PI;Dr.prototype.has=zI;Dr.prototype.set=II;var tu=mo(Ys,"Map");function BI(){this.size=0,this.__data__={hash:new io,map:new(tu||Dr),string:new io}}function UI(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Yf(t,e){var n=t.__data__;return UI(e)?n[typeof e=="string"?"string":"hash"]:n.map}function qI(t){var e=Yf(this,t).delete(t);return this.size-=e?1:0,e}function $I(t){return Yf(this,t).get(t)}function VI(t){return Yf(this,t).has(t)}function HI(t,e){var n=Yf(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}function po(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}po.prototype.clear=BI;po.prototype.delete=qI;po.prototype.get=$I;po.prototype.has=VI;po.prototype.set=HI;function FI(t,e){for(var n=-1,s=e.length,i=t.length;++n<s;)t[i+n]=e[n];return t}var _E=CE(Object.getPrototypeOf,Object),GI="[object Object]",YI=Function.prototype,KI=Object.prototype,kE=YI.toString,WI=KI.hasOwnProperty,XI=kE.call(Object);function ZI(t){if(!Cr(t)||Dl(t)!=GI)return!1;var e=_E(t);if(e===null)return!0;var n=WI.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&kE.call(n)==XI}function QI(){this.__data__=new Dr,this.size=0}function JI(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function e7(t){return this.__data__.get(t)}function t7(t){return this.__data__.has(t)}var n7=200;function a7(t,e){var n=this.__data__;if(n instanceof Dr){var s=n.__data__;if(!tu||s.length<n7-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new po(s)}return n.set(t,e),this.size=n.size,this}function Hs(t){var e=this.__data__=new Dr(t);this.size=e.size}Hs.prototype.clear=QI;Hs.prototype.delete=JI;Hs.prototype.get=e7;Hs.prototype.has=t7;Hs.prototype.set=a7;var DE=typeof Ma=="object"&&Ma&&!Ma.nodeType&&Ma,p2=DE&&typeof Ra=="object"&&Ra&&!Ra.nodeType&&Ra,s7=p2&&p2.exports===DE,g2=s7?Ys.Buffer:void 0,y2=g2?g2.allocUnsafe:void 0;function OE(t,e){if(e)return t.slice();var n=t.length,s=y2?y2(n):new t.constructor(n);return t.copy(s),s}function r7(t,e){for(var n=-1,s=t==null?0:t.length,i=0,l=[];++n<s;){var c=t[n];e(c,n,t)&&(l[i++]=c)}return l}function i7(){return[]}var o7=Object.prototype,l7=o7.propertyIsEnumerable,b2=Object.getOwnPropertySymbols,c7=b2?function(t){return t==null?[]:(t=Object(t),r7(b2(t),function(e){return l7.call(t,e)}))}:i7;function u7(t,e,n){var s=e(t);return ro(t)?s:FI(s,n(t))}function Og(t){return u7(t,gI,c7)}var Mg=mo(Ys,"DataView"),Rg=mo(Ys,"Promise"),Lg=mo(Ys,"Set"),x2="[object Map]",d7="[object Object]",v2="[object Promise]",w2="[object Set]",S2="[object WeakMap]",N2="[object DataView]",f7=ho(Mg),h7=ho(tu),m7=ho(Rg),p7=ho(Lg),g7=ho(kg),ys=Dl;(Mg&&ys(new Mg(new ArrayBuffer(1)))!=N2||tu&&ys(new tu)!=x2||Rg&&ys(Rg.resolve())!=v2||Lg&&ys(new Lg)!=w2||kg&&ys(new kg)!=S2)&&(ys=function(t){var e=Dl(t),n=e==d7?t.constructor:void 0,s=n?ho(n):"";if(s)switch(s){case f7:return N2;case h7:return x2;case m7:return v2;case p7:return w2;case g7:return S2}return e});var y7=Object.prototype,b7=y7.hasOwnProperty;function x7(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&b7.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Nf=Ys.Uint8Array;function K0(t){var e=new t.constructor(t.byteLength);return new Nf(e).set(new Nf(t)),e}function v7(t,e){var n=K0(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var w7=/\w*$/;function S7(t){var e=new t.constructor(t.source,w7.exec(t));return e.lastIndex=t.lastIndex,e}var T2=Si?Si.prototype:void 0,E2=T2?T2.valueOf:void 0;function N7(t){return E2?Object(E2.call(t)):{}}function ME(t,e){var n=e?K0(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var T7="[object Boolean]",E7="[object Date]",A7="[object Map]",C7="[object Number]",j7="[object RegExp]",_7="[object Set]",k7="[object String]",D7="[object Symbol]",O7="[object ArrayBuffer]",M7="[object DataView]",R7="[object Float32Array]",L7="[object Float64Array]",P7="[object Int8Array]",z7="[object Int16Array]",I7="[object Int32Array]",B7="[object Uint8Array]",U7="[object Uint8ClampedArray]",q7="[object Uint16Array]",$7="[object Uint32Array]";function V7(t,e,n){var s=t.constructor;switch(e){case O7:return K0(t);case T7:case E7:return new s(+t);case M7:return v7(t);case R7:case L7:case P7:case z7:case I7:case B7:case U7:case q7:case $7:return ME(t,n);case A7:return new s;case C7:case k7:return new s(t);case j7:return S7(t);case _7:return new s;case D7:return N7(t)}}function RE(t){return typeof t.constructor=="function"&&!F0(t)?cz(_E(t)):{}}var H7="[object Map]";function F7(t){return Cr(t)&&ys(t)==H7}var A2=xl&&xl.isMap,G7=A2?G0(A2):F7,Y7="[object Set]";function K7(t){return Cr(t)&&ys(t)==Y7}var C2=xl&&xl.isSet,W7=C2?G0(C2):K7,X7=1,LE="[object Arguments]",Z7="[object Array]",Q7="[object Boolean]",J7="[object Date]",eB="[object Error]",PE="[object Function]",tB="[object GeneratorFunction]",nB="[object Map]",aB="[object Number]",zE="[object Object]",sB="[object RegExp]",rB="[object Set]",iB="[object String]",oB="[object Symbol]",lB="[object WeakMap]",cB="[object ArrayBuffer]",uB="[object DataView]",dB="[object Float32Array]",fB="[object Float64Array]",hB="[object Int8Array]",mB="[object Int16Array]",pB="[object Int32Array]",gB="[object Uint8Array]",yB="[object Uint8ClampedArray]",bB="[object Uint16Array]",xB="[object Uint32Array]",Et={};Et[LE]=Et[Z7]=Et[cB]=Et[uB]=Et[Q7]=Et[J7]=Et[dB]=Et[fB]=Et[hB]=Et[mB]=Et[pB]=Et[nB]=Et[aB]=Et[zE]=Et[sB]=Et[rB]=Et[iB]=Et[oB]=Et[gB]=Et[yB]=Et[bB]=Et[xB]=!0;Et[eB]=Et[PE]=Et[lB]=!1;function tf(t,e,n,s,i,l){var c,d=e&X7;if(c!==void 0)return c;if(!Ti(t))return t;var h=ro(t);if(h)c=x7(t);else{var m=ys(t),y=m==PE||m==tB;if(Jc(t))return OE(t,d);if(m==zE||m==LE||y&&!i)c=y?{}:RE(t);else{if(!Et[m])return i?t:{};c=V7(t,m,d)}}l||(l=new Hs);var b=l.get(t);if(b)return b;l.set(t,c),W7(t)?t.forEach(function(N){c.add(tf(N,e,n,N,t,l))}):G7(t)&&t.forEach(function(N,E){c.set(E,tf(N,e,n,E,t,l))});var x=Og,S=h?void 0:x(t);return xz(S||t,function(N,E){S&&(E=N,N=t[E]),wE(c,E,tf(N,e,n,E,t,l))}),c}var vB=1,wB=4;function hl(t){return tf(t,vB|wB)}var SB="__lodash_hash_undefined__";function NB(t){return this.__data__.set(t,SB),this}function TB(t){return this.__data__.has(t)}function Tf(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new po;++e<n;)this.add(t[e])}Tf.prototype.add=Tf.prototype.push=NB;Tf.prototype.has=TB;function EB(t,e){for(var n=-1,s=t==null?0:t.length;++n<s;)if(e(t[n],n,t))return!0;return!1}function AB(t,e){return t.has(e)}var CB=1,jB=2;function IE(t,e,n,s,i,l){var c=n&CB,d=t.length,h=e.length;if(d!=h&&!(c&&h>d))return!1;var m=l.get(t),y=l.get(e);if(m&&y)return m==e&&y==t;var b=-1,x=!0,S=n&jB?new Tf:void 0;for(l.set(t,e),l.set(e,t);++b<d;){var N=t[b],E=e[b];if(s)var j=c?s(E,N,b,e,t,l):s(N,E,b,t,e,l);if(j!==void 0){if(j)continue;x=!1;break}if(S){if(!EB(e,function(D,O){if(!AB(S,O)&&(N===D||i(N,D,n,s,l)))return S.push(O)})){x=!1;break}}else if(!(N===E||i(N,E,n,s,l))){x=!1;break}}return l.delete(t),l.delete(e),x}function _B(t){var e=-1,n=Array(t.size);return t.forEach(function(s,i){n[++e]=[i,s]}),n}function kB(t){var e=-1,n=Array(t.size);return t.forEach(function(s){n[++e]=s}),n}var DB=1,OB=2,MB="[object Boolean]",RB="[object Date]",LB="[object Error]",PB="[object Map]",zB="[object Number]",IB="[object RegExp]",BB="[object Set]",UB="[object String]",qB="[object Symbol]",$B="[object ArrayBuffer]",VB="[object DataView]",j2=Si?Si.prototype:void 0,Lp=j2?j2.valueOf:void 0;function HB(t,e,n,s,i,l,c){switch(n){case VB:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $B:return!(t.byteLength!=e.byteLength||!l(new Nf(t),new Nf(e)));case MB:case RB:case zB:return hu(+t,+e);case LB:return t.name==e.name&&t.message==e.message;case IB:case UB:return t==e+"";case PB:var d=_B;case BB:var h=s&DB;if(d||(d=kB),t.size!=e.size&&!h)return!1;var m=c.get(t);if(m)return m==e;s|=OB,c.set(t,e);var y=IE(d(t),d(e),s,i,l,c);return c.delete(t),y;case qB:if(Lp)return Lp.call(t)==Lp.call(e)}return!1}var FB=1,GB=Object.prototype,YB=GB.hasOwnProperty;function KB(t,e,n,s,i,l){var c=n&FB,d=Og(t),h=d.length,m=Og(e),y=m.length;if(h!=y&&!c)return!1;for(var b=h;b--;){var x=d[b];if(!(c?x in e:YB.call(e,x)))return!1}var S=l.get(t),N=l.get(e);if(S&&N)return S==e&&N==t;var E=!0;l.set(t,e),l.set(e,t);for(var j=c;++b<h;){x=d[b];var D=t[x],O=e[x];if(s)var R=c?s(O,D,x,e,t,l):s(D,O,x,t,e,l);if(!(R===void 0?D===O||i(D,O,n,s,l):R)){E=!1;break}j||(j=x=="constructor")}if(E&&!j){var U=t.constructor,L=e.constructor;U!=L&&"constructor"in t&&"constructor"in e&&!(typeof U=="function"&&U instanceof U&&typeof L=="function"&&L instanceof L)&&(E=!1)}return l.delete(t),l.delete(e),E}var WB=1,_2="[object Arguments]",k2="[object Array]",Od="[object Object]",XB=Object.prototype,D2=XB.hasOwnProperty;function ZB(t,e,n,s,i,l){var c=ro(t),d=ro(e),h=c?k2:ys(t),m=d?k2:ys(e);h=h==_2?Od:h,m=m==_2?Od:m;var y=h==Od,b=m==Od,x=h==m;if(x&&Jc(t)){if(!Jc(e))return!1;c=!0,y=!1}if(x&&!y)return l||(l=new Hs),c||Y0(t)?IE(t,e,n,s,i,l):HB(t,e,h,n,s,i,l);if(!(n&WB)){var S=y&&D2.call(t,"__wrapped__"),N=b&&D2.call(e,"__wrapped__");if(S||N){var E=S?t.value():t,j=N?e.value():e;return l||(l=new Hs),i(E,j,n,s,l)}}return x?(l||(l=new Hs),KB(t,e,n,s,i,l)):!1}function BE(t,e,n,s,i){return t===e?!0:t==null||e==null||!Cr(t)&&!Cr(e)?t!==t&&e!==e:ZB(t,e,n,s,BE,i)}function QB(t){return function(e,n,s){for(var i=-1,l=Object(e),c=s(e),d=c.length;d--;){var h=c[++i];if(n(l[h],h,l)===!1)break}return e}}var JB=QB();function Pg(t,e,n){(n!==void 0&&!hu(t[e],n)||n===void 0&&!(e in t))&&H0(t,e,n)}function eU(t){return Cr(t)&&Ff(t)}function zg(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function tU(t){return Tz(t,jE(t))}function nU(t,e,n,s,i,l,c){var d=zg(t,n),h=zg(e,n),m=c.get(h);if(m){Pg(t,n,m);return}var y=l?l(d,h,n+"",t,e,c):void 0,b=y===void 0;if(b){var x=ro(h),S=!x&&Jc(h),N=!x&&!S&&Y0(h);y=h,x||S||N?ro(d)?y=d:eU(d)?y=dz(d):S?(b=!1,y=OE(h,!0)):N?(b=!1,y=ME(h,!0)):y=[]:ZI(h)||Dg(h)?(y=d,Dg(d)?y=tU(d):(!Ti(d)||V0(d))&&(y=RE(h))):b=!1}b&&(c.set(h,y),i(y,h,s,l,c),c.delete(h)),Pg(t,n,y)}function UE(t,e,n,s,i){t!==e&&JB(e,function(l,c){if(i||(i=new Hs),Ti(l))nU(t,e,c,n,UE,s,i);else{var d=s?s(zg(t,c),l,c+"",t,e,i):void 0;d===void 0&&(d=l),Pg(t,c,d)}},jE)}function hi(t,e){return BE(t,e)}var bi=_z(function(t,e,n){UE(t,e,n)}),Ie=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(Ie||{});class Gs{constructor(e,n,s={}){this.attrName=e,this.keyName=n;const i=Ie.TYPE&Ie.ATTRIBUTE;this.scope=s.scope!=null?s.scope&Ie.LEVEL|i:Ie.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class ml extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const qE=class Ig{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let s=null;try{s=e.parentNode}catch{return null}return this.find(s,n)}return null}create(e,n,s){const i=this.query(n);if(i==null)throw new ml(`Unable to create ${n} blot`);const l=i,c=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:l.create(s),d=new l(e,c,s);return Ig.blots.set(d.domNode,d),d}find(e,n=!1){return Ig.find(e,n)}query(e,n=Ie.ANY){let s;return typeof e=="string"?s=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?s=this.types.text:typeof e=="number"?e&Ie.LEVEL&Ie.BLOCK?s=this.types.block:e&Ie.LEVEL&Ie.INLINE&&(s=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(s=this.classes[i],!!s)),s=s||this.tags[e.tagName]),s==null?null:"scope"in s&&n&Ie.LEVEL&s.scope&&n&Ie.TYPE&s.scope?s:null}register(...e){return e.map(n=>{const s="blotName"in n,i="attrName"in n;if(!s&&!i)throw new ml("Invalid definition");if(s&&n.blotName==="abstract")throw new ml("Cannot register abstract class");const l=s?n.blotName:i?n.attrName:void 0;return this.types[l]=n,i?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):s&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(c=>c.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(c=>{(this.tags[c]==null||n.className==null)&&(this.tags[c]=n)}))),n})}};qE.blots=new WeakMap;let vl=qE;function O2(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class aU extends Gs{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){O2(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(O2(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const Ts=aU;function Pp(t){const e=t.split("-"),n=e.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return e[0]+n}class sU extends Gs{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[Pp(this.keyName)]=n,!0):!1}remove(e){e.style[Pp(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[Pp(this.keyName)];return this.canAdd(e,n)?n:""}}const Ei=sU;class rU{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=vl.find(this.domNode);if(e==null)return;const n=Gs.keys(this.domNode),s=Ts.keys(this.domNode),i=Ei.keys(this.domNode);n.concat(s).concat(i).forEach(l=>{const c=e.scroll.query(l,Ie.ATTRIBUTE);c instanceof Gs&&(this.attributes[c.attrName]=c)})}copy(e){Object.keys(this.attributes).forEach(n=>{const s=this.attributes[n].value(this.domNode);e.format(n,s)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const Kf=rU,$E=class{constructor(e,n){this.scroll=e,this.domNode=n,vl.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new ml("Blot definition missing tagName");let n,s;return Array.isArray(this.tagName)?(typeof e=="string"?(s=e.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof e=="number"&&(s=e),typeof s=="number"?n=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?n=document.createElement(s):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),vl.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,s,i){const l=this.isolate(e,n);if(this.scroll.query(s,Ie.BLOT)!=null&&i)l.wrap(s,i);else if(this.scroll.query(s,Ie.ATTRIBUTE)!=null){const c=this.scroll.create(this.statics.scope);l.wrap(c),c.format(s,i)}}insertAt(e,n,s){const i=s==null?this.scroll.create("text",n):this.scroll.create(n,s),l=this.split(e);this.parent.insertBefore(i,l||void 0)}isolate(e,n){const s=this.split(e);if(s==null)throw new Error("Attempt to isolate at end");return s.split(n),s}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new ml(`Cannot wrap ${e}`);return s.appendChild(this),s}};$E.blotName="abstract";let VE=$E;const HE=class extends VE{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};HE.scope=Ie.INLINE_BLOT;let iU=HE;const Un=iU;class oU{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let s=n();for(;s&&e>0;)e-=1,s=n();return s}contains(e){const n=this.iterator();let s=n();for(;s;){if(s===e)return!0;s=n()}return!1}indexOf(e){const n=this.iterator();let s=n(),i=0;for(;s;){if(s===e)return i;i+=1,s=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,s=this.head;for(;s!=null;){if(s===e)return n;n+=s.length(),s=s.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const s=this.iterator();let i=s();for(;i;){const l=i.length();if(e<l||n&&e===l&&(i.next==null||i.next.length()!==0))return[i,e];e-=l,i=s()}return[null,0]}forEach(e){const n=this.iterator();let s=n();for(;s;)e(s),s=n()}forEachAt(e,n,s){if(n<=0)return;const[i,l]=this.find(e);let c=e-l;const d=this.iterator(i);let h=d();for(;h&&c<e+n;){const m=h.length();e>c?s(h,e-c,Math.min(n,c+m-e)):s(h,0,Math.min(m,e+n-c)),c+=m,h=d()}}map(e){return this.reduce((n,s)=>(n.push(e(s)),n),[])}reduce(e,n){const s=this.iterator();let i=s();for(;i;)n=e(n,i),i=s();return n}}function M2(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const s=e.create(Ie.INLINE);return Array.from(t.childNodes).forEach(i=>{s.domNode.appendChild(i)}),t.parentNode&&t.parentNode.replaceChild(s.domNode,t),s.attach(),s}}const FE=class fi extends VE{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,fi.uiClass&&this.uiNode.classList.add(fi.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new oU,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=M2(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof ml)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(s,i,l)=>{s.deleteAt(i,l)})}descendant(e,n=0){const[s,i]=this.children.find(n);return e.blotName==null&&e(s)||e.blotName!=null&&s instanceof e?[s,i]:s instanceof fi?s.descendant(e,i):[null,-1]}descendants(e,n=0,s=Number.MAX_VALUE){let i=[],l=s;return this.children.forEachAt(n,s,(c,d,h)=>{(e.blotName==null&&e(c)||e.blotName!=null&&c instanceof e)&&i.push(c),c instanceof fi&&(i=i.concat(c.descendants(e,d,l))),l-=h}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(s=>n instanceof s)||(n.statics.scope===Ie.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof fi?n.unwrap():n.remove())})}formatAt(e,n,s,i){this.children.forEachAt(e,n,(l,c,d)=>{l.formatAt(c,d,s,i)})}insertAt(e,n,s){const[i,l]=this.children.find(e);if(i)i.insertAt(l,n,s);else{const c=s==null?this.scroll.create("text",n):this.scroll.create(n,s);this.appendChild(c)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let s=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(s=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(e.domNode,s),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(s=>{e.insertBefore(s,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[s,i]=this.children.find(e,n),l=[[this,e]];return s instanceof fi?l.concat(s.path(i,n)):(s!=null&&l.push([s,i]),l)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return s instanceof fi&&this.moveChildren(s),super.replaceWith(s)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(e,this.length(),(i,l,c)=>{const d=i.split(l,n);d!=null&&s.appendChild(d)}),s}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const s=[],i=[];e.forEach(l=>{l.target===this.domNode&&l.type==="childList"&&(s.push(...l.addedNodes),i.push(...l.removedNodes))}),i.forEach(l=>{if(l.parentNode!=null&&l.tagName!=="IFRAME"&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const c=this.scroll.find(l);c!=null&&(c.domNode.parentNode==null||c.domNode.parentNode===this.domNode)&&c.detach()}),s.filter(l=>l.parentNode===this.domNode&&l!==this.uiNode).sort((l,c)=>l===c?0:l.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(l=>{let c=null;l.nextSibling!=null&&(c=this.scroll.find(l.nextSibling));const d=M2(l,this.scroll);(d.next!==c||d.next==null)&&(d.parent!=null&&d.parent.removeChild(this),this.insertBefore(d,c||void 0))}),this.enforceAllowedChildren()}};FE.uiClass="";let lU=FE;const Ss=lU;function cU(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const al=class sl extends Ss{static create(e){return super.create(e)}static formats(e,n){const s=n.query(sl.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Kf(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(s=>{s instanceof sl||(s=s.wrap(sl.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(e,Ie.INLINE);if(s==null)return;s instanceof Gs?this.attributes.attribute(s,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,i){this.formats()[s]!=null||this.scroll.query(s,Ie.ATTRIBUTE)?this.isolate(e,n).format(s,i):super.formatAt(e,n,s,i)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const s=this.next;s instanceof sl&&s.prev===this&&cU(n,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(e,n){const s=super.wrap(e,n);return s instanceof sl&&this.attributes.move(s),s}};al.allowedChildren=[al,Un],al.blotName="inline",al.scope=Ie.INLINE_BLOT,al.tagName="SPAN";let uU=al;const W0=uU,rl=class Bg extends Ss{static create(e){return super.create(e)}static formats(e,n){const s=n.query(Bg.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Kf(this.domNode)}format(e,n){const s=this.scroll.query(e,Ie.BLOCK);s!=null&&(s instanceof Gs?this.attributes.attribute(s,n):e===this.statics.blotName&&!n?this.replaceWith(Bg.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,i){this.scroll.query(s,Ie.BLOCK)!=null?this.format(s,i):super.formatAt(e,n,s,i)}insertAt(e,n,s){if(s==null||this.scroll.query(n,Ie.INLINE)!=null)super.insertAt(e,n,s);else{const i=this.split(e);if(i!=null){const l=this.scroll.create(n,s);i.parent.insertBefore(l,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};rl.blotName="block",rl.scope=Ie.BLOCK_BLOT,rl.tagName="P",rl.allowedChildren=[W0,rl,Un];let dU=rl;const nu=dU,Ug=class extends Ss{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,s,i){super.formatAt(e,n,s,i),this.enforceAllowedChildren()}insertAt(e,n,s){super.insertAt(e,n,s),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Ug.blotName="container",Ug.scope=Ie.BLOCK_BLOT;let fU=Ug;const Wf=fU;class hU extends Un{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,s,i){e===0&&n===this.length()?this.format(s,i):super.formatAt(e,n,s,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Pa=hU,mU={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},pU=100,il=class extends Ss{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,mU),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const s=this.registry.find(e,n);return s?s.scroll===this?s:n?this.find(s.scroll.domNode.parentNode,!0):null:null}query(e,n=Ie.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(e,n)}formatAt(e,n,s,i){this.update(),super.formatAt(e,n,s,i)}insertAt(e,n,s){this.update(),super.insertAt(e,n,s)}optimize(e=[],n={}){super.optimize(n);const s=n.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const l=(h,m=!0)=>{h==null||h===this||h.domNode.parentNode!=null&&(s.has(h.domNode)||s.set(h.domNode,[]),m&&l(h.parent))},c=h=>{s.has(h.domNode)&&(h instanceof Ss&&h.children.forEach(c),s.delete(h.domNode),h.optimize(n))};let d=e;for(let h=0;d.length>0;h+=1){if(h>=pU)throw new Error("[Parchment] Maximum optimize iterations reached");for(d.forEach(m=>{const y=this.find(m.target,!0);y!=null&&(y.domNode===m.target&&(m.type==="childList"?(l(this.find(m.previousSibling,!1)),Array.from(m.addedNodes).forEach(b=>{const x=this.find(b,!1);l(x,!1),x instanceof Ss&&x.children.forEach(S=>{l(S,!1)})})):m.type==="attributes"&&l(y.prev)),l(y))}),this.children.forEach(c),d=Array.from(this.observer.takeRecords()),i=d.slice();i.length>0;)e.push(i.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const s=new WeakMap;e.map(i=>{const l=this.find(i.target,!0);return l==null?null:s.has(l.domNode)?(s.get(l.domNode).push(i),null):(s.set(l.domNode,[i]),l)}).forEach(i=>{i!=null&&i!==this&&s.has(i.domNode)&&i.update(s.get(i.domNode)||[],n)}),n.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),n),this.optimize(e,n)}};il.blotName="scroll",il.defaultChild=nu,il.allowedChildren=[nu,Wf],il.scope=Ie.BLOCK_BLOT,il.tagName="DIV";let gU=il;const X0=gU,qg=class GE extends Un{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,s){s==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,s)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof GE&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(e,n){e.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};qg.blotName="text",qg.scope=Ie.INLINE_BLOT;let yU=qg;const Ef=yU,bU=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Gs,AttributorStore:Kf,BlockBlot:nu,ClassAttributor:Ts,ContainerBlot:Wf,EmbedBlot:Pa,InlineBlot:W0,LeafBlot:Un,ParentBlot:Ss,Registry:vl,Scope:Ie,ScrollBlot:X0,StyleAttributor:Ei,TextBlot:Ef},Symbol.toStringTag,{value:"Module"}));var Md={exports:{}},zp,R2;function xU(){if(R2)return zp;R2=1;var t=-1,e=1,n=0;function s(A,F,B,te,se){if(A===F)return A?[[n,A]]:[];if(B!=null){var C=Y(A,F,B);if(C)return C}var I=d(A,F),q=A.substring(0,I);A=A.substring(I),F=F.substring(I),I=m(A,F);var oe=A.substring(A.length-I);A=A.substring(0,A.length-I),F=F.substring(0,F.length-I);var ce=i(A,F);return q&&ce.unshift([n,q]),oe&&ce.push([n,oe]),O(ce,se),te&&b(ce),ce}function i(A,F){var B;if(!A)return[[e,F]];if(!F)return[[t,A]];var te=A.length>F.length?A:F,se=A.length>F.length?F:A,C=te.indexOf(se);if(C!==-1)return B=[[e,te.substring(0,C)],[n,se],[e,te.substring(C+se.length)]],A.length>F.length&&(B[0][0]=B[2][0]=t),B;if(se.length===1)return[[t,A],[e,F]];var I=y(A,F);if(I){var q=I[0],oe=I[1],ce=I[2],M=I[3],K=I[4],Z=s(q,ce),le=s(oe,M);return Z.concat([[n,K]],le)}return l(A,F)}function l(A,F){for(var B=A.length,te=F.length,se=Math.ceil((B+te)/2),C=se,I=2*se,q=new Array(I),oe=new Array(I),ce=0;ce<I;ce++)q[ce]=-1,oe[ce]=-1;q[C+1]=0,oe[C+1]=0;for(var M=B-te,K=M%2!==0,Z=0,le=0,me=0,be=0,we=0;we<se;we++){for(var je=-we+Z;je<=we-le;je+=2){var X=C+je,ae;je===-we||je!==we&&q[X-1]<q[X+1]?ae=q[X+1]:ae=q[X-1]+1;for(var pe=ae-je;ae<B&&pe<te&&A.charAt(ae)===F.charAt(pe);)ae++,pe++;if(q[X]=ae,ae>B)le+=2;else if(pe>te)Z+=2;else if(K){var ve=C+M-je;if(ve>=0&&ve<I&&oe[ve]!==-1){var ge=B-oe[ve];if(ae>=ge)return c(A,F,ae,pe)}}}for(var Se=-we+me;Se<=we-be;Se+=2){var ve=C+Se,ge;Se===-we||Se!==we&&oe[ve-1]<oe[ve+1]?ge=oe[ve+1]:ge=oe[ve-1]+1;for(var Ae=ge-Se;ge<B&&Ae<te&&A.charAt(B-ge-1)===F.charAt(te-Ae-1);)ge++,Ae++;if(oe[ve]=ge,ge>B)be+=2;else if(Ae>te)me+=2;else if(!K){var X=C+M-Se;if(X>=0&&X<I&&q[X]!==-1){var ae=q[X],pe=C+ae-X;if(ge=B-ge,ae>=ge)return c(A,F,ae,pe)}}}}return[[t,A],[e,F]]}function c(A,F,B,te){var se=A.substring(0,B),C=F.substring(0,te),I=A.substring(B),q=F.substring(te),oe=s(se,C),ce=s(I,q);return oe.concat(ce)}function d(A,F){if(!A||!F||A.charAt(0)!==F.charAt(0))return 0;for(var B=0,te=Math.min(A.length,F.length),se=te,C=0;B<se;)A.substring(C,se)==F.substring(C,se)?(B=se,C=B):te=se,se=Math.floor((te-B)/2+B);return R(A.charCodeAt(se-1))&&se--,se}function h(A,F){var B=A.length,te=F.length;if(B==0||te==0)return 0;B>te?A=A.substring(B-te):B<te&&(F=F.substring(0,B));var se=Math.min(B,te);if(A==F)return se;for(var C=0,I=1;;){var q=A.substring(se-I),oe=F.indexOf(q);if(oe==-1)return C;I+=oe,(oe==0||A.substring(se-I)==F.substring(0,I))&&(C=I,I++)}}function m(A,F){if(!A||!F||A.slice(-1)!==F.slice(-1))return 0;for(var B=0,te=Math.min(A.length,F.length),se=te,C=0;B<se;)A.substring(A.length-se,A.length-C)==F.substring(F.length-se,F.length-C)?(B=se,C=B):te=se,se=Math.floor((te-B)/2+B);return U(A.charCodeAt(A.length-se))&&se--,se}function y(A,F){var B=A.length>F.length?A:F,te=A.length>F.length?F:A;if(B.length<4||te.length*2<B.length)return null;function se(le,me,be){for(var we=le.substring(be,be+Math.floor(le.length/4)),je=-1,X="",ae,pe,ve,ge;(je=me.indexOf(we,je+1))!==-1;){var Se=d(le.substring(be),me.substring(je)),Ae=m(le.substring(0,be),me.substring(0,je));X.length<Ae+Se&&(X=me.substring(je-Ae,je)+me.substring(je,je+Se),ae=le.substring(0,be-Ae),pe=le.substring(be+Se),ve=me.substring(0,je-Ae),ge=me.substring(je+Se))}return X.length*2>=le.length?[ae,pe,ve,ge,X]:null}var C=se(B,te,Math.ceil(B.length/4)),I=se(B,te,Math.ceil(B.length/2)),q;if(!C&&!I)return null;I?C?q=C[4].length>I[4].length?C:I:q=I:q=C;var oe,ce,M,K;A.length>F.length?(oe=q[0],ce=q[1],M=q[2],K=q[3]):(M=q[0],K=q[1],oe=q[2],ce=q[3]);var Z=q[4];return[oe,ce,M,K,Z]}function b(A){for(var F=!1,B=[],te=0,se=null,C=0,I=0,q=0,oe=0,ce=0;C<A.length;)A[C][0]==n?(B[te++]=C,I=oe,q=ce,oe=0,ce=0,se=A[C][1]):(A[C][0]==e?oe+=A[C][1].length:ce+=A[C][1].length,se&&se.length<=Math.max(I,q)&&se.length<=Math.max(oe,ce)&&(A.splice(B[te-1],0,[t,se]),A[B[te-1]+1][0]=e,te--,te--,C=te>0?B[te-1]:-1,I=0,q=0,oe=0,ce=0,se=null,F=!0)),C++;for(F&&O(A),D(A),C=1;C<A.length;){if(A[C-1][0]==t&&A[C][0]==e){var M=A[C-1][1],K=A[C][1],Z=h(M,K),le=h(K,M);Z>=le?(Z>=M.length/2||Z>=K.length/2)&&(A.splice(C,0,[n,K.substring(0,Z)]),A[C-1][1]=M.substring(0,M.length-Z),A[C+1][1]=K.substring(Z),C++):(le>=M.length/2||le>=K.length/2)&&(A.splice(C,0,[n,M.substring(0,le)]),A[C-1][0]=e,A[C-1][1]=K.substring(0,K.length-le),A[C+1][0]=t,A[C+1][1]=M.substring(le),C++),C++}C++}}var x=/[^a-zA-Z0-9]/,S=/\s/,N=/[\r\n]/,E=/\n\r?\n$/,j=/^\r?\n\r?\n/;function D(A){function F(le,me){if(!le||!me)return 6;var be=le.charAt(le.length-1),we=me.charAt(0),je=be.match(x),X=we.match(x),ae=je&&be.match(S),pe=X&&we.match(S),ve=ae&&be.match(N),ge=pe&&we.match(N),Se=ve&&le.match(E),Ae=ge&&me.match(j);return Se||Ae?5:ve||ge?4:je&&!ae&&pe?3:ae||pe?2:je||X?1:0}for(var B=1;B<A.length-1;){if(A[B-1][0]==n&&A[B+1][0]==n){var te=A[B-1][1],se=A[B][1],C=A[B+1][1],I=m(te,se);if(I){var q=se.substring(se.length-I);te=te.substring(0,te.length-I),se=q+se.substring(0,se.length-I),C=q+C}for(var oe=te,ce=se,M=C,K=F(te,se)+F(se,C);se.charAt(0)===C.charAt(0);){te+=se.charAt(0),se=se.substring(1)+C.charAt(0),C=C.substring(1);var Z=F(te,se)+F(se,C);Z>=K&&(K=Z,oe=te,ce=se,M=C)}A[B-1][1]!=oe&&(oe?A[B-1][1]=oe:(A.splice(B-1,1),B--),A[B][1]=ce,M?A[B+1][1]=M:(A.splice(B+1,1),B--))}B++}}function O(A,F){A.push([n,""]);for(var B=0,te=0,se=0,C="",I="",q;B<A.length;){if(B<A.length-1&&!A[B][1]){A.splice(B,1);continue}switch(A[B][0]){case e:se++,I+=A[B][1],B++;break;case t:te++,C+=A[B][1],B++;break;case n:var oe=B-se-te-1;if(F){if(oe>=0&&H(A[oe][1])){var ce=A[oe][1].slice(-1);if(A[oe][1]=A[oe][1].slice(0,-1),C=ce+C,I=ce+I,!A[oe][1]){A.splice(oe,1),B--;var M=oe-1;A[M]&&A[M][0]===e&&(se++,I=A[M][1]+I,M--),A[M]&&A[M][0]===t&&(te++,C=A[M][1]+C,M--),oe=M}}if(L(A[B][1])){var ce=A[B][1].charAt(0);A[B][1]=A[B][1].slice(1),C+=ce,I+=ce}}if(B<A.length-1&&!A[B][1]){A.splice(B,1);break}if(C.length>0||I.length>0){C.length>0&&I.length>0&&(q=d(I,C),q!==0&&(oe>=0?A[oe][1]+=I.substring(0,q):(A.splice(0,0,[n,I.substring(0,q)]),B++),I=I.substring(q),C=C.substring(q)),q=m(I,C),q!==0&&(A[B][1]=I.substring(I.length-q)+A[B][1],I=I.substring(0,I.length-q),C=C.substring(0,C.length-q)));var K=se+te;C.length===0&&I.length===0?(A.splice(B-K,K),B=B-K):C.length===0?(A.splice(B-K,K,[e,I]),B=B-K+1):I.length===0?(A.splice(B-K,K,[t,C]),B=B-K+1):(A.splice(B-K,K,[t,C],[e,I]),B=B-K+2)}B!==0&&A[B-1][0]===n?(A[B-1][1]+=A[B][1],A.splice(B,1)):B++,se=0,te=0,C="",I="";break}}A[A.length-1][1]===""&&A.pop();var Z=!1;for(B=1;B<A.length-1;)A[B-1][0]===n&&A[B+1][0]===n&&(A[B][1].substring(A[B][1].length-A[B-1][1].length)===A[B-1][1]?(A[B][1]=A[B-1][1]+A[B][1].substring(0,A[B][1].length-A[B-1][1].length),A[B+1][1]=A[B-1][1]+A[B+1][1],A.splice(B-1,1),Z=!0):A[B][1].substring(0,A[B+1][1].length)==A[B+1][1]&&(A[B-1][1]+=A[B+1][1],A[B][1]=A[B][1].substring(A[B+1][1].length)+A[B+1][1],A.splice(B+1,1),Z=!0)),B++;Z&&O(A,F)}function R(A){return A>=55296&&A<=56319}function U(A){return A>=56320&&A<=57343}function L(A){return U(A.charCodeAt(0))}function H(A){return R(A.charCodeAt(A.length-1))}function z(A){for(var F=[],B=0;B<A.length;B++)A[B][1].length>0&&F.push(A[B]);return F}function P(A,F,B,te){return H(A)||L(te)?null:z([[n,A],[t,F],[e,B],[n,te]])}function Y(A,F,B){var te=typeof B=="number"?{index:B,length:0}:B.oldRange,se=typeof B=="number"?null:B.newRange,C=A.length,I=F.length;if(te.length===0&&(se===null||se.length===0)){var q=te.index,oe=A.slice(0,q),ce=A.slice(q),M=se?se.index:null;e:{var K=q+I-C;if(M!==null&&M!==K||K<0||K>I)break e;var Z=F.slice(0,K),le=F.slice(K);if(le!==ce)break e;var me=Math.min(q,K),be=oe.slice(0,me),we=Z.slice(0,me);if(be!==we)break e;var je=oe.slice(me),X=Z.slice(me);return P(be,je,X,ce)}e:{if(M!==null&&M!==q)break e;var ae=q,Z=F.slice(0,ae),le=F.slice(ae);if(Z!==oe)break e;var pe=Math.min(C-ae,I-ae),ve=ce.slice(ce.length-pe),ge=le.slice(le.length-pe);if(ve!==ge)break e;var je=ce.slice(0,ce.length-pe),X=le.slice(0,le.length-pe);return P(oe,je,X,ve)}}if(te.length>0&&se&&se.length===0)e:{var be=A.slice(0,te.index),ve=A.slice(te.index+te.length),me=be.length,pe=ve.length;if(I<me+pe)break e;var we=F.slice(0,me),ge=F.slice(I-pe);if(be!==we||ve!==ge)break e;var je=A.slice(me,C-pe),X=F.slice(me,I-pe);return P(be,je,X,ve)}return null}function Q(A,F,B,te){return s(A,F,B,te,!0)}return Q.INSERT=e,Q.DELETE=t,Q.EQUAL=n,zp=Q,zp}var Rc={exports:{}};Rc.exports;var L2;function YE(){return L2||(L2=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",i=9007199254740991,l="[object Arguments]",c="[object Array]",d="[object Boolean]",h="[object Date]",m="[object Error]",y="[object Function]",b="[object GeneratorFunction]",x="[object Map]",S="[object Number]",N="[object Object]",E="[object Promise]",j="[object RegExp]",D="[object Set]",O="[object String]",R="[object Symbol]",U="[object WeakMap]",L="[object ArrayBuffer]",H="[object DataView]",z="[object Float32Array]",P="[object Float64Array]",Y="[object Int8Array]",Q="[object Int16Array]",A="[object Int32Array]",F="[object Uint8Array]",B="[object Uint8ClampedArray]",te="[object Uint16Array]",se="[object Uint32Array]",C=/[\\^$.*+?()[\]{}|]/g,I=/\w*$/,q=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,ce={};ce[l]=ce[c]=ce[L]=ce[H]=ce[d]=ce[h]=ce[z]=ce[P]=ce[Y]=ce[Q]=ce[A]=ce[x]=ce[S]=ce[N]=ce[j]=ce[D]=ce[O]=ce[R]=ce[F]=ce[B]=ce[te]=ce[se]=!0,ce[m]=ce[y]=ce[U]=!1;var M=typeof mi=="object"&&mi&&mi.Object===Object&&mi,K=typeof self=="object"&&self&&self.Object===Object&&self,Z=M||K||Function("return this")(),le=e&&!e.nodeType&&e,me=le&&!0&&t&&!t.nodeType&&t,be=me&&me.exports===le;function we(v,k){return v.set(k[0],k[1]),v}function je(v,k){return v.add(k),v}function X(v,k){for(var V=-1,re=v?v.length:0;++V<re&&k(v[V],V,v)!==!1;);return v}function ae(v,k){for(var V=-1,re=k.length,$e=v.length;++V<re;)v[$e+V]=k[V];return v}function pe(v,k,V,re){for(var $e=-1,Le=v?v.length:0;++$e<Le;)V=k(V,v[$e],$e,v);return V}function ve(v,k){for(var V=-1,re=Array(v);++V<v;)re[V]=k(V);return re}function ge(v,k){return v?.[k]}function Se(v){var k=!1;if(v!=null&&typeof v.toString!="function")try{k=!!(v+"")}catch{}return k}function Ae(v){var k=-1,V=Array(v.size);return v.forEach(function(re,$e){V[++k]=[$e,re]}),V}function ye(v,k){return function(V){return v(k(V))}}function Xe(v){var k=-1,V=Array(v.size);return v.forEach(function(re){V[++k]=re}),V}var Ye=Array.prototype,Me=Function.prototype,He=Object.prototype,ot=Z["__core-js_shared__"],gt=(function(){var v=/[^.]+$/.exec(ot&&ot.keys&&ot.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""})(),Zt=Me.toString,Je=He.hasOwnProperty,Ue=He.toString,Pt=RegExp("^"+Zt.call(Je).replace(C,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=be?Z.Buffer:void 0,lt=Z.Symbol,Qt=Z.Uint8Array,mt=ye(Object.getPrototypeOf,Object),za=Object.create,kn=He.propertyIsEnumerable,wn=Ye.splice,Gt=Object.getOwnPropertySymbols,Sn=Te?Te.isBuffer:void 0,Bt=ye(Object.keys,Object),As=la(Z,"DataView"),ss=la(Z,"Map"),Dn=la(Z,"Promise"),ba=la(Z,"Set"),ea=la(Z,"WeakMap"),On=la(Object,"create"),Nn=ln(As),Mn=ln(ss),xa=ln(Dn),Ws=ln(ba),rs=ln(ea),$n=lt?lt.prototype:void 0,ta=$n?$n.valueOf:void 0;function na(v){var k=-1,V=v?v.length:0;for(this.clear();++k<V;){var re=v[k];this.set(re[0],re[1])}}function Cs(){this.__data__=On?On(null):{}}function Mr(v){return this.has(v)&&delete this.__data__[v]}function Rr(v){var k=this.__data__;if(On){var V=k[v];return V===s?void 0:V}return Je.call(k,v)?k[v]:void 0}function is(v){var k=this.__data__;return On?k[v]!==void 0:Je.call(k,v)}function aa(v,k){var V=this.__data__;return V[v]=On&&k===void 0?s:k,this}na.prototype.clear=Cs,na.prototype.delete=Mr,na.prototype.get=Rr,na.prototype.has=is,na.prototype.set=aa;function Ut(v){var k=-1,V=v?v.length:0;for(this.clear();++k<V;){var re=v[k];this.set(re[0],re[1])}}function Xs(){this.__data__=[]}function bn(v){var k=this.__data__,V=Hn(k,v);if(V<0)return!1;var re=k.length-1;return V==re?k.pop():wn.call(k,V,1),!0}function At(v){var k=this.__data__,V=Hn(k,v);return V<0?void 0:k[V][1]}function Jt(v){return Hn(this.__data__,v)>-1}function sa(v,k){var V=this.__data__,re=Hn(V,v);return re<0?V.push([v,k]):V[re][1]=k,this}Ut.prototype.clear=Xs,Ut.prototype.delete=bn,Ut.prototype.get=At,Ut.prototype.has=Jt,Ut.prototype.set=sa;function Ct(v){var k=-1,V=v?v.length:0;for(this.clear();++k<V;){var re=v[k];this.set(re[0],re[1])}}function os(){this.__data__={hash:new na,map:new(ss||Ut),string:new na}}function Ai(v){return Ms(this,v).delete(v)}function Zs(v){return Ms(this,v).get(v)}function ls(v){return Ms(this,v).has(v)}function js(v,k){return Ms(this,v).set(v,k),this}Ct.prototype.clear=os,Ct.prototype.delete=Ai,Ct.prototype.get=Zs,Ct.prototype.has=ls,Ct.prototype.set=js;function zt(v){this.__data__=new Ut(v)}function va(){this.__data__=new Ut}function ra(v){return this.__data__.delete(v)}function Rn(v){return this.__data__.get(v)}function jt(v){return this.__data__.has(v)}function Vn(v,k){var V=this.__data__;if(V instanceof Ut){var re=V.__data__;if(!ss||re.length<n-1)return re.push([v,k]),this;V=this.__data__=new Ct(re)}return V.set(v,k),this}zt.prototype.clear=va,zt.prototype.delete=ra,zt.prototype.get=Rn,zt.prototype.has=jt,zt.prototype.set=Vn;function ia(v,k){var V=Ir(v)||Na(v)?ve(v.length,String):[],re=V.length,$e=!!re;for(var Le in v)Je.call(v,Le)&&!($e&&(Le=="length"||Rl(Le,re)))&&V.push(Le);return V}function oa(v,k,V){var re=v[k];(!(Je.call(v,k)&&us(re,V))||V===void 0&&!(k in v))&&(v[k]=V)}function Hn(v,k){for(var V=v.length;V--;)if(us(v[V][0],k))return V;return-1}function Fn(v,k){return v&&Lr(k,er(k),v)}function _s(v,k,V,re,$e,Le,Qe){var st;if(re&&(st=Le?re(v,$e,Le,Qe):re(v)),st!==void 0)return st;if(!In(v))return v;var Mt=Ir(v);if(Mt){if(st=xo(v),!k)return ji(v,st)}else{var ct=cs(v),qt=ct==y||ct==b;if(Ls(v))return Be(v,k);if(ct==N||ct==l||qt&&!Le){if(Se(v))return Le?v:{};if(st=Sa(qt?{}:v),!k)return _i(v,Fn(st,v))}else{if(!ce[ct])return Le?v:{};st=ki(v,ct,_s,k)}}Qe||(Qe=new zt);var cn=Qe.get(v);if(cn)return cn;if(Qe.set(v,st),!Mt)var $t=V?Os(v):er(v);return X($t||v,function(xn,un){$t&&(un=xn,xn=v[un]),oa(st,un,_s(xn,k,V,re,un,v,Qe))}),st}function Qs(v){return In(v)?za(v):{}}function Ci(v,k,V){var re=k(v);return Ir(v)?re:ae(re,V(v))}function ks(v){return Ue.call(v)}function Js(v){if(!In(v)||Pr(v))return!1;var k=Gn(v)||Se(v)?Pt:q;return k.test(ln(v))}function xe(v){if(!ca(v))return Bt(v);var k=[];for(var V in Object(v))Je.call(v,V)&&V!="constructor"&&k.push(V);return k}function Be(v,k){if(k)return v.slice();var V=new v.constructor(v.length);return v.copy(V),V}function Re(v){var k=new v.constructor(v.byteLength);return new Qt(k).set(new Qt(v)),k}function Yt(v,k){var V=k?Re(v.buffer):v.buffer;return new v.constructor(V,v.byteOffset,v.byteLength)}function wa(v,k,V){var re=k?V(Ae(v),!0):Ae(v);return pe(re,we,new v.constructor)}function Ds(v){var k=new v.constructor(v.source,I.exec(v));return k.lastIndex=v.lastIndex,k}function Ln(v,k,V){var re=k?V(Xe(v),!0):Xe(v);return pe(re,je,new v.constructor)}function Ml(v){return ta?Object(ta.call(v)):{}}function Pn(v,k){var V=k?Re(v.buffer):v.buffer;return new v.constructor(V,v.byteOffset,v.length)}function ji(v,k){var V=-1,re=v.length;for(k||(k=Array(re));++V<re;)k[V]=v[V];return k}function Lr(v,k,V,re){V||(V={});for(var $e=-1,Le=k.length;++$e<Le;){var Qe=k[$e],st=void 0;oa(V,Qe,st===void 0?v[Qe]:st)}return V}function _i(v,k){return Lr(v,zn(v),k)}function Os(v){return Ci(v,er,zn)}function Ms(v,k){var V=v.__data__;return Ll(k)?V[typeof k=="string"?"string":"hash"]:V.map}function la(v,k){var V=ge(v,k);return Js(V)?V:void 0}var zn=Gt?ye(Gt,Object):Ur,cs=ks;(As&&cs(new As(new ArrayBuffer(1)))!=H||ss&&cs(new ss)!=x||Dn&&cs(Dn.resolve())!=E||ba&&cs(new ba)!=D||ea&&cs(new ea)!=U)&&(cs=function(v){var k=Ue.call(v),V=k==N?v.constructor:void 0,re=V?ln(V):void 0;if(re)switch(re){case Nn:return H;case Mn:return x;case xa:return E;case Ws:return D;case rs:return U}return k});function xo(v){var k=v.length,V=v.constructor(k);return k&&typeof v[0]=="string"&&Je.call(v,"index")&&(V.index=v.index,V.input=v.input),V}function Sa(v){return typeof v.constructor=="function"&&!ca(v)?Qs(mt(v)):{}}function ki(v,k,V,re){var $e=v.constructor;switch(k){case L:return Re(v);case d:case h:return new $e(+v);case H:return Yt(v,re);case z:case P:case Y:case Q:case A:case F:case B:case te:case se:return Pn(v,re);case x:return wa(v,re,V);case S:case O:return new $e(v);case j:return Ds(v);case D:return Ln(v,re,V);case R:return Ml(v)}}function Rl(v,k){return k=k??i,!!k&&(typeof v=="number"||oe.test(v))&&v>-1&&v%1==0&&v<k}function Ll(v){var k=typeof v;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?v!=="__proto__":v===null}function Pr(v){return!!gt&&gt in v}function ca(v){var k=v&&v.constructor,V=typeof k=="function"&&k.prototype||He;return v===V}function ln(v){if(v!=null){try{return Zt.call(v)}catch{}try{return v+""}catch{}}return""}function zr(v){return _s(v,!0,!0)}function us(v,k){return v===k||v!==v&&k!==k}function Na(v){return vo(v)&&Je.call(v,"callee")&&(!kn.call(v,"callee")||Ue.call(v)==l)}var Ir=Array.isArray;function Rs(v){return v!=null&&Br(v.length)&&!Gn(v)}function vo(v){return Ta(v)&&Rs(v)}var Ls=Sn||wo;function Gn(v){var k=In(v)?Ue.call(v):"";return k==y||k==b}function Br(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=i}function In(v){var k=typeof v;return!!v&&(k=="object"||k=="function")}function Ta(v){return!!v&&typeof v=="object"}function er(v){return Rs(v)?ia(v):xe(v)}function Ur(){return[]}function wo(){return!1}t.exports=zr})(Rc,Rc.exports)),Rc.exports}var Lc={exports:{}};Lc.exports;var P2;function KE(){return P2||(P2=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",i=1,l=2,c=9007199254740991,d="[object Arguments]",h="[object Array]",m="[object AsyncFunction]",y="[object Boolean]",b="[object Date]",x="[object Error]",S="[object Function]",N="[object GeneratorFunction]",E="[object Map]",j="[object Number]",D="[object Null]",O="[object Object]",R="[object Promise]",U="[object Proxy]",L="[object RegExp]",H="[object Set]",z="[object String]",P="[object Symbol]",Y="[object Undefined]",Q="[object WeakMap]",A="[object ArrayBuffer]",F="[object DataView]",B="[object Float32Array]",te="[object Float64Array]",se="[object Int8Array]",C="[object Int16Array]",I="[object Int32Array]",q="[object Uint8Array]",oe="[object Uint8ClampedArray]",ce="[object Uint16Array]",M="[object Uint32Array]",K=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,le=/^(?:0|[1-9]\d*)$/,me={};me[B]=me[te]=me[se]=me[C]=me[I]=me[q]=me[oe]=me[ce]=me[M]=!0,me[d]=me[h]=me[A]=me[y]=me[F]=me[b]=me[x]=me[S]=me[E]=me[j]=me[O]=me[L]=me[H]=me[z]=me[Q]=!1;var be=typeof mi=="object"&&mi&&mi.Object===Object&&mi,we=typeof self=="object"&&self&&self.Object===Object&&self,je=be||we||Function("return this")(),X=e&&!e.nodeType&&e,ae=X&&!0&&t&&!t.nodeType&&t,pe=ae&&ae.exports===X,ve=pe&&be.process,ge=(function(){try{return ve&&ve.binding&&ve.binding("util")}catch{}})(),Se=ge&&ge.isTypedArray;function Ae(v,k){for(var V=-1,re=v==null?0:v.length,$e=0,Le=[];++V<re;){var Qe=v[V];k(Qe,V,v)&&(Le[$e++]=Qe)}return Le}function ye(v,k){for(var V=-1,re=k.length,$e=v.length;++V<re;)v[$e+V]=k[V];return v}function Xe(v,k){for(var V=-1,re=v==null?0:v.length;++V<re;)if(k(v[V],V,v))return!0;return!1}function Ye(v,k){for(var V=-1,re=Array(v);++V<v;)re[V]=k(V);return re}function Me(v){return function(k){return v(k)}}function He(v,k){return v.has(k)}function ot(v,k){return v?.[k]}function gt(v){var k=-1,V=Array(v.size);return v.forEach(function(re,$e){V[++k]=[$e,re]}),V}function Zt(v,k){return function(V){return v(k(V))}}function Je(v){var k=-1,V=Array(v.size);return v.forEach(function(re){V[++k]=re}),V}var Ue=Array.prototype,Pt=Function.prototype,Te=Object.prototype,lt=je["__core-js_shared__"],Qt=Pt.toString,mt=Te.hasOwnProperty,za=(function(){var v=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""})(),kn=Te.toString,wn=RegExp("^"+Qt.call(mt).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gt=pe?je.Buffer:void 0,Sn=je.Symbol,Bt=je.Uint8Array,As=Te.propertyIsEnumerable,ss=Ue.splice,Dn=Sn?Sn.toStringTag:void 0,ba=Object.getOwnPropertySymbols,ea=Gt?Gt.isBuffer:void 0,On=Zt(Object.keys,Object),Nn=zn(je,"DataView"),Mn=zn(je,"Map"),xa=zn(je,"Promise"),Ws=zn(je,"Set"),rs=zn(je,"WeakMap"),$n=zn(Object,"create"),ta=ln(Nn),na=ln(Mn),Cs=ln(xa),Mr=ln(Ws),Rr=ln(rs),is=Sn?Sn.prototype:void 0,aa=is?is.valueOf:void 0;function Ut(v){var k=-1,V=v==null?0:v.length;for(this.clear();++k<V;){var re=v[k];this.set(re[0],re[1])}}function Xs(){this.__data__=$n?$n(null):{},this.size=0}function bn(v){var k=this.has(v)&&delete this.__data__[v];return this.size-=k?1:0,k}function At(v){var k=this.__data__;if($n){var V=k[v];return V===s?void 0:V}return mt.call(k,v)?k[v]:void 0}function Jt(v){var k=this.__data__;return $n?k[v]!==void 0:mt.call(k,v)}function sa(v,k){var V=this.__data__;return this.size+=this.has(v)?0:1,V[v]=$n&&k===void 0?s:k,this}Ut.prototype.clear=Xs,Ut.prototype.delete=bn,Ut.prototype.get=At,Ut.prototype.has=Jt,Ut.prototype.set=sa;function Ct(v){var k=-1,V=v==null?0:v.length;for(this.clear();++k<V;){var re=v[k];this.set(re[0],re[1])}}function os(){this.__data__=[],this.size=0}function Ai(v){var k=this.__data__,V=Be(k,v);if(V<0)return!1;var re=k.length-1;return V==re?k.pop():ss.call(k,V,1),--this.size,!0}function Zs(v){var k=this.__data__,V=Be(k,v);return V<0?void 0:k[V][1]}function ls(v){return Be(this.__data__,v)>-1}function js(v,k){var V=this.__data__,re=Be(V,v);return re<0?(++this.size,V.push([v,k])):V[re][1]=k,this}Ct.prototype.clear=os,Ct.prototype.delete=Ai,Ct.prototype.get=Zs,Ct.prototype.has=ls,Ct.prototype.set=js;function zt(v){var k=-1,V=v==null?0:v.length;for(this.clear();++k<V;){var re=v[k];this.set(re[0],re[1])}}function va(){this.size=0,this.__data__={hash:new Ut,map:new(Mn||Ct),string:new Ut}}function ra(v){var k=la(this,v).delete(v);return this.size-=k?1:0,k}function Rn(v){return la(this,v).get(v)}function jt(v){return la(this,v).has(v)}function Vn(v,k){var V=la(this,v),re=V.size;return V.set(v,k),this.size+=V.size==re?0:1,this}zt.prototype.clear=va,zt.prototype.delete=ra,zt.prototype.get=Rn,zt.prototype.has=jt,zt.prototype.set=Vn;function ia(v){var k=-1,V=v==null?0:v.length;for(this.__data__=new zt;++k<V;)this.add(v[k])}function oa(v){return this.__data__.set(v,s),this}function Hn(v){return this.__data__.has(v)}ia.prototype.add=ia.prototype.push=oa,ia.prototype.has=Hn;function Fn(v){var k=this.__data__=new Ct(v);this.size=k.size}function _s(){this.__data__=new Ct,this.size=0}function Qs(v){var k=this.__data__,V=k.delete(v);return this.size=k.size,V}function Ci(v){return this.__data__.get(v)}function ks(v){return this.__data__.has(v)}function Js(v,k){var V=this.__data__;if(V instanceof Ct){var re=V.__data__;if(!Mn||re.length<n-1)return re.push([v,k]),this.size=++V.size,this;V=this.__data__=new zt(re)}return V.set(v,k),this.size=V.size,this}Fn.prototype.clear=_s,Fn.prototype.delete=Qs,Fn.prototype.get=Ci,Fn.prototype.has=ks,Fn.prototype.set=Js;function xe(v,k){var V=Na(v),re=!V&&us(v),$e=!V&&!re&&Rs(v),Le=!V&&!re&&!$e&&Ta(v),Qe=V||re||$e||Le,st=Qe?Ye(v.length,String):[],Mt=st.length;for(var ct in v)mt.call(v,ct)&&!(Qe&&(ct=="length"||$e&&(ct=="offset"||ct=="parent")||Le&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||ki(ct,Mt)))&&st.push(ct);return st}function Be(v,k){for(var V=v.length;V--;)if(zr(v[V][0],k))return V;return-1}function Re(v,k,V){var re=k(v);return Na(v)?re:ye(re,V(v))}function Yt(v){return v==null?v===void 0?Y:D:Dn&&Dn in Object(v)?cs(v):ca(v)}function wa(v){return In(v)&&Yt(v)==d}function Ds(v,k,V,re,$e){return v===k?!0:v==null||k==null||!In(v)&&!In(k)?v!==v&&k!==k:Ln(v,k,V,re,Ds,$e)}function Ln(v,k,V,re,$e,Le){var Qe=Na(v),st=Na(k),Mt=Qe?h:Sa(v),ct=st?h:Sa(k);Mt=Mt==d?O:Mt,ct=ct==d?O:ct;var qt=Mt==O,cn=ct==O,$t=Mt==ct;if($t&&Rs(v)){if(!Rs(k))return!1;Qe=!0,qt=!1}if($t&&!qt)return Le||(Le=new Fn),Qe||Ta(v)?Lr(v,k,V,re,$e,Le):_i(v,k,Mt,V,re,$e,Le);if(!(V&i)){var xn=qt&&mt.call(v,"__wrapped__"),un=cn&&mt.call(k,"__wrapped__");if(xn||un){var Ps=xn?v.value():v,Ea=un?k.value():k;return Le||(Le=new Fn),$e(Ps,Ea,V,re,Le)}}return $t?(Le||(Le=new Fn),Os(v,k,V,re,$e,Le)):!1}function Ml(v){if(!Br(v)||Ll(v))return!1;var k=Ls(v)?wn:Z;return k.test(ln(v))}function Pn(v){return In(v)&&Gn(v.length)&&!!me[Yt(v)]}function ji(v){if(!Pr(v))return On(v);var k=[];for(var V in Object(v))mt.call(v,V)&&V!="constructor"&&k.push(V);return k}function Lr(v,k,V,re,$e,Le){var Qe=V&i,st=v.length,Mt=k.length;if(st!=Mt&&!(Qe&&Mt>st))return!1;var ct=Le.get(v);if(ct&&Le.get(k))return ct==k;var qt=-1,cn=!0,$t=V&l?new ia:void 0;for(Le.set(v,k),Le.set(k,v);++qt<st;){var xn=v[qt],un=k[qt];if(re)var Ps=Qe?re(un,xn,qt,k,v,Le):re(xn,un,qt,v,k,Le);if(Ps!==void 0){if(Ps)continue;cn=!1;break}if($t){if(!Xe(k,function(Ea,tr){if(!He($t,tr)&&(xn===Ea||$e(xn,Ea,V,re,Le)))return $t.push(tr)})){cn=!1;break}}else if(!(xn===un||$e(xn,un,V,re,Le))){cn=!1;break}}return Le.delete(v),Le.delete(k),cn}function _i(v,k,V,re,$e,Le,Qe){switch(V){case F:if(v.byteLength!=k.byteLength||v.byteOffset!=k.byteOffset)return!1;v=v.buffer,k=k.buffer;case A:return!(v.byteLength!=k.byteLength||!Le(new Bt(v),new Bt(k)));case y:case b:case j:return zr(+v,+k);case x:return v.name==k.name&&v.message==k.message;case L:case z:return v==k+"";case E:var st=gt;case H:var Mt=re&i;if(st||(st=Je),v.size!=k.size&&!Mt)return!1;var ct=Qe.get(v);if(ct)return ct==k;re|=l,Qe.set(v,k);var qt=Lr(st(v),st(k),re,$e,Le,Qe);return Qe.delete(v),qt;case P:if(aa)return aa.call(v)==aa.call(k)}return!1}function Os(v,k,V,re,$e,Le){var Qe=V&i,st=Ms(v),Mt=st.length,ct=Ms(k),qt=ct.length;if(Mt!=qt&&!Qe)return!1;for(var cn=Mt;cn--;){var $t=st[cn];if(!(Qe?$t in k:mt.call(k,$t)))return!1}var xn=Le.get(v);if(xn&&Le.get(k))return xn==k;var un=!0;Le.set(v,k),Le.set(k,v);for(var Ps=Qe;++cn<Mt;){$t=st[cn];var Ea=v[$t],tr=k[$t];if(re)var bu=Qe?re(tr,Ea,$t,k,v,Le):re(Ea,tr,$t,v,k,Le);if(!(bu===void 0?Ea===tr||$e(Ea,tr,V,re,Le):bu)){un=!1;break}Ps||(Ps=$t=="constructor")}if(un&&!Ps){var So=v.constructor,No=k.constructor;So!=No&&"constructor"in v&&"constructor"in k&&!(typeof So=="function"&&So instanceof So&&typeof No=="function"&&No instanceof No)&&(un=!1)}return Le.delete(v),Le.delete(k),un}function Ms(v){return Re(v,er,xo)}function la(v,k){var V=v.__data__;return Rl(k)?V[typeof k=="string"?"string":"hash"]:V.map}function zn(v,k){var V=ot(v,k);return Ml(V)?V:void 0}function cs(v){var k=mt.call(v,Dn),V=v[Dn];try{v[Dn]=void 0;var re=!0}catch{}var $e=kn.call(v);return re&&(k?v[Dn]=V:delete v[Dn]),$e}var xo=ba?function(v){return v==null?[]:(v=Object(v),Ae(ba(v),function(k){return As.call(v,k)}))}:Ur,Sa=Yt;(Nn&&Sa(new Nn(new ArrayBuffer(1)))!=F||Mn&&Sa(new Mn)!=E||xa&&Sa(xa.resolve())!=R||Ws&&Sa(new Ws)!=H||rs&&Sa(new rs)!=Q)&&(Sa=function(v){var k=Yt(v),V=k==O?v.constructor:void 0,re=V?ln(V):"";if(re)switch(re){case ta:return F;case na:return E;case Cs:return R;case Mr:return H;case Rr:return Q}return k});function ki(v,k){return k=k??c,!!k&&(typeof v=="number"||le.test(v))&&v>-1&&v%1==0&&v<k}function Rl(v){var k=typeof v;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?v!=="__proto__":v===null}function Ll(v){return!!za&&za in v}function Pr(v){var k=v&&v.constructor,V=typeof k=="function"&&k.prototype||Te;return v===V}function ca(v){return kn.call(v)}function ln(v){if(v!=null){try{return Qt.call(v)}catch{}try{return v+""}catch{}}return""}function zr(v,k){return v===k||v!==v&&k!==k}var us=wa((function(){return arguments})())?wa:function(v){return In(v)&&mt.call(v,"callee")&&!As.call(v,"callee")},Na=Array.isArray;function Ir(v){return v!=null&&Gn(v.length)&&!Ls(v)}var Rs=ea||wo;function vo(v,k){return Ds(v,k)}function Ls(v){if(!Br(v))return!1;var k=Yt(v);return k==S||k==N||k==m||k==U}function Gn(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=c}function Br(v){var k=typeof v;return v!=null&&(k=="object"||k=="function")}function In(v){return v!=null&&typeof v=="object"}var Ta=Se?Me(Se):Pn;function er(v){return Ir(v)?xe(v):ji(v)}function Ur(){return[]}function wo(){return!1}t.exports=vo})(Lc,Lc.exports)),Lc.exports}var Rd={},z2;function vU(){if(z2)return Rd;z2=1,Object.defineProperty(Rd,"__esModule",{value:!0});const t=YE(),e=KE();var n;return(function(s){function i(h={},m={},y=!1){typeof h!="object"&&(h={}),typeof m!="object"&&(m={});let b=t(m);y||(b=Object.keys(b).reduce((x,S)=>(b[S]!=null&&(x[S]=b[S]),x),{}));for(const x in h)h[x]!==void 0&&m[x]===void 0&&(b[x]=h[x]);return Object.keys(b).length>0?b:void 0}s.compose=i;function l(h={},m={}){typeof h!="object"&&(h={}),typeof m!="object"&&(m={});const y=Object.keys(h).concat(Object.keys(m)).reduce((b,x)=>(e(h[x],m[x])||(b[x]=m[x]===void 0?null:m[x]),b),{});return Object.keys(y).length>0?y:void 0}s.diff=l;function c(h={},m={}){h=h||{};const y=Object.keys(m).reduce((b,x)=>(m[x]!==h[x]&&h[x]!==void 0&&(b[x]=m[x]),b),{});return Object.keys(h).reduce((b,x)=>(h[x]!==m[x]&&m[x]===void 0&&(b[x]=null),b),y)}s.invert=c;function d(h,m,y=!1){if(typeof h!="object")return m;if(typeof m!="object")return;if(!y)return m;const b=Object.keys(m).reduce((x,S)=>(h[S]===void 0&&(x[S]=m[S]),x),{});return Object.keys(b).length>0?b:void 0}s.transform=d})(n||(n={})),Rd.default=n,Rd}var Ld={},I2;function WE(){if(I2)return Ld;I2=1,Object.defineProperty(Ld,"__esModule",{value:!0});var t;return(function(e){function n(s){return typeof s.delete=="number"?s.delete:typeof s.retain=="number"?s.retain:typeof s.retain=="object"&&s.retain!==null?1:typeof s.insert=="string"?s.insert.length:1}e.length=n})(t||(t={})),Ld.default=t,Ld}var Pd={},B2;function wU(){if(B2)return Pd;B2=1,Object.defineProperty(Pd,"__esModule",{value:!0});const t=WE();class e{constructor(s){this.ops=s,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(s){s||(s=1/0);const i=this.ops[this.index];if(i){const l=this.offset,c=t.default.length(i);if(s>=c-l?(s=c-l,this.index+=1,this.offset=0):this.offset+=s,typeof i.delete=="number")return{delete:s};{const d={};return i.attributes&&(d.attributes=i.attributes),typeof i.retain=="number"?d.retain=s:typeof i.retain=="object"&&i.retain!==null?d.retain=i.retain:typeof i.insert=="string"?d.insert=i.insert.substr(l,s):d.insert=i.insert,d}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const s=this.ops[this.index];return s?typeof s.delete=="number"?"delete":typeof s.retain=="number"||typeof s.retain=="object"&&s.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const s=this.offset,i=this.index,l=this.next(),c=this.ops.slice(this.index);return this.offset=s,this.index=i,[l].concat(c)}}else return[]}}return Pd.default=e,Pd}var U2;function SU(){return U2||(U2=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=xU(),s=YE(),i=KE(),l=vU();e.AttributeMap=l.default;const c=WE();e.Op=c.default;const d=wU();e.OpIterator=d.default;const h="\0",m=(b,x)=>{if(typeof b!="object"||b===null)throw new Error(`cannot retain a ${typeof b}`);if(typeof x!="object"||x===null)throw new Error(`cannot retain a ${typeof x}`);const S=Object.keys(b)[0];if(!S||S!==Object.keys(x)[0])throw new Error(`embed types not matched: ${S} != ${Object.keys(x)[0]}`);return[S,b[S],x[S]]};class y{constructor(x){Array.isArray(x)?this.ops=x:x!=null&&Array.isArray(x.ops)?this.ops=x.ops:this.ops=[]}static registerEmbed(x,S){this.handlers[x]=S}static unregisterEmbed(x){delete this.handlers[x]}static getHandler(x){const S=this.handlers[x];if(!S)throw new Error(`no handlers for embed type "${x}"`);return S}insert(x,S){const N={};return typeof x=="string"&&x.length===0?this:(N.insert=x,S!=null&&typeof S=="object"&&Object.keys(S).length>0&&(N.attributes=S),this.push(N))}delete(x){return x<=0?this:this.push({delete:x})}retain(x,S){if(typeof x=="number"&&x<=0)return this;const N={retain:x};return S!=null&&typeof S=="object"&&Object.keys(S).length>0&&(N.attributes=S),this.push(N)}push(x){let S=this.ops.length,N=this.ops[S-1];if(x=s(x),typeof N=="object"){if(typeof x.delete=="number"&&typeof N.delete=="number")return this.ops[S-1]={delete:N.delete+x.delete},this;if(typeof N.delete=="number"&&x.insert!=null&&(S-=1,N=this.ops[S-1],typeof N!="object"))return this.ops.unshift(x),this;if(i(x.attributes,N.attributes)){if(typeof x.insert=="string"&&typeof N.insert=="string")return this.ops[S-1]={insert:N.insert+x.insert},typeof x.attributes=="object"&&(this.ops[S-1].attributes=x.attributes),this;if(typeof x.retain=="number"&&typeof N.retain=="number")return this.ops[S-1]={retain:N.retain+x.retain},typeof x.attributes=="object"&&(this.ops[S-1].attributes=x.attributes),this}}return S===this.ops.length?this.ops.push(x):this.ops.splice(S,0,x),this}chop(){const x=this.ops[this.ops.length-1];return x&&typeof x.retain=="number"&&!x.attributes&&this.ops.pop(),this}filter(x){return this.ops.filter(x)}forEach(x){this.ops.forEach(x)}map(x){return this.ops.map(x)}partition(x){const S=[],N=[];return this.forEach(E=>{(x(E)?S:N).push(E)}),[S,N]}reduce(x,S){return this.ops.reduce(x,S)}changeLength(){return this.reduce((x,S)=>S.insert?x+c.default.length(S):S.delete?x-S.delete:x,0)}length(){return this.reduce((x,S)=>x+c.default.length(S),0)}slice(x=0,S=1/0){const N=[],E=new d.default(this.ops);let j=0;for(;j<S&&E.hasNext();){let D;j<x?D=E.next(x-j):(D=E.next(S-j),N.push(D)),j+=c.default.length(D)}return new y(N)}compose(x){const S=new d.default(this.ops),N=new d.default(x.ops),E=[],j=N.peek();if(j!=null&&typeof j.retain=="number"&&j.attributes==null){let O=j.retain;for(;S.peekType()==="insert"&&S.peekLength()<=O;)O-=S.peekLength(),E.push(S.next());j.retain-O>0&&N.next(j.retain-O)}const D=new y(E);for(;S.hasNext()||N.hasNext();)if(N.peekType()==="insert")D.push(N.next());else if(S.peekType()==="delete")D.push(S.next());else{const O=Math.min(S.peekLength(),N.peekLength()),R=S.next(O),U=N.next(O);if(U.retain){const L={};if(typeof R.retain=="number")L.retain=typeof U.retain=="number"?O:U.retain;else if(typeof U.retain=="number")R.retain==null?L.insert=R.insert:L.retain=R.retain;else{const z=R.retain==null?"insert":"retain",[P,Y,Q]=m(R[z],U.retain),A=y.getHandler(P);L[z]={[P]:A.compose(Y,Q,z==="retain")}}const H=l.default.compose(R.attributes,U.attributes,typeof R.retain=="number");if(H&&(L.attributes=H),D.push(L),!N.hasNext()&&i(D.ops[D.ops.length-1],L)){const z=new y(S.rest());return D.concat(z).chop()}}else typeof U.delete=="number"&&(typeof R.retain=="number"||typeof R.retain=="object"&&R.retain!==null)&&D.push(U)}return D.chop()}concat(x){const S=new y(this.ops.slice());return x.ops.length>0&&(S.push(x.ops[0]),S.ops=S.ops.concat(x.ops.slice(1))),S}diff(x,S){if(this.ops===x.ops)return new y;const N=[this,x].map(R=>R.map(U=>{if(U.insert!=null)return typeof U.insert=="string"?U.insert:h;const L=R===x?"on":"with";throw new Error("diff() called "+L+" non-document")}).join("")),E=new y,j=n(N[0],N[1],S,!0),D=new d.default(this.ops),O=new d.default(x.ops);return j.forEach(R=>{let U=R[1].length;for(;U>0;){let L=0;switch(R[0]){case n.INSERT:L=Math.min(O.peekLength(),U),E.push(O.next(L));break;case n.DELETE:L=Math.min(U,D.peekLength()),D.next(L),E.delete(L);break;case n.EQUAL:L=Math.min(D.peekLength(),O.peekLength(),U);const H=D.next(L),z=O.next(L);i(H.insert,z.insert)?E.retain(L,l.default.diff(H.attributes,z.attributes)):E.push(z).delete(L);break}U-=L}}),E.chop()}eachLine(x,S=`
`){const N=new d.default(this.ops);let E=new y,j=0;for(;N.hasNext();){if(N.peekType()!=="insert")return;const D=N.peek(),O=c.default.length(D)-N.peekLength(),R=typeof D.insert=="string"?D.insert.indexOf(S,O)-O:-1;if(R<0)E.push(N.next());else if(R>0)E.push(N.next(R));else{if(x(E,N.next(1).attributes||{},j)===!1)return;j+=1,E=new y}}E.length()>0&&x(E,{},j)}invert(x){const S=new y;return this.reduce((N,E)=>{if(E.insert)S.delete(c.default.length(E));else{if(typeof E.retain=="number"&&E.attributes==null)return S.retain(E.retain),N+E.retain;if(E.delete||typeof E.retain=="number"){const j=E.delete||E.retain;return x.slice(N,N+j).forEach(O=>{E.delete?S.push(O):E.retain&&E.attributes&&S.retain(c.default.length(O),l.default.invert(E.attributes,O.attributes))}),N+j}else if(typeof E.retain=="object"&&E.retain!==null){const j=x.slice(N,N+1),D=new d.default(j.ops).next(),[O,R,U]=m(E.retain,D.insert),L=y.getHandler(O);return S.retain({[O]:L.invert(R,U)},l.default.invert(E.attributes,D.attributes)),N+1}}return N},0),S.chop()}transform(x,S=!1){if(S=!!S,typeof x=="number")return this.transformPosition(x,S);const N=x,E=new d.default(this.ops),j=new d.default(N.ops),D=new y;for(;E.hasNext()||j.hasNext();)if(E.peekType()==="insert"&&(S||j.peekType()!=="insert"))D.retain(c.default.length(E.next()));else if(j.peekType()==="insert")D.push(j.next());else{const O=Math.min(E.peekLength(),j.peekLength()),R=E.next(O),U=j.next(O);if(R.delete)continue;if(U.delete)D.push(U);else{const L=R.retain,H=U.retain;let z=typeof H=="object"&&H!==null?H:O;if(typeof L=="object"&&L!==null&&typeof H=="object"&&H!==null){const P=Object.keys(L)[0];if(P===Object.keys(H)[0]){const Y=y.getHandler(P);Y&&(z={[P]:Y.transform(L[P],H[P],S)})}}D.retain(z,l.default.transform(R.attributes,U.attributes,S))}}return D.chop()}transformPosition(x,S=!1){S=!!S;const N=new d.default(this.ops);let E=0;for(;N.hasNext()&&E<=x;){const j=N.peekLength(),D=N.peekType();if(N.next(),D==="delete"){x-=Math.min(j,x-E);continue}else D==="insert"&&(E<x||!S)&&(x+=j);E+=j}return x}}y.Op=c.default,y.OpIterator=d.default,y.AttributeMap=l.default,y.handlers={},e.default=y,t.exports=y,t.exports.default=y})(Md,Md.exports)),Md.exports}var Qa=SU();const ze=jf(Qa);class Es extends Pa{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Es.blotName="break";Es.tagName="BR";let Ns=class extends Ef{};const NU={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Xf(t){return t.replace(/[&<>"']/g,e=>NU[e])}class Kn extends W0{static allowedChildren=[Kn,Es,Pa,Ns];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,n){const s=Kn.order.indexOf(e),i=Kn.order.indexOf(n);return s>=0||i>=0?s-i:e===n?0:e<n?-1:1}formatAt(e,n,s,i){if(Kn.compare(this.statics.blotName,s)<0&&this.scroll.query(s,Ie.BLOT)){const l=this.isolate(e,n);i&&l.wrap(s,i)}else super.formatAt(e,n,s,i)}optimize(e){if(super.optimize(e),this.parent instanceof Kn&&Kn.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}const q2=1;class _n extends nu{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=XE(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,s,i){n<=0||(this.scroll.query(s,Ie.BLOCK)?e+n===this.length()&&this.format(s,i):super.formatAt(e,Math.min(n,this.length()-e-1),s,i),this.cache={})}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s),this.cache={};return}if(n.length===0)return;const i=n.split(`
`),l=i.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let c=this;i.reduce((d,h)=>(c=c.split(d,!0),c.insertAt(0,h),h.length),e+l.length)}insertBefore(e,n){const{head:s}=this.children;super.insertBefore(e,n),s instanceof Es&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+q2),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(e===0||e>=this.length()-q2)){const i=this.clone();return e===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const s=super.split(e,n);return this.cache={},s}}_n.blotName="block";_n.tagName="P";_n.defaultChild=Es;_n.allowedChildren=[Es,Kn,Pa,Ns];class Xa extends Pa{attach(){super.attach(),this.attributes=new Kf(this.domNode)}delta(){return new ze().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const s=this.scroll.query(e,Ie.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,n)}formatAt(e,n,s,i){this.format(s,i)}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s);return}const i=n.split(`
`),l=i.pop(),c=i.map(h=>{const m=this.scroll.create(_n.blotName);return m.insertAt(0,h),m}),d=this.split(e);c.forEach(h=>{this.parent.insertBefore(h,d)}),l&&this.parent.insertBefore(this.scroll.create("text",l),d)}}Xa.scope=Ie.BLOCK_BLOT;function XE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(Un).reduce((n,s)=>s.length()===0?n:n.insert(s.value(),Ya(s,{},e)),new ze).insert(`
`,Ya(t))}function Ya(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:Ya(t.parent,e,n)}class bs extends Pa{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,n,s){super(e,n),this.selection=s,this.textNode=document.createTextNode(bs.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let s=this,i=0;for(;s!=null&&s.statics.scope!==Ie.BLOCK_BLOT;)i+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=bs.CONTENTS.length,s.optimize(),s.formatAt(i,bs.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof Ns?this.prev:null,s=n?n.length():0,i=this.next instanceof Ns?this.next:null,l=i?i.text:"",{textNode:c}=this,d=c.data.split(bs.CONTENTS).join("");c.data=bs.CONTENTS;let h;if(n)h=n,(d||i)&&(n.insertAt(n.length(),d+l),i&&i.remove());else if(i)h=i,i.insertAt(0,d);else{const m=document.createTextNode(d);h=this.scroll.create(m),this.parent.insertBefore(h,this)}if(this.remove(),e){const m=(x,S)=>n&&x===n.domNode?S:x===c?s+S-1:i&&x===i.domNode?s+d.length+S:null,y=m(e.start.node,e.start.offset),b=m(e.end.node,e.end.offset);if(y!==null&&b!==null)return{startNode:h.domNode,startOffset:y,endNode:h.domNode,endOffset:b}}return null}update(e,n){if(e.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(n.range=s)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=bs.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}}var Ip={exports:{}},$2;function TU(){return $2||($2=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function i(h,m,y){this.fn=h,this.context=m,this.once=y||!1}function l(h,m,y,b,x){if(typeof y!="function")throw new TypeError("The listener must be a function");var S=new i(y,b||h,x),N=n?n+m:m;return h._events[N]?h._events[N].fn?h._events[N]=[h._events[N],S]:h._events[N].push(S):(h._events[N]=S,h._eventsCount++),h}function c(h,m){--h._eventsCount===0?h._events=new s:delete h._events[m]}function d(){this._events=new s,this._eventsCount=0}d.prototype.eventNames=function(){var m=[],y,b;if(this._eventsCount===0)return m;for(b in y=this._events)e.call(y,b)&&m.push(n?b.slice(1):b);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(y)):m},d.prototype.listeners=function(m){var y=n?n+m:m,b=this._events[y];if(!b)return[];if(b.fn)return[b.fn];for(var x=0,S=b.length,N=new Array(S);x<S;x++)N[x]=b[x].fn;return N},d.prototype.listenerCount=function(m){var y=n?n+m:m,b=this._events[y];return b?b.fn?1:b.length:0},d.prototype.emit=function(m,y,b,x,S,N){var E=n?n+m:m;if(!this._events[E])return!1;var j=this._events[E],D=arguments.length,O,R;if(j.fn){switch(j.once&&this.removeListener(m,j.fn,void 0,!0),D){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,y),!0;case 3:return j.fn.call(j.context,y,b),!0;case 4:return j.fn.call(j.context,y,b,x),!0;case 5:return j.fn.call(j.context,y,b,x,S),!0;case 6:return j.fn.call(j.context,y,b,x,S,N),!0}for(R=1,O=new Array(D-1);R<D;R++)O[R-1]=arguments[R];j.fn.apply(j.context,O)}else{var U=j.length,L;for(R=0;R<U;R++)switch(j[R].once&&this.removeListener(m,j[R].fn,void 0,!0),D){case 1:j[R].fn.call(j[R].context);break;case 2:j[R].fn.call(j[R].context,y);break;case 3:j[R].fn.call(j[R].context,y,b);break;case 4:j[R].fn.call(j[R].context,y,b,x);break;default:if(!O)for(L=1,O=new Array(D-1);L<D;L++)O[L-1]=arguments[L];j[R].fn.apply(j[R].context,O)}}return!0},d.prototype.on=function(m,y,b){return l(this,m,y,b,!1)},d.prototype.once=function(m,y,b){return l(this,m,y,b,!0)},d.prototype.removeListener=function(m,y,b,x){var S=n?n+m:m;if(!this._events[S])return this;if(!y)return c(this,S),this;var N=this._events[S];if(N.fn)N.fn===y&&(!x||N.once)&&(!b||N.context===b)&&c(this,S);else{for(var E=0,j=[],D=N.length;E<D;E++)(N[E].fn!==y||x&&!N[E].once||b&&N[E].context!==b)&&j.push(N[E]);j.length?this._events[S]=j.length===1?j[0]:j:c(this,S)}return this},d.prototype.removeAllListeners=function(m){var y;return m?(y=n?n+m:m,this._events[y]&&c(this,y)):(this._events=new s,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,t.exports=d})(Ip)),Ip.exports}var EU=TU();const AU=jf(EU),$g=new WeakMap,Vg=["error","warn","log","info"];let Hg="warn";function ZE(t){if(Hg&&Vg.indexOf(t)<=Vg.indexOf(Hg)){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];console[t](...n)}}function Or(t){return Vg.reduce((e,n)=>(e[n]=ZE.bind(console,n,t),e),{})}Or.level=t=>{Hg=t};ZE.level=Or.level;const Bp=Or("quill:events"),CU=["selectionchange","mousedown","mouseup","click"];CU.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const l=$g.get(i);l&&l.emitter&&l.emitter.handleDOM(...n)})})});class Oe extends AU{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Bp.error)}emit(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return Bp.log.call(Bp,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(l=>{let{node:c,handler:d}=l;(e.target===c||c.contains(e.target))&&d(e,...s)})}listenDOM(e,n,s){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:s})}}const Up=Or("quill:selection");class oo{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class jU{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new oo(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Oe.sources.USER),1)}),this.emitter.on(Oe.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(Oe.events.SCROLL_UPDATE,(i,l)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const c=l.some(d=>d.type==="characterData"||d.type==="childList"||d.type==="attributes"&&d.target===this.root);this.update(c?Oe.sources.SILENT:i)}catch{}})}),this.emitter.on(Oe.events.SCROLL_OPTIMIZE,(s,i)=>{if(i.range){const{startNode:l,startOffset:c,endNode:d,endOffset:h}=i.range;this.setNativeRange(l,c,d,h),this.update(Oe.sources.SILENT)}}),this.update(Oe.sources.SILENT)}handleComposition(){this.emitter.on(Oe.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Oe.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Oe.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(e,Ie.BLOCK))){if(s.start.node!==this.cursor.textNode){const i=this.scroll.find(s.start.node,!1);if(i==null)return;if(i instanceof Un){const l=i.split(s.start.offset);i.parent.insertBefore(this.cursor,l)}else i.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();e=Math.min(e,s-1),n=Math.min(e+n,s-1)-e;let i,[l,c]=this.scroll.leaf(e);if(l==null)return null;if(n>0&&c===l.length()){const[y]=this.scroll.leaf(e+1);if(y){const[b]=this.scroll.line(e),[x]=this.scroll.line(e+1);b===x&&(l=y,c=0)}}[i,c]=l.position(c,!0);const d=document.createRange();if(n>0)return d.setStart(i,c),[l,c]=this.scroll.leaf(e+n),l==null?null:([i,c]=l.position(c,!0),d.setEnd(i,c),d.getBoundingClientRect());let h="left",m;if(i instanceof Text){if(!i.data.length)return null;c<i.data.length?(d.setStart(i,c),d.setEnd(i,c+1)):(d.setStart(i,c-1),d.setEnd(i,c),h="right"),m=d.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;m=l.domNode.getBoundingClientRect(),c>0&&(h="right")}return{bottom:m.top+m.height,height:m.height,left:m[h],right:m[h],top:m.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const s=this.normalizeNative(n);return Up.info("getNativeRange",s),s}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&qp(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const s=n.map(c=>{const[d,h]=c,m=this.scroll.find(d,!0),y=m.offset(this.scroll);return h===0?y:m instanceof Un?y+m.index(d,h):y+m.length()}),i=Math.min(Math.max(...s),this.scroll.length()-1),l=Math.min(i,...s);return new oo(l,i-l)}normalizeNative(e){if(!qp(this.root,e.startContainer)||!e.collapsed&&!qp(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(s=>{let{node:i,offset:l}=s;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>l)i=i.childNodes[l],l=0;else if(i.childNodes.length===l)i=i.lastChild,i instanceof Text?l=i.data.length:i.childNodes.length>0?l=i.childNodes.length:l=i.childNodes.length+1;else break;s.node=i,s.offset=l}),n}rangeToNative(e){const n=this.scroll.length(),s=(i,l)=>{i=Math.min(n-1,i);const[c,d]=this.scroll.leaf(i);return c?c.position(d,l):[null,-1]};return[...s(e.index,!1),...s(e.index+e.length,!0)]}setNativeRange(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Up.info("setNativeRange",e,n,s,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||s.parentNode==null))return;const c=document.getSelection();if(c!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:d}=this.getNativeRange()||{};if(d==null||l||e!==d.startContainer||n!==d.startOffset||s!==d.endContainer||i!==d.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),s instanceof Element&&s.tagName==="BR"&&(i=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const h=document.createRange();h.setStart(e,n),h.setEnd(s,i),c.removeAllRanges(),c.addRange(h)}}else c.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oe.sources.API;if(typeof n=="string"&&(s=n,n=!1),Up.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,n)}else this.setNativeRange(null);this.update(s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oe.sources.USER;const n=this.lastRange,[s,i]=this.getRange();if(this.lastRange=s,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!hi(n,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const c=this.cursor.restore();c&&this.setNativeRange(c.startNode,c.startOffset,c.endNode,c.endOffset)}const l=[Oe.events.SELECTION_CHANGE,hl(this.lastRange),hl(n),e];this.emitter.emit(Oe.events.EDITOR_CHANGE,...l),e!==Oe.sources.SILENT&&this.emitter.emit(...l)}}}function qp(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const _U=/^[ -~]*$/;class kU{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const s=V2(e),i=new ze;return OU(s.ops.slice()).reduce((c,d)=>{const h=Qa.Op.length(d);let m=d.attributes||{},y=!1,b=!1;if(d.insert!=null){if(i.retain(h),typeof d.insert=="string"){const N=d.insert;b=!N.endsWith(`
`)&&(n<=c||!!this.scroll.descendant(Xa,c)[0]),this.scroll.insertAt(c,N);const[E,j]=this.scroll.line(c);let D=bi({},Ya(E));if(E instanceof _n){const[O]=E.descendant(Un,j);O&&(D=bi(D,Ya(O)))}m=Qa.AttributeMap.diff(D,m)||{}}else if(typeof d.insert=="object"){const N=Object.keys(d.insert)[0];if(N==null)return c;const E=this.scroll.query(N,Ie.INLINE)!=null;if(E)(n<=c||this.scroll.descendant(Xa,c)[0])&&(b=!0);else if(c>0){const[j,D]=this.scroll.descendant(Un,c-1);j instanceof Ns?j.value()[D]!==`
`&&(y=!0):j instanceof Pa&&j.statics.scope===Ie.INLINE_BLOT&&(y=!0)}if(this.scroll.insertAt(c,N,d.insert[N]),E){const[j]=this.scroll.descendant(Un,c);if(j){const D=bi({},Ya(j));m=Qa.AttributeMap.diff(D,m)||{}}}}n+=h}else if(i.push(d),d.retain!==null&&typeof d.retain=="object"){const N=Object.keys(d.retain)[0];if(N==null)return c;this.scroll.updateEmbedAt(c,N,d.retain[N])}Object.keys(m).forEach(N=>{this.scroll.formatAt(c,h,N,m[N])});const x=y?1:0,S=b?1:0;return n+=x+S,i.retain(x),i.delete(S),c+h+x+S},0),i.reduce((c,d)=>typeof d.delete=="number"?(this.scroll.deleteAt(c,d.delete),c):c+Qa.Op.length(d),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new ze().retain(e).delete(n))}formatLine(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(l=>{this.scroll.lines(e,Math.max(n,1)).forEach(c=>{c.format(l,s[l])})}),this.scroll.optimize();const i=new ze().retain(e).retain(n,hl(s));return this.update(i)}formatText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(l=>{this.scroll.formatAt(e,n,l,s[l])});const i=new ze().retain(e).retain(n,hl(s));return this.update(i)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new ze)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],i=[];n===0?this.scroll.path(e).forEach(d=>{const[h]=d;h instanceof _n?s.push(h):h instanceof Un&&i.push(h)}):(s=this.scroll.lines(e,n),i=this.scroll.descendants(Un,e,n));const[l,c]=[s,i].map(d=>{const h=d.shift();if(h==null)return{};let m=Ya(h);for(;Object.keys(m).length>0;){const y=d.shift();if(y==null)return m;m=DU(Ya(y),m)}return m});return{...l,...c}}getHTML(e,n){const[s,i]=this.scroll.line(e);if(s){const l=s.length();return s.length()>=i+n&&!(i===0&&n===l)?au(s,i,n,!0):au(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(e,n){const s=V2(n),i=new ze().retain(e).concat(s);return this.scroll.insertContents(e,s),this.update(i)}insertEmbed(e,n,s){return this.scroll.insertAt(e,n,s),this.update(new ze().retain(e).insert({[n]:s}))}insertText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(s).forEach(i=>{this.scroll.formatAt(e,n.length,i,s[i])}),this.update(new ze().retain(e).insert(n,hl(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==_n.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof Es}removeFormat(e,n){const s=this.getText(e,n),[i,l]=this.scroll.line(e+n);let c=0,d=new ze;i!=null&&(c=i.length()-l,d=i.delta().slice(l,l+c-1).insert(`
`));const m=this.getContents(e,n+c).diff(new ze().insert(s).concat(d)),y=new ze().retain(e).concat(m);return this.applyDelta(y)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(_U)&&this.scroll.find(n[0].target)){const l=this.scroll.find(n[0].target),c=Ya(l),d=l.offset(this.scroll),h=n[0].oldValue.replace(bs.CONTENTS,""),m=new ze().insert(h),y=new ze().insert(l.value()),b=s&&{oldRange:H2(s.oldRange,-d),newRange:H2(s.newRange,-d)};e=new ze().retain(d).concat(m.diff(y,b)).reduce((S,N)=>N.insert?S.insert(N.insert,c):S.push(N),new ze),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!hi(i.compose(e),this.delta))&&(e=i.diff(this.delta,s));return e}}function ol(t,e,n){if(t.length===0){const[S]=$p(n.pop());return e<=0?`</li></${S}>`:`</li></${S}>${ol([],e-1,n)}`}const[{child:s,offset:i,length:l,indent:c,type:d},...h]=t,[m,y]=$p(d);if(c>e)return n.push(d),c===e+1?`<${m}><li${y}>${au(s,i,l)}${ol(h,c,n)}`:`<${m}><li>${ol(t,e+1,n)}`;const b=n[n.length-1];if(c===e&&d===b)return`</li><li${y}>${au(s,i,l)}${ol(h,c,n)}`;const[x]=$p(n.pop());return`</li></${x}>${ol(t,e-1,n)}`}function au(t,e,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof Ns)return Xf(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof Ss){if(t.statics.blotName==="list-container"){const m=[];return t.children.forEachAt(e,n,(y,b,x)=>{const S="formats"in y&&typeof y.formats=="function"?y.formats():{};m.push({child:y,offset:b,length:x,indent:S.indent||0,type:S.list})}),ol(m,-1,[])}const i=[];if(t.children.forEachAt(e,n,(m,y,b)=>{i.push(au(m,y,b))}),s||t.statics.blotName==="list")return i.join("");const{outerHTML:l,innerHTML:c}=t.domNode,[d,h]=l.split(`>${c}<`);return d==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${h}`:`${d}>${i.join("")}<${h}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function DU(t,e){return Object.keys(e).reduce((n,s)=>{if(t[s]==null)return n;const i=e[s];return i===t[s]?n[s]=i:Array.isArray(i)?i.indexOf(t[s])<0?n[s]=i.concat([t[s]]):n[s]=i:n[s]=[i,t[s]],n},{})}function $p(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function V2(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const s=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(s,n.attributes)}return e.push(n)},new ze)}function H2(t,e){let{index:n,length:s}=t;return new oo(n+e,s)}function OU(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((i,l)=>{l&&e.push({insert:`
`,attributes:n.attributes}),i&&e.push({insert:i,attributes:n.attributes})}):e.push(n)}),e}class Ks{static DEFAULTS={};constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}const zd="\uFEFF";class Z0 extends Pa{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(zd),this.rightGuard=document.createTextNode(zd),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,s;const i=e.data.split(zd).join("");if(e===this.leftGuard)if(this.prev instanceof Ns){const l=this.prev.length();this.prev.insertAt(l,i),n={startNode:this.prev.domNode,startOffset:l+i.length}}else s=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(s),this),n={startNode:s,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof Ns?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(s=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(s),this.next),n={startNode:s,startOffset:i.length}));return e.data=zd,n}update(e,n){e.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const i=this.restore(s.target);i&&(n.range=i)}})}}class MU{isComposing=!1;constructor(e,n){this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof Z0)&&(this.emitter.emit(Oe.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Oe.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Oe.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Oe.events.COMPOSITION_END,e),this.isComposing=!1}}class Ol{static DEFAULTS={modules:{}};static themes={default:Ol};modules={};constructor(e,n){this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}}const RU=t=>t.parentElement||t.getRootNode().host||null,LU=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,s="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*s,left:e.left}},Id=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},F2=(t,e,n,s,i,l)=>t<n&&e>s?0:t<n?-(n-t+i):e>s?e-t>s-n?t+i-n:e-s+l:0,PU=(t,e)=>{const n=t.ownerDocument;let s=e,i=t;for(;i;){const l=i===n.body,c=l?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:LU(i),d=getComputedStyle(i),h=F2(s.left,s.right,c.left,c.right,Id(d.scrollPaddingLeft),Id(d.scrollPaddingRight)),m=F2(s.top,s.bottom,c.top,c.bottom,Id(d.scrollPaddingTop),Id(d.scrollPaddingBottom));if(h||m)if(l)n.defaultView?.scrollBy(h,m);else{const{scrollLeft:y,scrollTop:b}=i;m&&(i.scrollTop+=m),h&&(i.scrollLeft+=h);const x=i.scrollLeft-y,S=i.scrollTop-b;s={left:s.left-x,top:s.top-S,right:s.right-x,bottom:s.bottom-S}}i=l||d.position==="fixed"?null:RU(i)}},zU=100,IU=["block","break","cursor","inline","scroll","text"],BU=(t,e,n)=>{const s=new vl;return IU.forEach(i=>{const l=e.query(i);l&&s.register(l)}),t.forEach(i=>{let l=e.query(i);l||n.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let c=0;for(;l;)if(s.register(l),l="blotName"in l?l.requiredContainer??null:null,c+=1,c>zU){n.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),s},pl=Or("quill"),Bd=new vl;Ss.uiClass="ql-ui";class fe{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Bd,theme:"default"};static events=Oe.events;static sources=Oe.sources;static version="2.0.3";static imports={delta:ze,parchment:bU,"core/module":Ks,"core/theme":Ol};static debug(e){e===!0&&(e="log"),Or.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return $g.get(e)||Bd.find(e,n)}static import(e){return this.imports[e]==null&&pl.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in e?e.attrName:e.blotName;typeof s=="string"?this.register(`formats/${s}`,e,n):Object.keys(e).forEach(i=>{this.register(i,e[i],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!s&&pl.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&Bd.register(n),typeof n.register=="function"&&n.register(Bd)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=UU(e,n),this.container=this.options.container,this.container==null){pl.error("Invalid Quill container",e);return}this.options.debug&&fe.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",$g.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Oe;const i=X0.blotName,l=this.options.registry.query(i);if(!l||!("blotName"in l))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new l(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new kU(this.scroll),this.selection=new jU(this.scroll,this.emitter),this.composition=new MU(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Oe.events.EDITOR_CHANGE,c=>{c===Oe.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Oe.events.SCROLL_UPDATE,(c,d)=>{const h=this.selection.lastRange,[m]=this.selection.getRange(),y=h&&m?{oldRange:h,newRange:m}:void 0;ps.call(this,()=>this.editor.update(null,d,y),c)}),this.emitter.on(Oe.events.SCROLL_EMBED_UPDATE,(c,d)=>{const h=this.selection.lastRange,[m]=this.selection.getRange(),y=h&&m?{oldRange:h,newRange:m}:void 0;ps.call(this,()=>{const b=new ze().retain(c.offset(this)).retain({[c.statics.blotName]:d});return this.editor.update(b,[],y)},fe.sources.USER)}),s){const c=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(c)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const s=e;e=document.createElement("div"),e.classList.add(s)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,s){return[e,n,,s]=br(e,n,s),ps.call(this,()=>this.editor.deleteText(e,n),s,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oe.sources.API;return ps.call(this,()=>{const i=this.getSelection(!0);let l=new ze;if(i==null)return l;if(this.scroll.query(e,Ie.BLOCK))l=this.editor.formatLine(i.index,i.length,{[e]:n});else{if(i.length===0)return this.selection.format(e,n),l;l=this.editor.formatText(i.index,i.length,{[e]:n})}return this.setSelection(i,Oe.sources.SILENT),l},s)}formatLine(e,n,s,i,l){let c;return[e,n,c,l]=br(e,n,s,i,l),ps.call(this,()=>this.editor.formatLine(e,n,c),l,e,0)}formatText(e,n,s,i,l){let c;return[e,n,c,l]=br(e,n,s,i,l),ps.call(this,()=>this.editor.formatText(e,n,c),l,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof e=="number"?s=this.selection.getBounds(e,n):s=this.selection.getBounds(e.index,e.length),!s)return null;const i=this.container.getBoundingClientRect();return{bottom:s.bottom-i.top,height:s.height,left:s.left-i.left,right:s.right-i.left,top:s.top-i.top,width:s.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=br(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=br(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=br(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:fe.sources.API;return ps.call(this,()=>this.editor.insertEmbed(e,n,s),i,e)}insertText(e,n,s,i,l){let c;return[e,,c,l]=br(e,0,s,i,l),ps.call(this,()=>this.editor.insertText(e,n,c),l,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,s){return[e,n,,s]=br(e,n,s),ps.call(this,()=>this.editor.removeFormat(e,n),s,e)}scrollRectIntoView(e){PU(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Oe.sources.API;return ps.call(this,()=>{e=new ze(e);const s=this.getLength(),i=this.editor.deleteText(0,s),l=this.editor.insertContents(0,e),c=this.editor.deleteText(this.getLength()-1,1);return i.compose(l).compose(c)},n)}setSelection(e,n,s){e==null?this.selection.setRange(null,n||fe.sources.API):([e,n,,s]=br(e,n,s),this.selection.setRange(new oo(Math.max(0,e),n),s),s!==Oe.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Oe.sources.API;const s=new ze().insert(e);return this.setContents(s,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oe.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Oe.sources.API;return ps.call(this,()=>(e=new ze(e),this.editor.applyDelta(e)),n,!0)}}function G2(t){return typeof t=="string"?document.querySelector(t):t}function Vp(t){return Object.entries(t??{}).reduce((e,n)=>{let[s,i]=n;return{...e,[s]:i===!0?{}:i}},{})}function Y2(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function UU(t,e){const n=G2(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===fe.DEFAULTS.theme?Ol:fe.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:l,...c}=fe.DEFAULTS,{modules:d,...h}=i.DEFAULTS;let m=Vp(e.modules);m!=null&&m.toolbar&&m.toolbar.constructor!==Object&&(m={...m,toolbar:{container:m.toolbar}});const y=bi({},Vp(l),Vp(d),m),b={...c,...Y2(h),...Y2(e)};let x=e.registry;return x?e.formats&&pl.warn('Ignoring "formats" option because "registry" is specified'):x=e.formats?BU(e.formats,b.registry,pl):b.registry,{...b,registry:x,container:n,theme:i,modules:Object.entries(y).reduce((S,N)=>{let[E,j]=N;if(!j)return S;const D=fe.import(`modules/${E}`);return D==null?(pl.error(`Cannot load ${E} module. Are you sure you registered it?`),S):{...S,[E]:bi({},D.DEFAULTS||{},j)}},{}),bounds:G2(b.bounds)}}function ps(t,e,n,s){if(!this.isEnabled()&&e===Oe.sources.USER&&!this.allowReadOnlyEdits)return new ze;let i=n==null?null:this.getSelection();const l=this.editor.delta,c=t();if(i!=null&&(n===!0&&(n=i.index),s==null?i=K2(i,c,e):s!==0&&(i=K2(i,n,s,e)),this.setSelection(i,Oe.sources.SILENT)),c.length()>0){const d=[Oe.events.TEXT_CHANGE,c,l,e];this.emitter.emit(Oe.events.EDITOR_CHANGE,...d),e!==Oe.sources.SILENT&&this.emitter.emit(...d)}return c}function br(t,e,n,s,i){let l={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(i=s,s=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(i=s,s=n,n=e,e=0),typeof n=="object"?(l=n,i=s):typeof n=="string"&&(s!=null?l[n]=s:i=n),i=i||Oe.sources.API,[t,e,l,i]}function K2(t,e,n,s){const i=typeof n=="number"?n:0;if(t==null)return null;let l,c;return e&&typeof e.transformPosition=="function"?[l,c]=[t.index,t.index+t.length].map(d=>e.transformPosition(d,s!==Oe.sources.USER)):[l,c]=[t.index,t.index+t.length].map(d=>d<e||d===e&&s===Oe.sources.USER?d:i>=0?d+i:Math.max(e,d+i)),new oo(l,c-l)}class go extends Wf{}function W2(t){return t instanceof _n||t instanceof Xa}function X2(t){return typeof t.updateContent=="function"}class qU extends X0{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=_n;static allowedChildren=[_n,Xa,go];constructor(e,n,s){let{emitter:i}=s;super(e,n),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",l=>this.handleDragStart(l))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Oe.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Oe.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(Oe.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[s,i]=this.line(e),[l]=this.line(e+n);if(super.deleteAt(e,n),l!=null&&s!==l&&i>0){if(s instanceof Xa||l instanceof Xa){this.optimize();return}const c=l.children.head instanceof Es?null:l.children.head;s.moveChildren(l,c),s.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,s,i){super.formatAt(e,n,s,i),this.optimize()}insertAt(e,n,s){if(e>=this.length())if(s==null||this.scroll.query(n,Ie.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),s==null&&n.endsWith(`
`)?i.insertAt(0,n.slice(0,-1),s):i.insertAt(0,n,s)}else{const i=this.scroll.create(n,s);this.appendChild(i)}else super.insertAt(e,n,s);this.optimize()}insertBefore(e,n){if(e.statics.scope===Ie.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(e),super.insertBefore(s,n)}else super.insertBefore(e,n)}insertContents(e,n){const s=this.deltaToRenderBlocks(n.concat(new ze().insert(`
`))),i=s.pop();if(i==null)return;this.batchStart();const l=s.shift();if(l){const h=l.type==="block"&&(l.delta.length()===0||!this.descendant(Xa,e)[0]&&e<this.length()),m=l.type==="block"?l.delta:new ze().insert({[l.key]:l.value});Hp(this,e,m);const y=l.type==="block"?1:0,b=e+m.length()+y;h&&this.insertAt(b-1,`
`);const x=Ya(this.line(e)[0]),S=Qa.AttributeMap.diff(x,l.attributes)||{};Object.keys(S).forEach(N=>{this.formatAt(b-1,1,N,S[N])}),e=b}let[c,d]=this.children.find(e);if(s.length&&(c&&(c=c.split(d),d=0),s.forEach(h=>{if(h.type==="block"){const m=this.createBlock(h.attributes,c||void 0);Hp(m,0,h.delta)}else{const m=this.create(h.key,h.value);this.insertBefore(m,c||void 0),Object.keys(h.attributes).forEach(y=>{m.format(y,h.attributes[y])})}})),i.type==="block"&&i.delta.length()){const h=c?c.offset(c.scroll)+d:this.length();Hp(this,h,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[s,i]=n;return s instanceof Un?[s,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(W2,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(i,l,c)=>{let d=[],h=c;return i.children.forEachAt(l,c,(m,y,b)=>{W2(m)?d.push(m):m instanceof Wf&&(d=d.concat(s(m,y,h))),h-=b}),d};return s(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(Oe.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=Oe.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(s=>{let{target:i}=s;const l=this.find(i,!0);return l&&!X2(l)}),e.length>0&&this.emitter.emit(Oe.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Oe.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,s){const[i]=this.descendant(l=>l instanceof Xa,e);i&&i.statics.blotName===n&&X2(i)&&i.updateContent(s)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let s=new ze;return e.forEach(i=>{const l=i?.insert;if(l)if(typeof l=="string"){const c=l.split(`
`);c.slice(0,-1).forEach(h=>{s.insert(h,i.attributes),n.push({type:"block",delta:s,attributes:i.attributes??{}}),s=new ze});const d=c[c.length-1];d&&s.insert(d,i.attributes)}else{const c=Object.keys(l)[0];if(!c)return;this.query(c,Ie.INLINE)?s.push(i):(s.length()&&n.push({type:"block",delta:s,attributes:{}}),s=new ze,n.push({type:"blockEmbed",key:c,value:l[c],attributes:i.attributes??{}}))}}),s.length()&&n.push({type:"block",delta:s,attributes:{}}),n}createBlock(e,n){let s;const i={};Object.entries(e).forEach(d=>{let[h,m]=d;this.query(h,Ie.BLOCK&Ie.BLOT)!=null?s=h:i[h]=m});const l=this.create(s||this.statics.defaultChild.blotName,s?e[s]:void 0);this.insertBefore(l,n||void 0);const c=l.length();return Object.entries(i).forEach(d=>{let[h,m]=d;l.formatAt(0,c,h,m)}),l}}function Hp(t,e,n){n.reduce((s,i)=>{const l=Qa.Op.length(i);let c=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const d=i.insert;t.insertAt(s,d);const[h]=t.descendant(Un,s),m=Ya(h);c=Qa.AttributeMap.diff(m,c)||{}}else if(typeof i.insert=="object"){const d=Object.keys(i.insert)[0];if(d==null)return s;if(t.insertAt(s,d,i.insert[d]),t.scroll.query(d,Ie.INLINE)!=null){const[m]=t.descendant(Un,s),y=Ya(m);c=Qa.AttributeMap.diff(y,c)||{}}}}return Object.keys(c).forEach(d=>{t.formatAt(s,l,d,c[d])}),s+l},e)}const Q0={scope:Ie.BLOCK,whitelist:["right","center","justify"]},$U=new Gs("align","align",Q0),QE=new Ts("align","ql-align",Q0),JE=new Ei("align","text-align",Q0);class eA extends Ei{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):n}}const VU=new Ts("color","ql-color",{scope:Ie.INLINE}),J0=new eA("color","color",{scope:Ie.INLINE}),HU=new Ts("background","ql-bg",{scope:Ie.INLINE}),ey=new eA("background","background-color",{scope:Ie.INLINE});class yo extends go{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${Xf(this.code(e,n))}
</pre>`}}class Zn extends _n{static TAB="  ";static register(){fe.register(yo)}}class ty extends Kn{}ty.blotName="code";ty.tagName="CODE";Zn.blotName="code-block";Zn.className="ql-code-block";Zn.tagName="DIV";yo.blotName="code-block-container";yo.className="ql-code-block-container";yo.tagName="DIV";yo.allowedChildren=[Zn];Zn.allowedChildren=[Ns,Es,bs];Zn.requiredContainer=yo;const ny={scope:Ie.BLOCK,whitelist:["rtl"]},tA=new Gs("direction","dir",ny),nA=new Ts("direction","ql-direction",ny),aA=new Ei("direction","direction",ny),sA={scope:Ie.INLINE,whitelist:["serif","monospace"]},rA=new Ts("font","ql-font",sA);class FU extends Ei{value(e){return super.value(e).replace(/["']/g,"")}}const iA=new FU("font","font-family",sA),oA=new Ts("size","ql-size",{scope:Ie.INLINE,whitelist:["small","large","huge"]}),lA=new Ei("size","font-size",{scope:Ie.INLINE,whitelist:["10px","18px","32px"]}),GU=Or("quill:keyboard"),YU=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Zf extends Ks{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!n[s]!==e[s]&&n[s]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=WU(e);if(i==null){GU.warn("Attempted to add invalid keyboard binding",i);return}typeof n=="function"&&(n={handler:n}),typeof s=="function"&&(s={handler:s}),(Array.isArray(i.key)?i.key:[i.key]).forEach(c=>{const d={...i,key:c,...n,...s};this.bindings[d.key]=this.bindings[d.key]||[],this.bindings[d.key].push(d)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(D=>Zf.match(e,D));if(i.length===0)return;const l=fe.find(e.target,!0);if(l&&l.scroll!==this.quill.scroll)return;const c=this.quill.getSelection();if(c==null||!this.quill.hasFocus())return;const[d,h]=this.quill.getLine(c.index),[m,y]=this.quill.getLeaf(c.index),[b,x]=c.length===0?[m,y]:this.quill.getLeaf(c.index+c.length),S=m instanceof Ef?m.value().slice(0,y):"",N=b instanceof Ef?b.value().slice(x):"",E={collapsed:c.length===0,empty:c.length===0&&d.length()<=1,format:this.quill.getFormat(c),line:d,offset:h,prefix:S,suffix:N,event:e};i.some(D=>{if(D.collapsed!=null&&D.collapsed!==E.collapsed||D.empty!=null&&D.empty!==E.empty||D.offset!=null&&D.offset!==E.offset)return!1;if(Array.isArray(D.format)){if(D.format.every(O=>E.format[O]==null))return!1}else if(typeof D.format=="object"&&!Object.keys(D.format).every(O=>D.format[O]===!0?E.format[O]!=null:D.format[O]===!1?E.format[O]==null:hi(D.format[O],E.format[O])))return!1;return D.prefix!=null&&!D.prefix.test(E.prefix)||D.suffix!=null&&!D.suffix.test(E.suffix)?!1:D.handler.call(this,c,E,D)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[l]=this.quill.getLine(e.index);let c=new ze().retain(e.index-s).delete(s);if(n.offset===0){const[d]=this.quill.getLine(e.index-1);if(d&&!(d.statics.blotName==="block"&&d.length()<=1)){const m=l.formats(),y=this.quill.getFormat(e.index-1,1);if(i=Qa.AttributeMap.diff(m,y)||{},Object.keys(i).length>0){const b=new ze().retain(e.index+l.length()-2).retain(1,i);c=c.compose(b)}}}this.quill.updateContents(c,fe.sources.USER),this.quill.focus()}handleDelete(e,n){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-s)return;let i={};const[l]=this.quill.getLine(e.index);let c=new ze().retain(e.index).delete(s);if(n.offset>=l.length()-1){const[d]=this.quill.getLine(e.index+1);if(d){const h=l.formats(),m=this.quill.getFormat(e.index,1);i=Qa.AttributeMap.diff(h,m)||{},Object.keys(i).length>0&&(c=c.retain(d.length()-1).retain(1,i))}}this.quill.updateContents(c,fe.sources.USER),this.quill.focus()}handleDeleteRange(e){ay({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const s=Object.keys(n.format).reduce((l,c)=>(this.quill.scroll.query(c,Ie.BLOCK)&&!Array.isArray(n.format[c])&&(l[c]=n.format[c]),l),{}),i=new ze().retain(e.index).delete(e.length).insert(`
`,s);this.quill.updateContents(i,fe.sources.USER),this.quill.setSelection(e.index+1,fe.sources.SILENT),this.quill.focus()}}const KU={bindings:{bold:Fp("bold"),italic:Fp("italic"),underline:Fp("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",fe.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",fe.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",fe.sources.USER):e.format.list!=null&&this.quill.format("list",!1,fe.sources.USER)}},"indent code-block":Z2(!0),"outdent code-block":Z2(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,fe.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new ze().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,fe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,fe.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,fe.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,fe.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),s={...e.formats(),list:"checked"},i=new ze().retain(t.index).insert(`
`,s).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,fe.sources.USER),this.quill.setSelection(t.index+1,fe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,s]=this.quill.getLine(t.index),i=new ze().retain(t.index).insert(`
`,e.format).retain(n.length()-s-1).retain(1,{header:null});this.quill.updateContents(i,fe.sources.USER),this.quill.setSelection(t.index+1,fe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,s,i,l]=e.getTable(t),c=XU(n,s,i,l);if(c==null)return;let d=n.offset();if(c<0){const h=new ze().retain(d).insert(`
`);this.quill.updateContents(h,fe.sources.USER),this.quill.setSelection(t.index+1,t.length,fe.sources.SILENT)}else if(c>0){d+=n.length();const h=new ze().retain(d).insert(`
`);this.quill.updateContents(h,fe.sources.USER),this.quill.setSelection(d,fe.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:s}=e,i=s.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,fe.sources.USER):this.quill.setSelection(i+s.length(),fe.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[s,i]=this.quill.getLine(t.index);if(i>n)return!0;let l;switch(e.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(t.index," ",fe.sources.USER),this.quill.history.cutoff();const c=new ze().retain(t.index-i).delete(n+1).retain(s.length()-2-i).retain(1,{list:l});return this.quill.updateContents(c,fe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,fe.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let s=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,s-=1,s<=0){const l=new ze().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(l,fe.sources.USER),this.quill.setSelection(t.index-1,fe.sources.SILENT),!1}return!0}},"embed left":Ud("ArrowLeft",!1),"embed left shift":Ud("ArrowLeft",!0),"embed right":Ud("ArrowRight",!1),"embed right shift":Ud("ArrowRight",!0),"table down":Q2(!1),"table up":Q2(!0)}};Zf.DEFAULTS=KU;function Z2(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:s}=n;const i=this.quill.scroll.query("code-block"),{TAB:l}=i;if(e.length===0&&!s.shiftKey){this.quill.insertText(e.index,l,fe.sources.USER),this.quill.setSelection(e.index+l.length,fe.sources.SILENT);return}const c=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:d,length:h}=e;c.forEach((m,y)=>{t?(m.insertAt(0,l),y===0?d+=l.length:h+=l.length):m.domNode.textContent.startsWith(l)&&(m.deleteAt(0,l.length),y===0?d-=l.length:h-=l.length)}),this.quill.update(fe.sources.USER),this.quill.setSelection(d,h,fe.sources.SILENT)}}}function Ud(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:i}=s;t==="ArrowRight"&&(i+=s.length+1);const[l]=this.quill.getLeaf(i);return l instanceof Pa?(t==="ArrowLeft"?e?this.quill.setSelection(s.index-1,s.length+1,fe.sources.USER):this.quill.setSelection(s.index-1,fe.sources.USER):e?this.quill.setSelection(s.index,s.length+1,fe.sources.USER):this.quill.setSelection(s.index+s.length+1,fe.sources.USER),!1):!0}}}function Fp(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],fe.sources.USER)}}}function Q2(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const s=t?"prev":"next",i=n.line,l=i.parent[s];if(l!=null){if(l.statics.blotName==="table-row"){let c=l.children.head,d=i;for(;d.prev!=null;)d=d.prev,c=c.next;const h=c.offset(this.quill.scroll)+Math.min(n.offset,c.length()-1);this.quill.setSelection(h,0,fe.sources.USER)}}else{const c=i.table()[s];c!=null&&(t?this.quill.setSelection(c.offset(this.quill.scroll)+c.length()-1,0,fe.sources.USER):this.quill.setSelection(c.offset(this.quill.scroll),0,fe.sources.USER))}return!1}}}function WU(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=hl(t);else return null;return t.shortKey&&(t[YU]=t.shortKey,delete t.shortKey),t}function ay(t){let{quill:e,range:n}=t;const s=e.getLines(n);let i={};if(s.length>1){const l=s[0].formats(),c=s[s.length-1].formats();i=Qa.AttributeMap.diff(c,l)||{}}e.deleteText(n,fe.sources.USER),Object.keys(i).length>0&&e.formatLine(n.index,1,i,fe.sources.USER),e.setSelection(n.index,fe.sources.SILENT)}function XU(t,e,n,s){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?s===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const ZU=/font-weight:\s*normal/,QU=["P","OL","UL"],J2=t=>t&&QU.includes(t.tagName),JU=t=>{Array.from(t.querySelectorAll("br")).filter(e=>J2(e.previousElementSibling)&&J2(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},eq=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(ZU)).forEach(e=>{const n=t.createDocumentFragment();n.append(...e.childNodes),e.parentNode?.replaceChild(n,e)})};function tq(t){t.querySelector('[id^="docs-internal-guid-"]')&&(eq(t),JU(t))}const nq=/\bmso-list:[^;]*ignore/i,aq=/\bmso-list:[^;]*\bl(\d+)/i,sq=/\bmso-list:[^;]*\blevel(\d+)/i,rq=(t,e)=>{const n=t.getAttribute("style"),s=n?.match(aq);if(!s)return null;const i=Number(s[1]),l=n?.match(sq),c=l?Number(l[1]):1,d=new RegExp(`@list l${i}:level${c}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),h=e.match(d),m=h&&h[1]==="bullet"?"bullet":"ordered";return{id:i,indent:c,type:m,element:t}},iq=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],s=[];e.forEach(c=>{(c.getAttribute("style")||"").match(nq)?n.push(c):s.push(c)}),n.forEach(c=>c.parentNode?.removeChild(c));const i=t.documentElement.innerHTML,l=s.map(c=>rq(c,i)).filter(c=>c);for(;l.length;){const c=[];let d=l.shift();for(;d;)c.push(d),d=l.length&&l[0]?.element===d.element.nextElementSibling&&l[0].id===d.id?l.shift():null;const h=document.createElement("ul");c.forEach(b=>{const x=document.createElement("li");x.setAttribute("data-list",b.type),b.indent>1&&x.setAttribute("class",`ql-indent-${b.indent-1}`),x.innerHTML=b.element.innerHTML,h.appendChild(x)});const m=c[0]?.element,{parentNode:y}=m??{};m&&y?.replaceChild(h,m),c.slice(1).forEach(b=>{let{element:x}=b;y?.removeChild(x)})}};function oq(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&iq(t)}const lq=[oq,tq],cq=t=>{t.documentElement&&lq.forEach(e=>{e(t)})},uq=Or("quill:clipboard"),dq=[[Node.TEXT_NODE,Tq],[Node.TEXT_NODE,tS],["br",yq],[Node.ELEMENT_NODE,tS],[Node.ELEMENT_NODE,gq],[Node.ELEMENT_NODE,pq],[Node.ELEMENT_NODE,Sq],["li",vq],["ol, ul",wq],["pre",bq],["tr",Nq],["b",Gp("bold")],["i",Gp("italic")],["strike",Gp("strike")],["style",xq]],fq=[$U,tA].reduce((t,e)=>(t[e.keyName]=e,t),{}),eS=[JE,ey,J0,aA,iA,lA].reduce((t,e)=>(t[e.keyName]=e,t),{});class hq extends Ks{static DEFAULTS={matchers:[]};constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],dq.concat(this.options.matchers??[]).forEach(s=>{let[i,l]=s;this.addMatcher(i,l)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:s}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[Zn.blotName])return new ze().insert(s||"",{[Zn.blotName]:i[Zn.blotName]});if(!n)return new ze().insert(s||"",i);const l=this.convertHTML(n);return mu(l,`
`)&&(l.ops[l.ops.length-1].attributes==null||i.table)?l.compose(new ze().retain(l.length()-1).delete(1)):l}normalizeHTML(e){cq(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const s=n.body,i=new WeakMap,[l,c]=this.prepareMatching(s,i);return sy(this.quill.scroll,s,l,c,i)}dangerouslyPasteHTML(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fe.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,n),this.quill.setSelection(0,fe.sources.SILENT)}else{const i=this.convert({html:n,text:""});this.quill.updateContents(new ze().retain(e).concat(i),s),this.quill.setSelection(e+i.length(),fe.sources.SILENT)}}onCaptureCopy(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:i,text:l}=this.onCopy(s,n);e.clipboardData?.setData("text/plain",l),e.clipboardData?.setData("text/html",i),n&&ay({range:s,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const s=e.clipboardData?.getData("text/html");let i=e.clipboardData?.getData("text/plain");if(!s&&!i){const c=e.clipboardData?.getData("text/uri-list");c&&(i=this.normalizeURIList(c))}const l=Array.from(e.clipboardData?.files||[]);if(!s&&l.length>0){this.quill.uploader.upload(n,l);return}if(s&&l.length>0){const c=new DOMParser().parseFromString(s,"text/html");if(c.body.childElementCount===1&&c.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(n,l);return}}this.onPaste(n,{html:s,text:i})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:s,html:i}=n;const l=this.quill.getFormat(e.index),c=this.convert({text:s,html:i},l);uq.log("onPaste",c,{text:s,html:i});const d=new ze().retain(e.index).delete(e.length).concat(c);this.quill.updateContents(d,fe.sources.USER),this.quill.setSelection(d.length()-e.length,fe.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const s=[],i=[];return this.matchers.forEach(l=>{const[c,d]=l;switch(c){case Node.TEXT_NODE:i.push(d);break;case Node.ELEMENT_NODE:s.push(d);break;default:Array.from(e.querySelectorAll(c)).forEach(h=>{n.has(h)?n.get(h)?.push(d):n.set(h,[d])});break}}),[s,i]}}function bo(t,e,n,s){return s.query(e)?t.reduce((i,l)=>{if(!l.insert)return i;if(l.attributes&&l.attributes[e])return i.push(l);const c=n?{[e]:n}:{};return i.insert(l.insert,{...c,...l.attributes})},new ze):t}function mu(t,e){let n="";for(let s=t.ops.length-1;s>=0&&n.length<e.length;--s){const i=t.ops[s];if(typeof i.insert!="string")break;n=i.insert+n}return n.slice(-1*e.length)===e}function yi(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof Pa?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function mq(t,e){return t.previousElementSibling&&t.nextElementSibling&&!yi(t.previousElementSibling,e)&&!yi(t.nextElementSibling,e)}const qd=new WeakMap;function cA(t){return t==null?!1:(qd.has(t)||(t.tagName==="PRE"?qd.set(t,!0):qd.set(t,cA(t.parentNode))),qd.get(t))}function sy(t,e,n,s,i){return e.nodeType===e.TEXT_NODE?s.reduce((l,c)=>c(e,l,t),new ze):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((l,c)=>{let d=sy(t,c,n,s,i);return c.nodeType===e.ELEMENT_NODE&&(d=n.reduce((h,m)=>m(c,h,t),d),d=(i.get(c)||[]).reduce((h,m)=>m(c,h,t),d)),l.concat(d)},new ze):new ze}function Gp(t){return(e,n,s)=>bo(n,t,!0,s)}function pq(t,e,n){const s=Gs.keys(t),i=Ts.keys(t),l=Ei.keys(t),c={};return s.concat(i).concat(l).forEach(d=>{let h=n.query(d,Ie.ATTRIBUTE);h!=null&&(c[h.attrName]=h.value(t),c[h.attrName])||(h=fq[d],h!=null&&(h.attrName===d||h.keyName===d)&&(c[h.attrName]=h.value(t)||void 0),h=eS[d],h!=null&&(h.attrName===d||h.keyName===d)&&(h=eS[d],c[h.attrName]=h.value(t)||void 0))}),Object.entries(c).reduce((d,h)=>{let[m,y]=h;return bo(d,m,y,n)},e)}function gq(t,e,n){const s=n.query(t);if(s==null)return e;if(s.prototype instanceof Pa){const i={},l=s.value(t);if(l!=null)return i[s.blotName]=l,new ze().insert(i,s.formats(t,n))}else if(s.prototype instanceof nu&&!mu(e,`
`)&&e.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return bo(e,s.blotName,s.formats(t,n),n);return e}function yq(t,e){return mu(e,`
`)||e.insert(`
`),e}function bq(t,e,n){const s=n.query("code-block"),i=s&&"formats"in s&&typeof s.formats=="function"?s.formats(t,n):!0;return bo(e,"code-block",i,n)}function xq(){return new ze}function vq(t,e,n){const s=n.query(t);if(s==null||s.blotName!=="list"||!mu(e,`
`))return e;let i=-1,l=t.parentNode;for(;l!=null;)["OL","UL"].includes(l.tagName)&&(i+=1),l=l.parentNode;return i<=0?e:e.reduce((c,d)=>d.insert?d.attributes&&typeof d.attributes.indent=="number"?c.push(d):c.insert(d.insert,{indent:i,...d.attributes||{}}):c,new ze)}function wq(t,e,n){const s=t;let i=s.tagName==="OL"?"ordered":"bullet";const l=s.getAttribute("data-checked");return l&&(i=l==="true"?"checked":"unchecked"),bo(e,"list",i,n)}function tS(t,e,n){if(!mu(e,`
`)){if(yi(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let s=t.nextSibling;for(;s!=null;){if(yi(s,n))return e.insert(`
`);const i=n.query(s);if(i&&i.prototype instanceof Xa)return e.insert(`
`);s=s.firstChild}}}return e}function Sq(t,e,n){const s={},i=t.style||{};return i.fontStyle==="italic"&&(s.italic=!0),i.textDecoration==="underline"&&(s.underline=!0),i.textDecoration==="line-through"&&(s.strike=!0),(i.fontWeight?.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(s.bold=!0),e=Object.entries(s).reduce((l,c)=>{let[d,h]=c;return bo(l,d,h,n)},e),parseFloat(i.textIndent||0)>0?new ze().insert("	").concat(e):e}function Nq(t,e,n){const s=t.parentElement?.tagName==="TABLE"?t.parentElement:t.parentElement?.parentElement;if(s!=null){const l=Array.from(s.querySelectorAll("tr")).indexOf(t)+1;return bo(e,"table",l,n)}return e}function Tq(t,e,n){let s=t.data;if(t.parentElement?.tagName==="O:P")return e.insert(s.trim());if(!cA(t)){if(s.trim().length===0&&s.includes(`
`)&&!mq(t,n))return e;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&yi(t.parentElement,n)||t.previousSibling instanceof Element&&yi(t.previousSibling,n))&&(s=s.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&yi(t.parentElement,n)||t.nextSibling instanceof Element&&yi(t.nextSibling,n))&&(s=s.replace(/ $/,"")),s=s.replaceAll(""," ")}return e.insert(s)}class Eq extends Ks{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,n){super(e,n),this.quill.on(fe.events.EDITOR_CHANGE,(s,i,l,c)=>{s===fe.events.SELECTION_CHANGE?i&&c!==fe.sources.SILENT&&(this.currentRange=i):s===fe.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||c===fe.sources.USER?this.record(i,l):this.transform(i)),this.currentRange=Fg(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(e,n){if(this.stack[e].length===0)return;const s=this.stack[e].pop();if(!s)return;const i=this.quill.getContents(),l=s.delta.invert(i);this.stack[n].push({delta:l,range:Fg(s.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,fe.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(e.ops.length===0)return;this.stack.redo=[];let s=e.invert(n),i=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const c=this.stack.undo.pop();c&&(s=s.compose(c.delta),i=c.range)}else this.lastRecorded=l;s.length()!==0&&(this.stack.undo.push({delta:s,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){nS(this.stack.undo,e),nS(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,fe.sources.USER);else{const n=Cq(this.quill.scroll,e.delta);this.quill.setSelection(n,fe.sources.USER)}}}function nS(t,e){let n=e;for(let s=t.length-1;s>=0;s-=1){const i=t[s];t[s]={delta:n.transform(i.delta,!0),range:i.range&&Fg(i.range,n)},n=i.delta.transform(n),t[s].delta.length()===0&&t.splice(s,1)}}function Aq(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(s=>t.query(s,Ie.BLOCK)!=null):!1}function Cq(t,e){const n=e.reduce((i,l)=>i+(l.delete||0),0);let s=e.length()-n;return Aq(t,e)&&(s-=1),s}function Fg(t,e){if(!t)return t;const n=e.transformPosition(t.index),s=e.transformPosition(t.index+t.length);return{index:n,length:s-n}}class uA extends Ks{constructor(e,n){super(e,n),e.root.addEventListener("drop",s=>{s.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const c=document.caretPositionFromPoint(s.clientX,s.clientY);i=document.createRange(),i.setStart(c.offsetNode,c.offset),i.setEnd(c.offsetNode,c.offset)}const l=i&&e.selection.normalizeNative(i);if(l){const c=e.selection.normalizedToRange(l);s.dataTransfer?.files&&this.upload(c,s.dataTransfer.files)}})}upload(e,n){const s=[];Array.from(n).forEach(i=>{i&&this.options.mimetypes?.includes(i.type)&&s.push(i)}),s.length>0&&this.options.handler.call(this,e,s)}}uA.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(s=>new Promise(i=>{const l=new FileReader;l.onload=()=>{i(l.result)},l.readAsDataURL(s)}));Promise.all(n).then(s=>{const i=s.reduce((l,c)=>l.insert({image:c}),new ze().retain(t.index).delete(t.length));this.quill.updateContents(i,Oe.sources.USER),this.quill.setSelection(t.index+s.length,Oe.sources.SILENT)})}};const jq=["insertText","insertReplacementText"];class _q extends Ks{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||e.on(fe.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){ay({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const s=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new ze().retain(e.index).insert(n,s),fe.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,fe.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!jq.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const s=kq(e);if(s==null)return;const i=this.quill.selection.normalizeNative(n),l=i?this.quill.selection.normalizedToRange(i):null;l&&this.replaceText(l,s)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function kq(t){return typeof t.data=="string"?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const Dq=/Mac/i.test(navigator.platform),Oq=100,Mq=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||Dq&&t.key==="a"&&t.ctrlKey===!0);class Rq extends Ks{isListening=!1;selectionChangeDeadline=0;constructor(e,n){super(e,n),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,n){let{line:s,event:i}=n;if(!(s instanceof Ss)||!s.uiNode)return!0;const l=getComputedStyle(s.domNode).direction==="rtl";return l&&i.key!=="ArrowRight"||!l&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(i.shiftKey?1:0),fe.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&Mq(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+Oq,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const n=e.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const s=this.quill.scroll.find(n.startContainer);if(!(s instanceof Ss)||!s.uiNode)return;const i=document.createRange();i.setStartAfter(s.uiNode),i.setEndAfter(s.uiNode),e.removeAllRanges(),e.addRange(i)}}fe.register({"blots/block":_n,"blots/block/embed":Xa,"blots/break":Es,"blots/container":go,"blots/cursor":bs,"blots/embed":Z0,"blots/inline":Kn,"blots/scroll":qU,"blots/text":Ns,"modules/clipboard":hq,"modules/history":Eq,"modules/keyboard":Zf,"modules/uploader":uA,"modules/input":_q,"modules/uiNode":Rq});class Lq extends Ts{add(e,n){let s=0;if(n==="+1"||n==="-1"){const i=this.value(e)||0;s=n==="+1"?i+1:i-1}else typeof n=="number"&&(s=n);return s===0?(this.remove(e),!0):super.add(e,s.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const Pq=new Lq("indent","ql-indent",{scope:Ie.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class zq extends _n{static blotName="blockquote";static tagName="blockquote"}class Iq extends _n{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class pu extends go{}pu.blotName="list-container";pu.tagName="OL";class gu extends _n{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){fe.register(pu)}constructor(e,n){super(e,n);const s=n.ownerDocument.createElement("span"),i=l=>{if(!e.isEnabled())return;const c=this.statics.formats(n,e);c==="checked"?(this.format("list","unchecked"),l.preventDefault()):c==="unchecked"&&(this.format("list","checked"),l.preventDefault())};s.addEventListener("mousedown",i),s.addEventListener("touchstart",i),this.attachUI(s)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}gu.blotName="list";gu.tagName="LI";pu.allowedChildren=[gu];gu.requiredContainer=pu;class ry extends Kn{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class Bq extends ry{static blotName="italic";static tagName=["EM","I"]}class Af extends Kn{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return dA(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}function dA(t,e){const n=document.createElement("a");n.href=t;const s=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(s)>-1}class Uq extends Kn{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class qq extends ry{static blotName="strike";static tagName=["S","STRIKE"]}class $q extends Kn{static blotName="underline";static tagName="U"}class Vq extends Z0{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const aS=["alt","height","width"];let Hq=class extends Pa{static blotName="image";static tagName="IMG";static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return aS.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return dA(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){aS.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}};const sS=["height","width"];class Fq extends Xa{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return sS.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static sanitize(e){return Af.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){sS.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Pc=new Ts("code-token","hljs",{scope:Ie.INLINE});class jr extends Kn{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(Zn.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,s){super(e,n,s),Pc.add(this.domNode,s)}format(e,n){e!==jr.blotName?super.format(e,n):n?Pc.add(this.domNode,n):(Pc.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Pc.value(this.domNode)||this.unwrap()}}jr.blotName="code-token";jr.className="ql-token";class Ka extends Zn{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),jr.blotName,!1),super.replaceWith(e,n)}}class Fc extends yo{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===Ka.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(e,n)}))}formatAt(e,n,s,i){s===Ka.blotName&&(this.forceNext=!0),super.formatAt(e,n,s,i)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(c=>c!==this.uiNode).map(c=>c.textContent).join(`
`)}
`,l=Ka.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const c=this.children.reduce((h,m)=>h.concat(XE(m,!1)),new ze),d=e(i,l);c.diff(d).reduce((h,m)=>{let{retain:y,attributes:b}=m;return y?(b&&Object.keys(b).forEach(x=>{[Ka.blotName,jr.blotName].includes(x)&&this.formatAt(h,y,x,b[x])}),h+y):h},0)}this.cachedText=i,this.forceNext=!1}}html(e,n){const[s]=this.children.find(e);return`<pre data-language="${s?Ka.formats(s.domNode):"plain"}">
${Xf(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=Ka.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}Fc.allowedChildren=[Ka];Ka.requiredContainer=Fc;Ka.allowedChildren=[jr,bs,Ns,Es];const Gq=(t,e,n)=>{if(typeof t.versionString=="string"){const s=t.versionString.split(".")[0];if(parseInt(s,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class fA extends Ks{static register(){fe.register(jr,!0),fe.register(Ka,!0),fe.register(Fc,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,i)=>{let{key:l}=i;return s[l]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(fe.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Fc))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:i,label:l}=s;const c=n.ownerDocument.createElement("option");c.textContent=l,c.setAttribute("value",i),n.appendChild(c)}),n.addEventListener("change",()=>{e.format(Ka.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=Ka.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(fe.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(fe.sources.USER);const s=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Fc):[e]).forEach(l=>{l.highlight(this.highlightBlot,n)}),this.quill.update(fe.sources.SILENT),s!=null&&this.quill.setSelection(s,fe.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return Xf(e).split(`
`).reduce((i,l,c)=>(c!==0&&i.insert(`
`,{[Zn.blotName]:n}),i.insert(l)),new ze);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(Zn.className),s.innerHTML=Gq(this.options.hljs,n,e),sy(this.quill.scroll,s,[(i,l)=>{const c=Pc.value(i);return c?l.compose(new ze().retain(l.length(),{[jr.blotName]:c})):l}],[(i,l)=>i.data.split(`
`).reduce((c,d,h)=>(h!==0&&c.insert(`
`,{[Zn.blotName]:n}),c.insert(d)),l)],new WeakMap)}}fA.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class xs extends _n{static blotName="table";static tagName="TD";static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",iy()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===xs.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class lo extends go{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),s=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===n.table&&e.table===s.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const s=n.formats(),i=n.next.formats();if(s.table!==i.table){const l=this.splitAfter(n);l&&l.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class xi extends go{static blotName="table-body";static tagName="TBODY"}class Cf extends go{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(lo),n=e.reduce((s,i)=>Math.max(i.children.length,s),0);e.forEach(s=>{new Array(n-s.children.length).fill(0).forEach(()=>{let i;s.children.head!=null&&(i=xs.formats(s.children.head.domNode));const l=this.scroll.create(xs.blotName,i);s.appendChild(l),l.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(xi);n==null||n.children.head==null||n.children.forEach(s=>{const i=s.children.at(e);i?.remove()})}insertColumn(e){const[n]=this.descendant(xi);n==null||n.children.head==null||n.children.forEach(s=>{const i=s.children.at(e),l=xs.formats(s.children.head.domNode),c=this.scroll.create(xs.blotName,l);s.insertBefore(c,i)})}insertRow(e){const[n]=this.descendant(xi);if(n==null||n.children.head==null)return;const s=iy(),i=this.scroll.create(lo.blotName);n.children.head.children.forEach(()=>{const c=this.scroll.create(xs.blotName,s);i.appendChild(c)});const l=n.children.at(e);n.insertBefore(i,l)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}Cf.allowedChildren=[xi];xi.requiredContainer=Cf;xi.allowedChildren=[lo];lo.requiredContainer=xi;lo.allowedChildren=[xs];xs.requiredContainer=lo;function iy(){return`row-${Math.random().toString(36).slice(2,6)}`}class Yq extends Ks{static register(){fe.register(xs),fe.register(lo),fe.register(xi),fe.register(Cf)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Cf).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(fe.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(fe.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(fe.sources.USER),this.quill.setSelection(n,fe.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,s]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==xs.blotName)return[null,null,null,-1];const i=n.parent;return[i.parent.parent,i,n,s]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[s,i,l]=this.getTable(n);if(l==null)return;const c=l.cellOffset();s.insertColumn(c+e),this.quill.update(fe.sources.USER);let d=i.rowOffset();e===0&&(d+=1),this.quill.setSelection(n.index+d,n.length,fe.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[s,i,l]=this.getTable(n);if(l==null)return;const c=i.rowOffset();s.insertRow(c+e),this.quill.update(fe.sources.USER),e>0?this.quill.setSelection(n,fe.sources.SILENT):this.quill.setSelection(n.index+i.children.length,n.length,fe.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const s=this.quill.getSelection();if(s==null)return;const i=new Array(e).fill(0).reduce(l=>{const c=new Array(n).fill(`
`).join("");return l.insert(c,{table:iy()})},new ze().retain(s.index));this.quill.updateContents(i,fe.sources.USER),this.quill.setSelection(s.index,fe.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(fe.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(fe.events.TEXT_CHANGE,(s,i,l)=>{l===fe.sources.USER&&this.balanceTables()}),!0):!1)})}}const rS=Or("quill:toolbar");class oy extends Ks{constructor(e,n){if(super(e,n),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),Kq(s,this.options.container),e.container?.parentNode?.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){rS.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{const i=this.options.handlers?.[s];i&&this.addHandler(s,i)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(fe.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){rS.warn("ignoring attaching to nonexistent format",n,e);return}const s=e.tagName==="SELECT"?"change":"click";e.addEventListener(s,i=>{let l;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const d=e.options[e.selectedIndex];d.hasAttribute("selected")?l=!1:l=d.value||!1}else e.classList.contains("ql-active")?l=!1:l=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[c]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,l);else if(this.quill.scroll.query(n).prototype instanceof Pa){if(l=prompt(`Enter ${n}`),!l)return;this.quill.updateContents(new ze().retain(c.index).delete(c.length).insert({[n]:l}),fe.sources.USER)}else this.quill.format(n,l,fe.sources.USER);this.update(c)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(s=>{const[i,l]=s;if(l.tagName==="SELECT"){let c=null;if(e==null)c=null;else if(n[i]==null)c=l.querySelector("option[selected]");else if(!Array.isArray(n[i])){let d=n[i];typeof d=="string"&&(d=d.replace(/"/g,'\\"')),c=l.querySelector(`option[value="${d}"]`)}c==null?(l.value="",l.selectedIndex=-1):c.selected=!0}else if(e==null)l.classList.remove("ql-active"),l.setAttribute("aria-pressed","false");else if(l.hasAttribute("value")){const c=n[i],d=c===l.getAttribute("value")||c!=null&&c.toString()===l.getAttribute("value")||c==null&&!l.getAttribute("value");l.classList.toggle("ql-active",d),l.setAttribute("aria-pressed",d.toString())}else{const c=n[i]!=null;l.classList.toggle("ql-active",c),l.setAttribute("aria-pressed",c.toString())}})}}oy.DEFAULTS={};function iS(t,e,n){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${e}`),s.setAttribute("aria-pressed","false"),n!=null?(s.value=n,s.setAttribute("aria-label",`${e}: ${n}`)):s.setAttribute("aria-label",e),t.appendChild(s)}function Kq(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const s=document.createElement("span");s.classList.add("ql-formats"),n.forEach(i=>{if(typeof i=="string")iS(s,i);else{const l=Object.keys(i)[0],c=i[l];Array.isArray(c)?Wq(s,l,c):iS(s,l,c)}}),t.appendChild(s)})}function Wq(t,e,n){const s=document.createElement("select");s.classList.add(`ql-${e}`),n.forEach(i=>{const l=document.createElement("option");i!==!1?l.setAttribute("value",String(i)):l.setAttribute("selected","selected"),s.appendChild(l)}),t.appendChild(s)}oy.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,Ie.INLINE)!=null&&this.quill.format(n,!1,fe.sources.USER)})}else this.quill.removeFormat(t.index,t.length,fe.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",fe.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,fe.sources.USER),this.quill.format("direction",t,fe.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),s=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let i=t==="+1"?1:-1;n.direction==="rtl"&&(i*=-1),this.quill.format("indent",s+i,fe.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,fe.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,fe.sources.USER):this.quill.format("list","unchecked",fe.sources.USER):this.quill.format("list",t,fe.sources.USER)}}};const Xq='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',Zq='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',Qq='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',Jq='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',e$='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',t$='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',n$='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',a$='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',oS='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',s$='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',r$='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',i$='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',o$='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',l$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',c$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',u$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',d$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',f$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',h$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',m$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',p$='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',g$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',y$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',b$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',x$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',v$='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',w$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',S$='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',N$='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',T$='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',E$='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',A$='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',C$='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',su={align:{"":Xq,center:Zq,right:Qq,justify:Jq},background:e$,blockquote:t$,bold:n$,clean:a$,code:oS,"code-block":oS,color:s$,direction:{"":r$,rtl:i$},formula:o$,header:{1:l$,2:c$,3:u$,4:d$,5:f$,6:h$},italic:m$,image:p$,indent:{"+1":g$,"-1":y$},link:b$,list:{bullet:x$,check:v$,ordered:w$},script:{sub:S$,super:N$},strike:T$,table:E$,underline:A$,video:C$},j$='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let lS=0;function cS(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class Qf{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),cS(this.label,"aria-expanded"),cS(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const s=e.getAttribute("value");return s&&n.setAttribute("data-value",s),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(n,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=j$,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${lS}`,lS+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const s=this.buildItem(n);e.appendChild(s),n.selected===!0&&this.selectItem(s)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");e!==s&&(s?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class hA extends Qf{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const s=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=i:s.style.fill=i)}}class mA extends Qf{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=n[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const s=e||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const _$=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class pA{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,_$(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,s=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),l=this.root.getBoundingClientRect();let c=0;if(l.right>i.right&&(c=i.right-l.right,this.root.style.left=`${n+c}px`),l.left<i.left&&(c=i.left-l.left,this.root.style.left=`${n+c}px`),l.bottom>i.bottom){const d=l.bottom-l.top,h=e.bottom-e.top+d;this.root.style.top=`${s-h}px`,this.root.classList.add("ql-flip")}return c}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const k$=[!1,"center","right","justify"],D$=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],O$=[!1,"serif","monospace"],M$=["1","2","3",!1],R$=["small",!1,"large","huge"];class yu extends Ol{constructor(e,n){super(e,n);const s=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(l=>{l.container.contains(i.target)||l.close()})};e.emitter.listenDOM("click",document.body,s)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(l=>{if(l.startsWith("ql-")&&(l=l.slice(3),n[l]!=null))if(l==="direction")s.innerHTML=n[l][""]+n[l].rtl;else if(typeof n[l]=="string")s.innerHTML=n[l];else{const c=s.value||"";c!=null&&n[l][c]&&(s.innerHTML=n[l][c])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&_c(i,k$),typeof n.align=="object"))return new mA(i,n.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const l=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&_c(i,D$,l==="background"?"#ffffff":"#000000"),new hA(i,n[l])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?_c(i,O$):i.classList.contains("ql-header")?_c(i,M$):i.classList.contains("ql-size")&&_c(i,R$)),new Qf(i)});const s=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(Oe.events.EDITOR_CHANGE,s)}}yu.DEFAULTS=bi({},Ol.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class gA extends pA{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Oe.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Oe.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=L$(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const s=n.index+n.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),e,Oe.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",Oe.sources.USER),this.quill.setSelection(s+2,Oe.sources.USER)}break}}this.textbox.value="",this.hide()}}function L$(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function _c(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(s=>{const i=document.createElement("option");s===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(s)),t.appendChild(i)})}const P$=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class z$ extends gA{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,n){super(e,n),this.quill.on(Oe.events.EDITOR_CHANGE,(s,i,l,c)=>{if(s===Oe.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&c===Oe.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const d=this.quill.getLines(i.index,i.length);if(d.length===1){const h=this.quill.getBounds(i);h!=null&&this.position(h)}else{const h=d[d.length-1],m=this.quill.getIndex(h),y=Math.min(h.length()-1,i.index+i.length-m),b=this.quill.getBounds(new oo(m,y));b!=null&&this.position(b)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Oe.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",n!==0&&(s.style.marginLeft=`${-1*n-s.offsetWidth/2}px`),n}}class yA extends yu{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=P$),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new z$(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),su),this.buildPickers(e.container.querySelectorAll("select"),su))}}yA.DEFAULTS=bi({},yu.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,fe.sources.USER)}}}}});const I$=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class B$ extends gA{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,Oe.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Oe.events.SELECTION_CHANGE,(e,n,s)=>{if(e!=null){if(e.length===0&&s===Oe.sources.USER){const[i,l]=this.quill.scroll.descendant(Af,e.index);if(i!=null){this.linkRange=new oo(e.index-l,i.length());const c=Af.formats(i.domNode);this.preview.textContent=c,this.preview.setAttribute("href",c),this.show();const d=this.quill.getBounds(this.linkRange);d!=null&&this.position(d);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class bA extends yu{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=I$),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),su),this.buildPickers(e.container.querySelectorAll("select"),su),this.tooltip=new B$(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,s)=>{e.handlers.link.call(e,!s.format.link)}))}}bA.DEFAULTS=bi({},yu.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:s}=this.quill.theme;s.edit("link",n)}else this.quill.format("link",!1,fe.sources.USER)}}}}});fe.register({"attributors/attribute/direction":tA,"attributors/class/align":QE,"attributors/class/background":HU,"attributors/class/color":VU,"attributors/class/direction":nA,"attributors/class/font":rA,"attributors/class/size":oA,"attributors/style/align":JE,"attributors/style/background":ey,"attributors/style/color":J0,"attributors/style/direction":aA,"attributors/style/font":iA,"attributors/style/size":lA},!0);fe.register({"formats/align":QE,"formats/direction":nA,"formats/indent":Pq,"formats/background":ey,"formats/color":J0,"formats/font":rA,"formats/size":oA,"formats/blockquote":zq,"formats/code-block":Zn,"formats/header":Iq,"formats/list":gu,"formats/bold":ry,"formats/code":ty,"formats/italic":Bq,"formats/link":Af,"formats/script":Uq,"formats/strike":qq,"formats/underline":$q,"formats/formula":Vq,"formats/image":Hq,"formats/video":Fq,"modules/syntax":fA,"modules/table":Yq,"modules/toolbar":oy,"themes/bubble":yA,"themes/snow":bA,"ui/icons":su,"ui/picker":Qf,"ui/icon-picker":mA,"ui/color-picker":hA,"ui/tooltip":pA},!0);class wl extends pa.Component{constructor(e){super(e),this.editingAreaRef=T.createRef(),this.containerRef=T.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(s,i,l,c)=>{s==="text-change"?this.onEditorChangeText?.(this.editor.getSemanticHTML(),i,c,this.unprivilegedEditor):s==="selection-change"&&this.onEditorChangeSelection?.(i,c,this.unprivilegedEditor)};const n=this.isControlled()?e.value:e.defaultValue;this.value=n??""}validateProps(e){if(pa.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(pa.Children.count(e.children)&&pa.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,n){if(this.validateProps(e),!this.editor||this.state.generation!==n.generation)return!0;if("value"in e){const s=this.getEditorContents(),i=e.value??"";this.isEqualValue(i,s)||this.setEditorContents(this.editor,i)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(s=>!hi(e[s],this.props[s]))}shouldComponentRegenerate(e){return this.dirtyProps.some(n=>!hi(e[n],this.props[n]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,n){if(this.editor&&this.shouldComponentRegenerate(e)){const s=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.editor&&e.placeholder!==this.props.placeholder&&(this.editor.root.dataset.placeholder=this.props.placeholder||""),this.state.generation!==n.generation){const{delta:s,selection:i}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const l=this.editor;l.setContents(s),uS(()=>this.setEditorSelection(l,i))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const s=this.containerRef.current?.querySelector(".ql-toolbar");s&&s.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,n){const s=new fe(e,n);return n.tabIndex!=null&&this.setEditorTabIndex(s,n.tabIndex),this.hookEditor(s),s}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,n){return this.isDelta(e)&&this.isDelta(n)?hi(e.ops,n.ops):hi(e,n)}setEditorContents(e,n){this.value=n;const s=this.getEditorSelection();typeof n=="string"?e.setContents(e.clipboard.convert({html:n})):e.setContents(n),uS(()=>this.setEditorSelection(e,s))}setEditorSelection(e,n){if(this.selection=n,n){const s=e.getLength();n.index=Math.max(0,Math.min(n.index,s-1)),n.length=Math.max(0,Math.min(n.length,s-1-n.index)),e.setSelection(n)}}setEditorTabIndex(e,n){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=n)}setEditorReadOnly(e,n){n?e.disable():e.enable()}makeUnprivilegedEditor(e){const n=e;return{getHTML:()=>n.root.innerHTML,getSemanticHTML:n.getSemanticHTML.bind(n),getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:n}=this.props,{generation:s}=this.state,i={key:s,ref:this.editingAreaRef};return pa.Children.count(e)?pa.cloneElement(pa.Children.only(e),i):n?pa.createElement("pre",{...i}):pa.createElement("div",{...i})}render(){return pa.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,n,s,i){if(!this.editor)return;const l=this.isDelta(this.value)?i.getContents():i.getSemanticHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=l,this.props.onChange?.(e,n,s,i))}onEditorChangeSelection(e,n,s){if(!this.editor)return;const i=this.getEditorSelection(),l=!i&&e,c=i&&!e;hi(e,i)||(this.selection=e,this.props.onChangeSelection?.(e,n,s),l?this.props.onFocus?.(e,n,s):c&&this.props.onBlur?.(i,n,s))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}wl.displayName="React Quill";wl.Quill=fe;wl.defaultProps={theme:"snow",modules:{},readOnly:!1};function uS(t){Promise.resolve().then(t)}const Gg=({tags:t,setTags:e,inputValue:n,setInputValue:s})=>{const{t:i}=yn(),l=d=>{if(d.key==="Enter"){d.preventDefault();const h=n.trim();h&&!t.includes(h)&&(e([...t,h]),s(""))}},c=d=>{e(t.filter(h=>h!==d))};return f.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:t.map((d,h)=>f.jsxs("span",{className:"bg-cream-100 text-cream-800 px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1 border border-cream-200",children:["#",d,f.jsx("button",{onClick:()=>c(d),className:"hover:text-red-500",children:f.jsx(Ja,{size:10})})]},h))}),f.jsxs("div",{className:"relative flex items-center",children:[f.jsx(s0,{size:14,className:"absolute left-2 text-cream-400"}),f.jsx("input",{type:"text",value:n,onChange:d=>s(d.target.value),onKeyDown:l,placeholder:i("write.tagEditor.placeholder"),className:"pl-7 pr-2 py-1 bg-transparent border-none outline-none text-sm text-cream-900 placeholder:text-cream-400 w-24 focus:w-32 transition-all"})]})]})},Yg=({value:t,onChange:e,existingCategories:n=[]})=>{const{t:s}=yn(),[i,l]=T.useState(!1),[c,d]=T.useState(t||""),h=T.useRef(null),m=T.useRef(null),y=[...new Set(n)],x=!c||c===t?y:y.filter(O=>O.toLowerCase().includes(c.toLowerCase())),S=c&&!y.some(O=>O.toLowerCase()===c.toLowerCase());T.useEffect(()=>{d(t||"")},[t]),T.useEffect(()=>{const O=R=>{h.current&&!h.current.contains(R.target)&&(l(!1),c!==t&&d(t||""))};return document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[c,t]);const N=O=>{e(O),d(O),l(!1)},E=()=>{c.trim()&&(e(c.trim()),l(!1))},j=O=>{O.key==="Enter"&&(O.preventDefault(),E())},D=O=>{O.stopPropagation(),e(""),d(""),m.current?.focus()};return f.jsxs("div",{className:"relative",ref:h,children:[f.jsxs("div",{className:"relative group",children:[f.jsx("input",{ref:m,type:"text",value:c,onChange:O=>{d(O.target.value),l(!0)},onFocus:()=>l(!0),onKeyDown:j,className:"w-full px-3 py-2 bg-cream-50 border border-cream-200 rounded-lg text-sm text-cream-900 focus:outline-none focus:border-cream-400 focus:ring-1 focus:ring-cream-400 pr-16",placeholder:s("write.categorySelector.placeholder")}),f.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[c&&f.jsx("button",{onClick:D,className:"p-1 text-cream-400 hover:text-cream-600 rounded-full hover:bg-cream-100 transition-colors",title:s("write.categorySelector.clear"),children:f.jsx(Ja,{size:14})}),f.jsx("button",{className:"p-1 text-cream-400 hover:text-cream-600 cursor-pointer transition-colors",onClick:()=>{l(!i),i||m.current?.focus()},children:f.jsx(Lf,{size:16})})]})]}),i&&f.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-cream-200 rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar",children:[x.length>0&&x.map(O=>f.jsxs("div",{className:Ne("px-3 py-2 text-sm cursor-pointer hover:bg-cream-50 flex items-center justify-between",O===t?"bg-cream-50 text-cream-900 font-medium":"text-cream-700"),onClick:()=>N(O),children:[f.jsx("span",{children:O}),O===t&&f.jsx(ws,{size:14,className:"text-cream-600"})]},O)),S&&f.jsxs("div",{className:"px-3 py-2 text-sm cursor-pointer hover:bg-cream-50 flex items-center gap-2 text-amber-600 border-t border-cream-50 font-medium",onClick:E,children:[f.jsx(Tr,{size:14}),f.jsx("span",{children:s("write.categorySelector.create",{value:c})})]}),x.length===0&&!S&&f.jsx("div",{className:"px-3 py-2 text-sm text-cream-400 italic",children:s("write.categorySelector.noCategories")})]})]})},xA=[{id:"happy",icon:uf,color:"text-green-500"},{id:"excited",icon:i0,color:"text-yellow-500"},{id:"neutral",icon:eN,color:"text-gray-500"},{id:"sad",icon:QS,color:"text-blue-500"},{id:"loved",icon:Pf,color:"text-pink-500"}],Kg=({value:t,onChange:e})=>{const{t:n}=yn();return f.jsx("div",{className:"flex items-center gap-1 bg-cream-50 rounded-lg p-1 border border-cream-200",children:xA.map(s=>{const i=s.icon,l=t===s.id;return f.jsx("button",{onClick:()=>e(s.id),className:Ne("p-1.5 rounded-md transition-all hover:bg-white",l?"bg-white shadow-sm ring-1 ring-cream-200":"opacity-50 hover:opacity-100"),title:n(`moods.${s.id}`),children:f.jsx(i,{size:16,className:Ne(l?s.color:"text-cream-600")})},s.id)})})};function vA({diary:t}){const{t:e,i18n:n}=yn(),i={en:gn,"en-US":gn,zh:ns,"zh-CN":ns,"zh-TW":kl,ja:Hf}[n.language]||gn,{updateDiary:l,addComment:c,deleteDiary:d,deleteChatHistory:h,deleteComment:m,diaries:y,customCategories:b,addCategory:x}=uo(),{generateChatResponse:S,generateComment:N,currentPersona:E}=fo(),[j,D]=T.useState(!1),[O,R]=T.useState(t.title),[U,L]=T.useState(t.content),[H,z]=T.useState(t.category||""),[P,Y]=T.useState(t.tags||[]),[Q,A]=T.useState(t.mood||"neutral"),[F,B]=T.useState(""),[te,se]=T.useState(""),[C,I]=T.useState(!1),[q,oe]=T.useState(!1),[ce,M]=T.useState(!1),[K,Z]=T.useState(null),[le,me]=T.useState(!1),[be,we]=T.useState(!1),je={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},X=T.useMemo(()=>b.map(ye=>ye.name),[b]);T.useEffect(()=>{R(t.title),L(t.content),z(t.category||""),Y(t.tags||[]),A(t.mood||"neutral")},[t]);const ae=()=>{d(t.id)},pe=()=>{const ye=H.trim();ye&&!b.some(Xe=>Xe.name===ye)&&x(ye),l(t.id,{title:O,content:U,category:ye,tags:P,mood:Q}),D(!1)},ve=()=>{te.trim()&&(c(t.id,{author:"user",text:te}),se(""))},ge=async()=>{I(!0);try{console.log("Generating comment for diary:",t.id);const ye=await N(t,t.comments);c(t.id,{author:"ai",text:ye})}catch(ye){console.error("Failed to generate comment:",ye),alert(`Failed to generate comment: ${ye.message}`)}finally{I(!1)}},Se=()=>{K&&(m(t.id,K),Z(null),M(!1))},Ae=()=>{h(t.id),we(!1)};return f.jsxs("div",{className:"mb-12 border-b border-cream-200 pb-12 last:border-0 last:pb-0",children:[f.jsx(to,{isOpen:q,onClose:()=>oe(!1),onConfirm:ae,title:e("diary_item.delete_diary_title"),message:e("diary_item.delete_diary_message"),confirmText:e("common.delete"),isDangerous:!0}),f.jsx(to,{isOpen:ce,onClose:()=>M(!1),onConfirm:Se,title:e("diary_item.delete_comment_title"),message:e("diary_item.delete_comment_message"),confirmText:e("common.delete"),isDangerous:!0}),f.jsx("div",{className:"mb-6 flex items-center justify-end",children:j?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>D(!1),className:"p-2 text-cream-900/60 hover:text-cream-900 hover:bg-cream-100 rounded-lg transition-all",children:f.jsx(Ja,{size:20})}),f.jsxs("button",{onClick:pe,className:"px-4 py-2 bg-cream-900 text-white rounded-lg shadow-sm hover:bg-cream-800 transition-all flex items-center gap-2 text-sm font-medium",children:[f.jsx(ao,{size:16}),e("diary_item.save")]})]}):f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>oe(!0),className:"p-2 text-cream-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",title:e("diary_item.delete_diary"),children:f.jsx(pn,{size:18})}),f.jsxs("button",{onClick:()=>D(!0),className:"p-2 text-cream-900/60 hover:text-cream-900 hover:bg-white rounded-lg transition-all flex items-center gap-2 text-sm font-medium",children:[f.jsx(cf,{size:18}),e("diary_item.edit")]})]})}),f.jsx("div",{className:"bg-white rounded-2xl p-8 md:p-12 shadow-sm border border-cream-100 mb-6 relative group min-h-[400px]",children:j?f.jsxs("div",{className:"h-full flex flex-col gap-4",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("input",{type:"text",value:O,onChange:ye=>R(ye.target.value),className:"text-3xl md:text-4xl font-bold text-cream-900 border-b border-cream-100 pb-2 focus:border-cream-300 outline-none bg-transparent flex-1 min-w-[200px]",placeholder:e("diary_item.title_placeholder")}),f.jsx(Kg,{value:Q,onChange:A})]}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-xs font-medium text-cream-500 mb-1 uppercase tracking-wide",children:e("diary_item.category_label")}),f.jsx(Yg,{value:H,onChange:z,existingCategories:X})]}),f.jsxs("div",{className:"flex-[2]",children:[f.jsx("label",{className:"block text-xs font-medium text-cream-500 mb-1 uppercase tracking-wide",children:e("diary_item.tags_label")}),f.jsx(Gg,{tags:P,setTags:Y,inputValue:F,setInputValue:B})]})]}),f.jsx("div",{className:"flex-1",children:f.jsx(wl,{theme:"snow",value:U,onChange:L,modules:je,placeholder:e("diary_item.content_placeholder"),className:"h-full"})})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.mood&&(()=>{const ye=xA.find(Xe=>Xe.id===t.mood);if(ye){const Xe=ye.icon;return f.jsx(Xe,{size:32,className:ye.color,title:t.mood})}return null})(),f.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-cream-900 leading-tight",children:t.title})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-8",children:[t.category&&f.jsx("span",{className:"px-3 py-1 bg-cream-100 text-cream-600 rounded-full text-xs font-medium uppercase tracking-wide",children:t.category}),t.tags&&t.tags.length>0&&t.tags.map((ye,Xe)=>f.jsxs("span",{className:"px-3 py-1 bg-cream-50 text-cream-500 rounded-full text-xs border border-cream-100",children:["#",ye]},Xe))]}),f.jsx("div",{className:"prose prose-stone max-w-none text-cream-900/80 leading-loose text-lg font-serif [&_p]:indent-[2em] [&_p]:mb-4",dangerouslySetInnerHTML:{__html:t.content}})]})}),t.chatHistory&&t.chatHistory.length>0&&f.jsxs("div",{className:"mt-8 pt-8 border-t border-cream-200/50",children:[f.jsxs("button",{onClick:()=>me(!le),className:"w-full flex items-center justify-between text-left group",children:[f.jsxs("h3",{className:"text-lg font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(tk,{size:20}),e("diary_item.chat_history"),f.jsx("span",{className:"text-xs font-normal text-cream-500 ml-2 bg-cream-100 px-2 py-0.5 rounded-full",children:e("diary_item.messages_count",{count:t.chatHistory.length})})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:ye=>{ye.stopPropagation(),we(!0)},className:"p-1.5 text-cream-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",title:e("diary_item.delete_chat_history_title"),children:f.jsx(pn,{size:16})}),le?f.jsx(y_,{className:"text-cream-400 group-hover:text-cream-600 transition-colors",size:20}):f.jsx(Lf,{className:"text-cream-400 group-hover:text-cream-600 transition-colors",size:20})]})]}),f.jsx(to,{isOpen:be,onClose:()=>we(!1),onConfirm:Ae,title:e("diary_item.delete_chat_history_title"),message:e("diary_item.delete_chat_history_confirm"),confirmText:e("common.delete"),isDangerous:!0}),f.jsx(mn,{children:le&&f.jsx(ft.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:f.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto custom-scrollbar p-2 mt-4 bg-cream-50/30 rounded-xl border border-cream-100/50",children:t.chatHistory.map(ye=>f.jsxs("div",{className:Ne("flex gap-3",ye.sender==="user"?"flex-row-reverse":"flex-row"),children:[f.jsx("div",{className:Ne("w-8 h-8 rounded-full flex items-center justify-center text-white text-xs shrink-0 shadow-sm",ye.sender==="user"?"bg-cream-900":"bg-amber-500"),children:ye.sender==="user"?f.jsx(so,{size:14}):f.jsx(vv,{size:14})}),f.jsx("div",{className:Ne("p-3 rounded-xl max-w-[80%] text-sm leading-relaxed shadow-sm",ye.sender==="user"?"bg-white text-cream-900 border border-cream-100 rounded-tr-none":"bg-white text-cream-900 border border-cream-100 rounded-tl-none"),children:ye.text})]},ye.id))})})})]}),f.jsxs("div",{className:"mt-8 pt-8 border-t border-cream-200/50",children:[f.jsxs("h3",{className:"text-lg font-bold text-cream-900 flex items-center gap-2 mb-6",children:[f.jsx(no,{size:20}),e("diary_item.comments"),f.jsx("span",{className:"text-xs font-normal text-cream-500 ml-2 bg-cream-100 px-2 py-0.5 rounded-full",children:t.comments?.length||0})]}),f.jsxs("div",{className:"space-y-4 mb-6",children:[t.comments?.map(ye=>f.jsxs(ft.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:Ne("p-4 rounded-xl relative group",ye.author==="ai"?"bg-gradient-to-br from-cream-50 to-white border border-cream-100":"bg-white border border-cream-100"),children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[ye.author==="ai"?f.jsx("div",{className:"w-6 h-6 rounded-full bg-cream-900 flex items-center justify-center text-white",children:f.jsx(vv,{size:14})}):f.jsx("div",{className:"w-6 h-6 rounded-full bg-cream-200 flex items-center justify-center text-cream-600",children:f.jsx(so,{size:14})}),f.jsx("span",{className:"text-sm font-bold text-cream-900",children:ye.author==="ai"?e("diary_item.ai_author",{name:ye.personaName||"AI"}):e("diary_item.user_author")}),f.jsx("span",{className:"text-xs text-cream-400",children:pt(wr(ye.date),"p",{locale:i})})]}),f.jsx("button",{onClick:()=>{Z(ye.id),M(!0)},className:"p-1.5 text-cream-300 hover:text-red-500 hover:bg-red-50 rounded-lg opacity-0 group-hover:opacity-100 transition-all",title:e("diary_item.delete_comment"),children:f.jsx(pn,{size:14})})]}),f.jsx("p",{className:"text-cream-700 leading-relaxed text-sm pl-8 whitespace-pre-wrap",children:ye.text})]},ye.id)),(!t.comments||t.comments.length===0)&&f.jsx("div",{className:"text-center py-8 text-cream-400 text-sm bg-cream-50/50 rounded-xl border border-dashed border-cream-200",children:e("diary_item.no_comments")})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:ge,disabled:C,className:"p-3 bg-cream-100 hover:bg-cream-200 text-cream-900 rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",title:e("diary_item.ask_ai"),children:C?f.jsx(ft.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:f.jsx(Wa,{size:20})}):f.jsx(Wa,{size:20})}),f.jsxs("div",{className:"flex-1 relative",children:[f.jsx("input",{type:"text",value:te,onChange:ye=>se(ye.target.value),onKeyDown:ye=>ye.key==="Enter"&&ve(),placeholder:e("diary_item.add_comment_placeholder"),className:"w-full h-full pl-4 pr-12 py-3 bg-cream-50 border-none rounded-xl focus:ring-2 focus:ring-cream-200 outline-none text-cream-900 placeholder:text-cream-400"}),f.jsx("button",{onClick:ve,disabled:!te.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 bg-cream-900 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-cream-800 transition-colors",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-message-circle","aria-hidden":"true",children:f.jsx("path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"})})})]})]})]})]})}function dS(){const{t,i18n:e}=yn(),s={en:gn,"en-US":gn,zh:ns,"zh-CN":ns,"zh-TW":kl,ja:Hf}[e.language]||gn,{date:i,id:l}=K3(),c=kr(),{getDiariesByDate:d,getDiaryById:h}=uo(),{setActiveDate:m,activeDate:y}=fo(),b=pa.useRef(null);pa.useEffect(()=>{b.current&&(b.current.scrollTop=0)},[i,l]);let x=[],S=i;if(l){const N=h(l);N&&(x=[N],S=N.date)}else i&&(x=d(i));if(pa.useEffect(()=>{S&&S!==y&&m(S)},[S,y,m]),!x||x.length===0){const N=S||pt(new Date,"yyyy-MM-dd");return f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-cream-900/40 space-y-4",children:[f.jsx("p",{children:S?t("diary_entry.no_entries",{date:pt(wr(S),"PPP",{locale:s})}):t("diary_entry.no_entries",{date:"this selection"})}),f.jsxs("button",{onClick:()=>c(`/write?date=${N}`),className:"px-6 py-2 bg-cream-900 text-white rounded-xl shadow-md hover:bg-cream-800 transition-colors flex items-center gap-2",children:[f.jsx(yl,{size:16}),t("diary_entry.write_for_this_day")]}),f.jsx("button",{onClick:()=>c("/calendar"),className:"text-sm hover:underline",children:t("diary_entry.go_back")})]})}return f.jsxs(ft.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"max-w-5xl w-full mx-auto h-full flex flex-col",children:[f.jsxs("div",{className:"flex-none p-6 pb-2 flex items-center justify-between bg-diary-bg z-10",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>c("/calendar"),className:"p-2 hover:bg-white rounded-full transition-colors text-cream-900/60 hover:text-cream-900",title:t("diary_entry.back_to_timeline"),children:f.jsx(ZS,{size:24})}),f.jsx("span",{className:"text-sm font-medium text-cream-900/40 uppercase tracking-widest",children:S&&pt(wr(S),"PPPP",{locale:s})}),x.length>0&&f.jsx("span",{className:"text-xs px-2 py-0.5 bg-cream-100 text-cream-600 rounded-full font-bold",children:t("diary_entry.entry_count",{count:x.length})})]}),f.jsxs("button",{onClick:()=>c(`/write?date=${S}`),className:"p-2 text-cream-900/60 hover:text-cream-900 hover:bg-white rounded-lg transition-all flex items-center gap-2 text-sm font-medium",title:t("diary_entry.add_another_entry"),children:[f.jsx(yl,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:t("diary_entry.add_new")})]})]}),f.jsx("div",{ref:b,className:"flex-1 overflow-y-auto custom-scrollbar p-6 pt-2 space-y-8",children:x.map(N=>f.jsx(vA,{diary:N},N.id))})]})}const U$={Book:Rf,Heart:Pf,Star:tN,Coffee:C_,Briefcase:s_,Plane:lk,Layers:JS,Folder:Wd},Yp=[{name:"Indigo",value:"bg-indigo-100 text-indigo-600"},{name:"Purple",value:"bg-purple-100 text-purple-600"},{name:"Pink",value:"bg-pink-100 text-pink-600"},{name:"Rose",value:"bg-rose-100 text-rose-600"},{name:"Orange",value:"bg-orange-100 text-orange-600"},{name:"Amber",value:"bg-amber-100 text-amber-600"},{name:"Yellow",value:"bg-yellow-100 text-yellow-700"},{name:"Lime",value:"bg-lime-100 text-lime-700"},{name:"Green",value:"bg-green-100 text-green-600"},{name:"Emerald",value:"bg-emerald-100 text-emerald-600"},{name:"Teal",value:"bg-teal-100 text-teal-600"},{name:"Cyan",value:"bg-cyan-100 text-cyan-600"},{name:"Sky",value:"bg-sky-100 text-sky-600"},{name:"Blue",value:"bg-blue-100 text-blue-600"},{name:"Slate",value:"bg-slate-100 text-slate-600"}];function q$(){const{t,i18n:e}=yn(),s={en:gn,"en-US":gn,zh:ns,"zh-CN":ns,"zh-TW":kl,ja:Hf}[e.language]||gn,{diaries:i,customCategories:l,addCategory:c,updateCategory:d,deleteCategory:h}=uo(),[m,y]=T.useState(null),[b,x]=T.useState(!1),[S,N]=T.useState(null),[E,j]=T.useState(!1),[D,O]=T.useState(null),[R,U]=T.useState(""),[L,H]=T.useState(Yp[0].value),[z,P]=T.useState(null),Y=T.useRef(null),[Q,A]=T.useState(null),F=kr(),B=T.useMemo(()=>{const M={};i.forEach(be=>{const we=be.category||"Uncategorized";M[we]=(M[we]||0)+1});const K=l.map(be=>{const we=["Daily Life","Work","Travel"].includes(be.name);return{id:be.name,name:we?t(`categories.defaults.${be.name}`):be.name,originalName:be.name,icon:U$[be.iconName]||JS,color:be.color||"bg-indigo-100 text-indigo-600",coverImage:be.coverImage,count:M[be.name]||0,isCustom:!0}}),Z=new Set(K.map(be=>be.originalName)),le=[];i.forEach(be=>{be.category&&!Z.has(be.category)&&be.category!=="Uncategorized"&&(Z.add(be.category),le.push({id:be.category,name:be.category,originalName:be.category,icon:Wd,color:"bg-gray-100 text-gray-600",count:M[be.category]||0,isCustom:!0,isGhost:!0}))});const me=M.Uncategorized?[{id:"Uncategorized",name:t("categories.defaults.Uncategorized"),originalName:"Uncategorized",icon:Wd,color:"bg-slate-100 text-slate-600",count:M.Uncategorized,isCustom:!1}]:[];return[...K,...le,...me]},[i,l,t]),te=T.useMemo(()=>m?i.filter(K=>(K.category||"Uncategorized")===m).sort((K,Z)=>new Date(Z.date)-new Date(K.date)).reduce((K,Z)=>(K[Z.date]||(K[Z.date]=[]),K[Z.date].push(Z),K),{}):{},[i,m]),se=()=>{O(null),U(""),H(Yp[0].value),P(null),j(!0)},C=M=>{O(M),U(M.originalName||M.name),H(M.color),P(M.coverImage),j(!0)},I=async M=>{const K=M.target.files[0];if(K)try{const Z=await pN(K,800,.7);P(Z)}catch(Z){console.error("Failed to compress image:",Z),alert(t("common.error_image_upload_failed")||"Image upload failed. Please try a smaller image.")}},q=()=>{if(R.trim()){const M={name:R.trim(),color:L,coverImage:z};D?d(D.originalName||D.name,M):c(M),j(!1)}},oe=M=>{A(M)},ce=()=>{Q&&(h(Q.originalName||Q.name),A(null))};return f.jsxs("div",{className:"h-full flex flex-col",children:[E&&F4.createPortal(f.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-xl animate-in fade-in zoom-in duration-200",children:[f.jsx("h3",{className:"text-lg font-bold text-cream-900 mb-4",children:t(D?"categories.edit_dialog.edit_title":"categories.edit_dialog.add_title")}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-cream-400 uppercase tracking-wider mb-1 block",children:t("categories.edit_dialog.name_label")}),f.jsx("input",{type:"text",autoFocus:!0,value:R,onChange:M=>U(M.target.value),placeholder:t("categories.edit_dialog.name_placeholder"),className:"w-full px-4 py-2 bg-cream-50 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-400",onKeyDown:M=>M.key==="Enter"&&q()})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-cream-400 uppercase tracking-wider mb-2 block",children:t("categories.edit_dialog.cover_label")}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{onClick:()=>Y.current?.click(),className:Ne("w-16 aspect-[3/4] rounded-md border-2 border-dashed border-cream-200 flex items-center justify-center cursor-pointer hover:border-cream-400 hover:bg-cream-50 transition-all overflow-hidden relative",z?"border-solid border-0":""),children:z?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:z,alt:"Preview",className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:f.jsx(cf,{size:12,className:"text-white"})})]}):f.jsx(gl,{size:16,className:"text-cream-300"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("button",{onClick:()=>Y.current?.click(),className:"text-sm font-medium text-cream-600 hover:text-cream-900 underline decoration-cream-300 underline-offset-4",children:t(z?"categories.edit_dialog.change_image":"categories.edit_dialog.upload_image")}),z&&f.jsx("button",{onClick:()=>P(null),className:"ml-4 text-xs font-medium text-red-400 hover:text-red-600",children:t("categories.edit_dialog.remove_image")}),f.jsx("p",{className:"text-[10px] text-cream-400 mt-1",children:t("categories.edit_dialog.recommendation")})]}),f.jsx("input",{type:"file",ref:Y,className:"hidden",accept:"image/*",onChange:I})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-cream-400 uppercase tracking-wider mb-2 block",children:t("categories.edit_dialog.color_label")}),f.jsx("div",{className:"grid grid-cols-5 gap-2",children:Yp.map(M=>f.jsx("button",{onClick:()=>H(M.value),className:Ne("w-8 h-8 rounded-full flex items-center justify-center transition-all",M.value.split(" ")[0],L===M.value?"ring-2 ring-offset-2 ring-cream-400 scale-110":"hover:scale-105"),title:M.name,children:L===M.value&&f.jsx(ws,{size:14,className:"text-current opacity-70"})},M.name))})]})]}),f.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[f.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-cream-600 hover:bg-cream-50 rounded-lg transition-colors",children:t("categories.edit_dialog.cancel")}),f.jsx("button",{onClick:q,disabled:!R.trim(),className:"px-4 py-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors disabled:opacity-50",children:t(D?"categories.edit_dialog.save":"categories.edit_dialog.create")})]})]})}),document.body),f.jsx(to,{isOpen:!!Q,onClose:()=>A(null),onConfirm:ce,title:t("categories.delete_dialog.title"),message:t("categories.delete_dialog.message",{name:Q?.name}),confirmText:t("categories.delete_dialog.confirm"),isDangerous:!0}),f.jsxs("div",{className:"flex items-center justify-between gap-4 px-6 pt-6 pb-2",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[m?f.jsx("button",{onClick:()=>y(null),className:"p-2 hover:bg-white/50 rounded-full transition-colors text-cream-600 group backdrop-blur-sm",children:f.jsx(YS,{size:24,className:"group-hover:-translate-x-1 transition-transform"})}):f.jsx(Rf,{className:"text-cream-900 ml-1",size:28}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-cream-900 leading-none",children:m?["Daily Life","Work","Travel","Uncategorized"].includes(m)?t(`categories.defaults.${m}`):m:t("categories.title")}),m&&f.jsx("span",{className:"text-xs font-medium text-cream-500 mt-1 block",children:t("categories.entries",{count:Object.values(te).flat().length})})]})]}),!m&&f.jsxs("button",{onClick:()=>x(!b),className:Ne("px-3 py-2 rounded-lg transition-all border border-cream-200 shadow-sm flex items-center gap-2 font-medium text-sm",b?"bg-cream-100 text-amber-500":"bg-white text-cream-900 hover:text-amber-500 hover:bg-cream-50"),children:[b?f.jsx(ws,{size:16}):f.jsx(zf,{size:16}),t(b?"categories.done":"categories.manage")]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pb-20 pr-2",children:f.jsx(mn,{mode:"wait",children:m?f.jsx(ft.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"px-6 py-4",children:Object.keys(te).length>0?f.jsx("div",{className:"space-y-12 relative before:absolute before:left-[11px] before:top-2 before:bottom-2 before:w-[2px] before:bg-cream-100",children:Object.entries(te).map(([M,K])=>f.jsxs("div",{className:"relative pl-8",children:[f.jsx("div",{className:"absolute left-0 top-0 w-6 h-6 rounded-full bg-white border-4 border-cream-100 z-10"}),f.jsxs("div",{className:"mb-4",children:[f.jsx("h3",{className:"text-sm font-bold text-cream-900 uppercase tracking-widest",children:pt(wr(M),"MMM d, yyyy",{locale:s})}),f.jsx("p",{className:"text-[10px] font-medium text-cream-400 uppercase tracking-tighter",children:pt(wr(M),"EEEE",{locale:s})})]}),f.jsx("div",{className:"space-y-4",children:K.map(Z=>f.jsx("div",{className:"group relative",children:f.jsx(vA,{diary:Z,onClick:()=>F(`/diary/${Z.date}`)})},Z.id))})]},M))}):f.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-cream-400",children:[f.jsx(Wd,{size:48,className:"mb-4 opacity-20"}),f.jsx("p",{className:"text-sm font-medium",children:t("categories.no_diaries")})]})}):f.jsxs(ft.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-x-10 gap-y-20 p-4",children:[B.map(M=>f.jsxs("div",{className:"group relative flex flex-col gap-2",children:[b&&M.isCustom&&f.jsxs("div",{className:Ne("absolute top-0 left-0 w-full aspect-[3/4] z-20 flex items-center justify-center gap-4 bg-black/40 backdrop-blur-[2px] transition-all duration-200 rounded-xl opacity-100"),children:[f.jsx("button",{onClick:K=>{K.stopPropagation(),C(M)},className:"text-white/70 hover:text-white transition-all hover:scale-110",title:t("categories.actions.edit"),children:f.jsx(cf,{size:20})}),f.jsx("button",{onClick:K=>{K.stopPropagation(),oe(M)},className:"text-white/70 hover:text-red-400 transition-all hover:scale-110",title:t("categories.actions.delete"),children:f.jsx(pn,{size:20})})]}),f.jsxs("div",{onClick:K=>{b&&M.isCustom?(K.stopPropagation(),N(S===M.id?null:M.id)):b||y(M.originalName||M.name)},className:Ne("relative w-full aspect-[3/4] rounded-xl shadow-sm transition-all duration-300",!b&&"cursor-pointer group-hover:-translate-y-2 group-hover:shadow-lg",b&&"opacity-90",b&&M.isCustom&&"cursor-pointer","overflow-hidden flex items-center justify-center bg-cream-100",!M.coverImage&&M.color),children:[M.coverImage?f.jsx("img",{src:M.coverImage,alt:M.name,className:"w-full h-full object-cover"}):f.jsx(M.icon,{size:32,className:"opacity-80 mix-blend-multiply"}),f.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-black/10 z-10"})]}),f.jsxs("div",{className:"flex flex-col items-center text-center mt-2",children:[f.jsx("span",{className:"text-sm font-bold text-cream-900 truncate w-full px-1",children:M.name}),f.jsx("span",{className:"text-[10px] font-medium text-cream-400 uppercase tracking-tight",children:t("categories.entries",{count:M.count})})]}),f.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-[80%] h-2 bg-black/5 rounded-full blur-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]},M.id)),b&&f.jsxs("div",{className:"group relative flex flex-col gap-2",children:[f.jsxs("div",{onClick:se,className:"relative w-full aspect-[3/4] rounded-xl border-2 border-dashed border-cream-200 flex items-center justify-center cursor-pointer hover:border-cream-400 hover:bg-cream-50 transition-all group-hover:-translate-y-2",children:[f.jsx(Tr,{size:32,className:"text-cream-300 group-hover:text-cream-500 transition-colors"}),f.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 bg-black/5"})]}),f.jsx("div",{className:"flex flex-col items-center text-center mt-2",children:f.jsx("span",{className:"text-sm font-bold text-cream-400 group-hover:text-cream-600 transition-colors",children:t("categories.edit_dialog.add_title")})})]})]})})})]})}class $${diff(e,n,s={}){let i;typeof s=="function"?(i=s,s={}):"callback"in s&&(i=s.callback);const l=this.castInput(e,s),c=this.castInput(n,s),d=this.removeEmpty(this.tokenize(l,s)),h=this.removeEmpty(this.tokenize(c,s));return this.diffWithOptionsObj(d,h,s,i)}diffWithOptionsObj(e,n,s,i){var l;const c=O=>{if(O=this.postProcess(O,s),i){setTimeout(function(){i(O)},0);return}else return O},d=n.length,h=e.length;let m=1,y=d+h;s.maxEditLength!=null&&(y=Math.min(y,s.maxEditLength));const b=(l=s.timeout)!==null&&l!==void 0?l:1/0,x=Date.now()+b,S=[{oldPos:-1,lastComponent:void 0}];let N=this.extractCommon(S[0],n,e,0,s);if(S[0].oldPos+1>=h&&N+1>=d)return c(this.buildValues(S[0].lastComponent,n,e));let E=-1/0,j=1/0;const D=()=>{for(let O=Math.max(E,-m);O<=Math.min(j,m);O+=2){let R;const U=S[O-1],L=S[O+1];U&&(S[O-1]=void 0);let H=!1;if(L){const P=L.oldPos-O;H=L&&0<=P&&P<d}const z=U&&U.oldPos+1<h;if(!H&&!z){S[O]=void 0;continue}if(!z||H&&U.oldPos<L.oldPos?R=this.addToPath(L,!0,!1,0,s):R=this.addToPath(U,!1,!0,1,s),N=this.extractCommon(R,n,e,O,s),R.oldPos+1>=h&&N+1>=d)return c(this.buildValues(R.lastComponent,n,e))||!0;S[O]=R,R.oldPos+1>=h&&(j=Math.min(j,O-1)),N+1>=d&&(E=Math.max(E,O+1))}m++};if(i)(function O(){setTimeout(function(){if(m>y||Date.now()>x)return i(void 0);D()||O()},0)})();else for(;m<=y&&Date.now()<=x;){const O=D();if(O)return O}}addToPath(e,n,s,i,l){const c=e.lastComponent;return c&&!l.oneChangePerToken&&c.added===n&&c.removed===s?{oldPos:e.oldPos+i,lastComponent:{count:c.count+1,added:n,removed:s,previousComponent:c.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:s,previousComponent:c}}}extractCommon(e,n,s,i,l){const c=n.length,d=s.length;let h=e.oldPos,m=h-i,y=0;for(;m+1<c&&h+1<d&&this.equals(s[h+1],n[m+1],l);)m++,h++,y++,l.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return y&&!l.oneChangePerToken&&(e.lastComponent={count:y,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=h,m}equals(e,n,s){return s.comparator?s.comparator(e,n):e===n||!!s.ignoreCase&&e.toLowerCase()===n.toLowerCase()}removeEmpty(e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(e[s]);return n}castInput(e,n){return e}tokenize(e,n){return Array.from(e)}join(e){return e.join("")}postProcess(e,n){return e}get useLongestToken(){return!1}buildValues(e,n,s){const i=[];let l;for(;e;)i.push(e),l=e.previousComponent,delete e.previousComponent,e=l;i.reverse();const c=i.length;let d=0,h=0,m=0;for(;d<c;d++){const y=i[d];if(y.removed)y.value=this.join(s.slice(m,m+y.count)),m+=y.count;else{if(!y.added&&this.useLongestToken){let b=n.slice(h,h+y.count);b=b.map(function(x,S){const N=s[m+S];return N.length>x.length?N:x}),y.value=this.join(b)}else y.value=this.join(n.slice(h,h+y.count));h+=y.count,y.added||(m+=y.count)}}return i}}const fS="a-zA-Z0-9_\\u{AD}\\u{C0}-\\u{D6}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}";class V$ extends $${tokenize(e){const n=new RegExp(`(\\r?\\n)|[${fS}]+|[^\\S\\n\\r]+|[^${fS}]`,"ug");return e.match(n)||[]}}const H$=new V$;function F$(t,e,n){return H$.diff(t,e,n)}const G$=({original:t,modified:e,originalTitle:n,modifiedTitle:s,originalTags:i,modifiedTags:l,onAccept:c,onReject:d,onRevert:h})=>{const{t:m}=yn(),y=T.useMemo(()=>!t&&!e?[]:F$(t||"",e||""),[t,e]),[b,x]=T.useState({});T.useEffect(()=>{x({})},[y]);const S=(R,U)=>{x(L=>{const H=L[R];let z;return H?H==="rejected"?z="accepted":z=void 0:z="rejected",{...L,[R]:z}})},N=()=>{let R="";y.forEach((U,L)=>{const H=b[L];U.added?H!=="rejected"&&(R+=U.value):U.removed?H==="rejected"&&(R+=U.value):R+=U.value}),c(R)},E=y.some(R=>R.added||R.removed),j=s&&s!==n,D=l&&JSON.stringify(l)!==JSON.stringify(i);return E||j||D?f.jsxs("div",{className:"flex flex-col h-full gap-4",children:[(j||D)&&f.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-100 space-y-3 shrink-0",children:[f.jsxs("h3",{className:"text-sm font-semibold text-amber-900 flex items-center gap-2",children:[f.jsx(Wa,{size:14}),m("write.diffViewer.metadataChanges")]}),j&&f.jsxs("div",{className:"text-sm",children:[f.jsx("span",{className:"text-amber-700/70 font-medium uppercase text-xs block mb-1",children:m("write.diffViewer.title")}),f.jsxs("div",{className:"flex items-center gap-2 bg-white/50 p-2 rounded border border-amber-100",children:[f.jsx("span",{className:"line-through text-cream-400",children:n||m("write.diffViewer.untitled")}),f.jsx("span",{className:"text-amber-400",children:""}),f.jsx("span",{className:"font-semibold text-amber-900",children:s})]})]}),D&&f.jsxs("div",{className:"text-sm",children:[f.jsx("span",{className:"text-amber-700/70 font-medium uppercase text-xs block mb-1",children:m("write.diffViewer.tags")}),f.jsxs("div",{className:"flex flex-col gap-2 bg-white/50 p-2 rounded border border-amber-100",children:[f.jsx("div",{className:"flex flex-wrap gap-1 opacity-60 grayscale",children:(i||[]).length>0?i.map(R=>f.jsxs("span",{className:"px-1.5 py-0.5 bg-cream-200 rounded text-xs",children:["#",R]},R)):f.jsx("span",{className:"text-xs italic",children:m("write.diffViewer.noTags")})}),f.jsx("div",{className:"text-amber-400 text-center rotate-90 sm:rotate-0",children:""}),f.jsx("div",{className:"flex flex-wrap gap-1",children:(l||[]).map(R=>f.jsxs("span",{className:"px-1.5 py-0.5 bg-amber-200 text-amber-900 rounded text-xs",children:["#",R]},R))})]})]})]}),f.jsxs("div",{className:"flex-1 bg-white rounded-lg border border-cream-200 overflow-hidden flex flex-col",children:[f.jsxs("div",{className:"p-2 bg-cream-50 border-b border-cream-100 flex items-center justify-between text-xs text-cream-600",children:[f.jsx("span",{children:m("write.diffViewer.instructions")}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-green-200"})," ",m("write.diffViewer.added")]}),f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-red-200"})," ",m("write.diffViewer.removed")]})]})]}),f.jsx("div",{className:"flex-1 p-4 overflow-y-auto leading-relaxed whitespace-pre-wrap font-sans text-base",children:y.map((R,U)=>{const L=b[U];if(R.added){const H=L==="rejected";return f.jsxs("span",{onClick:()=>S(U,"added"),className:Ne("cursor-pointer transition-colors rounded px-0.5 relative group select-none",H?"bg-cream-100 text-cream-400 line-through decoration-cream-300":"bg-green-100 text-green-900 hover:bg-green-200"),title:m(H?"write.diffViewer.include":"write.diffViewer.discard"),children:[R.value,!H&&f.jsx(ws,{size:10,className:"absolute -top-1.5 -right-1.5 bg-green-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity"})]},U)}if(R.removed){const H=L==="rejected";return f.jsxs("span",{onClick:()=>S(U,"removed"),className:Ne("cursor-pointer transition-colors rounded px-0.5 relative group select-none",H?"bg-blue-50 text-cream-900 border-b-2 border-blue-200":"bg-red-50 text-red-900 line-through decoration-red-300 hover:bg-red-100"),title:m(H?"write.diffViewer.delete":"write.diffViewer.restore"),children:[R.value,H&&f.jsx(pi,{size:10,className:"absolute -top-1.5 -right-1.5 bg-blue-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity"})]},U)}return f.jsx("span",{children:R.value},U)})})]}),f.jsxs("div",{className:"flex justify-end gap-3 mt-auto shrink-0",children:[f.jsxs("button",{onClick:d,className:"px-4 py-2 rounded-xl border border-cream-200 text-cream-600 hover:bg-cream-50 hover:text-cream-900 transition-colors font-medium text-sm flex items-center gap-2",children:[f.jsx(Ja,{size:16}),m("write.diffViewer.rejectAll")]}),f.jsxs("button",{onClick:N,className:"px-4 py-2 rounded-xl bg-cream-900 text-white hover:bg-cream-800 transition-colors font-medium text-sm flex items-center gap-2 shadow-sm",children:[f.jsx(ws,{size:16}),m("write.diffViewer.applySelected")]})]})]}):f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("div",{className:"flex-1 p-4 bg-white rounded-lg border border-cream-200 text-cream-900 leading-relaxed whitespace-pre-wrap overflow-y-auto",children:[t,f.jsx("div",{className:"mt-4 text-center text-sm text-cream-500 italic",children:m("write.diffViewer.noChanges")})]}),f.jsx("div",{className:"mt-4 flex justify-end",children:f.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-cream-100 text-cream-700 hover:bg-cream-200 rounded-xl transition-colors font-medium text-sm",children:[f.jsx(pi,{size:16}),m("write.diffViewer.back")]})})]})};function Y$({isOpen:t,onClose:e,currentContent:n,onPreview:s,messages:i,setMessages:l}){const{t:c}=yn(),{polishDiary:d,isTyping:h,currentPersona:m}=fo(),[y,b]=T.useState(""),x=T.useRef(null),S=T.useRef(null),[N,E]=T.useState(!1),j=T.useRef(null);T.useEffect(()=>{t&&i.length===0&&l([{id:"init",role:"assistant",content:c("write.polish.greeting")}])},[t,i.length,l,c]);const D=()=>{x.current?.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{D()},[i,t]);const O=async Y=>{if(!Y||Y.length===0)return;const Q=Y[Y.length-1];if(Q.role!=="user")return;E(!0);const A=Q.id;try{const F=Y.filter(I=>I.id!=="init").map(I=>({role:I.role,content:I.content})),te=[{role:"user",content:`Here is my current diary draft:

"${n}"

(Please use this as the context for my requests)`},...F],se=await d(te),C={id:Date.now()+1,role:"assistant",content:se};l(I=>{const q=I.findIndex(ce=>ce.id===A);if(q===-1)return[...I,C];const oe=[...I];return oe.splice(q+1,0,C),oe})}catch{const B={id:Date.now(),role:"assistant",content:c("write.polish.error")};l(te=>[...te,B])}finally{E(!1)}};T.useEffect(()=>{if(N)return;const Y=i[i.length-1];return Y&&Y.role==="user"&&(j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{O(i)},800)),()=>{j.current&&clearTimeout(j.current)}},[i,N]);const R=(Y=y)=>{if(!Y.trim())return;const Q={id:Date.now(),role:"user",content:Y};l(A=>[...A,Q]),b(""),S.current&&(S.current.value=""),setTimeout(()=>{b(""),S.current&&(S.current.value="")},100)},U=()=>{R(c("write.polish.oneClickPrompt"))},L=()=>{if(N)return;const Y=i.length-1,Q=i[Y];if(!Q||Q.role!=="assistant"||Q.id==="init")return;const A=i.slice(0,-1);l(A)},H=Y=>{const Q=se=>{const C=new RegExp(`<${se}>([\\s\\S]*?)</${se}>`),I=Y.match(C);return I?I[1].trim():null},A=Q("content")||Q("polished"),F=Q("title"),B=Q("tags"),te=B?B.split(",").map(se=>se.trim()).filter(Boolean):null;return!A&&!F&&!te?null:{content:A,title:F,tags:te}},z=Y=>Y.replace(/<content>[\s\S]*?<\/content>/g,"").replace(/<polished>[\s\S]*?<\/polished>/g,"").replace(/<title>[\s\S]*?<\/title>/g,"").replace(/<tags>[\s\S]*?<\/tags>/g,"").trim(),P=Y=>{const Q=Y.split(/(\*\*.*?\*\*)/g);return f.jsx("div",{className:"whitespace-pre-wrap",children:Q.map((A,F)=>A.startsWith("**")&&A.endsWith("**")?f.jsx("strong",{className:"font-semibold",children:A.slice(2,-2)},F):A)})};return f.jsxs(ft.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"fixed bottom-6 right-6 w-96 h-[600px] max-h-[80vh] bg-white rounded-2xl shadow-2xl border border-cream-200 z-50 flex flex-col overflow-hidden font-sans",children:[f.jsxs("div",{className:"p-4 border-b border-cream-100 flex items-center justify-between bg-cream-50/50",children:[f.jsxs("div",{className:"flex items-center gap-2 text-cream-900 font-semibold",children:[f.jsx(df,{size:18,className:"text-amber-500"}),f.jsx("span",{children:m?.name||c("write.polish.defaultName")})]}),f.jsx("button",{onClick:e,className:"p-1 hover:bg-cream-200/50 rounded-full transition-colors text-cream-600",children:f.jsx(Ja,{size:18})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-cream-50/30 custom-scrollbar",children:[i.map((Y,Q)=>{const A=Y.role==="assistant"?H(Y.content):null,F=Y.role==="assistant"?z(Y.content):Y.content,B=F.split(/\n\s*\n/).filter(te=>te.trim());return B.length===0&&F.trim()&&B.push(F),f.jsxs("div",{className:Ne("flex flex-col gap-1 max-w-[85%]",Y.role==="user"?"ml-auto items-end":"mr-auto items-start"),children:[B.map((te,se)=>f.jsx("div",{className:Ne("p-3 rounded-2xl text-sm leading-relaxed shadow-sm",Y.role==="user"?"bg-cream-900 text-white rounded-tr-none":"bg-white text-cream-900 border border-cream-200 rounded-tl-none"),children:f.jsx("div",{className:"whitespace-pre-wrap",children:Y.role==="assistant"?P(te):te})},se)),Y.role==="assistant"&&A&&f.jsxs("div",{className:"flex flex-col gap-1.5 mt-1 ml-1 mb-1",children:[A.title&&f.jsxs("div",{className:"flex items-start gap-2 text-xs text-cream-700",children:[f.jsx("span",{className:"bg-cream-200/50 px-1.5 py-0.5 rounded text-[10px] uppercase tracking-wider font-semibold text-cream-600 mt-0.5 shrink-0",children:c("write.polish.title")}),f.jsx("span",{className:"font-medium bg-white px-2 py-1 rounded-md border border-cream-100 shadow-sm",children:A.title})]}),A.tags&&f.jsxs("div",{className:"flex items-start gap-2 text-xs text-cream-700",children:[f.jsx("span",{className:"bg-cream-200/50 px-1.5 py-0.5 rounded text-[10px] uppercase tracking-wider font-semibold text-cream-600 mt-0.5 shrink-0",children:c("write.polish.tags")}),f.jsx("div",{className:"flex flex-wrap gap-1",children:A.tags.map(te=>f.jsxs("span",{className:"px-1.5 py-0.5 bg-amber-50 text-amber-700 border border-amber-100 rounded text-[10px]",children:["#",te]},te))})]}),A.content&&f.jsxs("div",{className:"flex items-start gap-2 text-xs text-cream-700",children:[f.jsx("span",{className:"bg-cream-200/50 px-1.5 py-0.5 rounded text-[10px] uppercase tracking-wider font-semibold text-cream-600 mt-0.5 shrink-0",children:c("write.polish.content")}),f.jsx("span",{className:"italic text-cream-500 py-0.5",children:c("write.polish.polishedAvailable")})]})]}),Y.role==="assistant"&&Y.id!=="init"&&f.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[A&&f.jsxs("button",{onClick:()=>s(A),className:"text-xs flex items-center gap-1 text-amber-600 hover:text-amber-700 font-medium px-1 bg-amber-50/50 py-1 rounded-md border border-amber-100/50 hover:bg-amber-100 transition-colors",children:[f.jsx(Bc,{size:10}),c("write.polish.compareApply")]}),Q===i.length-1&&!N&&f.jsxs("button",{onClick:L,className:"text-xs flex items-center gap-1 text-cream-500 hover:text-cream-700 font-medium px-1 py-1 rounded-md hover:bg-cream-100 transition-colors",title:c("write.polish.reroll"),children:[f.jsx(pi,{size:10}),c("write.polish.reroll")]})]})]},Y.id)}),N&&f.jsx("div",{className:"mr-auto items-start max-w-[85%]",children:f.jsxs("div",{className:"bg-white p-3 rounded-2xl rounded-tl-none border border-cream-200 shadow-sm flex gap-1",children:[f.jsx("span",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),f.jsx("span",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),f.jsx("span",{className:"w-1.5 h-1.5 bg-cream-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}),f.jsx("div",{ref:x})]}),f.jsxs("div",{className:"p-3 border-t border-cream-100 bg-white",children:[f.jsxs("div",{className:"flex gap-2 mb-2 overflow-x-auto pb-1 scrollbar-hide",children:[f.jsxs("button",{onClick:U,className:"flex items-center gap-1.5 px-3 py-1.5 bg-amber-50 text-amber-700 hover:bg-amber-100 rounded-full text-xs font-medium border border-amber-200 transition-colors whitespace-nowrap",children:[f.jsx(df,{size:12}),c("write.polish.oneClick")]}),f.jsx("button",{onClick:()=>R(c("write.polish.emotionalPrompt")),className:"px-3 py-1.5 bg-cream-50 text-cream-700 hover:bg-cream-100 rounded-full text-xs font-medium border border-cream-200 transition-colors whitespace-nowrap",children:c("write.polish.emotional")}),f.jsx("button",{onClick:()=>R(c("write.polish.grammarPrompt")),className:"px-3 py-1.5 bg-cream-50 text-cream-700 hover:bg-cream-100 rounded-full text-xs font-medium border border-cream-200 transition-colors whitespace-nowrap",children:c("write.polish.grammar")})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-cream-50 p-2 rounded-xl border border-cream-200 focus-within:border-cream-400 transition-colors",children:[f.jsx("input",{ref:S,value:y,onChange:Y=>b(Y.target.value),onKeyDown:Y=>Y.key==="Enter"&&R(),placeholder:c("write.polish.placeholder"),className:"flex-1 bg-transparent border-none outline-none text-sm text-cream-900 placeholder:text-cream-400"}),f.jsx("button",{onClick:()=>R(),disabled:!y.trim(),className:"p-2 bg-cream-900 text-white rounded-lg hover:bg-cream-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-message-circle","aria-hidden":"true",children:f.jsx("path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"})})})]})]})]})}function K$(){const{i18n:t}=yn(),[e,n]=T.useState("chat"),{setRightSidebarOpen:s}=l0(),{theme:i,t:l}=$0(),d={en:gn,"en-US":gn,zh:ns,"zh-CN":ns,"zh-TW":kl}[t.language]||gn,[h]=B4(),m=h.get("date"),y=h.get("mode"),{generateDiary:b,currentPersona:x,messages:S,isTyping:N,sendMessage:E,editMessage:j,deleteMessages:D,triggerAIResponse:O,regenerateLastResponse:R,generateBriefing:U,activeDate:L,setActiveDate:H}=fo();T.useEffect(()=>{m&&m!==L&&H(m)},[m,L,H]),T.useEffect(()=>{y&&["chat","manual"].includes(y)&&n(y)},[y]);const{addDiary:z,diaries:P,customCategories:Y,addCategory:Q}=uo(),A=kr(),[F,B]=T.useState(""),[te,se]=T.useState(!1),[C,I]=T.useState(!1),[q,oe]=T.useState(new Set),[ce,M]=T.useState(null),[K,Z]=T.useState(null),[le,me]=T.useState(""),be=()=>{I(!C),oe(new Set),Z(null)},we=xe=>{const Be=new Set(q);Be.has(xe)?Be.delete(xe):Be.add(xe),oe(Be)},je=()=>{q.size!==0&&window.confirm(l("write.deleteConfirm",{count:q.size}))&&(D(Array.from(q)),I(!1),oe(new Set))},X=xe=>{Z(xe.id),me(xe.text),I(!1)},ae=()=>{K&&le.trim()&&(j(K,le),Z(null),me(""))},pe=()=>{Z(null),me("")},ve=xe=>{navigator.clipboard.writeText(xe)},[ge,Se]=T.useState(""),[Ae,ye]=T.useState(""),[Xe,Ye]=T.useState("neutral"),[Me,He]=T.useState([]),[ot,gt]=T.useState(""),[Zt,Je]=T.useState(""),[Ue,Pt]=T.useState(!1),[Te,lt]=T.useState(!1),[Qt,mt]=T.useState([]),[za,kn]=T.useState(!1),[wn,Gt]=T.useState(""),[Sn,Bt]=T.useState(!1),[As,ss]=T.useState(""),[Dn,ba]=T.useState(""),[ea,On]=T.useState(null),[Nn,Mn]=T.useState(null);T.useEffect(()=>{if(!L)return;const xe=`diary_draft_${L}`;(async()=>{try{let Re=await Tt.get(it.SETTINGS,xe);if(!Re){const Yt=localStorage.getItem(xe);if(Yt)try{Re=JSON.parse(Yt)}catch{console.warn("Invalid JSON in LS draft")}}Re?(ye(Re.content||""),Se(Re.title||""),Ye(Re.mood||"neutral"),He(Re.tags||[]),gt(Re.category||""),mt(Re.messages||[]),lt(Re.isAssistantOpen||!1)):(ye(""),Se(""),Ye("neutral"),He([]),gt(""),mt([]),lt(!1))}catch(Re){console.error("Failed to load draft",Re),ye(""),Se(""),Ye("neutral"),He([]),gt(""),mt([]),lt(!1)}})()},[L]),T.useEffect(()=>{e==="chat"&&lt(!1)},[e]),T.useEffect(()=>{if(!L)return;const xe=`diary_draft_${L}`;if(Ue)return;const Be={content:Ae,title:ge,mood:Xe,tags:Me,category:ot,messages:Qt,isAssistantOpen:Te,timestamp:Date.now()},Yt=setTimeout(async()=>{try{await Tt.put(it.SETTINGS,Be,xe),localStorage.removeItem(xe)}catch(wa){console.warn("Failed to save draft to IndexedDB:",wa)}},500);return()=>clearTimeout(Yt)},[Ae,ge,Xe,Me,ot,Qt,Te,Ue,L]);const xa=xe=>{ss(Ae),ba(xe.content||Ae),On(xe.title||null),Mn(xe.tags||null),Bt(!0)},Ws=xe=>{ye(typeof xe=="string"?xe:Dn),ea&&Se(ea),Nn&&He(Nn),Bt(!1),On(null),Mn(null)},rs=()=>{Bt(!1),On(null),Mn(null)},[$n,ta]=T.useState("neutral"),[na,Cs]=T.useState([]),[Mr,Rr]=T.useState(""),[is,aa]=T.useState(""),[Ut,Xs]=T.useState(""),[bn,At]=T.useState(""),[Jt,sa]=T.useState(null),Ct=T.useRef(null),os=T.useRef(null),[Ai,Zs]=T.useState(!1),ls=async xe=>{const Be=xe.target.files[0];if(Be)try{console.log("Starting image compression...");const Re=await pN(Be);if(console.log("Image compressed, length:",Re?Re.length:"null"),!Re||typeof Re!="string")throw new Error("Image compression returned invalid data");E("",{type:"image",url:Re})}catch(Re){console.error("Image upload failed:",Re),alert(l("write.alerts.uploadFailed"))}finally{Ct.current&&(Ct.current.value="")}},js=T.useRef(null),zt=()=>{js.current?.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{zt()},[S,N]);const va={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},[ra,Rn]=T.useState(null),jt=T.useMemo(()=>Y.map(xe=>xe.name),[Y]),[Vn,ia]=T.useState(!1);T.useEffect(()=>{e==="chat"&&s(!1)},[e,s]),T.useEffect(()=>()=>{s(!1)},[s]);const oa=(xe,Be)=>xe.id===1||xe.id==="1"?!1:Be?xe.id-Be.id>180*1e3:!0,Hn=xe=>{const Be=new Date(xe),Re=new Date;return Be.toDateString()===Re.toDateString()?pt(Be,"p",{locale:d}):pt(Be,"MMM d, p",{locale:d})},Fn=()=>{F.trim()&&(E(F),B(""),os.current&&(os.current.value=""),setTimeout(()=>{B(""),os.current&&(os.current.value="")},100))},_s=async()=>{N||await O()},Qs=async(xe="")=>{ia(!0);try{const Be=S.filter(Yt=>!(Yt.id===1||Yt.id==="1"||!Yt.text&&!Yt.attachment));if(Be.length===0){alert(l("write.alerts.noHistory",{date:L||"today"})),ia(!1);return}const Re=await b(Be,xe);typeof Re=="object"?(Rn(Re.content),ta(Re.mood?.toLowerCase()||"neutral"),Cs(Re.tags||[]),aa(Re.title||"Generated Entry"),Xs(Re.summary||""),At(Re.category||""),sa(Re.ai_briefing||null)):(Rn(Re),aa("Generated Entry"),sa(null))}catch(Be){console.error("Generation failed:",Be),alert(l("write.alerts.generateFailed",{error:Be.message}))}finally{ia(!1)}},Ci=()=>{if(ra)try{const xe=L||pt(new Date,"yyyy-MM-dd");bn&&!Y.some(Re=>Re.name===bn)&&Q(bn);const Be=S.filter(Re=>!(Re.id===1||Re.id==="1"||!Re.text&&!Re.attachment));z({id:Date.now().toString()+Math.random().toString(36).substr(2,9),date:xe,title:is||"Daily Reflection",content:ra,mood:$n,tags:na,summary:Ut,category:bn,ai_briefing:Jt,chatHistory:Be.map(Re=>({id:Re.id,text:Re.text,sender:Re.sender,timestamp:Re.timestamp||(typeof Re.id=="number"?Re.id:parseInt(Re.id))}))}),Rn(null),ta("neutral"),Cs([]),aa(""),Xs(""),At(""),sa(null),A(`/date/${xe}`)}catch(xe){console.error("Error in handleSaveDiary:",xe),alert(l("write.alerts.saveFailed",{error:xe.message}))}},ks=async()=>{if(!Ae.trim()&&!ge.trim())return;Pt(!0),ot&&!Y.some(Be=>Be.name===ot)&&Q(ot);let xe=null;try{xe=await U(Ae,ge||"Untitled")}catch(Be){console.error("Failed to generate briefing for manual entry",Be)}try{const Be=L||pt(new Date,"yyyy-MM-dd");z({id:Date.now().toString()+Math.random().toString(36).substr(2,9),date:Be,title:ge||"Untitled Entry",content:Ae,mood:Xe,tags:Me,category:ot,ai_briefing:xe,chatHistory:[]});const Re=`diary_draft_${L||pt(new Date,"yyyy-MM-dd")}`;localStorage.removeItem(Re),mt([]),lt(!1),A(`/date/${Be}`)}catch(Be){console.error("Failed to save diary:",Be),alert(l("write.alerts.saveFailed",{error:"Please try again"})),Pt(!1)}};return T.useMemo(()=>{if(!L)return!1;const xe=pt(new Date,"yyyy-MM-dd");return L>xe},[L])?f.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:f.jsxs("div",{className:"max-w-md animate-in fade-in zoom-in duration-300",children:[f.jsx("div",{className:"w-16 h-16 bg-cream-100/50 rounded-full flex items-center justify-center mx-auto mb-6 text-cream-400/80",children:f.jsx(Tl,{size:32})}),f.jsx("h2",{className:"text-xl font-serif font-medium text-cream-900 mb-2",children:l("write.futureDate.title")}),f.jsxs("p",{className:"text-cream-600 mb-8 font-light italic",children:['"',l("write.futureDate.quote"),'"']}),f.jsxs("button",{onClick:()=>A("/calendar"),className:"px-6 py-2.5 bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors text-sm font-medium flex items-center gap-2 mx-auto shadow-sm",children:[f.jsx(YS,{size:16}),l("write.futureDate.goBack")]})]})}):f.jsx("div",{className:"flex h-full relative",children:f.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[f.jsxs("div",{className:"h-16 flex items-center justify-between px-6 shrink-0 relative z-30 sticky top-0 bg-[#FDFBF7]/90 backdrop-blur-sm",children:[f.jsx("div",{className:"flex items-center gap-4",children:f.jsxs("div",{className:"flex bg-cream-100/50 p-1 rounded-xl",children:[f.jsx("button",{onClick:()=>n("chat"),className:Ne("p-2 rounded-md transition-all flex items-center justify-center",e==="chat"?"bg-white text-cream-900 shadow-sm":"text-cream-900/60 hover:text-cream-900 hover:bg-white/50"),title:l("write.chat.mode"),children:f.jsx(no,{size:18})}),f.jsx("button",{onClick:()=>n("manual"),className:Ne("p-2 rounded-md transition-all flex items-center justify-center",e==="manual"?"bg-white text-cream-900 shadow-sm":"text-cream-900/60 hover:text-cream-900 hover:bg-white/50"),title:l("write.chat.manualMode"),children:f.jsx(yl,{size:18})})]})}),f.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none",children:f.jsxs("div",{className:"px-3 py-1 bg-cream-100 rounded-lg border border-cream-200 flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),f.jsxs("span",{className:"text-xs font-semibold text-cream-700 uppercase tracking-wide",children:[l("write.recording"),": ",L?pt(wr(L),"PP",{locale:d}):pt(new Date,"PP",{locale:d})]})]})}),f.jsxs("div",{className:"flex items-center gap-3",children:[e==="chat"&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:be,className:Ne("p-2 rounded-lg transition-all border border-cream-200 shadow-sm flex items-center justify-center",C?"bg-cream-900 text-white":"bg-white text-cream-900 hover:bg-cream-50"),title:l(C?"write.chat.cancelSelection":"write.chat.selectMessages"),children:f.jsx(Nk,{size:18})}),f.jsx(mn,{children:C&&q.size>0&&f.jsxs(ft.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:je,className:"px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors flex items-center gap-2 font-medium text-sm border border-red-200",children:[f.jsx(pn,{size:16}),f.jsx("span",{children:l("write.deleteSelected",{count:q.size})})]})}),f.jsxs("button",{onClick:()=>Qs(),disabled:Vn,className:Ne("px-3 py-2 rounded-lg transition-all border border-cream-200 shadow-sm flex items-center gap-2 font-medium text-sm",Vn?"bg-cream-100 text-cream-400":"bg-white text-cream-900 hover:text-amber-500 hover:bg-cream-50"),title:l("write.generate"),children:[Vn?f.jsx("div",{className:"w-4 h-4 border-2 border-cream-400 border-t-cream-900 rounded-full animate-spin"}):f.jsx(Wa,{size:16}),f.jsx("span",{className:"hidden sm:inline",children:l(Vn?"write.generating":"write.generate")})]})]}),e==="manual"&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:()=>lt(!Te),className:Ne("flex items-center gap-2 text-sm font-medium px-3 py-2 rounded-lg border transition-colors shadow-sm",Te?"bg-amber-50 text-amber-700 border-amber-200":"bg-white text-cream-900 border-cream-200 hover:bg-cream-50"),children:[f.jsx(df,{size:16}),f.jsx("span",{className:"hidden sm:inline",children:l("write.aiAssistant")})]}),f.jsx("button",{onClick:ks,disabled:Ue,className:"flex items-center gap-2 text-sm font-medium bg-cream-900 text-white px-3 py-2 rounded-lg hover:bg-cream-800 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:Ue?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),f.jsx("span",{className:"hidden sm:inline",children:l("write.saving")})]}):f.jsxs(f.Fragment,{children:[f.jsx(ao,{size:16}),f.jsx("span",{className:"hidden sm:inline",children:l("write.save")})]})})]})]})]}),f.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[f.jsx(mn,{mode:"wait",children:e==="chat"?f.jsxs(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full flex flex-col rounded-2xl border border-white/60 shadow-inner overflow-hidden relative",style:{backgroundColor:i.chatBgImage?"transparent":"rgba(253, 251, 247, 0.5)",backgroundImage:i.chatBgImage?`url(${i.chatBgImage})`:void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[f.jsx("div",{className:"px-4 py-2 flex justify-center z-10 sticky top-0 pointer-events-none",children:f.jsxs("div",{className:"bg-white/80 backdrop-blur px-3 py-1 rounded-full text-xs text-cream-600 flex items-center gap-1.5 cursor-pointer hover:bg-white transition-colors border border-cream-100/50 shadow-sm pointer-events-auto",onClick:()=>se(!0),children:[f.jsx(Wa,{size:12}),f.jsx("span",{className:"font-medium text-cream-900",children:x.name})]})}),f.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-4 py-4 space-y-6 custom-scrollbar",children:[S.map((xe,Be)=>{const Re=Be>0?S[Be-1]:null,Yt=oa(xe,Re),wa=K===xe.id,Ds=q.has(xe.id);return f.jsxs(pa.Fragment,{children:[Yt&&f.jsx("div",{className:"flex justify-center my-6",children:f.jsx("span",{className:"text-[10px] font-medium text-cream-400 bg-cream-100/60 px-2.5 py-1 rounded-full",children:Hn(xe.id)})}),f.jsxs("div",{className:Ne("flex w-full group relative mb-2",xe.sender==="user"?"justify-end":"justify-start"),children:[C&&f.jsx("div",{className:Ne("flex items-center px-2 cursor-pointer transition-all",(xe.sender==="user","order-first")),onClick:()=>we(xe.id),children:f.jsx("div",{className:Ne("w-5 h-5 rounded-md border flex items-center justify-center transition-all",Ds?"bg-cream-900 border-cream-900 text-white":"bg-white border-cream-300 hover:border-cream-400"),children:Ds&&f.jsx(ws,{size:12,strokeWidth:3})})}),wa?f.jsxs("div",{className:Ne("w-full max-w-[80%] p-4 rounded-2xl bg-white border border-cream-200 shadow-lg z-10",xe.sender==="user"?"rounded-tr-none":"rounded-tl-none"),children:[f.jsx("textarea",{value:le,onChange:Ln=>me(Ln.target.value),className:"w-full bg-transparent resize-none outline-none text-lg text-cream-900 min-h-[100px]",autoFocus:!0}),f.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[f.jsx("button",{onClick:pe,className:"px-3 py-1.5 text-sm text-cream-600 hover:bg-cream-50 rounded-lg",children:l("common.cancel")}),f.jsx("button",{onClick:ae,className:"px-3 py-1.5 text-sm bg-cream-900 text-white rounded-lg hover:bg-cream-800",children:l("common.save")})]})]}):f.jsxs("div",{onClick:()=>!C&&M(ce===xe.id?null:xe.id),className:Ne("max-w-[80%] p-4 rounded-2xl text-lg leading-relaxed shadow-sm relative transition-all cursor-pointer",xe.sender==="user"?"bg-cream-900 text-white rounded-tr-none":"bg-white text-cream-900 border border-cream-100 rounded-tl-none"),children:[xe.attachment&&xe.attachment.type==="image"&&f.jsxs("div",{className:"mb-2 rounded-lg overflow-hidden relative min-h-[100px] bg-gray-50 flex items-center justify-center",children:[f.jsx("img",{src:xe.attachment.url,alt:"Uploaded",className:"max-w-full h-auto max-h-[300px] object-cover",onError:Ln=>{console.error("Image rendering failed:",Ln),Ln.target.style.display="none",Ln.target.nextSibling.style.display="flex"}}),f.jsxs("div",{className:"hidden absolute inset-0 flex-col items-center justify-center text-cream-400 p-4 text-center",children:[f.jsx(gl,{size:24,className:"mb-2 opacity-50"}),f.jsx("span",{className:"text-xs",children:l("write.errors.imageLoadFailed")})]})]}),xe.text&&f.jsx("div",{className:"whitespace-pre-wrap",children:xe.text}),!C&&f.jsxs("div",{onClick:Ln=>Ln.stopPropagation(),className:Ne("absolute top-1/2 -translate-y-1/2 flex gap-2 transition-opacity z-10 px-2",xe.sender==="user"?"right-full":"left-full",ce===xe.id?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[f.jsx("button",{onClick:()=>ve(xe.text||""),className:"text-cream-400 hover:text-cream-900 transition-colors",title:l("write.chat.copy"),children:f.jsx(__,{size:16})}),xe.text&&f.jsx("button",{onClick:()=>X(xe),className:"text-cream-400 hover:text-cream-900 transition-colors",title:l("write.chat.edit"),children:f.jsx(cf,{size:16})}),f.jsx("button",{onClick:()=>D([xe.id]),className:"text-cream-400 hover:text-red-600 transition-colors",title:l("write.chat.delete"),children:f.jsx(pn,{size:16})}),xe.sender==="ai"&&Be===S.length-1&&!N&&f.jsx("button",{onClick:()=>R(),className:"text-cream-400 hover:text-cream-900 transition-colors",title:l("write.chat.regenerate"),children:f.jsx(pi,{size:16})})]})]})]})]},xe.id)}),N&&f.jsx("div",{className:"flex justify-start",children:f.jsx("div",{className:"bg-white p-4 rounded-2xl rounded-tl-none border border-cream-100 shadow-sm flex items-center min-w-[80px] justify-center",children:f.jsxs("div",{className:"flex gap-1.5",children:[f.jsx("span",{className:"w-2 h-2 bg-cream-400 rounded-full typing-dot"}),f.jsx("span",{className:"w-2 h-2 bg-cream-400 rounded-full typing-dot"}),f.jsx("span",{className:"w-2 h-2 bg-cream-400 rounded-full typing-dot"})]})})}),f.jsx("div",{ref:js})]}),f.jsx("div",{className:"p-4 relative shrink-0 bg-white/60 backdrop-blur-md border-t border-white/50",children:f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 flex items-center gap-1 z-10",children:[f.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:Ct,onChange:ls}),f.jsx("button",{onClick:()=>Ct.current?.click(),className:"p-2 text-cream-400 hover:text-cream-900 hover:bg-cream-100 rounded-xl transition-all",title:l("write.chat.uploadImage"),children:f.jsx(gl,{size:24})})]}),f.jsx("input",{ref:os,type:"text",value:F,onChange:xe=>B(xe.target.value),onCompositionStart:()=>Zs(!0),onCompositionEnd:()=>Zs(!1),onKeyDown:xe=>{xe.key==="Enter"&&!Ai&&Fn()},placeholder:l("write.chat.placeholder"),className:"w-full pl-14 pr-32 py-4 bg-white border border-cream-200 rounded-2xl shadow-sm focus:outline-none focus:ring-2 focus:ring-cream-200 text-lg transition-all",autoFocus:!0}),f.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[f.jsx("button",{onClick:Fn,disabled:!F.trim(),className:"p-2 text-cream-400 hover:text-cream-900 hover:bg-cream-100 rounded-xl transition-all disabled:opacity-50",title:l("write.chat.send"),children:f.jsx(KS,{size:24})}),f.jsx("div",{className:"w-px h-6 bg-cream-200 mx-1"}),f.jsxs("button",{onClick:_s,disabled:N||S.length===0||S[S.length-1].sender==="ai",className:"px-3 py-2 bg-cream-900 text-white rounded-xl hover:bg-cream-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2 text-sm font-medium",title:l("write.chat.reply"),children:[f.jsx("span",{children:l("write.chat.reply")}),f.jsx(no,{size:16})]})]})]})})]},"chat"):f.jsxs("div",{className:"h-full bg-white rounded-2xl shadow-sm border border-cream-100 p-8 flex flex-col relative",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-4 flex-wrap",children:[f.jsx("input",{type:"text",placeholder:l("write.manual.titlePlaceholder"),value:ge,onChange:xe=>Se(xe.target.value),className:"flex-1 min-w-[200px] text-3xl font-bold text-cream-900 placeholder:text-cream-900/20 border-none outline-none bg-transparent"}),f.jsx(Kg,{value:Xe,onChange:Ye})]}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-xs font-medium text-cream-500 mb-1 uppercase tracking-wide",children:l("write.manual.category")}),f.jsx(Yg,{value:ot,onChange:gt,existingCategories:jt})]}),f.jsxs("div",{className:"flex-[2]",children:[f.jsx("label",{className:"block text-xs font-medium text-cream-500 mb-1 uppercase tracking-wide",children:l("write.manual.tags")}),f.jsx(Gg,{tags:Me,setTags:He,inputValue:Zt,setInputValue:Je})]})]}),f.jsx("div",{className:"flex-1 overflow-hidden relative",children:Sn?f.jsx("div",{className:"h-full overflow-y-auto p-1 custom-scrollbar",children:f.jsx(G$,{original:As,modified:Dn,originalTitle:ge,modifiedTitle:ea,originalTags:Me,modifiedTags:Nn,onAccept:Ws,onReject:rs,onRevert:rs})}):f.jsx(wl,{theme:"snow",value:Ae,onChange:ye,modules:va,placeholder:l("write.manual.contentPlaceholder"),className:"h-full"})})]})}),f.jsx(mn,{children:Te&&f.jsx(Y$,{isOpen:Te,onClose:()=>lt(!1),currentContent:Ae,onPreview:xa,messages:Qt,setMessages:mt})})]}),f.jsx(mn,{children:(ra||Vn)&&f.jsxs(ft.div,{initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},className:"absolute inset-0 bg-white/95 backdrop-blur-md z-50 flex flex-col p-6 rounded-t-xl shadow-xl border-t border-cream-200",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h3",{className:"text-xl font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(Wa,{className:"text-amber-400"}),l("write.generated.title")]}),f.jsx("div",{className:"flex gap-2",children:f.jsx("button",{onClick:()=>{Rn(null),ia(!1)},className:"p-2 hover:bg-cream-100 rounded-full text-cream-500 transition-colors",children:f.jsx(Ja,{size:20})})})]}),Vn?f.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4 text-cream-400",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-12 h-12 border-4 border-cream-200 border-t-cream-900 rounded-full animate-spin"}),f.jsx(Wa,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-amber-400 animate-pulse",size:16})]}),f.jsx("p",{className:"font-medium animate-pulse",children:l("write.generated.crafting")})]}):f.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[f.jsxs("div",{className:"mb-2 shrink-0 border-b border-cream-100 pb-2 space-y-2",children:[f.jsx("input",{type:"text",value:is,onChange:xe=>aa(xe.target.value),className:"w-full text-2xl font-bold text-cream-900 border-none outline-none placeholder:text-cream-300 bg-transparent",placeholder:l("write.generated.titlePlaceholder")}),f.jsx(Yg,{value:bn,onChange:At,existingCategories:jt})]}),f.jsxs("div",{className:"flex items-center gap-4 mb-4 flex-wrap shrink-0",children:[f.jsx(Kg,{value:$n,onChange:ta}),f.jsx(Gg,{tags:na,setTags:Cs,inputValue:Mr,setInputValue:Rr})]}),f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(wl,{theme:"snow",value:ra,onChange:Rn,modules:va,className:"h-full"})}),f.jsxs("div",{className:"flex gap-3 mt-4 shrink-0",children:[f.jsxs("button",{onClick:()=>kn(!0),disabled:Vn,className:"flex-1 py-3 rounded-xl border border-cream-200 text-cream-700 hover:bg-cream-50 transition-colors flex items-center justify-center gap-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[f.jsx(pi,{size:18}),l("write.generated.reroll")]}),f.jsxs("button",{onClick:Ci,disabled:Vn,className:"flex-1 py-3 rounded-xl bg-cream-900 text-white hover:bg-cream-800 transition-colors flex items-center justify-center gap-2 font-medium shadow-lg shadow-cream-900/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[f.jsx(ao,{size:18}),l("write.generated.save")]})]})]})]})}),f.jsx(mn,{children:te&&f.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-sm p-4",children:f.jsxs(ft.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-cream-100",children:[f.jsxs("h3",{className:"text-lg font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(Wa,{size:18,className:"text-cream-400"}),"AI Persona Settings"]}),f.jsx("button",{onClick:()=>se(!1),className:"p-2 text-cream-400 hover:bg-cream-50 rounded-lg transition-colors",children:f.jsx(Ja,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:f.jsx(q0,{})})]})})}),f.jsx(mn,{children:za&&f.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-black/20 backdrop-blur-sm p-4",children:f.jsxs(ft.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl shadow-xl w-full max-w-md flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-cream-100",children:[f.jsxs("h3",{className:"text-lg font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(pi,{size:18,className:"text-cream-400"}),l("write.generated.rerollTitle")]}),f.jsx("button",{onClick:()=>kn(!1),className:"p-2 text-cream-400 hover:bg-cream-50 rounded-lg transition-colors",children:f.jsx(Ja,{size:20})})]}),f.jsxs("div",{className:"p-6",children:[f.jsx("p",{className:"text-sm text-cream-600 mb-3",children:l("write.generated.rerollInstruction")}),f.jsx("textarea",{value:wn,onChange:xe=>Gt(xe.target.value),placeholder:l("write.generated.rerollPlaceholder"),className:"w-full h-24 p-3 bg-cream-50 border border-cream-200 rounded-xl resize-none outline-none focus:ring-2 focus:ring-cream-200 text-cream-900 placeholder:text-cream-400",autoFocus:!0}),f.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[f.jsx("button",{onClick:()=>kn(!1),className:"px-4 py-2 text-sm font-medium text-cream-600 hover:bg-cream-50 rounded-lg transition-colors",children:l("write.generated.cancel")}),f.jsxs("button",{onClick:()=>{Qs(wn),kn(!1)},className:"px-4 py-2 text-sm font-medium bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors shadow-sm flex items-center gap-2",children:[f.jsx(pi,{size:14}),l("write.generated.confirm")]})]})]})]})})})]})})}function W$(){const{theme:t,updateTheme:e,resetTheme:n,t:s}=$0(),i=T.useRef(null),l=h=>{const m=h.target.files[0];if(!m)return;const y=new FileReader;y.onloadend=()=>{e({chatBgImage:y.result})},y.readAsDataURL(m)},c=[{code:"zh-TW",name:""},{code:"zh-CN",name:""},{code:"en-US",name:"English"},{code:"ja-JP",name:""}],d=[{name:"Classic Brown",primary:"#4A453E",bg:"#FDFBF7"},{name:"Midnight Blue",primary:"#1e293b",bg:"#f8fafc"},{name:"Forest Green",primary:"#14532d",bg:"#f0fdf4"},{name:"Rose Gold",primary:"#881337",bg:"#fff1f2"}];return f.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("h2",{className:"text-xl font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(Tv,{className:"w-6 h-6 text-cream-900"}),s("settings.interface.title")]}),f.jsxs("button",{onClick:n,className:"text-xs text-cream-500 hover:text-cream-900 flex items-center gap-1 transition-colors px-3 py-1.5 rounded-lg hover:bg-cream-50 border border-transparent hover:border-cream-200",children:[f.jsx(pi,{size:14}),s("settings.interface.reset")]})]}),f.jsxs("div",{className:"space-y-3 mt-6",children:[f.jsxs("h3",{className:"text-sm font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(H_,{size:16}),s("settings.interface.language")]}),f.jsxs("div",{className:"relative",children:[f.jsx("select",{value:t.language,onChange:h=>e({language:h.target.value}),className:"w-full appearance-none bg-white border border-cream-200 text-cream-900 rounded-xl px-4 py-2.5 pr-10 focus:outline-none focus:ring-2 focus:ring-cream-900/10 focus:border-cream-300 cursor-pointer font-medium transition-all",children:c.map(h=>f.jsx("option",{value:h.code,children:h.name},h.code))}),f.jsx(Lf,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-cream-400 pointer-events-none",size:16})]})]}),f.jsx("div",{className:"h-px bg-cream-200/50"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h3",{className:"text-sm font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(Tv,{size:16}),s("settings.interface.theme")]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-cream-500 mb-2",children:s("settings.interface.presets")}),f.jsx("div",{className:"flex gap-3",children:d.map(h=>f.jsx("button",{onClick:()=>e({primaryColor:h.primary,backgroundColor:h.bg}),className:"group relative w-10 h-10 rounded-full border-2 border-white ring-1 ring-cream-200 shadow-sm hover:scale-110 transition-transform flex-shrink-0",style:{backgroundColor:h.bg},title:h.name,children:f.jsx("div",{className:"absolute inset-0 rounded-full border-[4px]",style:{borderColor:h.primary}})},h.name))})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"block text-xs font-medium text-cream-500",children:s("settings.interface.primaryColor")}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("div",{className:"relative w-full",children:[f.jsx("input",{type:"color",value:t.primaryColor,onChange:h=>e({primaryColor:h.target.value}),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),f.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg border border-cream-200 bg-cream-50 hover:border-cream-300 transition-colors",children:[f.jsx("div",{className:"w-6 h-6 rounded-md border border-black/10 shadow-sm",style:{backgroundColor:t.primaryColor}}),f.jsx("span",{className:"font-mono text-xs text-cream-600 uppercase",children:t.primaryColor})]})]})})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"block text-xs font-medium text-cream-500",children:s("settings.interface.backgroundColor")}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("div",{className:"relative w-full",children:[f.jsx("input",{type:"color",value:t.backgroundColor,onChange:h=>e({backgroundColor:h.target.value}),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),f.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg border border-cream-200 bg-cream-50 hover:border-cream-300 transition-colors",children:[f.jsx("div",{className:"w-6 h-6 rounded-md border border-black/10 shadow-sm",style:{backgroundColor:t.backgroundColor}}),f.jsx("span",{className:"font-mono text-xs text-cream-600 uppercase",children:t.backgroundColor})]})]})})]})]})]})]}),f.jsx("div",{className:"h-px bg-cream-200/50"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-sm font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(gl,{size:16}),s("settings.interface.chatBackground")]}),f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"w-24 h-36 bg-cream-50 rounded-lg border-2 border-dashed border-cream-200 flex items-center justify-center overflow-hidden relative shrink-0",style:{backgroundImage:t.chatBgImage?`url(${t.chatBgImage})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:!t.chatBgImage&&f.jsx(gl,{className:"text-cream-300",size:24})}),f.jsxs("div",{className:"space-y-3 flex-1 py-1",children:[f.jsx("p",{className:"text-sm text-cream-500 leading-relaxed",children:s("settings.interface.uploadDesc")}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("input",{type:"file",ref:i,onChange:l,accept:"image/*",className:"hidden"}),f.jsxs("button",{onClick:()=>i.current?.click(),className:"px-3 py-1.5 bg-cream-100 text-cream-900 text-xs font-medium rounded-lg hover:bg-cream-200 transition-colors flex items-center gap-1.5",children:[f.jsx(r0,{size:14}),s("settings.interface.upload")]}),t.chatBgImage&&f.jsxs("button",{onClick:()=>e({chatBgImage:null}),className:"px-3 py-1.5 bg-red-50 text-red-600 border border-red-100 text-xs font-medium rounded-lg hover:bg-red-100 transition-colors flex items-center gap-1.5",children:[f.jsx(pn,{size:14}),s("settings.interface.remove")]})]})]})]})]}),f.jsx("div",{className:"h-px bg-cream-200/50"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-sm font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(E_,{size:16}),s("settings.interface.customCss")]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-xs text-cream-500",children:s("settings.interface.customCssDesc")}),f.jsx("textarea",{value:t.bubbleCss,onChange:h=>e({bubbleCss:h.target.value}),placeholder:`.message-user { 
  border-radius: 16px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}`,className:"w-full h-32 p-3 bg-cream-50 text-cream-900 font-mono text-xs rounded-xl outline-none focus:ring-2 focus:ring-cream-400 resize-none custom-scrollbar border border-cream-200"})]})]})]})}const hS=["chatdairy-entries","chatdairy-categories","user_profile","ai_personas","ai_current_persona_id","ai_api_configs","ai_current_api_config_id","ai_diary_settings","app_theme","i18nextLng"],mS=["chat_messages_","diary_draft_"],vs={getAllData:async()=>{const t={};hS.forEach(e=>{if(e==="chatdairy-entries"||e==="chatdairy-categories")return;const n=localStorage.getItem(e);if(n!==null)try{t[e]=JSON.parse(n)}catch{t[e]=n}});for(let e=0;e<localStorage.length;e++){const n=localStorage.key(e);if(mS.some(s=>n.startsWith(s))){const s=localStorage.getItem(n);try{t[n]=JSON.parse(s)}catch{t[n]=s}}}try{const e=await Tt.getAll(it.DIARIES),n=await Tt.getAll(it.CATEGORIES),s=await Tt.getAll(it.CHATS);e&&e.length>0&&(t["chatdairy-entries"]=e),n&&n.length>0&&(t["chatdairy-categories"]=n),s&&s.length>0&&(t.chat_messages=s)}catch(e){console.error("Failed to fetch data from IndexedDB for backup:",e)}return{version:2,timestamp:new Date().toISOString(),data:t}},restoreData:async t=>{if(!t||!t.data)throw new Error("Invalid backup data format");const{data:e}=t;hS.forEach(s=>localStorage.removeItem(s));const n=[];for(let s=0;s<localStorage.length;s++){const i=localStorage.key(s);mS.some(l=>i.startsWith(l))&&n.push(i)}n.forEach(s=>localStorage.removeItem(s));try{await Tt.clear(it.DIARIES),await Tt.clear(it.CATEGORIES),await Tt.clear(it.CHATS)}catch(s){console.error("Failed to clear IndexedDB:",s)}for(const[s,i]of Object.entries(e)){if(s==="chatdairy-entries"){Array.isArray(i)&&await Tt.putAll(it.DIARIES,i);continue}if(s==="chatdairy-categories"){Array.isArray(i)&&await Tt.putAll(it.CATEGORIES,i);continue}if(s==="chat_messages"){Array.isArray(i)&&await Tt.putAll(it.CHATS,i);continue}typeof i=="object"?localStorage.setItem(s,JSON.stringify(i)):localStorage.setItem(s,i)}return!0},downloadBackup:async()=>{const t=await vs.getAllData(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),s=document.createElement("a");s.href=n,s.download=`chatdiary-backup-${pt(new Date,"yyyy-MM-dd-HHmm")}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)},syncToGitHubGist:async(t,e=null)=>{const n=await vs.getAllData(),s="chatdairy-backup.json",i=JSON.stringify(n,null,2),l={Authorization:`token ${t}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},c={description:"ChatDairy Backup",public:!1,files:{[s]:{content:i}}};let d="https://api.github.com/gists",h="POST";e&&(d=`https://api.github.com/gists/${e}`,h="PATCH");const m=await fetch(d,{method:h,headers:l,body:JSON.stringify(c)});if(!m.ok){const b=await m.json();throw new Error(b.message||"GitHub Sync Failed")}const y=await m.json();return localStorage.setItem("backup_last_sync",new Date().toISOString()),y},restoreFromGist:async(t,e)=>{if(!t||!e)throw new Error("Token and Gist ID required");const n={Authorization:`token ${t}`,Accept:"application/vnd.github.v3+json"},s=await fetch(`https://api.github.com/gists/${e}`,{headers:n});if(!s.ok){const h=await s.json();throw new Error(h.message||"Failed to fetch Gist")}const i=await s.json(),l=i.files["chatdairy-backup.json"]||Object.values(i.files).find(h=>h.language==="JSON");if(!l)throw new Error("No backup file found in this Gist");let c=l.content;l.truncated&&(c=await(await fetch(l.raw_url)).text());const d=JSON.parse(c);return await vs.restoreData(d)},initAutoBackup:()=>{const t=async()=>{if(!(localStorage.getItem("backup_auto_enabled")==="true"))return;const n=localStorage.getItem("backup_github_token"),s=localStorage.getItem("backup_github_gist_id");if(!n)return;const i=localStorage.getItem("backup_last_sync");if(!i||new Date-new Date(i)>3600*1e3){console.log("[AutoBackup] Starting background sync...");try{await vs.syncToGitHubGist(n,s),console.log("[AutoBackup] Sync successful")}catch(d){console.error("[AutoBackup] Sync failed",d)}}};return t(),setInterval(t,1800*1e3)},uploadToGoogleDrive:async t=>{const e=await vs.getAllData(),n=JSON.stringify(e,null,2),s=new Blob([n],{type:"application/json"}),i={name:`chatdairy-backup-${pt(new Date,"yyyy-MM-dd")}.json`,mimeType:"application/json"},l=new FormData;l.append("metadata",new Blob([JSON.stringify(i)],{type:"application/json"})),l.append("file",s);const c=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:l});if(!c.ok){const d=await c.json();throw new Error(d.error?.message||"Google Drive Upload Failed")}return await c.json()}},$d=({icon:t,title:e,description:n,isOpen:s,onToggle:i,children:l,isDanger:c=!1,statusBadge:d=null})=>f.jsxs("div",{className:Ne("border rounded-xl overflow-hidden transition-all duration-200",s?"border-cream-300 bg-cream-50/50 shadow-sm":"border-cream-200 hover:border-cream-300 bg-white"),children:[f.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-4 text-left",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:Ne("p-2.5 rounded-lg transition-colors",c?"bg-red-50 text-red-500":s?"bg-cream-200 text-cream-900":"bg-cream-100 text-cream-600"),children:f.jsx(t,{size:20})}),f.jsxs("div",{children:[f.jsx("h3",{className:Ne("font-bold text-base",c?"text-red-600":"text-cream-900"),children:e}),n&&f.jsx("p",{className:Ne("text-sm mt-0.5",c?"text-red-400":"text-cream-500"),children:n})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[d,f.jsx("div",{className:Ne("transition-transform duration-200 text-cream-400",s&&"rotate-180"),children:f.jsx(Lf,{size:20})})]})]}),f.jsx(mn,{children:s&&f.jsx(ft.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:f.jsx("div",{className:Ne("px-4 pb-4 pt-0",c?"text-red-600":"text-cream-900"),children:f.jsx("div",{className:Ne("pt-4 border-t",c?"border-red-100":"border-cream-100"),children:l})})})})]}),X$=()=>{const{t}=yn(),[e,n]=T.useState("local"),s=T.useRef(null),[i,l]=T.useState(()=>localStorage.getItem("backup_github_token")||""),[c,d]=T.useState(()=>localStorage.getItem("backup_github_gist_id")||""),[h,m]=T.useState(()=>localStorage.getItem("backup_auto_enabled")==="true"),[y,b]=T.useState(!1),[x,S]=T.useState(!1),[N,E]=T.useState(null),[j,D]=T.useState(()=>localStorage.getItem("backup_gdrive_token")||""),[O,R]=T.useState(!1),[U,L]=T.useState(null);T.useEffect(()=>{localStorage.setItem("backup_github_token",i)},[i]),T.useEffect(()=>{localStorage.setItem("backup_github_gist_id",c)},[c]),T.useEffect(()=>{localStorage.setItem("backup_auto_enabled",h)},[h]),T.useEffect(()=>{localStorage.setItem("backup_gdrive_token",j)},[j]);const H=async()=>{try{await vs.downloadBackup()}catch(F){console.error(F),alert(t("settings.backup.local.downloadError"))}},z=async F=>{const B=F.target.files?.[0];if(B)try{const te=await B.text(),se=JSON.parse(te);confirm(t("settings.backup.local.restoreConfirm"))&&(await vs.restoreData(se),alert(t("settings.backup.local.restoreSuccess")),window.location.reload())}catch(te){console.error(te),alert(t("settings.backup.local.restoreError"))}finally{s.current&&(s.current.value="")}},P=async()=>{if(!i){E({type:"error",message:t("settings.backup.github.tokenRequired")});return}b(!0),E(null);try{const F=await vs.syncToGitHubGist(i,c||null);F.id&&d(F.id),E({type:"success",message:t("settings.backup.github.syncSuccess")})}catch(F){console.error(F),E({type:"error",message:F.message})}finally{b(!1)}},Y=async()=>{if(!i||!c){E({type:"error",message:t("settings.backup.github.tokenAndGistRequired")});return}if(confirm(t("settings.backup.github.restoreConfirm"))){S(!0),E(null);try{await vs.restoreFromGist(i,c),alert(t("settings.backup.local.restoreSuccess")),window.location.reload()}catch(F){console.error(F),E({type:"error",message:t("settings.backup.github.restoreError",{error:F.message})})}finally{S(!1)}}},Q=async()=>{if(!j){L({type:"error",message:t("settings.backup.github.tokenRequired")});return}R(!0),L(null);try{await vs.uploadToGoogleDrive(j),L({type:"success",message:t("settings.backup.gdrive.success")})}catch(F){console.error(F),L({type:"error",message:t("settings.backup.gdrive.error",{error:F.message})})}finally{R(!1)}},A=F=>{n(e===F?null:F)};return f.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-6",children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsxs("h2",{className:"text-xl font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(D_,{className:"text-cream-900"}),t("settings.backup.title")]})}),f.jsxs("div",{className:"space-y-4",children:[f.jsx($d,{icon:B_,title:t("settings.backup.local.title"),description:t("settings.backup.local.description"),isOpen:e==="local",onToggle:()=>A("local"),children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{className:"text-sm text-cream-600 bg-cream-50 p-3 rounded-lg border border-cream-100 flex gap-2",children:[f.jsx(Nv,{size:16,className:"text-cream-400 shrink-0 mt-0.5"}),f.jsx("span",{children:f.jsx(Nd,{i18nKey:"settings.backup.local.info",components:{strong:f.jsx("strong",{})}})})]}),f.jsxs("div",{className:"flex flex-wrap gap-3",children:[f.jsxs("button",{onClick:H,className:"flex-1 min-w-[160px] py-3 bg-cream-900 hover:bg-cream-800 text-white rounded-xl transition-colors font-medium flex items-center justify-center gap-2",children:[f.jsx(M_,{size:18}),t("settings.backup.local.download")]}),f.jsxs("div",{className:"relative flex-1 min-w-[160px]",children:[f.jsx("input",{ref:s,type:"file",accept:".json",onChange:z,className:"hidden"}),f.jsxs("button",{onClick:()=>s.current?.click(),className:"w-full py-3 bg-white border border-cream-200 hover:bg-cream-50 text-cream-900 rounded-xl transition-colors font-medium flex items-center justify-center gap-2",children:[f.jsx(r0,{size:18}),t("settings.backup.local.restore")]})]})]})]})}),f.jsx($d,{icon:z_,title:t("settings.backup.github.title"),description:t("settings.backup.github.description"),isOpen:e==="github",onToggle:()=>A("github"),statusBadge:c&&f.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded-md font-medium flex items-center gap-1",children:[f.jsx(ws,{size:12})," ",t("settings.backup.github.linked")]}),children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium text-cream-900",children:t("settings.backup.github.pat")}),f.jsx("input",{type:"password",value:i,onChange:F=>l(F.target.value),placeholder:"ghp_...",className:"w-full p-3 bg-cream-50 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300 font-mono text-sm"}),f.jsxs("p",{className:"text-xs text-cream-500",children:[f.jsx(Nd,{i18nKey:"settings.backup.github.patHelp",components:{code:f.jsx("code",{})}})," ",f.jsx("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-cream-900 underline hover:text-cream-700",children:t("settings.backup.github.getToken")})]})]}),c&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium text-cream-900",children:t("settings.backup.github.gistId")}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:c,readOnly:!0,className:"flex-1 p-3 bg-cream-100 border border-cream-200 rounded-xl text-cream-500 font-mono text-sm"}),f.jsx("button",{onClick:()=>d(""),className:"p-3 text-red-500 hover:bg-red-50 rounded-xl transition-colors",title:t("settings.backup.github.unlink"),children:f.jsx(pn,{size:18})})]})]}),f.jsxs("div",{className:"flex items-center justify-between p-3 bg-cream-50 rounded-xl border border-cream-100",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(S_,{className:"text-cream-500",size:20}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-cream-900 block",children:t("settings.backup.github.autoBackup")}),f.jsx("span",{className:"text-xs text-cream-500",children:t("settings.backup.github.autoBackupHelp")})]})]}),f.jsx("button",{onClick:()=>m(!h),className:Ne("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",h?"bg-cream-900":"bg-cream-200"),children:f.jsx("span",{className:Ne("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",h?"translate-x-6":"translate-x-1")})})]}),f.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[f.jsxs("button",{onClick:P,disabled:y||!i,className:"flex-1 py-3 bg-cream-900 hover:bg-cream-800 disabled:opacity-50 text-white rounded-xl transition-colors font-medium flex items-center justify-center gap-2",children:[y?f.jsx(Bc,{className:"animate-spin",size:18}):f.jsx(ao,{size:18}),t(c?"settings.backup.github.sync":"settings.backup.github.create")]}),f.jsxs("button",{onClick:Y,disabled:x||!i||!c,className:"flex-1 py-3 bg-white border border-cream-200 hover:bg-cream-50 disabled:opacity-50 text-cream-900 rounded-xl transition-colors font-medium flex items-center justify-center gap-2",children:[x?f.jsx(Bc,{className:"animate-spin",size:18}):f.jsx(v_,{size:18}),t("settings.backup.github.import")]})]}),N&&f.jsxs("div",{className:Ne("px-3 py-2 rounded-lg text-sm flex items-center gap-2",N.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-600"),children:[N.type==="success"?f.jsx(ws,{size:16}):f.jsx(wv,{size:16}),N.message]})]})}),f.jsx($d,{icon:Sv,title:t("settings.backup.gdrive.title"),description:t("settings.backup.gdrive.description"),isOpen:e==="gdrive",onToggle:()=>A("gdrive"),children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"p-3 bg-cream-50 text-cream-600 rounded-lg text-sm flex gap-2 border border-cream-100",children:[f.jsx(Nv,{size:16,className:"shrink-0 mt-0.5 text-cream-400"}),f.jsx("p",{children:f.jsx(Nd,{i18nKey:"settings.backup.gdrive.info",components:{strong:f.jsx("strong",{})}})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium text-cream-900",children:t("settings.backup.gdrive.token")}),f.jsx("input",{type:"password",value:j,onChange:F=>D(F.target.value),placeholder:"ya29...",className:"w-full p-3 bg-cream-50 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300 font-mono text-sm"})]}),f.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[f.jsxs("button",{onClick:Q,disabled:O||!j,className:"flex-1 py-3 bg-cream-900 hover:bg-cream-800 disabled:opacity-50 text-white rounded-xl transition-colors font-medium flex items-center justify-center gap-2",children:[O?f.jsx(Bc,{className:"animate-spin",size:18}):f.jsx(Sv,{size:18}),t("settings.backup.gdrive.upload")]}),U&&f.jsxs("div",{className:Ne("px-3 py-2 rounded-lg text-sm flex items-center gap-2",U.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-600"),children:[U.type==="success"?f.jsx(ws,{size:16}):f.jsx(wv,{size:16}),U.message]})]})]})}),f.jsx($d,{icon:pn,title:t("settings.backup.reset.title"),description:t("settings.backup.reset.description"),isOpen:e==="reset",onToggle:()=>A("reset"),isDanger:!0,children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-sm text-red-500 bg-red-50 p-3 rounded-lg border border-red-100",children:f.jsx(Nd,{i18nKey:"settings.backup.reset.warning",components:{strong:f.jsx("strong",{})}})}),f.jsxs("button",{onClick:()=>{confirm(t("settings.backup.reset.confirmAlert"))&&(localStorage.clear(),window.location.reload())},className:"w-full py-3 bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 rounded-xl transition-colors font-medium flex items-center justify-center gap-2",children:[f.jsx(pn,{size:18}),t("settings.backup.reset.confirmBtn")]})]})})]})]})};function Z$(){const{t}=yn(),e=[{icon:no,title:t("settings.usage.chat"),desc:t("settings.usage.chatDesc"),color:"text-blue-500",bg:"bg-blue-50"},{icon:yl,title:t("settings.usage.manual"),desc:t("settings.usage.manualDesc"),color:"text-purple-500",bg:"bg-purple-50"},{icon:df,title:t("settings.usage.polish"),desc:t("settings.usage.polishDesc"),color:"text-amber-500",bg:"bg-amber-50"},{icon:zf,title:t("settings.usage.settings"),desc:t("settings.usage.settingsDesc"),color:"text-gray-500",bg:"bg-gray-50"}];return f.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsxs("h2",{className:"text-xl font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(WS,{className:"w-6 h-6 text-cream-900"}),t("settings.usage.title")]})}),f.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.map((n,s)=>f.jsxs("div",{className:"flex gap-4 p-4 rounded-xl border border-cream-100 hover:border-cream-200 hover:shadow-sm transition-all",children:[f.jsx("div",{className:`p-3 rounded-xl h-fit ${n.bg} ${n.color}`,children:f.jsx(n.icon,{size:20})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-cream-900 mb-1",children:n.title}),f.jsx("p",{className:"text-sm text-cream-600 leading-relaxed",children:n.desc})]})]},s))})]})}const Kp=[{id:"openai",name:"OpenAI",baseUrl:"https://api.openai.com/v1"},{id:"deepseek",name:"DeepSeek",baseUrl:"https://api.deepseek.com"},{id:"google",name:"Google Gemini",baseUrl:"https://generativelanguage.googleapis.com"},{id:"custom",name:"Custom / Local",baseUrl:""}],Q$=()=>{const{t}=yn(),{apiConfigs:e,currentApiConfigId:n,setCurrentApiConfigId:s,addApiConfig:i,updateApiConfig:l,deleteApiConfig:c,fetchModels:d}=fo(),[h,m]=T.useState(null),[y,b]=T.useState({name:"",provider:"openai",apiKey:"",baseUrl:"https://api.openai.com/v1",model:"gpt-3.5-turbo"}),[x,S]=T.useState([]),[N,E]=T.useState(!1),[j,D]=T.useState(null),O=z=>{m(z.id),b({name:z.name,provider:z.provider||(z.type==="official"?"openai":"custom"),apiKey:z.apiKey,baseUrl:z.baseUrl,model:z.model||"gpt-3.5-turbo"}),S([])},R=()=>{const z=Kp.find(Q=>Q.id===y.provider),P=y.provider==="custom"?y.baseUrl:z.baseUrl,Y={...y,type:y.provider==="custom"?"custom":"official",baseUrl:P};h==="new"?i(Y):l(h,Y),m(null)},U=()=>{m("new"),b({name:t("settings.api.addNew"),provider:"openai",apiKey:"",baseUrl:"https://api.openai.com/v1",model:"gpt-3.5-turbo"}),S([])},L=z=>{const P=z.target.value,Y=Kp.find(Q=>Q.id===P);b({...y,provider:P,baseUrl:Y.id==="custom"?"":Y.baseUrl,name:h==="new"?Y.name:y.name})},H=async()=>{if(!y.apiKey){alert(t("settings.api.pleaseEnterApiKey"));return}E(!0);try{const z=await d({baseUrl:y.baseUrl,apiKey:y.apiKey,provider:y.provider});S(z),z.length>0&&b(P=>({...P,model:z[0].id}))}catch(z){alert(t("settings.api.failedToFetchModels",{error:z.message}))}finally{E(!1)}};return f.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-6",children:[f.jsx("div",{className:"flex items-center justify-between mb-4",children:f.jsxs("h2",{className:"text-xl font-bold text-cream-900 flex items-center gap-2",children:[f.jsx(Ev,{className:"text-cream-900"}),t("settings.api.title")]})}),f.jsx(mn,{mode:"wait",children:h?f.jsxs(ft.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-6 overflow-hidden",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-1",children:t("settings.api.configName")}),f.jsx("input",{value:y.name,onChange:z=>b({...y,name:z.target.value}),className:"w-full p-3 bg-cream-50 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300",placeholder:t("settings.api.myApi")})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-1",children:t("settings.api.provider")}),f.jsx("select",{value:y.provider,onChange:L,className:"w-full p-3 bg-cream-50 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300",children:Kp.map(z=>f.jsx("option",{value:z.id,children:z.name},z.id))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-1",children:t("settings.api.apiKey")}),f.jsx("input",{type:"password",value:y.apiKey,onChange:z=>b({...y,apiKey:z.target.value}),className:"w-full p-3 bg-cream-50 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300",placeholder:"sk-..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-1",children:t("settings.api.baseUrl")}),f.jsx("input",{value:y.baseUrl,onChange:z=>b({...y,baseUrl:z.target.value}),disabled:y.provider!=="custom",className:Ne("w-full p-3 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300",y.provider!=="custom"?"bg-cream-100 text-cream-400 cursor-not-allowed":"bg-cream-50"),placeholder:"https://api.openai.com/v1"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-cream-900 mb-1",children:t("settings.api.model")}),f.jsxs("div",{className:"flex gap-2",children:[x.length>0?f.jsx("select",{value:y.model,onChange:z=>b({...y,model:z.target.value}),className:"flex-1 p-3 bg-cream-50 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300",children:x.map(z=>f.jsx("option",{value:z.id,children:z.id},z.id))}):f.jsx("input",{value:y.model,onChange:z=>b({...y,model:z.target.value}),className:"flex-1 p-3 bg-cream-50 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-cream-300",placeholder:t("settings.api.modelPlaceholder")}),f.jsx("button",{onClick:H,disabled:N||!y.apiKey,className:"px-4 py-2 bg-cream-100 text-cream-900 rounded-xl hover:bg-cream-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:t("settings.api.fetchModels"),children:f.jsx(Bc,{size:18,className:N?"animate-spin":""})})]})]}),f.jsxs("div",{className:"flex gap-3 pt-2",children:[f.jsxs("button",{onClick:R,className:"flex-1 px-4 py-3 bg-cream-900 text-white rounded-xl hover:bg-cream-800 transition-colors font-medium flex items-center justify-center gap-2",children:[f.jsx(ao,{size:18}),t("settings.api.saveConfig")]}),f.jsx("button",{onClick:()=>m(null),className:"px-4 py-3 bg-cream-100 text-cream-900 rounded-xl hover:bg-cream-200 transition-colors font-medium",children:t("settings.api.cancel")})]})]}):f.jsxs(ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.map(z=>f.jsxs("div",{onClick:()=>s(z.id),className:Ne("p-4 rounded-xl border cursor-pointer transition-all relative group",z.id===n?"bg-cream-900 text-white border-cream-900 shadow-lg scale-[1.02]":"bg-white border-cream-200 hover:border-cream-300 hover:shadow-md text-cream-900"),children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ev,{size:18,className:z.id===n?"text-cream-200":"text-cream-400"}),f.jsx("h3",{className:"font-bold",children:z.name})]}),z.id===n&&f.jsx(ws,{size:18,className:"text-green-400"})]}),f.jsxs("div",{className:"mb-3",children:[f.jsx("p",{className:Ne("text-sm font-mono",z.id===n?"text-cream-100":"text-cream-600"),children:z.baseUrl||"https://api.openai.com/v1"}),f.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[f.jsx("span",{className:Ne("text-xs px-2 py-1 rounded-md uppercase tracking-wider font-medium",z.id===n?"bg-white/20":"bg-cream-100 text-cream-700"),children:z.provider}),f.jsx("span",{className:Ne("text-xs px-2 py-1 rounded-md font-mono",z.id===n?"bg-white/10 text-cream-200":"bg-cream-50 text-cream-500 border border-cream-100"),children:z.model})]})]}),f.jsxs("div",{className:"absolute right-2 bottom-2 flex gap-1 transition-opacity opacity-100 sm:opacity-0 sm:group-hover:opacity-100",children:[f.jsx("button",{onClick:P=>{P.stopPropagation(),O(z)},className:Ne("p-1.5 rounded-lg transition-colors",z.id===n?"hover:bg-white/20 text-white":"hover:bg-cream-100 text-cream-600"),children:f.jsx(tg,{size:14})}),e.length>1&&f.jsx("button",{onClick:P=>{P.stopPropagation(),c(z.id)},className:Ne("p-1.5 rounded-lg transition-colors",z.id===n?"hover:bg-red-500/50 text-white":"hover:bg-red-100 text-red-500"),children:f.jsx(pn,{size:14})})]})]},z.id)),f.jsxs("button",{onClick:U,className:"w-full py-4 border-2 border-dashed border-cream-200 rounded-xl text-cream-400 hover:text-cream-900 hover:border-cream-400 transition-all flex items-center justify-center gap-2 font-medium",children:[f.jsx(Tr,{size:20}),t("settings.api.addNew")]})]})}),f.jsx(to,{isOpen:!!j,onClose:()=>D(null),onConfirm:()=>{j&&(c(j),h===j&&m(null))},title:t("settings.api.deleteConfirmTitle"),message:t("settings.api.deleteConfirmMessage"),confirmText:t("settings.api.delete"),isDangerous:!0})]})};function J$(){const{t}=yn();return f.jsxs("div",{className:"p-4 h-full overflow-y-auto custom-scrollbar pb-20",children:[f.jsx("h1",{className:"text-2xl font-bold text-cream-900 mb-6",children:t("settings.title")}),f.jsxs("div",{className:"space-y-8 max-w-3xl",children:[f.jsx(Q$,{}),f.jsx(q0,{}),f.jsx(W$,{}),f.jsx(X$,{}),f.jsx(Z$,{})]})]})}const kc=({label:t,icon:e,value:n,name:s,onChange:i,placeholder:l,type:c="text",className:d=""})=>f.jsxs("div",{className:`group flex items-start gap-3 p-2 -mx-2 rounded-lg transition-colors ${d}`,children:[f.jsx("div",{className:"mt-1 text-cream-400 transition-colors",children:f.jsx(e,{size:18})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("label",{className:"block text-xs font-medium text-cream-500 mb-0.5",children:t}),c==="textarea"?f.jsx("textarea",{name:s,value:n,onChange:i,placeholder:l,rows:Math.max(1,(n?.match(/\n/g)||[]).length+1),className:"w-full bg-transparent border-none p-0 text-cream-900 placeholder:text-cream-300 focus:ring-0 resize-none text-sm leading-relaxed"}):f.jsx("input",{type:c,name:s,value:n,onChange:i,placeholder:l,className:"w-full bg-transparent border-none p-0 text-cream-900 placeholder:text-cream-300 focus:ring-0 text-sm font-medium"})]})]}),Dc=({title:t,icon:e,children:n,className:s=""})=>f.jsxs("div",{className:`bg-white rounded-xl border border-cream-200/60 p-5 shadow-sm space-y-4 ${s}`,children:[f.jsxs("div",{className:"flex items-center gap-2 text-cream-900 font-semibold pb-3 border-b border-cream-100",children:[f.jsx(e,{size:18,className:"text-cream-400"}),f.jsx("h3",{children:t})]}),f.jsx("div",{className:"space-y-1",children:n})]}),Vd=()=>f.jsx("div",{className:"h-px bg-cream-200/60 my-2"}),eV=({items:t,onChange:e,placeholderYear:n,placeholderContent:s,addText:i})=>{const l=Array.isArray(t)?t:[],c=()=>{e([...l,{year:"",content:""}])},d=m=>{const y=l.filter((b,x)=>x!==m);e(y)},h=(m,y,b)=>{const x=[...l];x[m]={...x[m],[y]:b},e(x)};return f.jsxs("div",{className:"space-y-3",children:[l.map((m,y)=>f.jsxs("div",{className:"flex gap-3 items-start group relative pl-4 border-l-2 border-cream-200",children:[f.jsx("div",{className:"absolute -left-[5px] top-2 w-2 h-2 rounded-full bg-cream-300 ring-2 ring-white"}),f.jsx("div",{className:"w-24 shrink-0",children:f.jsx("input",{type:"text",value:m.year,onChange:b=>h(y,"year",b.target.value),placeholder:n||"Year/Time",className:"w-full bg-transparent border-none p-0 text-cream-500 placeholder:text-cream-300 focus:ring-0 text-sm font-medium text-right"})}),f.jsx("div",{className:"flex-1",children:f.jsx("textarea",{value:m.content,onChange:b=>h(y,"content",b.target.value),placeholder:s||"What happened?",rows:Math.max(1,(m.content?.match(/\n/g)||[]).length+1),className:"w-full bg-transparent border-none p-0 text-cream-900 placeholder:text-cream-300 focus:ring-0 resize-none text-sm leading-relaxed"})}),f.jsx("button",{onClick:()=>d(y),className:"opacity-0 group-hover:opacity-100 text-cream-300 hover:text-red-400 transition-all",children:f.jsx(pn,{size:14})})]},y)),f.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-xs text-cream-400 hover:text-cream-600 transition-colors pl-4",children:[f.jsx(Tr,{size:14})," ",i||"Add Milestone"]})]})},tV=({items:t,onChange:e,placeholderName:n,placeholderRelation:s,placeholderNote:i,addText:l})=>{const c=()=>{e([...t,{name:"",relation:"",note:""}])},d=m=>{e(t.filter((y,b)=>b!==m))},h=(m,y,b)=>{const x=[...t];x[m]={...x[m],[y]:b},e(x)};return f.jsxs("div",{className:"space-y-4",children:[t.map((m,y)=>f.jsxs("div",{className:"bg-cream-50/50 rounded-lg p-3 space-y-2 group relative",children:[f.jsx("button",{onClick:()=>d(y),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 text-cream-300 hover:text-red-400 transition-all",children:f.jsx(pn,{size:14})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:m.name,onChange:b=>h(y,"name",b.target.value),placeholder:n||"Name",className:"flex-1 bg-transparent border-b border-cream-200 focus:border-cream-400 p-1 text-cream-900 placeholder:text-cream-300 focus:ring-0 text-sm font-semibold"}),f.jsx("input",{type:"text",value:m.relation,onChange:b=>h(y,"relation",b.target.value),placeholder:s||"Relationship",className:"w-1/3 bg-transparent border-b border-cream-200 focus:border-cream-400 p-1 text-cream-600 placeholder:text-cream-300 focus:ring-0 text-xs text-right"})]}),f.jsx("textarea",{value:m.note,onChange:b=>h(y,"note",b.target.value),placeholder:i||"Notes about them...",rows:Math.max(1,(m.note?.match(/\n/g)||[]).length+1),className:"w-full bg-transparent border-none p-0 text-cream-700 placeholder:text-cream-300 focus:ring-0 resize-none text-xs leading-relaxed"})]},y)),f.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-xs text-cream-400 hover:text-cream-600 transition-colors",children:[f.jsx(Tr,{size:14})," ",l||"Add Relationship"]})]})},nV=({tags:t,onChange:e,placeholder:n})=>{const[s,i]=T.useState(""),l=d=>{if(d.key==="Enter"){d.preventDefault();const h=s.trim();h&&!t.includes(h)&&(e([...t,h]),i(""))}},c=d=>{e(t.filter(h=>h!==d))};return f.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.map((d,h)=>f.jsxs("span",{className:"bg-cream-100 text-cream-800 px-2 py-1 rounded-md text-xs font-medium flex items-center gap-1 border border-cream-200 group",children:[d,f.jsx("button",{onClick:()=>c(d),className:"text-cream-400 hover:text-red-500",children:f.jsx(Ja,{size:12})})]},h)),f.jsxs("div",{className:"relative flex items-center min-w-[100px]",children:[f.jsx(s0,{size:14,className:"absolute left-0 text-cream-400"}),f.jsx("input",{type:"text",value:s,onChange:d=>i(d.target.value),onKeyDown:l,placeholder:n||"Add interest...",className:"w-full pl-5 bg-transparent border-none p-0 text-cream-900 placeholder:text-cream-300 focus:ring-0 text-sm"})]})]})},aV=({items:t,onChange:e,placeholderName:n,placeholderType:s,placeholderNote:i,addText:l})=>{const c=Array.isArray(t)?t:[],d=()=>{e([...c,{name:"",type:"",note:""}])},h=y=>{e(c.filter((b,x)=>x!==y))},m=(y,b,x)=>{const S=[...c];S[y]={...S[y],[b]:x},e(S)};return f.jsxs("div",{className:"space-y-4",children:[c.map((y,b)=>f.jsxs("div",{className:"bg-cream-50/50 rounded-lg p-3 space-y-2 group relative",children:[f.jsx("button",{onClick:()=>h(b),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 text-cream-300 hover:text-red-400 transition-all",children:f.jsx(pn,{size:14})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:y.name,onChange:x=>m(b,"name",x.target.value),placeholder:n||"Pet Name",className:"flex-1 bg-transparent border-b border-cream-200 focus:border-cream-400 p-1 text-cream-900 placeholder:text-cream-300 focus:ring-0 text-sm font-semibold"}),f.jsx("input",{type:"text",value:y.type,onChange:x=>m(b,"type",x.target.value),placeholder:s||"Type (Cat, Dog...)",className:"w-1/3 bg-transparent border-b border-cream-200 focus:border-cream-400 p-1 text-cream-600 placeholder:text-cream-300 focus:ring-0 text-xs text-right"})]}),f.jsx("textarea",{value:y.note,onChange:x=>m(b,"note",x.target.value),placeholder:i||"About them...",rows:Math.max(1,(y.note?.match(/\n/g)||[]).length+1),className:"w-full bg-transparent border-none p-0 text-cream-700 placeholder:text-cream-300 focus:ring-0 resize-none text-xs leading-relaxed"})]},b)),f.jsxs("button",{onClick:d,className:"flex items-center gap-2 text-xs text-cream-400 hover:text-cream-600 transition-colors",children:[f.jsx(Tr,{size:14})," ",l||"Add Pet"]})]})},sV=({items:t,onChange:e,placeholder:n,addText:s})=>{const i=Array.isArray(t)?t:[],l=()=>{e([...i,""])},c=h=>{e(i.filter((m,y)=>y!==h))},d=(h,m)=>{const y=[...i];y[h]=m,e(y)};return f.jsxs("div",{className:"space-y-3",children:[i.map((h,m)=>f.jsxs("div",{className:"flex gap-2 items-center group",children:[f.jsx("div",{className:"flex-1 bg-cream-50/50 rounded-lg px-3 py-2 border border-transparent focus-within:border-cream-300 focus-within:bg-white transition-all",children:f.jsx("input",{type:"text",value:h,onChange:y=>d(m,y.target.value),placeholder:n||"I'm focusing on...",className:"w-full bg-transparent border-none p-0 text-cream-900 placeholder:text-cream-300 focus:ring-0 text-sm"})}),f.jsx("button",{onClick:()=>c(m),className:"opacity-0 group-hover:opacity-100 text-cream-300 hover:text-red-400 transition-all p-2",children:f.jsx(pn,{size:14})})]},m)),f.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-xs text-cream-400 hover:text-cream-600 transition-colors",children:[f.jsx(Tr,{size:14})," ",s||"Add Focus Area"]})]})},rV=()=>{const{profile:t,updateProfile:e}=bN(),{t:n}=yn(),[s,i]=T.useState(t),[l,c]=T.useState(!1),[d,h]=T.useState(!1),[m,y]=T.useState(!1),[b,x]=T.useState(""),S=T.useRef(null),[N,E]=T.useState(!1),j=T.useRef(null);T.useEffect(()=>{const H=z=>{j.current&&!j.current.contains(z.target)&&E(!1)};return document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[]),T.useEffect(()=>{i({...t,lifeExperience:Array.isArray(t.lifeExperience)?t.lifeExperience:[],coreRelationships:Array.isArray(t.coreRelationships)?t.coreRelationships:[],interests:Array.isArray(t.interests)?t.interests:[],pets:Array.isArray(t.pets)?t.pets:[],shortTermGoals:Array.isArray(t.shortTermGoals)?t.shortTermGoals:t.shortTermGoals?[t.shortTermGoals]:[]})},[t]);const D=H=>{const{name:z,value:P}=H.target;i(Y=>({...Y,[z]:P})),c(!0)},O=(H,z)=>{i(P=>({...P,[H]:z})),c(!0)},R=H=>{const z=H.target.files[0];if(z){if(z.size>5*1024*1024){alert("Image size should be less than 5MB");return}const P=new FileReader;P.onloadend=()=>{i(Y=>({...Y,avatar:P.result})),c(!0)},P.readAsDataURL(z)}},U=()=>{b&&(i(H=>({...H,avatar:b})),c(!0),y(!1),x(""))},L=H=>{H.preventDefault(),e(s),c(!1),h(!0),setTimeout(()=>h(!1),3e3)};return f.jsxs("div",{className:"h-full overflow-y-auto bg-cream-50/30",children:[f.jsxs("form",{onSubmit:L,className:"max-w-7xl mx-auto p-4 md:p-8 flex flex-col md:flex-row gap-8 pb-32",children:[f.jsx("aside",{className:"w-full md:w-80 shrink-0 space-y-6",children:f.jsxs("div",{className:"md:sticky md:top-8 space-y-6",children:[f.jsxs("div",{className:"text-center space-y-4 relative",children:[f.jsxs("div",{className:"relative group w-24 h-24 mx-auto",children:[f.jsx("div",{onClick:()=>S.current?.click(),className:"w-full h-full bg-cream-200 rounded-full flex items-center justify-center overflow-hidden cursor-pointer hover:opacity-90 transition-opacity border-2 border-transparent hover:border-cream-300 relative",children:s.avatar?f.jsx("img",{src:s.avatar,alt:"Profile",className:"w-full h-full object-cover"}):f.jsx("div",{className:"text-4xl text-cream-400",children:s.username?.[0]?.toUpperCase()||f.jsx(so,{size:40})})}),f.jsxs("div",{className:"absolute -bottom-1 -right-1 z-20",ref:j,children:[f.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),E(!N)},className:"p-2 bg-white rounded-full shadow-md border border-cream-200 text-cream-500 hover:text-cream-700 hover:border-cream-300 transition-all",title:"Change Avatar",children:f.jsx(gl,{size:14})}),N&&f.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-36 bg-white rounded-lg shadow-xl border border-cream-100 py-1 overflow-hidden z-30 flex flex-col",children:[f.jsxs("button",{type:"button",className:"w-full px-4 py-2 text-left text-xs font-medium text-cream-700 hover:bg-cream-50 flex items-center gap-2 transition-colors",onClick:()=>{S.current?.click(),E(!1),y(!1)},children:[f.jsx(r0,{size:12}),n("profile.avatar.upload")]}),f.jsxs("button",{type:"button",className:"w-full px-4 py-2 text-left text-xs font-medium text-cream-700 hover:bg-cream-50 flex items-center gap-2 transition-colors",onClick:()=>{y(!0),E(!1)},children:[f.jsx(Y_,{size:12}),n("profile.avatar.link")]})]})]}),f.jsx("input",{type:"file",ref:S,className:"hidden",accept:"image/*",onChange:R})]}),f.jsx(mn,{children:m&&f.jsxs(ft.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute z-50 top-[108px] left-0 right-0 mx-auto w-64 bg-white rounded-xl shadow-xl border border-cream-200 p-4",children:[f.jsx("h3",{className:"text-sm font-semibold text-cream-900 mb-2 text-left",children:n("profile.avatar.linkTitle")}),f.jsx("input",{type:"text",placeholder:"https://example.com/image.png",className:"w-full bg-cream-50 border border-cream-200 rounded-lg px-3 py-2 text-sm text-cream-900 placeholder:text-cream-400 focus:outline-none focus:ring-2 focus:ring-cream-300 mb-3",value:b,onChange:H=>x(H.target.value),autoFocus:!0}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{type:"button",onClick:()=>{y(!1),x("")},className:"px-3 py-1.5 text-xs font-medium text-cream-600 hover:text-cream-800 transition-colors",children:n("profile.common.cancel")}),f.jsx("button",{type:"button",onClick:U,className:"px-3 py-1.5 text-xs font-medium bg-cream-900 text-white rounded-lg hover:bg-cream-800 transition-colors",children:n("profile.common.confirm")})]}),f.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-white border-t border-l border-cream-200 transform rotate-45"})]})}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("input",{type:"text",name:"username",value:s.username,onChange:D,placeholder:n("profile.basicInfo.yourName"),className:"w-full bg-transparent border-none p-0 text-3xl font-bold text-cream-900 placeholder:text-cream-300 focus:ring-0 text-center"}),f.jsx("input",{type:"text",name:"nickname",value:s.nickname,onChange:D,placeholder:n("profile.basicInfo.nickname"),className:"w-full bg-transparent border-none p-0 text-lg text-cream-500 placeholder:text-cream-300 focus:ring-0 text-center"})]})]}),f.jsxs("div",{className:"space-y-2 px-2",children:[f.jsx(kc,{label:n("profile.basicInfo.identity"),icon:so,name:"identity",value:s.identity,onChange:D,placeholder:n("profile.basicInfo.identityPlaceholder")}),f.jsx(Vd,{}),f.jsx(kc,{label:n("profile.basicInfo.birthday"),icon:Tl,name:"birthday",type:"date",value:s.birthday,onChange:D}),f.jsx(Vd,{}),f.jsx(kc,{label:n("profile.basicInfo.residence"),icon:W_,name:"residence",value:s.residence,onChange:D,placeholder:n("profile.basicInfo.residencePlaceholder")}),f.jsx(Vd,{}),f.jsx(kc,{label:n("profile.basicInfo.schoolWork"),icon:i_,name:"schoolWork",value:s.schoolWork,onChange:D,placeholder:n("profile.basicInfo.schoolWorkPlaceholder")}),f.jsx(Vd,{}),f.jsx(kc,{label:n("profile.basicInfo.location"),icon:Z_,name:"schoolWorkLocation",value:s.schoolWorkLocation,onChange:D,placeholder:n("profile.basicInfo.locationPlaceholder")})]}),f.jsxs("button",{type:"submit",disabled:!l,className:`
                w-full flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-medium transition-all
                ${l?"bg-cream-900 text-white hover:bg-cream-800 shadow-md transform hover:-translate-y-0.5":"bg-cream-200 text-cream-400 cursor-not-allowed"}
              `,children:[f.jsx(ao,{size:18}),n(l?"profile.save.button":"profile.save.saved")]})]})}),f.jsxs("main",{className:"flex-1 space-y-6",children:[f.jsxs("header",{className:"mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold text-cream-900",children:n("profile.title")}),f.jsx("p",{className:"text-cream-600 mt-1",children:n("profile.subtitle")})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsx(Dc,{title:n("profile.sections.coreSelf"),icon:i0,className:"lg:col-span-2",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("h4",{className:"text-sm font-semibold text-cream-800 flex items-center gap-2",children:[f.jsx(uf,{size:14})," ",n("profile.fields.personality")]}),f.jsx("textarea",{name:"personality",value:s.personality,onChange:D,placeholder:n("profile.fields.personalityPlaceholder"),rows:4,className:"w-full bg-cream-50/50 rounded-lg border-none p-3 text-cream-900 placeholder:text-cream-300 focus:ring-1 focus:ring-cream-300 resize-none text-sm"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("h4",{className:"text-sm font-semibold text-cream-800 flex items-center gap-2",children:[f.jsx(tN,{size:14})," ",n("profile.fields.values")]}),f.jsx("textarea",{name:"valuesPositive",value:s.valuesPositive,onChange:D,placeholder:n("profile.fields.valuesPlaceholder"),rows:4,className:"w-full bg-cream-50/50 rounded-lg border-none p-3 text-cream-900 placeholder:text-cream-300 focus:ring-1 focus:ring-cream-300 resize-none text-sm"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("h4",{className:"text-sm font-semibold text-cream-800 flex items-center gap-2",children:[f.jsx(xk,{size:14})," ",n("profile.fields.dislikes")]}),f.jsx("textarea",{name:"valuesNegative",value:s.valuesNegative,onChange:D,placeholder:n("profile.fields.dislikesPlaceholder"),rows:4,className:"w-full bg-cream-50/50 rounded-lg border-none p-3 text-cream-900 placeholder:text-cream-300 focus:ring-1 focus:ring-cream-300 resize-none text-sm"})]})]})}),f.jsx(Dc,{title:n("profile.sections.lifeExperience"),icon:Rf,className:"lg:col-span-2",children:f.jsx(eV,{items:s.lifeExperience,onChange:H=>O("lifeExperience",H),placeholderYear:n("profile.timeline.yearPlaceholder"),placeholderContent:n("profile.timeline.contentPlaceholder"),addText:n("profile.timeline.add")})}),f.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"space-y-6",children:[f.jsx(Dc,{title:n("profile.sections.currentFocus"),icon:Ck,children:f.jsx(sV,{items:s.shortTermGoals,onChange:H=>O("shortTermGoals",H),placeholder:n("profile.focus.placeholder"),addText:n("profile.focus.add")})}),f.jsx(Dc,{title:n("profile.sections.interests"),icon:uf,children:f.jsx(nV,{tags:s.interests,onChange:H=>O("interests",H),placeholder:n("profile.interests.add")})})]}),f.jsx("div",{className:"h-full",children:f.jsxs(Dc,{title:n("profile.sections.connections"),icon:Pf,className:"h-full",children:[f.jsx(tV,{items:s.coreRelationships,onChange:H=>O("coreRelationships",H),placeholderName:n("profile.connections.namePlaceholder"),placeholderRelation:n("profile.connections.relationPlaceholder"),placeholderNote:n("profile.connections.notePlaceholder"),addText:n("profile.connections.add")}),f.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-100",children:[f.jsxs("div",{className:"flex items-center gap-2 text-cream-900 font-semibold mb-2",children:[f.jsx(XS,{size:18,className:"text-cream-400"}),f.jsx("h4",{className:"text-sm",children:n("profile.pets.title")})]}),f.jsx(aV,{items:s.pets,onChange:H=>O("pets",H),placeholderName:n("profile.pets.namePlaceholder"),placeholderType:n("profile.pets.typePlaceholder"),placeholderNote:n("profile.pets.notePlaceholder"),addText:n("profile.pets.add")})]})]})})]})]})]})]}),f.jsx(mn,{children:d&&f.jsxs(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-8 right-8 z-50 bg-green-50 text-green-800 px-4 py-3 rounded-xl shadow-lg border border-green-200 flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),n("profile.save.success")]})})]})};function iV(){return T.useEffect(()=>{const t=vs.initAutoBackup();return()=>clearInterval(t)},[]),f.jsx(t9,{children:f.jsx(gM,{children:f.jsx(AD,{children:f.jsx(yM,{children:f.jsx(L4,{children:f.jsx(u4,{children:f.jsxs(qs,{path:"/",element:f.jsx(PP,{}),children:[f.jsx(qs,{index:!0,element:f.jsx(l4,{to:"/write",replace:!0})}),f.jsx(qs,{path:"calendar",element:f.jsx(zP,{})}),f.jsx(qs,{path:"date/:date",element:f.jsx(dS,{})}),f.jsx(qs,{path:"diary/:id",element:f.jsx(dS,{})}),f.jsx(qs,{path:"categories",element:f.jsx(q$,{})}),f.jsx(qs,{path:"write",element:f.jsx(K$,{})}),f.jsx(qs,{path:"profile",element:f.jsx(rV,{})}),f.jsx(qs,{path:"settings",element:f.jsx(J$,{})})]})})})})})})})}Tj.createRoot(document.getElementById("root")).render(f.jsx(T.StrictMode,{children:f.jsx(iV,{})}))});export default oV();
